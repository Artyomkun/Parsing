const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-DcDDiggY.js","assets/vendor-react-DndjSmkt.js"])))=>i.map(i=>d[i]);
import{r as u,j as e,R as w,c as R}from"./vendor-react-DndjSmkt.js";import{c as k,a as h}from"./core-lib-BLbs8lTj.js";import{S as $,a as I,I as P,b as L,d as T,R as _,T as A,V as D,C as M,e as z,x as y,j as B,f as g,P as v,l as S,i as H}from"./vendor-DcDDiggY.js";import{_ as b}from"./vendor-lodash-CjgCjRQA.js";const V="modulepreload",X=function(l){return"/"+l},N={},O=function(a,s,t){let r=Promise.resolve();if(s&&s.length>0){let c=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=o?.nonce||o?.getAttribute("nonce");r=c(s.map(d=>{if(d=X(d),d in N)return;N[d]=!0;const p=d.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${x}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":V,p||(m.as="script"),m.crossOrigin="",m.href=d,i&&m.setAttribute("nonce",i),document.head.appendChild(m),p)return new Promise((C,J)=>{m.addEventListener("load",C),m.addEventListener("error",()=>J(new Error(`Unable to preload CSS for ${d}`)))})}))}function n(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return r.then(o=>{for(const i of o||[])i.status==="rejected"&&n(i.reason);return a().catch(n)})},q=I("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10 p-0"}},defaultVariants:{variant:"default",size:"default"}}),U=u.forwardRef(({className:l,variant:a,size:s,asChild:t=!1,...r},n)=>{const o=t?$:"button";return e.jsx(o,{className:q({variant:a,size:s,className:l}),ref:n,...r})});U.displayName="Button";const W=w.forwardRef(({className:l,type:a,...s},t)=>e.jsx("input",{type:a,className:k("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:t,...s}));W.displayName="Input";const Y=u.forwardRef(({className:l,...a},s)=>e.jsx("label",{ref:s,className:k("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",l),...a}));Y.displayName="Label";const j=u.forwardRef(({className:l,children:a,...s},t)=>e.jsxs(P,{ref:t,className:h("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none","focus:bg-accent focus:text-accent-foreground","data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(L,{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-4 w-4",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})})})}),e.jsx(T,{children:a})]}));j.displayName=P.displayName;const F=({onParse:l,loading:a})=>{const[s,t]=u.useState("csv"),[r,n]=u.useState(""),o=()=>{r&&l({type:s,data:r})};return e.jsxs("div",{className:h("space-y-4"),children:[e.jsxs(_,{disabled:a,onValueChange:t,children:[e.jsx(A,{className:h("w-full p-2 border rounded"),children:e.jsx(D,{placeholder:"Select parser type"})}),e.jsx(M,{children:e.jsxs(z,{children:[e.jsx(j,{value:"csv",children:"CSV"}),e.jsx(j,{value:"html",children:"HTML"}),e.jsx(j,{value:"json",children:"JSON"})]})})]}),e.jsx("textarea",{className:h("w-full p-2 border rounded"),placeholder:"Enter data to parse",value:r,onChange:i=>n(i.target.value),disabled:a}),e.jsx("button",{onClick:o,disabled:a||!r,className:h("px-4 py-2 bg-blue-500 text-white rounded",{"opacity-50":a||!r}),children:a?"Parsing...":"Parse"})]})},G=({onParse:l,loading:a})=>{const[s,t]=u.useState(null),[r,n]=u.useState(null),o=async i=>{try{n(null);const c=await l(i);t(c)}catch(c){n(`Error: ${c}`),t(null)}};return e.jsxs("div",{className:h("container mx-auto p-4"),children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Parsing App"}),e.jsx(F,{onParse:o,loading:a}),s&&e.jsx("div",{className:"mt-4 p-4 bg-gray-100 rounded",children:e.jsx("p",{children:s})}),r&&e.jsx("div",{className:"mt-4 p-4 bg-red-100 text-red-700 rounded",children:e.jsx("p",{children:r})})]})};w.lazy(()=>O(()=>Promise.resolve().then(()=>re),void 0));const K=async l=>{const{type:a,data:s}=l;try{switch(a){case"csv":return new Promise((t,r)=>{v.parse(s,{complete:n=>t(JSON.stringify(n.data,null,2)),error:n=>r(n.message)})});case"html":return S(s)("body").text().trim()||"No content found";case"json":{const t=JSON.parse(s);return JSON.stringify(t,null,2)}case"xml":{const r=new DOMParser().parseFromString(s,"application/xml");return new XMLSerializer().serializeToString(r)||"No content found"}case"text":return s.trim()||"No content found";case"markdown":return(r=>r.replace(/# (.+)/g,"<h1>$1</h1>").replace(/## (.+)/g,"<h2>$1</h2>").replace(/### (.+)/g,"<h3>$1</h3>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>"))(s)||"No content found";case"yaml":{const t=g.load(s);return JSON.stringify(t,null,2)}case"ini":{const t=H.parse(s);return JSON.stringify(t,null,2)}case"tsv":return new Promise((t,r)=>{v.parse(s,{delimiter:"	",complete:n=>t(JSON.stringify(n.data,null,2)),error:n=>r(n.message)})});case"jsonl":{const r=s.split(`
`).filter(n=>n.trim()!=="").map(n=>JSON.parse(n));return JSON.stringify(r,null,2)}case"xml2json":return new Promise((t,r)=>{y.parseString(s,{explicitArray:!1},(n,o)=>{if(n)return r("Invalid XML format");t(JSON.stringify(o,null,2))})});case"html2json":{const t=S(s),r={};return t("*").each((n,o)=>{if(o.tagName&&typeof o.tagName=="string"){const i=o.tagName.toLowerCase();r[i]||(r[i]=[]),r[i].push({text:t(o).text().trim(),html:t.html(o)?.trim()||""})}}),JSON.stringify(r,null,2)}case"json2html":{const t=r=>{if(typeof r!="object"||r===null)return String(r);let n="";for(const o in r)if(r.hasOwnProperty(o)){const i=r[o];Array.isArray(i)?i.forEach(c=>{n+=`<${o}>${t(c)}</${o}>`}):typeof i=="object"?n+=`<${o}>${t(i)}</${o}>`:n+=`<${o}>${String(i)}</${o}>`}return n};try{const r=JSON.parse(s);return t(r)||"No content found"}catch{throw new Error("Invalid JSON format")}}case"csv2json":return new Promise((t,r)=>{v.parse(s,{header:!0,complete:n=>t(JSON.stringify(n.data,null,2)),error:n=>r(n.message)})});case"json2csv":{const{unparse:t}=await O(async()=>{const{unparse:r}=await import("./vendor-DcDDiggY.js").then(n=>n.p);return{unparse:r}},__vite__mapDeps([0,1]));try{const r=JSON.parse(s);return t(r)||"No content found"}catch{throw new Error("Invalid JSON format")}}case"yaml2json":{const t=g.load(s);return JSON.stringify(t,null,2)}case"json2yaml":{const t=JSON.parse(s);return g.dump(t)||"No content found"}case"xml2yaml":return new Promise((t,r)=>{y.parseString(s,{explicitArray:!1},(n,o)=>{if(n)return r("Invalid XML format");t(g.dump(o)||"No content found")})});case"yaml2xml":{const t=g.load(s);return new y.Builder().buildObject(t)||"No content found"}case"json2xml":try{const t=JSON.parse(s);return B(t)||"No content found"}catch{throw new Error("Invalid JSON format")}case"xml2jsonl":return new Promise((t,r)=>{y.parseString(s,{explicitArray:!1},(n,o)=>{if(n)return r("Invalid XML format");const i=Object.entries(o).map(([c,d])=>JSON.stringify({[c]:d})).join(`
`);t(i||"No content found")})});default:throw new Error("Unknown parser type")}}catch(t){const r=t instanceof Error?t.message:"An unexpected error occurred during parsing";throw new Error(r)}},Q=()=>e.jsx(w.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(G,{onParse:K,loading:!1})}),E=document.getElementById("root");E?R.createRoot(E).render(e.jsx(Q,{})):console.error('Root element with ID "root" not found');class Z extends u.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,s){this.setState({errorInfo:s}),this.props.onError&&this.props.onError(a,s),console.error("Error caught by ErrorBoundary:",a,s)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs("div",{className:"error-boundary",style:f.container,children:[e.jsx("h2",{style:f.title,children:"⚠️ Что-то пошло не так"}),this.state.error&&e.jsxs("div",{style:f.errorDetails,children:[e.jsxs("p",{style:f.errorMessage,children:[e.jsx("strong",{children:"Ошибка:"})," ",this.state.error.message]}),this.state.errorInfo&&e.jsxs("details",{style:f.details,children:[e.jsx("summary",{children:"Подробнее"}),e.jsx("pre",{style:f.stackTrace,children:this.state.errorInfo.componentStack})]})]}),e.jsx("button",{style:f.button,onClick:()=>window.location.reload(),children:"Перезагрузить страницу"})]}):this.props.children}}const f={container:{padding:"20px",border:"1px solid #ff6b6b",borderRadius:"8px",backgroundColor:"#fff5f5",maxWidth:"600px",margin:"20px auto",textAlign:"center"},title:{color:"#ff6b6b",marginBottom:"15px"},errorDetails:{marginBottom:"15px"},errorMessage:{color:"#495057",lineHeight:1.5},details:{marginTop:"10px",textAlign:"left"},stackTrace:{backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"4px",overflowX:"auto",fontSize:"14px",maxHeight:"200px",overflowY:"auto"},button:{padding:"8px 16px",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},ee=()=>{const l={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",width:"100%"},a={position:"relative",width:"80px",height:"80px",marginBottom:"20px"},s=(n,o)=>({position:"absolute",width:"100%",height:"100%",border:"8px solid transparent",borderRadius:"50%",animation:`spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) ${o}s infinite`,borderTopColor:n}),t={fontSize:"18px",color:"#555",fontWeight:500,textAlign:"center",marginTop:"10px"};return e.jsxs("div",{style:l,children:[e.jsx("style",{children:`
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  `}),e.jsxs("div",{style:a,children:[e.jsx("div",{style:s("#646cff",-.45)}),e.jsx("div",{style:s("#42b883",-.3)}),e.jsx("div",{style:s("#ff7e5f",-.15)}),e.jsx("div",{style:s("#ffcc00",0)})]}),e.jsx("p",{style:t,children:"Загрузка..."})]})},te=()=>{const[l,a]=u.useState(null),[s,t]=u.useState(!1),r=u.useMemo(()=>Array.from({length:1e6},(c,d)=>d),[]),n=()=>{const c=b.shuffle(r),d=b.take(c,5e4),p=b.uniq(d);return b.sortBy(p)},o=u.useMemo(()=>l?.slice(0,10)||[],[l]),i=()=>{t(!0),setTimeout(()=>{try{const c=n();a(c)}catch(c){console.error("Ошибка при обработке данных:",c)}finally{t(!1)}},0)};return e.jsxs("div",{className:"heavy-component",children:[e.jsx("h2",{children:"Тяжелый компонент с Lodash"}),e.jsx("button",{onClick:i,disabled:s,className:"process-btn",children:s?"Обработка...":"Запустить тяжёлую операцию"}),e.jsx(Z,{children:e.jsx(u.Suspense,{fallback:e.jsx(ee,{}),children:l&&e.jsxs("div",{className:"results-section",children:[e.jsxs("h3",{children:["Результат (первые 10 из ",l.length," элементов):"]}),e.jsx("ul",{children:o.map((c,d)=>e.jsx("li",{children:c},d))}),e.jsxs("div",{className:"stats",children:[e.jsxs("p",{children:["Минимальное значение: ",Math.min(...o)]}),e.jsxs("p",{children:["Максимальное значение: ",Math.max(...o)]}),e.jsxs("p",{children:["Среднее значение: ",(o.reduce((c,d)=>c+d,0)/o.length).toFixed(2)]})]})]})})})]})},re=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));
