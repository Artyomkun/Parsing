{"version":3,"file":"bidi-BQLkWqSX.js","sources":["../../node_modules/mitt/dist/mitt.js","../../node_modules/chromium-bidi/lib/cjs/utils/EventEmitter.js","../../node_modules/chromium-bidi/lib/cjs/utils/log.js","../../node_modules/chromium-bidi/lib/cjs/utils/ProcessingQueue.js","../../node_modules/chromium-bidi/lib/cjs/protocol/cdp.js","../../node_modules/chromium-bidi/lib/cjs/protocol/chromium-bidi.js","../../node_modules/chromium-bidi/lib/cjs/protocol/generated/webdriver-bidi.js","../../node_modules/chromium-bidi/lib/cjs/protocol/ErrorResponse.js","../../node_modules/chromium-bidi/lib/cjs/protocol/generated/webdriver-bidi-permissions.js","../../node_modules/chromium-bidi/lib/cjs/protocol/generated/webdriver-bidi-bluetooth.js","../../node_modules/chromium-bidi/lib/cjs/protocol/protocol.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/BidiNoOpParser.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/browser/BrowserProcessor.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/cdp/CdpProcessor.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/context/BrowsingContextProcessor.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/emulation/EmulationProcessor.js","../../node_modules/chromium-bidi/lib/cjs/utils/assert.js","../../node_modules/chromium-bidi/lib/cjs/utils/graphemeTools.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/input/InputSource.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/input/keyUtils.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/input/USKeyboardLayout.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/input/ActionDispatcher.js","../../node_modules/chromium-bidi/lib/cjs/utils/Mutex.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/input/InputState.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/input/InputStateManager.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/input/InputProcessor.js","../../node_modules/chromium-bidi/lib/cjs/utils/base64.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/network/NetworkUtils.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/network/NetworkProcessor.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/permissions/PermissionsProcessor.js","../../node_modules/chromium-bidi/lib/cjs/utils/uuid.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/script/ChannelProxy.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/script/PreloadScript.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/script/ScriptProcessor.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/session/SessionProcessor.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/storage/StorageProcessor.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/webExtension/WebExtensionProcessor.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/OutgoingMessage.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/CommandProcessor.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/MapperOptions.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/bluetooth/BluetoothProcessor.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/browser/UserContextConfig.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/browser/UserContextStorage.js","../../node_modules/chromium-bidi/lib/cjs/utils/Deferred.js","../../node_modules/chromium-bidi/lib/cjs/utils/time.js","../../node_modules/chromium-bidi/lib/cjs/utils/unitConversions.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/script/SharedId.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/script/Realm.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/script/WindowRealm.js","../../node_modules/chromium-bidi/lib/cjs/utils/urlHelpers.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/context/NavigationTracker.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/context/BrowsingContextImpl.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/script/WorkerRealm.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/log/logHelper.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/log/LogManager.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/cdp/CdpTarget.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/cdp/CdpTargetManager.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/context/BrowsingContextStorage.js","../../node_modules/chromium-bidi/lib/cjs/utils/DefaultMap.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/network/NetworkRequest.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/network/NetworkStorage.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/script/PreloadScriptStorage.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/script/RealmStorage.js","../../node_modules/chromium-bidi/lib/cjs/utils/Buffer.js","../../node_modules/chromium-bidi/lib/cjs/utils/IdWrapper.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/session/events.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/session/SubscriptionManager.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/modules/session/EventManager.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/BidiServer.js","../../node_modules/chromium-bidi/lib/cjs/bidiMapper/BidiMapper.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/CDPSession.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/Connection.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/BidiOverCdp.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/core/Navigation.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/core/Realm.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/core/Request.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/core/UserPrompt.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/core/BrowsingContext.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/core/UserContext.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/Deserializer.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/JSHandle.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/ElementHandle.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/Dialog.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/ExposedFunction.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/HTTPResponse.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/HTTPRequest.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/Serializer.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/util.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/Realm.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/WebWorker.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/Frame.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/Input.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/Page.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/Target.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/BrowserContext.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/core/Browser.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/core/Session.js","../../node_modules/puppeteer-core/lib/esm/puppeteer/bidi/Browser.js"],"sourcesContent":["module.exports=function(n){return{all:n=n||new Map,on:function(e,t){var i=n.get(e);i?i.push(t):n.set(e,[t])},off:function(e,t){var i=n.get(e);i&&(t?i.splice(i.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var i=n.get(e);i&&i.slice().map(function(n){n(t)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(e,t)})}}};\n//# sourceMappingURL=mitt.js.map\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventEmitter = void 0;\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst mitt_1 = __importDefault(require(\"mitt\"));\nclass EventEmitter {\n    #emitter = (0, mitt_1.default)();\n    on(type, handler) {\n        this.#emitter.on(type, handler);\n        return this;\n    }\n    /**\n     * Like `on` but the listener will only be fired once and then it will be removed.\n     * @param event The event you'd like to listen to\n     * @param handler The handler function to run when the event occurs\n     * @return `this` to enable chaining method calls.\n     */\n    once(event, handler) {\n        const onceHandler = (eventData) => {\n            handler(eventData);\n            this.off(event, onceHandler);\n        };\n        return this.on(event, onceHandler);\n    }\n    off(type, handler) {\n        this.#emitter.off(type, handler);\n        return this;\n    }\n    /**\n     * Emits an event and call any associated listeners.\n     *\n     * @param event The event to emit.\n     * @param eventData Any data to emit with the event.\n     * @return `true` if there are any listeners, `false` otherwise.\n     */\n    emit(event, eventData) {\n        this.#emitter.emit(event, eventData);\n    }\n    /**\n     * Removes all listeners. If given an event argument, it will remove only\n     * listeners for that event.\n     * @param event - the event to remove listeners for.\n     * @returns `this` to enable you to chain method calls.\n     */\n    removeAllListeners(event) {\n        if (event) {\n            this.#emitter.all.delete(event);\n        }\n        else {\n            this.#emitter.all.clear();\n        }\n        return this;\n    }\n}\nexports.EventEmitter = EventEmitter;\n//# sourceMappingURL=EventEmitter.js.map","\"use strict\";\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LogType = void 0;\nvar LogType;\n(function (LogType) {\n    // keep-sorted start\n    LogType[\"bidi\"] = \"bidi\";\n    LogType[\"cdp\"] = \"cdp\";\n    LogType[\"debug\"] = \"debug\";\n    LogType[\"debugError\"] = \"debug:error\";\n    LogType[\"debugInfo\"] = \"debug:info\";\n    LogType[\"debugWarn\"] = \"debug:warn\";\n    // keep-sorted end\n})(LogType || (exports.LogType = LogType = {}));\n//# sourceMappingURL=log.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProcessingQueue = void 0;\nconst log_js_1 = require(\"./log.js\");\nclass ProcessingQueue {\n    static LOGGER_PREFIX = `${log_js_1.LogType.debug}:queue`;\n    #logger;\n    #processor;\n    #queue = [];\n    // Flag to keep only 1 active processor.\n    #isProcessing = false;\n    constructor(processor, logger) {\n        this.#processor = processor;\n        this.#logger = logger;\n    }\n    add(entry, name) {\n        this.#queue.push([entry, name]);\n        // No need in waiting. Just initialize processor if needed.\n        void this.#processIfNeeded();\n    }\n    async #processIfNeeded() {\n        if (this.#isProcessing) {\n            return;\n        }\n        this.#isProcessing = true;\n        while (this.#queue.length > 0) {\n            const arrayEntry = this.#queue.shift();\n            if (!arrayEntry) {\n                continue;\n            }\n            const [entryPromise, name] = arrayEntry;\n            this.#logger?.(_a.LOGGER_PREFIX, 'Processing event:', name);\n            await entryPromise\n                .then((entry) => {\n                if (entry.kind === 'error') {\n                    this.#logger?.(log_js_1.LogType.debugError, 'Event threw before sending:', entry.error.message, entry.error.stack);\n                    return;\n                }\n                return this.#processor(entry.value);\n            })\n                .catch((error) => {\n                this.#logger?.(log_js_1.LogType.debugError, 'Event was not processed:', error?.message);\n            });\n        }\n        this.#isProcessing = false;\n    }\n}\nexports.ProcessingQueue = ProcessingQueue;\n_a = ProcessingQueue;\n//# sourceMappingURL=ProcessingQueue.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=cdp.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EVENT_NAMES = exports.Bluetooth = exports.Network = exports.Input = exports.BrowsingContext = exports.Log = exports.Script = exports.BiDiModule = void 0;\n// keep-sorted end\nvar BiDiModule;\n(function (BiDiModule) {\n    // keep-sorted start\n    BiDiModule[\"Bluetooth\"] = \"bluetooth\";\n    BiDiModule[\"Browser\"] = \"browser\";\n    BiDiModule[\"BrowsingContext\"] = \"browsingContext\";\n    BiDiModule[\"Cdp\"] = \"goog:cdp\";\n    BiDiModule[\"Input\"] = \"input\";\n    BiDiModule[\"Log\"] = \"log\";\n    BiDiModule[\"Network\"] = \"network\";\n    BiDiModule[\"Script\"] = \"script\";\n    BiDiModule[\"Session\"] = \"session\";\n    // keep-sorted end\n})(BiDiModule || (exports.BiDiModule = BiDiModule = {}));\nvar Script;\n(function (Script) {\n    let EventNames;\n    (function (EventNames) {\n        // keep-sorted start\n        EventNames[\"Message\"] = \"script.message\";\n        EventNames[\"RealmCreated\"] = \"script.realmCreated\";\n        EventNames[\"RealmDestroyed\"] = \"script.realmDestroyed\";\n        // keep-sorted end\n    })(EventNames = Script.EventNames || (Script.EventNames = {}));\n})(Script || (exports.Script = Script = {}));\nvar Log;\n(function (Log) {\n    let EventNames;\n    (function (EventNames) {\n        EventNames[\"LogEntryAdded\"] = \"log.entryAdded\";\n    })(EventNames = Log.EventNames || (Log.EventNames = {}));\n})(Log || (exports.Log = Log = {}));\nvar BrowsingContext;\n(function (BrowsingContext) {\n    let EventNames;\n    (function (EventNames) {\n        // keep-sorted start\n        EventNames[\"ContextCreated\"] = \"browsingContext.contextCreated\";\n        EventNames[\"ContextDestroyed\"] = \"browsingContext.contextDestroyed\";\n        EventNames[\"DomContentLoaded\"] = \"browsingContext.domContentLoaded\";\n        EventNames[\"DownloadEnd\"] = \"browsingContext.downloadEnd\";\n        EventNames[\"DownloadWillBegin\"] = \"browsingContext.downloadWillBegin\";\n        EventNames[\"FragmentNavigated\"] = \"browsingContext.fragmentNavigated\";\n        EventNames[\"HistoryUpdated\"] = \"browsingContext.historyUpdated\";\n        EventNames[\"Load\"] = \"browsingContext.load\";\n        EventNames[\"NavigationAborted\"] = \"browsingContext.navigationAborted\";\n        EventNames[\"NavigationCommitted\"] = \"browsingContext.navigationCommitted\";\n        EventNames[\"NavigationFailed\"] = \"browsingContext.navigationFailed\";\n        EventNames[\"NavigationStarted\"] = \"browsingContext.navigationStarted\";\n        EventNames[\"UserPromptClosed\"] = \"browsingContext.userPromptClosed\";\n        EventNames[\"UserPromptOpened\"] = \"browsingContext.userPromptOpened\";\n        // keep-sorted end\n    })(EventNames = BrowsingContext.EventNames || (BrowsingContext.EventNames = {}));\n})(BrowsingContext || (exports.BrowsingContext = BrowsingContext = {}));\nvar Input;\n(function (Input) {\n    let EventNames;\n    (function (EventNames) {\n        // keep-sorted start\n        EventNames[\"FileDialogOpened\"] = \"input.fileDialogOpened\";\n        // keep-sorted end\n    })(EventNames = Input.EventNames || (Input.EventNames = {}));\n})(Input || (exports.Input = Input = {}));\nvar Network;\n(function (Network) {\n    let EventNames;\n    (function (EventNames) {\n        // keep-sorted start\n        EventNames[\"AuthRequired\"] = \"network.authRequired\";\n        EventNames[\"BeforeRequestSent\"] = \"network.beforeRequestSent\";\n        EventNames[\"FetchError\"] = \"network.fetchError\";\n        EventNames[\"ResponseCompleted\"] = \"network.responseCompleted\";\n        EventNames[\"ResponseStarted\"] = \"network.responseStarted\";\n        // keep-sorted end\n    })(EventNames = Network.EventNames || (Network.EventNames = {}));\n})(Network || (exports.Network = Network = {}));\nvar Bluetooth;\n(function (Bluetooth) {\n    let EventNames;\n    (function (EventNames) {\n        EventNames[\"RequestDevicePromptUpdated\"] = \"bluetooth.requestDevicePromptUpdated\";\n        EventNames[\"GattConnectionAttempted\"] = \"bluetooth.gattConnectionAttempted\";\n        EventNames[\"CharacteristicEventGenerated\"] = \"bluetooth.characteristicEventGenerated\";\n        EventNames[\"DescriptorEventGenerated\"] = \"bluetooth.descriptorEventGenerated\";\n    })(EventNames = Bluetooth.EventNames || (Bluetooth.EventNames = {}));\n})(Bluetooth || (exports.Bluetooth = Bluetooth = {}));\nexports.EVENT_NAMES = new Set([\n    // keep-sorted start\n    ...Object.values(BiDiModule),\n    ...Object.values(Bluetooth.EventNames),\n    ...Object.values(BrowsingContext.EventNames),\n    ...Object.values(Input.EventNames),\n    ...Object.values(Log.EventNames),\n    ...Object.values(Network.EventNames),\n    ...Object.values(Script.EventNames),\n    // keep-sorted end\n]);\n//# sourceMappingURL=chromium-bidi.js.map","\"use strict\";\n/**\n * Copyright 2024 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=webdriver-bidi.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UnavailableNetworkDataException = exports.NoSuchNetworkDataException = exports.NoSuchNetworkCollectorException = exports.NoSuchWebExtensionException = exports.InvalidWebExtensionException = exports.UnderspecifiedStoragePartitionException = exports.UnableToSetFileInputException = exports.UnableToSetCookieException = exports.NoSuchStoragePartitionException = exports.UnsupportedOperationException = exports.UnableToCloseBrowserException = exports.UnableToCaptureScreenException = exports.UnknownErrorException = exports.UnknownCommandException = exports.SessionNotCreatedException = exports.NoSuchUserContextException = exports.NoSuchScriptException = exports.NoSuchRequestException = exports.NoSuchNodeException = exports.NoSuchInterceptException = exports.NoSuchHistoryEntryException = exports.NoSuchHandleException = exports.NoSuchFrameException = exports.NoSuchElementException = exports.NoSuchAlertException = exports.MoveTargetOutOfBoundsException = exports.InvalidSessionIdException = exports.InvalidSelectorException = exports.InvalidArgumentException = exports.Exception = void 0;\nclass Exception extends Error {\n    error;\n    message;\n    stacktrace;\n    constructor(error, message, stacktrace) {\n        super();\n        this.error = error;\n        this.message = message;\n        this.stacktrace = stacktrace;\n    }\n    toErrorResponse(commandId) {\n        return {\n            type: 'error',\n            id: commandId,\n            error: this.error,\n            message: this.message,\n            stacktrace: this.stacktrace,\n        };\n    }\n}\nexports.Exception = Exception;\nclass InvalidArgumentException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"invalid argument\" /* ErrorCode.InvalidArgument */, message, stacktrace);\n    }\n}\nexports.InvalidArgumentException = InvalidArgumentException;\nclass InvalidSelectorException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"invalid selector\" /* ErrorCode.InvalidSelector */, message, stacktrace);\n    }\n}\nexports.InvalidSelectorException = InvalidSelectorException;\nclass InvalidSessionIdException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"invalid session id\" /* ErrorCode.InvalidSessionId */, message, stacktrace);\n    }\n}\nexports.InvalidSessionIdException = InvalidSessionIdException;\nclass MoveTargetOutOfBoundsException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"move target out of bounds\" /* ErrorCode.MoveTargetOutOfBounds */, message, stacktrace);\n    }\n}\nexports.MoveTargetOutOfBoundsException = MoveTargetOutOfBoundsException;\nclass NoSuchAlertException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such alert\" /* ErrorCode.NoSuchAlert */, message, stacktrace);\n    }\n}\nexports.NoSuchAlertException = NoSuchAlertException;\nclass NoSuchElementException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such element\" /* ErrorCode.NoSuchElement */, message, stacktrace);\n    }\n}\nexports.NoSuchElementException = NoSuchElementException;\nclass NoSuchFrameException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such frame\" /* ErrorCode.NoSuchFrame */, message, stacktrace);\n    }\n}\nexports.NoSuchFrameException = NoSuchFrameException;\nclass NoSuchHandleException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such handle\" /* ErrorCode.NoSuchHandle */, message, stacktrace);\n    }\n}\nexports.NoSuchHandleException = NoSuchHandleException;\nclass NoSuchHistoryEntryException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such history entry\" /* ErrorCode.NoSuchHistoryEntry */, message, stacktrace);\n    }\n}\nexports.NoSuchHistoryEntryException = NoSuchHistoryEntryException;\nclass NoSuchInterceptException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such intercept\" /* ErrorCode.NoSuchIntercept */, message, stacktrace);\n    }\n}\nexports.NoSuchInterceptException = NoSuchInterceptException;\nclass NoSuchNodeException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such node\" /* ErrorCode.NoSuchNode */, message, stacktrace);\n    }\n}\nexports.NoSuchNodeException = NoSuchNodeException;\nclass NoSuchRequestException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such request\" /* ErrorCode.NoSuchRequest */, message, stacktrace);\n    }\n}\nexports.NoSuchRequestException = NoSuchRequestException;\nclass NoSuchScriptException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such script\" /* ErrorCode.NoSuchScript */, message, stacktrace);\n    }\n}\nexports.NoSuchScriptException = NoSuchScriptException;\nclass NoSuchUserContextException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such user context\" /* ErrorCode.NoSuchUserContext */, message, stacktrace);\n    }\n}\nexports.NoSuchUserContextException = NoSuchUserContextException;\nclass SessionNotCreatedException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"session not created\" /* ErrorCode.SessionNotCreated */, message, stacktrace);\n    }\n}\nexports.SessionNotCreatedException = SessionNotCreatedException;\nclass UnknownCommandException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"unknown command\" /* ErrorCode.UnknownCommand */, message, stacktrace);\n    }\n}\nexports.UnknownCommandException = UnknownCommandException;\nclass UnknownErrorException extends Exception {\n    constructor(message, stacktrace = new Error().stack) {\n        super(\"unknown error\" /* ErrorCode.UnknownError */, message, stacktrace);\n    }\n}\nexports.UnknownErrorException = UnknownErrorException;\nclass UnableToCaptureScreenException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"unable to capture screen\" /* ErrorCode.UnableToCaptureScreen */, message, stacktrace);\n    }\n}\nexports.UnableToCaptureScreenException = UnableToCaptureScreenException;\nclass UnableToCloseBrowserException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"unable to close browser\" /* ErrorCode.UnableToCloseBrowser */, message, stacktrace);\n    }\n}\nexports.UnableToCloseBrowserException = UnableToCloseBrowserException;\nclass UnsupportedOperationException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"unsupported operation\" /* ErrorCode.UnsupportedOperation */, message, stacktrace);\n    }\n}\nexports.UnsupportedOperationException = UnsupportedOperationException;\nclass NoSuchStoragePartitionException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such storage partition\" /* ErrorCode.NoSuchStoragePartition */, message, stacktrace);\n    }\n}\nexports.NoSuchStoragePartitionException = NoSuchStoragePartitionException;\nclass UnableToSetCookieException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"unable to set cookie\" /* ErrorCode.UnableToSetCookie */, message, stacktrace);\n    }\n}\nexports.UnableToSetCookieException = UnableToSetCookieException;\nclass UnableToSetFileInputException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"unable to set file input\" /* ErrorCode.UnableToSetFileInput */, message, stacktrace);\n    }\n}\nexports.UnableToSetFileInputException = UnableToSetFileInputException;\nclass UnderspecifiedStoragePartitionException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"underspecified storage partition\" /* ErrorCode.UnderspecifiedStoragePartition */, message, stacktrace);\n    }\n}\nexports.UnderspecifiedStoragePartitionException = UnderspecifiedStoragePartitionException;\nclass InvalidWebExtensionException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"invalid web extension\" /* ErrorCode.InvalidWebExtension */, message, stacktrace);\n    }\n}\nexports.InvalidWebExtensionException = InvalidWebExtensionException;\nclass NoSuchWebExtensionException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such web extension\" /* ErrorCode.NoSuchWebExtension */, message, stacktrace);\n    }\n}\nexports.NoSuchWebExtensionException = NoSuchWebExtensionException;\nclass NoSuchNetworkCollectorException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such network collector\" /* ErrorCode.NoSuchNetworkCollector */, message, stacktrace);\n    }\n}\nexports.NoSuchNetworkCollectorException = NoSuchNetworkCollectorException;\nclass NoSuchNetworkDataException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"no such network data\" /* ErrorCode.NoSuchNetworkData */, message, stacktrace);\n    }\n}\nexports.NoSuchNetworkDataException = NoSuchNetworkDataException;\nclass UnavailableNetworkDataException extends Exception {\n    constructor(message, stacktrace) {\n        super(\"unavailable network data\" /* ErrorCode.UnavailableNetworkData */, message, stacktrace);\n    }\n}\nexports.UnavailableNetworkDataException = UnavailableNetworkDataException;\n//# sourceMappingURL=ErrorResponse.js.map","\"use strict\";\n/**\n * Copyright 2024 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=webdriver-bidi-permissions.js.map","\"use strict\";\n/**\n * Copyright 2024 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=webdriver-bidi-bluetooth.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChromiumBidi = exports.Cdp = void 0;\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexports.Cdp = __importStar(require(\"./cdp.js\"));\nexports.ChromiumBidi = __importStar(require(\"./chromium-bidi.js\"));\n__exportStar(require(\"./generated/webdriver-bidi.js\"), exports);\n__exportStar(require(\"./ErrorResponse.js\"), exports);\n__exportStar(require(\"./generated/webdriver-bidi-permissions.js\"), exports);\n__exportStar(require(\"./generated/webdriver-bidi-bluetooth.js\"), exports);\n//# sourceMappingURL=protocol.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BidiNoOpParser = void 0;\nclass BidiNoOpParser {\n    // Bluetooth module\n    // keep-sorted start block=yes\n    parseDisableSimulationParameters(params) {\n        return params;\n    }\n    parseHandleRequestDevicePromptParams(params) {\n        return params;\n    }\n    parseSimulateAdapterParameters(params) {\n        return params;\n    }\n    parseSimulateAdvertisementParameters(params) {\n        return params;\n    }\n    parseSimulateCharacteristicParameters(params) {\n        return params;\n    }\n    parseSimulateCharacteristicResponseParameters(params) {\n        return params;\n    }\n    parseSimulateDescriptorParameters(params) {\n        return params;\n    }\n    parseSimulateDescriptorResponseParameters(params) {\n        return params;\n    }\n    parseSimulateGattConnectionResponseParameters(params) {\n        return params;\n    }\n    parseSimulateGattDisconnectionParameters(params) {\n        return params;\n    }\n    parseSimulatePreconnectedPeripheralParameters(params) {\n        return params;\n    }\n    parseSimulateServiceParameters(params) {\n        return params;\n    }\n    // keep-sorted end\n    // Browser module\n    // keep-sorted start block=yes\n    parseCreateUserContextParameters(params) {\n        return params;\n    }\n    parseRemoveUserContextParameters(params) {\n        return params;\n    }\n    parseSetClientWindowStateParameters(params) {\n        return params;\n    }\n    // keep-sorted end\n    // Browsing Context module\n    // keep-sorted start block=yes\n    parseActivateParams(params) {\n        return params;\n    }\n    parseCaptureScreenshotParams(params) {\n        return params;\n    }\n    parseCloseParams(params) {\n        return params;\n    }\n    parseCreateParams(params) {\n        return params;\n    }\n    parseGetTreeParams(params) {\n        return params;\n    }\n    parseHandleUserPromptParams(params) {\n        return params;\n    }\n    parseLocateNodesParams(params) {\n        return params;\n    }\n    parseNavigateParams(params) {\n        return params;\n    }\n    parsePrintParams(params) {\n        return params;\n    }\n    parseReloadParams(params) {\n        return params;\n    }\n    parseSetViewportParams(params) {\n        return params;\n    }\n    parseTraverseHistoryParams(params) {\n        return params;\n    }\n    // keep-sorted end\n    // CDP module\n    // keep-sorted start block=yes\n    parseGetSessionParams(params) {\n        return params;\n    }\n    parseResolveRealmParams(params) {\n        return params;\n    }\n    parseSendCommandParams(params) {\n        return params;\n    }\n    // keep-sorted end\n    // Emulation module\n    // keep-sorted start block=yes\n    parseSetGeolocationOverrideParams(params) {\n        return params;\n    }\n    parseSetLocaleOverrideParams(params) {\n        return params;\n    }\n    parseSetScreenOrientationOverrideParams(params) {\n        return params;\n    }\n    parseSetTimezoneOverrideParams(params) {\n        return params;\n    }\n    // keep-sorted end\n    // Script module\n    // keep-sorted start block=yes\n    parseAddPreloadScriptParams(params) {\n        return params;\n    }\n    parseCallFunctionParams(params) {\n        return params;\n    }\n    parseDisownParams(params) {\n        return params;\n    }\n    parseEvaluateParams(params) {\n        return params;\n    }\n    parseGetRealmsParams(params) {\n        return params;\n    }\n    parseRemovePreloadScriptParams(params) {\n        return params;\n    }\n    // keep-sorted end\n    // Input module\n    // keep-sorted start block=yes\n    parsePerformActionsParams(params) {\n        return params;\n    }\n    parseReleaseActionsParams(params) {\n        return params;\n    }\n    parseSetFilesParams(params) {\n        return params;\n    }\n    // keep-sorted end\n    // Network module\n    // keep-sorted start block=yes\n    parseAddDataCollectorParams(params) {\n        return params;\n    }\n    parseAddInterceptParams(params) {\n        return params;\n    }\n    parseContinueRequestParams(params) {\n        return params;\n    }\n    parseContinueResponseParams(params) {\n        return params;\n    }\n    parseContinueWithAuthParams(params) {\n        return params;\n    }\n    parseDisownDataParams(params) {\n        return params;\n    }\n    parseFailRequestParams(params) {\n        return params;\n    }\n    parseGetDataParams(params) {\n        return params;\n    }\n    parseProvideResponseParams(params) {\n        return params;\n    }\n    parseRemoveDataCollectorParams(params) {\n        return params;\n    }\n    parseRemoveInterceptParams(params) {\n        return params;\n    }\n    parseSetCacheBehavior(params) {\n        return params;\n    }\n    // keep-sorted end\n    // Permissions module\n    // keep-sorted start block=yes\n    parseSetPermissionsParams(params) {\n        return params;\n    }\n    // keep-sorted end\n    // Session module\n    // keep-sorted start block=yes\n    parseSubscribeParams(params) {\n        return params;\n    }\n    parseUnsubscribeParams(params) {\n        return params;\n    }\n    // keep-sorted end\n    // Storage module\n    // keep-sorted start block=yes\n    parseDeleteCookiesParams(params) {\n        return params;\n    }\n    parseGetCookiesParams(params) {\n        return params;\n    }\n    parseSetCookieParams(params) {\n        return params;\n    }\n    // keep-sorted end\n    // WebExtenstion module\n    // keep-sorted start block=yes\n    parseInstallParams(params) {\n        return params;\n    }\n    parseUninstallParams(params) {\n        return params;\n    }\n}\nexports.BidiNoOpParser = BidiNoOpParser;\n//# sourceMappingURL=BidiNoOpParser.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserProcessor = void 0;\nexports.getProxyStr = getProxyStr;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nclass BrowserProcessor {\n    #browserCdpClient;\n    #browsingContextStorage;\n    #userContextStorage;\n    #mapperOptionsStorage;\n    constructor(browserCdpClient, browsingContextStorage, mapperOptionsStorage, userContextStorage) {\n        this.#browserCdpClient = browserCdpClient;\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#mapperOptionsStorage = mapperOptionsStorage;\n        this.#userContextStorage = userContextStorage;\n    }\n    close() {\n        // Ensure that it is put at the end of the event loop.\n        // This way we send back the response before closing the tab.\n        setTimeout(() => this.#browserCdpClient.sendCommand('Browser.close'), 0);\n        return {};\n    }\n    async createUserContext(params) {\n        // `params` is a record to provide legacy `goog:` parameters. Now as the `proxy`\n        // parameter is specified, we should get rid of `goog:proxyServer` and\n        // `goog:proxyBypassList` and make the params of type\n        // `Browser.CreateUserContextParameters`.\n        const w3cParams = params;\n        if (w3cParams.acceptInsecureCerts !== undefined) {\n            if (w3cParams.acceptInsecureCerts === false &&\n                this.#mapperOptionsStorage.mapperOptions?.acceptInsecureCerts === true)\n                // TODO: https://github.com/GoogleChromeLabs/chromium-bidi/issues/3398\n                throw new protocol_js_1.UnknownErrorException(`Cannot set user context's \"acceptInsecureCerts\" to false, when a capability \"acceptInsecureCerts\" is set to true`);\n        }\n        const request = {};\n        if (w3cParams.proxy) {\n            const proxyStr = getProxyStr(w3cParams.proxy);\n            if (proxyStr) {\n                request.proxyServer = proxyStr;\n            }\n            if (w3cParams.proxy.noProxy) {\n                request.proxyBypassList = w3cParams.proxy.noProxy.join(',');\n            }\n        }\n        else {\n            // TODO: remove after Puppeteer stops using it.\n            if (params['goog:proxyServer'] !== undefined) {\n                request.proxyServer = params['goog:proxyServer'];\n            }\n            const proxyBypassList = params['goog:proxyBypassList'] ?? undefined;\n            if (proxyBypassList) {\n                request.proxyBypassList = proxyBypassList.join(',');\n            }\n        }\n        const context = await this.#browserCdpClient.sendCommand('Target.createBrowserContext', request);\n        this.#userContextStorage.getConfig(context.browserContextId).acceptInsecureCerts = params['acceptInsecureCerts'];\n        this.#userContextStorage.getConfig(context.browserContextId).userPromptHandler = params['unhandledPromptBehavior'];\n        return {\n            userContext: context.browserContextId,\n        };\n    }\n    async removeUserContext(params) {\n        const userContext = params.userContext;\n        if (userContext === 'default') {\n            throw new protocol_js_1.InvalidArgumentException('`default` user context cannot be removed');\n        }\n        try {\n            await this.#browserCdpClient.sendCommand('Target.disposeBrowserContext', {\n                browserContextId: userContext,\n            });\n        }\n        catch (err) {\n            // https://source.chromium.org/chromium/chromium/src/+/main:content/browser/devtools/protocol/target_handler.cc;l=1424;drc=c686e8f4fd379312469fe018f5c390e9c8f20d0d\n            if (err.message.startsWith('Failed to find context with id')) {\n                throw new protocol_js_1.NoSuchUserContextException(err.message);\n            }\n            throw err;\n        }\n        return {};\n    }\n    async getUserContexts() {\n        return {\n            userContexts: await this.#userContextStorage.getUserContexts(),\n        };\n    }\n    async #getWindowInfo(targetId) {\n        const windowInfo = await this.#browserCdpClient.sendCommand('Browser.getWindowForTarget', { targetId });\n        return {\n            // `active` is not supported in CDP yet.\n            active: false,\n            clientWindow: `${windowInfo.windowId}`,\n            state: windowInfo.bounds.windowState ?? 'normal',\n            height: windowInfo.bounds.height ?? 0,\n            width: windowInfo.bounds.width ?? 0,\n            x: windowInfo.bounds.left ?? 0,\n            y: windowInfo.bounds.top ?? 0,\n        };\n    }\n    async getClientWindows() {\n        const topLevelTargetIds = this.#browsingContextStorage\n            .getTopLevelContexts()\n            .map((b) => b.cdpTarget.id);\n        const clientWindows = await Promise.all(topLevelTargetIds.map(async (targetId) => await this.#getWindowInfo(targetId)));\n        const uniqueClientWindowIds = new Set();\n        const uniqueClientWindows = new Array();\n        // Filter out duplicated client windows.\n        for (const window of clientWindows) {\n            if (!uniqueClientWindowIds.has(window.clientWindow)) {\n                uniqueClientWindowIds.add(window.clientWindow);\n                uniqueClientWindows.push(window);\n            }\n        }\n        return { clientWindows: uniqueClientWindows };\n    }\n}\nexports.BrowserProcessor = BrowserProcessor;\n/**\n * Proxy config parse implementation:\n * https://source.chromium.org/chromium/chromium/src/+/main:net/proxy_resolution/proxy_config.h;drc=743a82d08e59d803c94ee1b8564b8b11dd7b462f;l=107\n */\nfunction getProxyStr(proxyConfig) {\n    if (proxyConfig.proxyType === 'direct' ||\n        proxyConfig.proxyType === 'system') {\n        // These types imply that Chrome should use its default behavior (e.g., direct\n        // connection or system-configured proxy). No specific `proxyServer` string is\n        // needed.\n        return undefined;\n    }\n    if (proxyConfig.proxyType === 'pac') {\n        throw new protocol_js_1.UnsupportedOperationException(`PAC proxy configuration is not supported per user context`);\n    }\n    if (proxyConfig.proxyType === 'autodetect') {\n        throw new protocol_js_1.UnsupportedOperationException(`Autodetect proxy is not supported per user context`);\n    }\n    if (proxyConfig.proxyType === 'manual') {\n        const servers = [];\n        // HTTP Proxy\n        if (proxyConfig.httpProxy !== undefined) {\n            // servers.push(proxyConfig.httpProxy);\n            servers.push(`http=${proxyConfig.httpProxy}`);\n        }\n        // SSL Proxy (uses 'https' scheme)\n        if (proxyConfig.sslProxy !== undefined) {\n            // servers.push(proxyConfig.sslProxy);\n            servers.push(`https=${proxyConfig.sslProxy}`);\n        }\n        // SOCKS Proxy\n        if (proxyConfig.socksProxy !== undefined ||\n            proxyConfig.socksVersion !== undefined) {\n            // socksVersion is mandatory and must be a valid integer if socksProxy is\n            // specified.\n            if (proxyConfig.socksProxy === undefined) {\n                throw new protocol_js_1.InvalidArgumentException(`'socksVersion' cannot be set without 'socksProxy'`);\n            }\n            if (proxyConfig.socksVersion === undefined ||\n                typeof proxyConfig.socksVersion !== 'number' ||\n                !Number.isInteger(proxyConfig.socksVersion) ||\n                proxyConfig.socksVersion < 0 ||\n                proxyConfig.socksVersion > 255) {\n                throw new protocol_js_1.InvalidArgumentException(`'socksVersion' must be between 0 and 255`);\n            }\n            servers.push(`socks=socks${proxyConfig.socksVersion}://${proxyConfig.socksProxy}`);\n        }\n        if (servers.length === 0) {\n            // If 'manual' proxyType is chosen but no specific proxy servers (http, ssl, socks)\n            // are provided, it means no proxy server should be configured.\n            return undefined;\n        }\n        return servers.join(';');\n    }\n    // Unreachable.\n    throw new protocol_js_1.UnknownErrorException(`Unknown proxy type`);\n}\n//# sourceMappingURL=BrowserProcessor.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CdpProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nclass CdpProcessor {\n    #browsingContextStorage;\n    #realmStorage;\n    #cdpConnection;\n    #browserCdpClient;\n    constructor(browsingContextStorage, realmStorage, cdpConnection, browserCdpClient) {\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#realmStorage = realmStorage;\n        this.#cdpConnection = cdpConnection;\n        this.#browserCdpClient = browserCdpClient;\n    }\n    getSession(params) {\n        const context = params.context;\n        const sessionId = this.#browsingContextStorage.getContext(context).cdpTarget.cdpSessionId;\n        if (sessionId === undefined) {\n            return {};\n        }\n        return { session: sessionId };\n    }\n    resolveRealm(params) {\n        const context = params.realm;\n        const realm = this.#realmStorage.getRealm({ realmId: context });\n        if (realm === undefined) {\n            throw new protocol_js_1.UnknownErrorException(`Could not find realm ${params.realm}`);\n        }\n        return { executionContextId: realm.executionContextId };\n    }\n    async sendCommand(params) {\n        const client = params.session\n            ? this.#cdpConnection.getCdpClient(params.session)\n            : this.#browserCdpClient;\n        const result = await client.sendCommand(params.method, params.params);\n        return {\n            result,\n            session: params.session,\n        };\n    }\n}\nexports.CdpProcessor = CdpProcessor;\n//# sourceMappingURL=CdpProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowsingContextProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nclass BrowsingContextProcessor {\n    #browserCdpClient;\n    #browsingContextStorage;\n    #eventManager;\n    #userContextStorage;\n    constructor(browserCdpClient, browsingContextStorage, userContextStorage, eventManager) {\n        this.#userContextStorage = userContextStorage;\n        this.#browserCdpClient = browserCdpClient;\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#eventManager = eventManager;\n        this.#eventManager.addSubscribeHook(protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.ContextCreated, this.#onContextCreatedSubscribeHook.bind(this));\n    }\n    getTree(params) {\n        const resultContexts = params.root === undefined\n            ? this.#browsingContextStorage.getTopLevelContexts()\n            : [this.#browsingContextStorage.getContext(params.root)];\n        return {\n            contexts: resultContexts.map((c) => c.serializeToBidiValue(params.maxDepth ?? Number.MAX_VALUE)),\n        };\n    }\n    async create(params) {\n        let referenceContext;\n        let userContext = 'default';\n        if (params.referenceContext !== undefined) {\n            referenceContext = this.#browsingContextStorage.getContext(params.referenceContext);\n            if (!referenceContext.isTopLevelContext()) {\n                throw new protocol_js_1.InvalidArgumentException(`referenceContext should be a top-level context`);\n            }\n            userContext = referenceContext.userContext;\n        }\n        if (params.userContext !== undefined) {\n            userContext = params.userContext;\n        }\n        const existingContexts = this.#browsingContextStorage\n            .getAllContexts()\n            .filter((context) => context.userContext === userContext);\n        let newWindow = false;\n        switch (params.type) {\n            case \"tab\" /* BrowsingContext.CreateType.Tab */:\n                newWindow = false;\n                break;\n            case \"window\" /* BrowsingContext.CreateType.Window */:\n                newWindow = true;\n                break;\n        }\n        if (!existingContexts.length) {\n            // If there are no contexts in the given user context, we need to set\n            // newWindow to true as newWindow=false will be rejected.\n            newWindow = true;\n        }\n        let result;\n        try {\n            result = await this.#browserCdpClient.sendCommand('Target.createTarget', {\n                url: 'about:blank',\n                newWindow,\n                browserContextId: userContext === 'default' ? undefined : userContext,\n                background: params.background === true,\n            });\n        }\n        catch (err) {\n            if (\n            // See https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/devtools/protocol/target_handler.cc;l=90;drc=e80392ac11e48a691f4309964cab83a3a59e01c8\n            err.message.startsWith('Failed to find browser context with id') ||\n                // See https://source.chromium.org/chromium/chromium/src/+/main:headless/lib/browser/protocol/target_handler.cc;l=49;drc=e80392ac11e48a691f4309964cab83a3a59e01c8\n                err.message === 'browserContextId') {\n                throw new protocol_js_1.NoSuchUserContextException(`The context ${userContext} was not found`);\n            }\n            throw err;\n        }\n        // Wait for the new target to be attached and to be added to the browsing context\n        // storage.\n        const context = await this.#browsingContextStorage.waitForContext(result.targetId);\n        // Wait for the new tab to be loaded to avoid race conditions in the\n        // `browsingContext` events, when the `browsingContext.domContentLoaded` and\n        // `browsingContext.load` events from the initial `about:blank` navigation\n        // are emitted after the next navigation is started.\n        // Details: https://github.com/web-platform-tests/wpt/issues/35846\n        await context.lifecycleLoaded();\n        return { context: context.id };\n    }\n    navigate(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        return context.navigate(params.url, params.wait ?? \"none\" /* BrowsingContext.ReadinessState.None */);\n    }\n    reload(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        return context.reload(params.ignoreCache ?? false, params.wait ?? \"none\" /* BrowsingContext.ReadinessState.None */);\n    }\n    async activate(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        if (!context.isTopLevelContext()) {\n            throw new protocol_js_1.InvalidArgumentException('Activation is only supported on the top-level context');\n        }\n        await context.activate();\n        return {};\n    }\n    async captureScreenshot(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        return await context.captureScreenshot(params);\n    }\n    async print(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        return await context.print(params);\n    }\n    async setViewport(params) {\n        const impactedTopLevelContexts = await this.#getRelatedTopLevelBrowsingContexts(params.context, params.userContexts);\n        for (const userContextId of params.userContexts ?? []) {\n            const userContextConfig = this.#userContextStorage.getConfig(userContextId);\n            // `undefined` means not changes should be done to the config.\n            if (params.devicePixelRatio !== undefined) {\n                userContextConfig.devicePixelRatio = params.devicePixelRatio;\n            }\n            if (params.viewport !== undefined) {\n                userContextConfig.viewport = params.viewport;\n            }\n        }\n        await Promise.all(impactedTopLevelContexts.map((context) => context.setViewport(params.viewport, params.devicePixelRatio)));\n        return {};\n    }\n    /**\n     * Returns a list of top-level browsing context ids.\n     */\n    async #getRelatedTopLevelBrowsingContexts(browsingContextId, userContextIds) {\n        if (browsingContextId === undefined && userContextIds === undefined) {\n            throw new protocol_js_1.InvalidArgumentException('Either userContexts or context must be provided');\n        }\n        if (browsingContextId !== undefined && userContextIds !== undefined) {\n            throw new protocol_js_1.InvalidArgumentException('userContexts and context are mutually exclusive');\n        }\n        if (browsingContextId !== undefined) {\n            const context = this.#browsingContextStorage.getContext(browsingContextId);\n            if (!context.isTopLevelContext()) {\n                throw new protocol_js_1.InvalidArgumentException('Emulating viewport is only supported on the top-level context');\n            }\n            return [context];\n        }\n        // Verify that all user contexts exist.\n        await this.#userContextStorage.verifyUserContextIdList(userContextIds);\n        const result = [];\n        for (const userContextId of userContextIds) {\n            const topLevelBrowsingContexts = this.#browsingContextStorage\n                .getTopLevelContexts()\n                .filter((browsingContext) => browsingContext.userContext === userContextId);\n            result.push(...topLevelBrowsingContexts);\n        }\n        // Remove duplicates. Compare `BrowsingContextImpl` by reference is correct here, as\n        // `browsingContextStorage` returns the same instance for the same id.\n        return [...new Set(result).values()];\n    }\n    async traverseHistory(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        if (!context) {\n            throw new protocol_js_1.InvalidArgumentException(`No browsing context with id ${params.context}`);\n        }\n        if (!context.isTopLevelContext()) {\n            throw new protocol_js_1.InvalidArgumentException('Traversing history is only supported on the top-level context');\n        }\n        await context.traverseHistory(params.delta);\n        return {};\n    }\n    async handleUserPrompt(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        try {\n            await context.handleUserPrompt(params.accept, params.userText);\n        }\n        catch (error) {\n            // Heuristically determine the error\n            // https://source.chromium.org/chromium/chromium/src/+/main:content/browser/devtools/protocol/page_handler.cc;l=1085?q=%22No%20dialog%20is%20showing%22&ss=chromium\n            if (error.message?.includes('No dialog is showing')) {\n                throw new protocol_js_1.NoSuchAlertException('No dialog is showing');\n            }\n            throw error;\n        }\n        return {};\n    }\n    async close(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        if (!context.isTopLevelContext()) {\n            throw new protocol_js_1.InvalidArgumentException(`Non top-level browsing context ${context.id} cannot be closed.`);\n        }\n        // Parent session of a page target session can be a `browser` or a `tab` session.\n        const parentCdpClient = context.cdpTarget.parentCdpClient;\n        try {\n            const detachedFromTargetPromise = new Promise((resolve) => {\n                const onContextDestroyed = (event) => {\n                    if (event.targetId === params.context) {\n                        parentCdpClient.off('Target.detachedFromTarget', onContextDestroyed);\n                        resolve();\n                    }\n                };\n                parentCdpClient.on('Target.detachedFromTarget', onContextDestroyed);\n            });\n            try {\n                if (params.promptUnload) {\n                    await context.close();\n                }\n                else {\n                    await parentCdpClient.sendCommand('Target.closeTarget', {\n                        targetId: params.context,\n                    });\n                }\n            }\n            catch (error) {\n                // Swallow error that arise from the session being destroyed. Rely on the\n                // `detachedFromTargetPromise` event to be resolved.\n                if (!parentCdpClient.isCloseError(error)) {\n                    throw error;\n                }\n            }\n            // Sometimes CDP command finishes before `detachedFromTarget` event,\n            // sometimes after. Wait for the CDP command to be finished, and then wait\n            // for `detachedFromTarget` if it hasn't emitted.\n            await detachedFromTargetPromise;\n        }\n        catch (error) {\n            // Swallow error that arise from the page being destroyed\n            // Example is navigating to faulty SSL certificate\n            if (!(error.code === -32000 /* CdpErrorConstants.GENERIC_ERROR */ &&\n                error.message === 'Not attached to an active page')) {\n                throw error;\n            }\n        }\n        return {};\n    }\n    async locateNodes(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        return await context.locateNodes(params);\n    }\n    #onContextCreatedSubscribeHook(contextId) {\n        const context = this.#browsingContextStorage.getContext(contextId);\n        const contextsToReport = [\n            context,\n            ...this.#browsingContextStorage.getContext(contextId).allChildren,\n        ];\n        contextsToReport.forEach((context) => {\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.ContextCreated,\n                params: context.serializeToBidiValue(),\n            }, context.id);\n        });\n        return Promise.resolve();\n    }\n}\nexports.BrowsingContextProcessor = BrowsingContextProcessor;\n//# sourceMappingURL=BrowsingContextProcessor.js.map","\"use strict\";\n/**\n * Copyright 2025 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EmulationProcessor = void 0;\nexports.isValidLocale = isValidLocale;\nexports.isValidTimezone = isValidTimezone;\nexports.isTimeZoneOffsetString = isTimeZoneOffsetString;\nconst ErrorResponse_js_1 = require(\"../../../protocol/ErrorResponse.js\");\nclass EmulationProcessor {\n    #userContextStorage;\n    #browsingContextStorage;\n    constructor(browsingContextStorage, userContextStorage) {\n        this.#userContextStorage = userContextStorage;\n        this.#browsingContextStorage = browsingContextStorage;\n    }\n    async setGeolocationOverride(params) {\n        if ('coordinates' in params && 'error' in params) {\n            // Unreachable. Handled by params parser.\n            throw new ErrorResponse_js_1.InvalidArgumentException('Coordinates and error cannot be set at the same time');\n        }\n        let geolocation = null;\n        if ('coordinates' in params) {\n            if ((params.coordinates?.altitude ?? null) === null &&\n                (params.coordinates?.altitudeAccuracy ?? null) !== null) {\n                throw new ErrorResponse_js_1.InvalidArgumentException('Geolocation altitudeAccuracy can be set only with altitude');\n            }\n            geolocation = params.coordinates;\n        }\n        else if ('error' in params) {\n            if (params.error.type !== 'positionUnavailable') {\n                // Unreachable. Handled by params parser.\n                throw new ErrorResponse_js_1.InvalidArgumentException(`Unknown geolocation error ${params.error.type}`);\n            }\n            geolocation = params.error;\n        }\n        else {\n            // Unreachable. Handled by params parser.\n            throw new ErrorResponse_js_1.InvalidArgumentException(`Coordinates or error should be set`);\n        }\n        const browsingContexts = await this.#getRelatedTopLevelBrowsingContexts(params.contexts, params.userContexts);\n        for (const userContextId of params.userContexts ?? []) {\n            const userContextConfig = this.#userContextStorage.getConfig(userContextId);\n            userContextConfig.geolocation = geolocation;\n        }\n        await Promise.all(browsingContexts.map(async (context) => await context.cdpTarget.setGeolocationOverride(geolocation)));\n        return {};\n    }\n    async setLocaleOverride(params) {\n        const locale = params.locale ?? null;\n        if (locale !== null && !isValidLocale(locale)) {\n            throw new ErrorResponse_js_1.InvalidArgumentException(`Invalid locale \"${locale}\"`);\n        }\n        const browsingContexts = await this.#getRelatedTopLevelBrowsingContexts(params.contexts, params.userContexts);\n        for (const userContextId of params.userContexts ?? []) {\n            const userContextConfig = this.#userContextStorage.getConfig(userContextId);\n            userContextConfig.locale = locale;\n        }\n        await Promise.all(browsingContexts.map(async (context) => await context.cdpTarget.setLocaleOverride(locale)));\n        return {};\n    }\n    async setScreenOrientationOverride(params) {\n        const browsingContexts = await this.#getRelatedTopLevelBrowsingContexts(params.contexts, params.userContexts);\n        for (const userContextId of params.userContexts ?? []) {\n            const userContextConfig = this.#userContextStorage.getConfig(userContextId);\n            userContextConfig.screenOrientation = params.screenOrientation;\n        }\n        await Promise.all(browsingContexts.map(async (context) => await context.cdpTarget.setScreenOrientationOverride(params.screenOrientation)));\n        return {};\n    }\n    /**\n     * Returns a list of top-level browsing contexts.\n     */\n    async #getRelatedTopLevelBrowsingContexts(browsingContextIds, userContextIds) {\n        if (browsingContextIds === undefined && userContextIds === undefined) {\n            throw new ErrorResponse_js_1.InvalidArgumentException('Either user contexts or browsing contexts must be provided');\n        }\n        if (browsingContextIds !== undefined && userContextIds !== undefined) {\n            throw new ErrorResponse_js_1.InvalidArgumentException('User contexts and browsing contexts are mutually exclusive');\n        }\n        const result = [];\n        if (browsingContextIds === undefined) {\n            // userContextIds !== undefined\n            if (userContextIds.length === 0) {\n                throw new ErrorResponse_js_1.InvalidArgumentException('user context should be provided');\n            }\n            // Verify that all user contexts exist.\n            await this.#userContextStorage.verifyUserContextIdList(userContextIds);\n            for (const userContextId of userContextIds) {\n                const topLevelBrowsingContexts = this.#browsingContextStorage\n                    .getTopLevelContexts()\n                    .filter((browsingContext) => browsingContext.userContext === userContextId);\n                result.push(...topLevelBrowsingContexts);\n            }\n        }\n        else {\n            if (browsingContextIds.length === 0) {\n                throw new ErrorResponse_js_1.InvalidArgumentException('browsing context should be provided');\n            }\n            for (const browsingContextId of browsingContextIds) {\n                const browsingContext = this.#browsingContextStorage.getContext(browsingContextId);\n                if (!browsingContext.isTopLevelContext()) {\n                    throw new ErrorResponse_js_1.InvalidArgumentException('The command is only supported on the top-level context');\n                }\n                result.push(browsingContext);\n            }\n        }\n        // Remove duplicates. Compare `BrowsingContextImpl` by reference is correct here, as\n        // `browsingContextStorage` returns the same instance for the same id.\n        return [...new Set(result).values()];\n    }\n    async setTimezoneOverride(params) {\n        let timezone = params.timezone ?? null;\n        if (timezone !== null && !isValidTimezone(timezone)) {\n            throw new ErrorResponse_js_1.InvalidArgumentException(`Invalid timezone \"${timezone}\"`);\n        }\n        if (timezone !== null && isTimeZoneOffsetString(timezone)) {\n            // CDP supports offset timezone with `GMT` prefix.\n            timezone = `GMT${timezone}`;\n        }\n        const browsingContexts = await this.#getRelatedTopLevelBrowsingContexts(params.contexts, params.userContexts);\n        for (const userContextId of params.userContexts ?? []) {\n            const userContextConfig = this.#userContextStorage.getConfig(userContextId);\n            userContextConfig.timezone = timezone;\n        }\n        await Promise.all(browsingContexts.map(async (context) => await context.cdpTarget.setTimezoneOverride(timezone)));\n        return {};\n    }\n}\nexports.EmulationProcessor = EmulationProcessor;\n// Export for testing.\nfunction isValidLocale(locale) {\n    try {\n        new Intl.Locale(locale);\n        return true;\n    }\n    catch (e) {\n        if (e instanceof RangeError) {\n            return false;\n        }\n        // Re-throw other errors\n        throw e;\n    }\n}\n// Export for testing.\nfunction isValidTimezone(timezone) {\n    try {\n        Intl.DateTimeFormat(undefined, { timeZone: timezone });\n        return true;\n    }\n    catch (e) {\n        if (e instanceof RangeError) {\n            return false;\n        }\n        // Re-throw other errors\n        throw e;\n    }\n}\n// Export for testing.\nfunction isTimeZoneOffsetString(timezone) {\n    return /^[+-](?:2[0-3]|[01]\\d)(?::[0-5]\\d)?$/.test(timezone);\n}\n//# sourceMappingURL=EmulationProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assert = assert;\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction assert(predicate, message) {\n    if (!predicate) {\n        throw new Error(message ?? 'Internal assertion failed.');\n    }\n}\n//# sourceMappingURL=assert.js.map","\"use strict\";\n/*\n * Copyright 2024 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSingleComplexGrapheme = isSingleComplexGrapheme;\nexports.isSingleGrapheme = isSingleGrapheme;\n/**\n * Check if the given string is a single complex grapheme. A complex grapheme is one that\n * is made up of multiple characters.\n */\nfunction isSingleComplexGrapheme(value) {\n    return isSingleGrapheme(value) && value.length > 1;\n}\n/**\n * Check if the given string is a single grapheme.\n */\nfunction isSingleGrapheme(value) {\n    // Theoretically there can be some strings considered a grapheme in some locales, like\n    // slovak \"ch\" digraph. Use english locale for consistency.\n    // https://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries\n    const segmenter = new Intl.Segmenter('en', { granularity: 'grapheme' });\n    return [...segmenter.segment(value)].length === 1;\n}\n//# sourceMappingURL=graphemeTools.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WheelSource = exports.PointerSource = exports.KeySource = exports.NoneSource = void 0;\nclass NoneSource {\n    type = \"none\" /* SourceType.None */;\n}\nexports.NoneSource = NoneSource;\nclass KeySource {\n    type = \"key\" /* SourceType.Key */;\n    pressed = new Set();\n    // This is a bitfield that matches the modifiers parameter of\n    // https://chromedevtools.github.io/devtools-protocol/tot/Input/#method-dispatchKeyEvent\n    #modifiers = 0;\n    get modifiers() {\n        return this.#modifiers;\n    }\n    get alt() {\n        return (this.#modifiers & 1) === 1;\n    }\n    set alt(value) {\n        this.#setModifier(value, 1);\n    }\n    get ctrl() {\n        return (this.#modifiers & 2) === 2;\n    }\n    set ctrl(value) {\n        this.#setModifier(value, 2);\n    }\n    get meta() {\n        return (this.#modifiers & 4) === 4;\n    }\n    set meta(value) {\n        this.#setModifier(value, 4);\n    }\n    get shift() {\n        return (this.#modifiers & 8) === 8;\n    }\n    set shift(value) {\n        this.#setModifier(value, 8);\n    }\n    #setModifier(value, bit) {\n        if (value) {\n            this.#modifiers |= bit;\n        }\n        else {\n            this.#modifiers &= ~bit;\n        }\n    }\n}\nexports.KeySource = KeySource;\nclass PointerSource {\n    type = \"pointer\" /* SourceType.Pointer */;\n    subtype;\n    pointerId;\n    pressed = new Set();\n    x = 0;\n    y = 0;\n    radiusX;\n    radiusY;\n    force;\n    constructor(id, subtype) {\n        this.pointerId = id;\n        this.subtype = subtype;\n    }\n    // This is a bitfield that matches the buttons parameter of\n    // https://chromedevtools.github.io/devtools-protocol/tot/Input/#method-dispatchMouseEvent\n    get buttons() {\n        let buttons = 0;\n        for (const button of this.pressed) {\n            switch (button) {\n                case 0:\n                    buttons |= 1;\n                    break;\n                case 1:\n                    buttons |= 4;\n                    break;\n                case 2:\n                    buttons |= 2;\n                    break;\n                case 3:\n                    buttons |= 8;\n                    break;\n                case 4:\n                    buttons |= 16;\n                    break;\n            }\n        }\n        return buttons;\n    }\n    // --- Platform-specific code starts here ---\n    // Input.dispatchMouseEvent doesn't know the concept of double click, so we\n    // need to create the logic, similar to how it's done for OSes:\n    // https://source.chromium.org/chromium/chromium/src/+/refs/heads/main:ui/events/event.cc;l=479\n    static ClickContext = class ClickContext {\n        static #DOUBLE_CLICK_TIME_MS = 500;\n        static #MAX_DOUBLE_CLICK_RADIUS = 2;\n        count = 0;\n        #x;\n        #y;\n        #time;\n        constructor(x, y, time) {\n            this.#x = x;\n            this.#y = y;\n            this.#time = time;\n        }\n        compare(context) {\n            return (\n            // The click needs to be within a certain amount of ms.\n            context.#time - this.#time > ClickContext.#DOUBLE_CLICK_TIME_MS ||\n                // The click needs to be within a certain square radius.\n                Math.abs(context.#x - this.#x) >\n                    ClickContext.#MAX_DOUBLE_CLICK_RADIUS ||\n                Math.abs(context.#y - this.#y) > ClickContext.#MAX_DOUBLE_CLICK_RADIUS);\n        }\n    };\n    #clickContexts = new Map();\n    setClickCount(button, context) {\n        let storedContext = this.#clickContexts.get(button);\n        if (!storedContext || storedContext.compare(context)) {\n            storedContext = context;\n        }\n        ++storedContext.count;\n        this.#clickContexts.set(button, storedContext);\n        return storedContext.count;\n    }\n    getClickCount(button) {\n        return this.#clickContexts.get(button)?.count ?? 0;\n    }\n    /**\n     * Resets click count. Resets consequent click counter. Prevents grouping clicks in\n     * different `performActions` calls, so that they are not grouped as double, triple etc\n     * clicks. Required for https://github.com/GoogleChromeLabs/chromium-bidi/issues/3043.\n     */\n    resetClickCount() {\n        this.#clickContexts = new Map();\n    }\n}\nexports.PointerSource = PointerSource;\n_a = PointerSource;\nclass WheelSource {\n    type = \"wheel\" /* SourceType.Wheel */;\n}\nexports.WheelSource = WheelSource;\n//# sourceMappingURL=InputSource.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getNormalizedKey = getNormalizedKey;\nexports.getKeyCode = getKeyCode;\nexports.getKeyLocation = getKeyLocation;\n/**\n * Returns the normalized key value for a given key according to the table:\n * https://w3c.github.io/webdriver/#dfn-normalized-key-value\n */\nfunction getNormalizedKey(value) {\n    switch (value) {\n        case '\\uE000':\n            return 'Unidentified';\n        case '\\uE001':\n            return 'Cancel';\n        case '\\uE002':\n            return 'Help';\n        case '\\uE003':\n            return 'Backspace';\n        case '\\uE004':\n            return 'Tab';\n        case '\\uE005':\n            return 'Clear';\n        // Specification declares the '\\uE006' to be `Return`, but it is not supported by\n        // Chrome, so fall back to `Enter`, which aligns with WPT.\n        case '\\uE006':\n        case '\\uE007':\n            return 'Enter';\n        case '\\uE008':\n            return 'Shift';\n        case '\\uE009':\n            return 'Control';\n        case '\\uE00A':\n            return 'Alt';\n        case '\\uE00B':\n            return 'Pause';\n        case '\\uE00C':\n            return 'Escape';\n        case '\\uE00D':\n            return ' ';\n        case '\\uE00E':\n            return 'PageUp';\n        case '\\uE00F':\n            return 'PageDown';\n        case '\\uE010':\n            return 'End';\n        case '\\uE011':\n            return 'Home';\n        case '\\uE012':\n            return 'ArrowLeft';\n        case '\\uE013':\n            return 'ArrowUp';\n        case '\\uE014':\n            return 'ArrowRight';\n        case '\\uE015':\n            return 'ArrowDown';\n        case '\\uE016':\n            return 'Insert';\n        case '\\uE017':\n            return 'Delete';\n        case '\\uE018':\n            return ';';\n        case '\\uE019':\n            return '=';\n        case '\\uE01A':\n            return '0';\n        case '\\uE01B':\n            return '1';\n        case '\\uE01C':\n            return '2';\n        case '\\uE01D':\n            return '3';\n        case '\\uE01E':\n            return '4';\n        case '\\uE01F':\n            return '5';\n        case '\\uE020':\n            return '6';\n        case '\\uE021':\n            return '7';\n        case '\\uE022':\n            return '8';\n        case '\\uE023':\n            return '9';\n        case '\\uE024':\n            return '*';\n        case '\\uE025':\n            return '+';\n        case '\\uE026':\n            return ',';\n        case '\\uE027':\n            return '-';\n        case '\\uE028':\n            return '.';\n        case '\\uE029':\n            return '/';\n        case '\\uE031':\n            return 'F1';\n        case '\\uE032':\n            return 'F2';\n        case '\\uE033':\n            return 'F3';\n        case '\\uE034':\n            return 'F4';\n        case '\\uE035':\n            return 'F5';\n        case '\\uE036':\n            return 'F6';\n        case '\\uE037':\n            return 'F7';\n        case '\\uE038':\n            return 'F8';\n        case '\\uE039':\n            return 'F9';\n        case '\\uE03A':\n            return 'F10';\n        case '\\uE03B':\n            return 'F11';\n        case '\\uE03C':\n            return 'F12';\n        case '\\uE03D':\n            return 'Meta';\n        case '\\uE040':\n            return 'ZenkakuHankaku';\n        case '\\uE050':\n            return 'Shift';\n        case '\\uE051':\n            return 'Control';\n        case '\\uE052':\n            return 'Alt';\n        case '\\uE053':\n            return 'Meta';\n        case '\\uE054':\n            return 'PageUp';\n        case '\\uE055':\n            return 'PageDown';\n        case '\\uE056':\n            return 'End';\n        case '\\uE057':\n            return 'Home';\n        case '\\uE058':\n            return 'ArrowLeft';\n        case '\\uE059':\n            return 'ArrowUp';\n        case '\\uE05A':\n            return 'ArrowRight';\n        case '\\uE05B':\n            return 'ArrowDown';\n        case '\\uE05C':\n            return 'Insert';\n        case '\\uE05D':\n            return 'Delete';\n        default:\n            return value;\n    }\n}\n/**\n * Returns the key code for a given key according to the table:\n * https://w3c.github.io/webdriver/#dfn-shifted-character\n */\nfunction getKeyCode(key) {\n    switch (key) {\n        case '`':\n        case '~':\n            return 'Backquote';\n        case '\\\\':\n        case '|':\n            return 'Backslash';\n        case '\\uE003':\n            return 'Backspace';\n        case '[':\n        case '{':\n            return 'BracketLeft';\n        case ']':\n        case '}':\n            return 'BracketRight';\n        case ',':\n        case '<':\n            return 'Comma';\n        case '0':\n        case ')':\n            return 'Digit0';\n        case '1':\n        case '!':\n            return 'Digit1';\n        case '2':\n        case '@':\n            return 'Digit2';\n        case '3':\n        case '#':\n            return 'Digit3';\n        case '4':\n        case '$':\n            return 'Digit4';\n        case '5':\n        case '%':\n            return 'Digit5';\n        case '6':\n        case '^':\n            return 'Digit6';\n        case '7':\n        case '&':\n            return 'Digit7';\n        case '8':\n        case '*':\n            return 'Digit8';\n        case '9':\n        case '(':\n            return 'Digit9';\n        case '=':\n        case '+':\n            return 'Equal';\n        // The spec declares the '<' to be `IntlBackslash` as well, but it is already covered\n        // in the `Comma` above.\n        case '>':\n            return 'IntlBackslash';\n        case 'a':\n        case 'A':\n            return 'KeyA';\n        case 'b':\n        case 'B':\n            return 'KeyB';\n        case 'c':\n        case 'C':\n            return 'KeyC';\n        case 'd':\n        case 'D':\n            return 'KeyD';\n        case 'e':\n        case 'E':\n            return 'KeyE';\n        case 'f':\n        case 'F':\n            return 'KeyF';\n        case 'g':\n        case 'G':\n            return 'KeyG';\n        case 'h':\n        case 'H':\n            return 'KeyH';\n        case 'i':\n        case 'I':\n            return 'KeyI';\n        case 'j':\n        case 'J':\n            return 'KeyJ';\n        case 'k':\n        case 'K':\n            return 'KeyK';\n        case 'l':\n        case 'L':\n            return 'KeyL';\n        case 'm':\n        case 'M':\n            return 'KeyM';\n        case 'n':\n        case 'N':\n            return 'KeyN';\n        case 'o':\n        case 'O':\n            return 'KeyO';\n        case 'p':\n        case 'P':\n            return 'KeyP';\n        case 'q':\n        case 'Q':\n            return 'KeyQ';\n        case 'r':\n        case 'R':\n            return 'KeyR';\n        case 's':\n        case 'S':\n            return 'KeyS';\n        case 't':\n        case 'T':\n            return 'KeyT';\n        case 'u':\n        case 'U':\n            return 'KeyU';\n        case 'v':\n        case 'V':\n            return 'KeyV';\n        case 'w':\n        case 'W':\n            return 'KeyW';\n        case 'x':\n        case 'X':\n            return 'KeyX';\n        case 'y':\n        case 'Y':\n            return 'KeyY';\n        case 'z':\n        case 'Z':\n            return 'KeyZ';\n        case '-':\n        case '_':\n            return 'Minus';\n        case '.':\n            return 'Period';\n        case \"'\":\n        case '\"':\n            return 'Quote';\n        case ';':\n        case ':':\n            return 'Semicolon';\n        case '/':\n        case '?':\n            return 'Slash';\n        case '\\uE00A':\n            return 'AltLeft';\n        case '\\uE052':\n            return 'AltRight';\n        case '\\uE009':\n            return 'ControlLeft';\n        case '\\uE051':\n            return 'ControlRight';\n        case '\\uE006':\n            return 'Enter';\n        case '\\uE00B':\n            return 'Pause';\n        case '\\uE03D':\n            return 'MetaLeft';\n        case '\\uE053':\n            return 'MetaRight';\n        case '\\uE008':\n            return 'ShiftLeft';\n        case '\\uE050':\n            return 'ShiftRight';\n        case ' ':\n        case '\\uE00D':\n            return 'Space';\n        case '\\uE004':\n            return 'Tab';\n        case '\\uE017':\n            return 'Delete';\n        case '\\uE010':\n            return 'End';\n        case '\\uE002':\n            return 'Help';\n        case '\\uE011':\n            return 'Home';\n        case '\\uE016':\n            return 'Insert';\n        case '\\uE00F':\n            return 'PageDown';\n        case '\\uE00E':\n            return 'PageUp';\n        case '\\uE015':\n            return 'ArrowDown';\n        case '\\uE012':\n            return 'ArrowLeft';\n        case '\\uE014':\n            return 'ArrowRight';\n        case '\\uE013':\n            return 'ArrowUp';\n        case '\\uE00C':\n            return 'Escape';\n        case '\\uE031':\n            return 'F1';\n        case '\\uE032':\n            return 'F2';\n        case '\\uE033':\n            return 'F3';\n        case '\\uE034':\n            return 'F4';\n        case '\\uE035':\n            return 'F5';\n        case '\\uE036':\n            return 'F6';\n        case '\\uE037':\n            return 'F7';\n        case '\\uE038':\n            return 'F8';\n        case '\\uE039':\n            return 'F9';\n        case '\\uE03A':\n            return 'F10';\n        case '\\uE03B':\n            return 'F11';\n        case '\\uE03C':\n            return 'F12';\n        case '\\uE019':\n            return 'NumpadEqual';\n        case '\\uE01A':\n        case '\\uE05C':\n            return 'Numpad0';\n        case '\\uE01B':\n        case '\\uE056':\n            return 'Numpad1';\n        case '\\uE01C':\n        case '\\uE05B':\n            return 'Numpad2';\n        case '\\uE01D':\n        case '\\uE055':\n            return 'Numpad3';\n        case '\\uE01E':\n        case '\\uE058':\n            return 'Numpad4';\n        case '\\uE01F':\n            return 'Numpad5';\n        case '\\uE020':\n        case '\\uE05A':\n            return 'Numpad6';\n        case '\\uE021':\n        case '\\uE057':\n            return 'Numpad7';\n        case '\\uE022':\n        case '\\uE059':\n            return 'Numpad8';\n        case '\\uE023':\n        case '\\uE054':\n            return 'Numpad9';\n        case '\\uE025':\n            return 'NumpadAdd';\n        case '\\uE026':\n            return 'NumpadComma';\n        case '\\uE028':\n        case '\\uE05D':\n            return 'NumpadDecimal';\n        case '\\uE029':\n            return 'NumpadDivide';\n        case '\\uE007':\n            return 'NumpadEnter';\n        case '\\uE024':\n            return 'NumpadMultiply';\n        case '\\uE027':\n            return 'NumpadSubtract';\n        default:\n            return;\n    }\n}\n/**\n * Returns the location of the key according to the table:\n * https://w3c.github.io/webdriver/#dfn-key-location\n */\nfunction getKeyLocation(key) {\n    switch (key) {\n        case '\\uE007':\n        case '\\uE008':\n        case '\\uE009':\n        case '\\uE00A':\n        case '\\uE03D':\n            return 1;\n        case '\\uE019':\n        case '\\uE01A':\n        case '\\uE01B':\n        case '\\uE01C':\n        case '\\uE01D':\n        case '\\uE01E':\n        case '\\uE01F':\n        case '\\uE020':\n        case '\\uE021':\n        case '\\uE022':\n        case '\\uE023':\n        case '\\uE024':\n        case '\\uE025':\n        case '\\uE026':\n        case '\\uE027':\n        case '\\uE028':\n        case '\\uE029':\n        case '\\uE054':\n        case '\\uE055':\n        case '\\uE056':\n        case '\\uE057':\n        case '\\uE058':\n        case '\\uE059':\n        case '\\uE05A':\n        case '\\uE05B':\n        case '\\uE05C':\n        case '\\uE05D':\n            return 3;\n        case '\\uE050':\n        case '\\uE051':\n        case '\\uE052':\n        case '\\uE053':\n            return 2;\n        default:\n            return 0;\n    }\n}\n//# sourceMappingURL=keyUtils.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KeyToKeyCode = void 0;\n// TODO: Remove this once https://crrev.com/c/4548290 is stably in Chromium.\n// `Input.dispatchKeyboardEvent` will automatically handle these conversions.\nexports.KeyToKeyCode = {\n    '0': 48,\n    '1': 49,\n    '2': 50,\n    '3': 51,\n    '4': 52,\n    '5': 53,\n    '6': 54,\n    '7': 55,\n    '8': 56,\n    '9': 57,\n    Abort: 3,\n    Help: 6,\n    Backspace: 8,\n    Tab: 9,\n    Numpad5: 12,\n    NumpadEnter: 13,\n    Enter: 13,\n    '\\\\r': 13,\n    '\\\\n': 13,\n    ShiftLeft: 16,\n    ShiftRight: 16,\n    ControlLeft: 17,\n    ControlRight: 17,\n    AltLeft: 18,\n    AltRight: 18,\n    Pause: 19,\n    CapsLock: 20,\n    Escape: 27,\n    Convert: 28,\n    NonConvert: 29,\n    Space: 32,\n    Numpad9: 33,\n    PageUp: 33,\n    Numpad3: 34,\n    PageDown: 34,\n    End: 35,\n    Numpad1: 35,\n    Home: 36,\n    Numpad7: 36,\n    ArrowLeft: 37,\n    Numpad4: 37,\n    Numpad8: 38,\n    ArrowUp: 38,\n    ArrowRight: 39,\n    Numpad6: 39,\n    Numpad2: 40,\n    ArrowDown: 40,\n    Select: 41,\n    Open: 43,\n    PrintScreen: 44,\n    Insert: 45,\n    Numpad0: 45,\n    Delete: 46,\n    NumpadDecimal: 46,\n    Digit0: 48,\n    Digit1: 49,\n    Digit2: 50,\n    Digit3: 51,\n    Digit4: 52,\n    Digit5: 53,\n    Digit6: 54,\n    Digit7: 55,\n    Digit8: 56,\n    Digit9: 57,\n    KeyA: 65,\n    KeyB: 66,\n    KeyC: 67,\n    KeyD: 68,\n    KeyE: 69,\n    KeyF: 70,\n    KeyG: 71,\n    KeyH: 72,\n    KeyI: 73,\n    KeyJ: 74,\n    KeyK: 75,\n    KeyL: 76,\n    KeyM: 77,\n    KeyN: 78,\n    KeyO: 79,\n    KeyP: 80,\n    KeyQ: 81,\n    KeyR: 82,\n    KeyS: 83,\n    KeyT: 84,\n    KeyU: 85,\n    KeyV: 86,\n    KeyW: 87,\n    KeyX: 88,\n    KeyY: 89,\n    KeyZ: 90,\n    MetaLeft: 91,\n    MetaRight: 92,\n    ContextMenu: 93,\n    NumpadMultiply: 106,\n    NumpadAdd: 107,\n    NumpadSubtract: 109,\n    NumpadDivide: 111,\n    F1: 112,\n    F2: 113,\n    F3: 114,\n    F4: 115,\n    F5: 116,\n    F6: 117,\n    F7: 118,\n    F8: 119,\n    F9: 120,\n    F10: 121,\n    F11: 122,\n    F12: 123,\n    F13: 124,\n    F14: 125,\n    F15: 126,\n    F16: 127,\n    F17: 128,\n    F18: 129,\n    F19: 130,\n    F20: 131,\n    F21: 132,\n    F22: 133,\n    F23: 134,\n    F24: 135,\n    NumLock: 144,\n    ScrollLock: 145,\n    AudioVolumeMute: 173,\n    AudioVolumeDown: 174,\n    AudioVolumeUp: 175,\n    MediaTrackNext: 176,\n    MediaTrackPrevious: 177,\n    MediaStop: 178,\n    MediaPlayPause: 179,\n    Semicolon: 186,\n    Equal: 187,\n    NumpadEqual: 187,\n    Comma: 188,\n    Minus: 189,\n    Period: 190,\n    Slash: 191,\n    Backquote: 192,\n    BracketLeft: 219,\n    Backslash: 220,\n    BracketRight: 221,\n    Quote: 222,\n    AltGraph: 225,\n    Props: 247,\n    Cancel: 3,\n    Clear: 12,\n    Shift: 16,\n    Control: 17,\n    Alt: 18,\n    Accept: 30,\n    ModeChange: 31,\n    ' ': 32,\n    Print: 42,\n    Execute: 43,\n    '\\\\u0000': 46,\n    a: 65,\n    b: 66,\n    c: 67,\n    d: 68,\n    e: 69,\n    f: 70,\n    g: 71,\n    h: 72,\n    i: 73,\n    j: 74,\n    k: 75,\n    l: 76,\n    m: 77,\n    n: 78,\n    o: 79,\n    p: 80,\n    q: 81,\n    r: 82,\n    s: 83,\n    t: 84,\n    u: 85,\n    v: 86,\n    w: 87,\n    x: 88,\n    y: 89,\n    z: 90,\n    Meta: 91,\n    '*': 106,\n    '+': 107,\n    '-': 109,\n    '/': 111,\n    ';': 186,\n    '=': 187,\n    ',': 188,\n    '.': 190,\n    '`': 192,\n    '[': 219,\n    '\\\\\\\\': 220,\n    ']': 221,\n    \"'\": 222,\n    Attn: 246,\n    CrSel: 247,\n    ExSel: 248,\n    EraseEof: 249,\n    Play: 250,\n    ZoomOut: 251,\n    ')': 48,\n    '!': 49,\n    '@': 50,\n    '#': 51,\n    $: 52,\n    '%': 53,\n    '^': 54,\n    '&': 55,\n    '(': 57,\n    A: 65,\n    B: 66,\n    C: 67,\n    D: 68,\n    E: 69,\n    F: 70,\n    G: 71,\n    H: 72,\n    I: 73,\n    J: 74,\n    K: 75,\n    L: 76,\n    M: 77,\n    N: 78,\n    O: 79,\n    P: 80,\n    Q: 81,\n    R: 82,\n    S: 83,\n    T: 84,\n    U: 85,\n    V: 86,\n    W: 87,\n    X: 88,\n    Y: 89,\n    Z: 90,\n    ':': 186,\n    '<': 188,\n    _: 189,\n    '>': 190,\n    '?': 191,\n    '~': 192,\n    '{': 219,\n    '|': 220,\n    '}': 221,\n    '\"': 222,\n    Camera: 44,\n    EndCall: 95,\n    VolumeDown: 182,\n    VolumeUp: 183,\n};\n//# sourceMappingURL=USKeyboardLayout.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ActionDispatcher = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst assert_js_1 = require(\"../../../utils/assert.js\");\nconst graphemeTools_js_1 = require(\"../../../utils/graphemeTools.js\");\nconst InputSource_js_1 = require(\"./InputSource.js\");\nconst keyUtils_js_1 = require(\"./keyUtils.js\");\nconst USKeyboardLayout_js_1 = require(\"./USKeyboardLayout.js\");\n/** https://w3c.github.io/webdriver/#dfn-center-point */\nconst CALCULATE_IN_VIEW_CENTER_PT_DECL = ((i) => {\n    const t = i.getClientRects()[0], e = Math.max(0, Math.min(t.x, t.x + t.width)), n = Math.min(window.innerWidth, Math.max(t.x, t.x + t.width)), h = Math.max(0, Math.min(t.y, t.y + t.height)), m = Math.min(window.innerHeight, Math.max(t.y, t.y + t.height));\n    return [e + ((n - e) >> 1), h + ((m - h) >> 1)];\n}).toString();\nconst IS_MAC_DECL = (() => {\n    return navigator.platform.toLowerCase().includes('mac');\n}).toString();\nasync function getElementCenter(context, element) {\n    const hiddenSandboxRealm = await context.getOrCreateHiddenSandbox();\n    const result = await hiddenSandboxRealm.callFunction(CALCULATE_IN_VIEW_CENTER_PT_DECL, false, { type: 'undefined' }, [element]);\n    if (result.type === 'exception') {\n        throw new protocol_js_1.NoSuchElementException(`Origin element ${element.sharedId} was not found`);\n    }\n    (0, assert_js_1.assert)(result.result.type === 'array');\n    (0, assert_js_1.assert)(result.result.value?.[0]?.type === 'number');\n    (0, assert_js_1.assert)(result.result.value?.[1]?.type === 'number');\n    const { result: { value: [{ value: x }, { value: y }], }, } = result;\n    return { x: x, y: y };\n}\nclass ActionDispatcher {\n    static isMacOS = async (context) => {\n        const hiddenSandboxRealm = await context.getOrCreateHiddenSandbox();\n        const result = await hiddenSandboxRealm.callFunction(IS_MAC_DECL, false);\n        (0, assert_js_1.assert)(result.type !== 'exception');\n        (0, assert_js_1.assert)(result.result.type === 'boolean');\n        return result.result.value;\n    };\n    #browsingContextStorage;\n    #tickStart = 0;\n    #tickDuration = 0;\n    #inputState;\n    #contextId;\n    #isMacOS;\n    constructor(inputState, browsingContextStorage, contextId, isMacOS) {\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#inputState = inputState;\n        this.#contextId = contextId;\n        this.#isMacOS = isMacOS;\n    }\n    /**\n     * The context can be disposed between action ticks, so need to get it each time.\n     */\n    get #context() {\n        return this.#browsingContextStorage.getContext(this.#contextId);\n    }\n    async dispatchActions(optionsByTick) {\n        await this.#inputState.queue.run(async () => {\n            for (const options of optionsByTick) {\n                await this.dispatchTickActions(options);\n            }\n        });\n    }\n    async dispatchTickActions(options) {\n        this.#tickStart = performance.now();\n        this.#tickDuration = 0;\n        for (const { action } of options) {\n            if ('duration' in action && action.duration !== undefined) {\n                this.#tickDuration = Math.max(this.#tickDuration, action.duration);\n            }\n        }\n        const promises = [\n            new Promise((resolve) => setTimeout(resolve, this.#tickDuration)),\n        ];\n        for (const option of options) {\n            // In theory we have to wait for each action to happen, but CDP is serial,\n            // so as an optimization, we queue all CDP commands at once and await all\n            // of them.\n            promises.push(this.#dispatchAction(option));\n        }\n        await Promise.all(promises);\n    }\n    async #dispatchAction({ id, action }) {\n        const source = this.#inputState.get(id);\n        const keyState = this.#inputState.getGlobalKeyState();\n        switch (action.type) {\n            case 'keyDown': {\n                // SAFETY: The source is validated before.\n                await this.#dispatchKeyDownAction(source, action);\n                this.#inputState.cancelList.push({\n                    id,\n                    action: {\n                        ...action,\n                        type: 'keyUp',\n                    },\n                });\n                break;\n            }\n            case 'keyUp': {\n                // SAFETY: The source is validated before.\n                await this.#dispatchKeyUpAction(source, action);\n                break;\n            }\n            case 'pause': {\n                // TODO: Implement waiting on the input source.\n                break;\n            }\n            case 'pointerDown': {\n                // SAFETY: The source is validated before.\n                await this.#dispatchPointerDownAction(source, keyState, action);\n                this.#inputState.cancelList.push({\n                    id,\n                    action: {\n                        ...action,\n                        type: 'pointerUp',\n                    },\n                });\n                break;\n            }\n            case 'pointerMove': {\n                // SAFETY: The source is validated before.\n                await this.#dispatchPointerMoveAction(source, keyState, action);\n                break;\n            }\n            case 'pointerUp': {\n                // SAFETY: The source is validated before.\n                await this.#dispatchPointerUpAction(source, keyState, action);\n                break;\n            }\n            case 'scroll': {\n                // SAFETY: The source is validated before.\n                await this.#dispatchScrollAction(source, keyState, action);\n                break;\n            }\n        }\n    }\n    async #dispatchPointerDownAction(source, keyState, action) {\n        const { button } = action;\n        if (source.pressed.has(button)) {\n            return;\n        }\n        source.pressed.add(button);\n        const { x, y, subtype: pointerType } = source;\n        const { width, height, pressure, twist, tangentialPressure } = action;\n        const { tiltX, tiltY } = getTilt(action);\n        // --- Platform-specific code begins here ---\n        const { modifiers } = keyState;\n        const { radiusX, radiusY } = getRadii(width ?? 1, height ?? 1);\n        switch (pointerType) {\n            case \"mouse\" /* Input.PointerType.Mouse */:\n            case \"pen\" /* Input.PointerType.Pen */:\n                // TODO: Implement width and height when available.\n                await this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchMouseEvent', {\n                    type: 'mousePressed',\n                    x,\n                    y,\n                    modifiers,\n                    button: getCdpButton(button),\n                    buttons: source.buttons,\n                    clickCount: source.setClickCount(button, new InputSource_js_1.PointerSource.ClickContext(x, y, performance.now())),\n                    pointerType,\n                    tangentialPressure,\n                    tiltX,\n                    tiltY,\n                    twist,\n                    force: pressure,\n                });\n                break;\n            case \"touch\" /* Input.PointerType.Touch */:\n                await this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchTouchEvent', {\n                    type: 'touchStart',\n                    touchPoints: [\n                        {\n                            x,\n                            y,\n                            radiusX,\n                            radiusY,\n                            tangentialPressure,\n                            tiltX,\n                            tiltY,\n                            twist,\n                            force: pressure,\n                            id: source.pointerId,\n                        },\n                    ],\n                    modifiers,\n                });\n                break;\n        }\n        source.radiusX = radiusX;\n        source.radiusY = radiusY;\n        source.force = pressure;\n        // --- Platform-specific code ends here ---\n    }\n    #dispatchPointerUpAction(source, keyState, action) {\n        const { button } = action;\n        if (!source.pressed.has(button)) {\n            return;\n        }\n        source.pressed.delete(button);\n        const { x, y, force, radiusX, radiusY, subtype: pointerType } = source;\n        // --- Platform-specific code begins here ---\n        const { modifiers } = keyState;\n        switch (pointerType) {\n            case \"mouse\" /* Input.PointerType.Mouse */:\n            case \"pen\" /* Input.PointerType.Pen */:\n                // TODO: Implement width and height when available.\n                return this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchMouseEvent', {\n                    type: 'mouseReleased',\n                    x,\n                    y,\n                    modifiers,\n                    button: getCdpButton(button),\n                    buttons: source.buttons,\n                    clickCount: source.getClickCount(button),\n                    pointerType,\n                });\n            case \"touch\" /* Input.PointerType.Touch */:\n                return this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchTouchEvent', {\n                    type: 'touchEnd',\n                    touchPoints: [\n                        {\n                            x,\n                            y,\n                            id: source.pointerId,\n                            force,\n                            radiusX,\n                            radiusY,\n                        },\n                    ],\n                    modifiers,\n                });\n        }\n        // --- Platform-specific code ends here ---\n    }\n    async #dispatchPointerMoveAction(source, keyState, action) {\n        const { x: startX, y: startY, subtype: pointerType } = source;\n        const { width, height, pressure, twist, tangentialPressure, x: offsetX, y: offsetY, origin = 'viewport', duration = this.#tickDuration, } = action;\n        const { tiltX, tiltY } = getTilt(action);\n        const { radiusX, radiusY } = getRadii(width ?? 1, height ?? 1);\n        const { targetX, targetY } = await this.#getCoordinateFromOrigin(origin, offsetX, offsetY, startX, startY);\n        if (targetX < 0 || targetY < 0) {\n            throw new protocol_js_1.MoveTargetOutOfBoundsException(`Cannot move beyond viewport (x: ${targetX}, y: ${targetY})`);\n        }\n        let last;\n        do {\n            const ratio = duration > 0 ? (performance.now() - this.#tickStart) / duration : 1;\n            last = ratio >= 1;\n            let x;\n            let y;\n            if (last) {\n                x = targetX;\n                y = targetY;\n            }\n            else {\n                x = Math.round(ratio * (targetX - startX) + startX);\n                y = Math.round(ratio * (targetY - startY) + startY);\n            }\n            if (source.x !== x || source.y !== y) {\n                // --- Platform-specific code begins here ---\n                const { modifiers } = keyState;\n                switch (pointerType) {\n                    case \"mouse\" /* Input.PointerType.Mouse */:\n                        // TODO: Implement width and height when available.\n                        await this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchMouseEvent', {\n                            type: 'mouseMoved',\n                            x,\n                            y,\n                            modifiers,\n                            clickCount: 0,\n                            button: getCdpButton(source.pressed.values().next().value ?? 5),\n                            buttons: source.buttons,\n                            pointerType,\n                            tangentialPressure,\n                            tiltX,\n                            tiltY,\n                            twist,\n                            force: pressure,\n                        });\n                        break;\n                    case \"pen\" /* Input.PointerType.Pen */:\n                        if (source.pressed.size !== 0) {\n                            // Empty `source.pressed.size` means the pen is not detected by digitizer.\n                            // Dispatch a mouse event for the pen only if either:\n                            // 1. the pen is hovering over the digitizer (0);\n                            // 2. the pen is in contact with the digitizer (1);\n                            // 3. the pen has at least one button pressed (2, 4, etc).\n                            // https://www.w3.org/TR/pointerevents/#the-buttons-property\n                            // TODO: Implement width and height when available.\n                            await this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchMouseEvent', {\n                                type: 'mouseMoved',\n                                x,\n                                y,\n                                modifiers,\n                                clickCount: 0,\n                                button: getCdpButton(source.pressed.values().next().value ?? 5),\n                                buttons: source.buttons,\n                                pointerType,\n                                tangentialPressure,\n                                tiltX,\n                                tiltY,\n                                twist,\n                                force: pressure ?? 0.5,\n                            });\n                        }\n                        break;\n                    case \"touch\" /* Input.PointerType.Touch */:\n                        if (source.pressed.size !== 0) {\n                            await this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchTouchEvent', {\n                                type: 'touchMove',\n                                touchPoints: [\n                                    {\n                                        x,\n                                        y,\n                                        radiusX,\n                                        radiusY,\n                                        tangentialPressure,\n                                        tiltX,\n                                        tiltY,\n                                        twist,\n                                        force: pressure,\n                                        id: source.pointerId,\n                                    },\n                                ],\n                                modifiers,\n                            });\n                        }\n                        break;\n                }\n                // --- Platform-specific code ends here ---\n                source.x = x;\n                source.y = y;\n                source.radiusX = radiusX;\n                source.radiusY = radiusY;\n                source.force = pressure;\n            }\n        } while (!last);\n    }\n    async #getFrameOffset() {\n        if (this.#context.id === this.#context.cdpTarget.id) {\n            return { x: 0, y: 0 };\n        }\n        // https://github.com/w3c/webdriver/pull/1847 proposes dispatching events from\n        // the top-level browsing context. This implementation dispatches it on the top-most\n        // same-target frame, which is not top-level one in case of OOPiF.\n        // TODO: switch to the top-level browsing context.\n        const { backendNodeId } = await this.#context.cdpTarget.cdpClient.sendCommand('DOM.getFrameOwner', { frameId: this.#context.id });\n        const { model: frameBoxModel } = await this.#context.cdpTarget.cdpClient.sendCommand('DOM.getBoxModel', {\n            backendNodeId,\n        });\n        return { x: frameBoxModel.content[0], y: frameBoxModel.content[1] };\n    }\n    async #getCoordinateFromOrigin(origin, offsetX, offsetY, startX, startY) {\n        let targetX;\n        let targetY;\n        const frameOffset = await this.#getFrameOffset();\n        switch (origin) {\n            case 'viewport':\n                targetX = offsetX + frameOffset.x;\n                targetY = offsetY + frameOffset.y;\n                break;\n            case 'pointer':\n                targetX = startX + offsetX + frameOffset.x;\n                targetY = startY + offsetY + frameOffset.y;\n                break;\n            default: {\n                const { x: posX, y: posY } = await getElementCenter(this.#context, origin.element);\n                // SAFETY: These can never be special numbers.\n                targetX = posX + offsetX + frameOffset.x;\n                targetY = posY + offsetY + frameOffset.y;\n                break;\n            }\n        }\n        return { targetX, targetY };\n    }\n    async #dispatchScrollAction(_source, keyState, action) {\n        const { deltaX: targetDeltaX, deltaY: targetDeltaY, x: offsetX, y: offsetY, origin = 'viewport', duration = this.#tickDuration, } = action;\n        if (origin === 'pointer') {\n            throw new protocol_js_1.InvalidArgumentException('\"pointer\" origin is invalid for scrolling.');\n        }\n        const { targetX, targetY } = await this.#getCoordinateFromOrigin(origin, offsetX, offsetY, 0, 0);\n        if (targetX < 0 || targetY < 0) {\n            throw new protocol_js_1.MoveTargetOutOfBoundsException(`Cannot move beyond viewport (x: ${targetX}, y: ${targetY})`);\n        }\n        let currentDeltaX = 0;\n        let currentDeltaY = 0;\n        let last;\n        do {\n            const ratio = duration > 0 ? (performance.now() - this.#tickStart) / duration : 1;\n            last = ratio >= 1;\n            let deltaX;\n            let deltaY;\n            if (last) {\n                deltaX = targetDeltaX - currentDeltaX;\n                deltaY = targetDeltaY - currentDeltaY;\n            }\n            else {\n                deltaX = Math.round(ratio * targetDeltaX - currentDeltaX);\n                deltaY = Math.round(ratio * targetDeltaY - currentDeltaY);\n            }\n            if (deltaX !== 0 || deltaY !== 0) {\n                // --- Platform-specific code begins here ---\n                const { modifiers } = keyState;\n                await this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchMouseEvent', {\n                    type: 'mouseWheel',\n                    deltaX,\n                    deltaY,\n                    x: targetX,\n                    y: targetY,\n                    modifiers,\n                });\n                // --- Platform-specific code ends here ---\n                currentDeltaX += deltaX;\n                currentDeltaY += deltaY;\n            }\n        } while (!last);\n    }\n    async #dispatchKeyDownAction(source, action) {\n        const rawKey = action.value;\n        if (!(0, graphemeTools_js_1.isSingleGrapheme)(rawKey)) {\n            // https://w3c.github.io/webdriver/#dfn-process-a-key-action\n            // WebDriver spec allows a grapheme to be used.\n            throw new protocol_js_1.InvalidArgumentException(`Invalid key value: ${rawKey}`);\n        }\n        const isGrapheme = (0, graphemeTools_js_1.isSingleComplexGrapheme)(rawKey);\n        const key = (0, keyUtils_js_1.getNormalizedKey)(rawKey);\n        const repeat = source.pressed.has(key);\n        const code = (0, keyUtils_js_1.getKeyCode)(rawKey);\n        const location = (0, keyUtils_js_1.getKeyLocation)(rawKey);\n        switch (key) {\n            case 'Alt':\n                source.alt = true;\n                break;\n            case 'Shift':\n                source.shift = true;\n                break;\n            case 'Control':\n                source.ctrl = true;\n                break;\n            case 'Meta':\n                source.meta = true;\n                break;\n        }\n        source.pressed.add(key);\n        const { modifiers } = source;\n        // --- Platform-specific code begins here ---\n        // The spread is a little hack so JS gives us an array of unicode characters\n        // to measure.\n        const unmodifiedText = getKeyEventUnmodifiedText(key, source, isGrapheme);\n        const text = getKeyEventText(code ?? '', source) ?? unmodifiedText;\n        let command;\n        // The following commands need to be declared because Chromium doesn't\n        // handle them. See\n        // https://source.chromium.org/chromium/chromium/src/+/refs/heads/main:third_party/blink/renderer/core/editing/editing_behavior.cc;l=169;drc=b8143cf1dfd24842890fcd831c4f5d909bef4fc4;bpv=0;bpt=1.\n        if (this.#isMacOS && source.meta) {\n            switch (code) {\n                case 'KeyA':\n                    command = 'SelectAll';\n                    break;\n                case 'KeyC':\n                    command = 'Copy';\n                    break;\n                case 'KeyV':\n                    command = source.shift ? 'PasteAndMatchStyle' : 'Paste';\n                    break;\n                case 'KeyX':\n                    command = 'Cut';\n                    break;\n                case 'KeyZ':\n                    command = source.shift ? 'Redo' : 'Undo';\n                    break;\n                default:\n                // Intentionally empty.\n            }\n        }\n        const promises = [\n            this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchKeyEvent', {\n                type: text ? 'keyDown' : 'rawKeyDown',\n                windowsVirtualKeyCode: USKeyboardLayout_js_1.KeyToKeyCode[key],\n                key,\n                code,\n                text,\n                unmodifiedText,\n                autoRepeat: repeat,\n                isSystemKey: source.alt || undefined,\n                location: location < 3 ? location : undefined,\n                isKeypad: location === 3,\n                modifiers,\n                commands: command ? [command] : undefined,\n            }),\n        ];\n        // Drag cancelling happens on escape.\n        if (key === 'Escape') {\n            if (!source.alt &&\n                ((this.#isMacOS && !source.ctrl && !source.meta) || !this.#isMacOS)) {\n                promises.push(this.#context.cdpTarget.cdpClient.sendCommand('Input.cancelDragging'));\n            }\n        }\n        await Promise.all(promises);\n        // --- Platform-specific code ends here ---\n    }\n    #dispatchKeyUpAction(source, action) {\n        const rawKey = action.value;\n        if (!(0, graphemeTools_js_1.isSingleGrapheme)(rawKey)) {\n            // https://w3c.github.io/webdriver/#dfn-process-a-key-action\n            // WebDriver spec allows a grapheme to be used.\n            throw new protocol_js_1.InvalidArgumentException(`Invalid key value: ${rawKey}`);\n        }\n        const isGrapheme = (0, graphemeTools_js_1.isSingleComplexGrapheme)(rawKey);\n        const key = (0, keyUtils_js_1.getNormalizedKey)(rawKey);\n        if (!source.pressed.has(key)) {\n            return;\n        }\n        const code = (0, keyUtils_js_1.getKeyCode)(rawKey);\n        const location = (0, keyUtils_js_1.getKeyLocation)(rawKey);\n        switch (key) {\n            case 'Alt':\n                source.alt = false;\n                break;\n            case 'Shift':\n                source.shift = false;\n                break;\n            case 'Control':\n                source.ctrl = false;\n                break;\n            case 'Meta':\n                source.meta = false;\n                break;\n        }\n        source.pressed.delete(key);\n        const { modifiers } = source;\n        // --- Platform-specific code begins here ---\n        // The spread is a little hack so JS gives us an array of unicode characters\n        // to measure.\n        const unmodifiedText = getKeyEventUnmodifiedText(key, source, isGrapheme);\n        const text = getKeyEventText(code ?? '', source) ?? unmodifiedText;\n        return this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchKeyEvent', {\n            type: 'keyUp',\n            windowsVirtualKeyCode: USKeyboardLayout_js_1.KeyToKeyCode[key],\n            key,\n            code,\n            text,\n            unmodifiedText,\n            location: location < 3 ? location : undefined,\n            isSystemKey: source.alt || undefined,\n            isKeypad: location === 3,\n            modifiers,\n        });\n        // --- Platform-specific code ends here ---\n    }\n}\nexports.ActionDispatcher = ActionDispatcher;\n/**\n * Translates a non-grapheme key to either an `undefined` for a special keys, or a single\n * character modified by shift if needed.\n */\nconst getKeyEventUnmodifiedText = (key, source, isGrapheme) => {\n    if (isGrapheme) {\n        // Graphemes should be presented as text in the CDP command.\n        return key;\n    }\n    if (key === 'Enter') {\n        return '\\r';\n    }\n    // If key is not a single character, it is a normalized key value, and should be\n    // presented as key, not text in the CDP command.\n    return [...key].length === 1\n        ? source.shift\n            ? key.toLocaleUpperCase('en-US')\n            : key\n        : undefined;\n};\nconst getKeyEventText = (code, source) => {\n    if (source.ctrl) {\n        switch (code) {\n            case 'Digit2':\n                if (source.shift) {\n                    return '\\x00';\n                }\n                break;\n            case 'KeyA':\n                return '\\x01';\n            case 'KeyB':\n                return '\\x02';\n            case 'KeyC':\n                return '\\x03';\n            case 'KeyD':\n                return '\\x04';\n            case 'KeyE':\n                return '\\x05';\n            case 'KeyF':\n                return '\\x06';\n            case 'KeyG':\n                return '\\x07';\n            case 'KeyH':\n                return '\\x08';\n            case 'KeyI':\n                return '\\x09';\n            case 'KeyJ':\n                return '\\x0A';\n            case 'KeyK':\n                return '\\x0B';\n            case 'KeyL':\n                return '\\x0C';\n            case 'KeyM':\n                return '\\x0D';\n            case 'KeyN':\n                return '\\x0E';\n            case 'KeyO':\n                return '\\x0F';\n            case 'KeyP':\n                return '\\x10';\n            case 'KeyQ':\n                return '\\x11';\n            case 'KeyR':\n                return '\\x12';\n            case 'KeyS':\n                return '\\x13';\n            case 'KeyT':\n                return '\\x14';\n            case 'KeyU':\n                return '\\x15';\n            case 'KeyV':\n                return '\\x16';\n            case 'KeyW':\n                return '\\x17';\n            case 'KeyX':\n                return '\\x18';\n            case 'KeyY':\n                return '\\x19';\n            case 'KeyZ':\n                return '\\x1A';\n            case 'BracketLeft':\n                return '\\x1B';\n            case 'Backslash':\n                return '\\x1C';\n            case 'BracketRight':\n                return '\\x1D';\n            case 'Digit6':\n                if (source.shift) {\n                    return '\\x1E';\n                }\n                break;\n            case 'Minus':\n                return '\\x1F';\n        }\n        return '';\n    }\n    if (source.alt) {\n        return '';\n    }\n    return;\n};\nfunction getCdpButton(button) {\n    // https://www.w3.org/TR/pointerevents/#the-button-property\n    switch (button) {\n        case 0:\n            return 'left';\n        case 1:\n            return 'middle';\n        case 2:\n            return 'right';\n        case 3:\n            return 'back';\n        case 4:\n            return 'forward';\n        default:\n            return 'none';\n    }\n}\nfunction getTilt(action) {\n    // https://w3c.github.io/pointerevents/#converting-between-tiltx-tilty-and-altitudeangle-azimuthangle\n    const altitudeAngle = action.altitudeAngle ?? Math.PI / 2;\n    const azimuthAngle = action.azimuthAngle ?? 0;\n    let tiltXRadians = 0;\n    let tiltYRadians = 0;\n    if (altitudeAngle === 0) {\n        // the pen is in the X-Y plane\n        if (azimuthAngle === 0 || azimuthAngle === 2 * Math.PI) {\n            // pen is on positive X axis\n            tiltXRadians = Math.PI / 2;\n        }\n        if (azimuthAngle === Math.PI / 2) {\n            // pen is on positive Y axis\n            tiltYRadians = Math.PI / 2;\n        }\n        if (azimuthAngle === Math.PI) {\n            // pen is on negative X axis\n            tiltXRadians = -Math.PI / 2;\n        }\n        if (azimuthAngle === (3 * Math.PI) / 2) {\n            // pen is on negative Y axis\n            tiltYRadians = -Math.PI / 2;\n        }\n        if (azimuthAngle > 0 && azimuthAngle < Math.PI / 2) {\n            tiltXRadians = Math.PI / 2;\n            tiltYRadians = Math.PI / 2;\n        }\n        if (azimuthAngle > Math.PI / 2 && azimuthAngle < Math.PI) {\n            tiltXRadians = -Math.PI / 2;\n            tiltYRadians = Math.PI / 2;\n        }\n        if (azimuthAngle > Math.PI && azimuthAngle < (3 * Math.PI) / 2) {\n            tiltXRadians = -Math.PI / 2;\n            tiltYRadians = -Math.PI / 2;\n        }\n        if (azimuthAngle > (3 * Math.PI) / 2 && azimuthAngle < 2 * Math.PI) {\n            tiltXRadians = Math.PI / 2;\n            tiltYRadians = -Math.PI / 2;\n        }\n    }\n    if (altitudeAngle !== 0) {\n        const tanAlt = Math.tan(altitudeAngle);\n        tiltXRadians = Math.atan(Math.cos(azimuthAngle) / tanAlt);\n        tiltYRadians = Math.atan(Math.sin(azimuthAngle) / tanAlt);\n    }\n    const factor = 180 / Math.PI;\n    return {\n        tiltX: Math.round(tiltXRadians * factor),\n        tiltY: Math.round(tiltYRadians * factor),\n    };\n}\nfunction getRadii(width, height) {\n    return {\n        radiusX: width ? width / 2 : 0.5,\n        radiusY: height ? height / 2 : 0.5,\n    };\n}\n//# sourceMappingURL=ActionDispatcher.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n * Copyright 2022 The Chromium Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Mutex = void 0;\n/**\n * Use Mutex class to coordinate local concurrent operations.\n * Once `acquire` promise resolves, you hold the lock and must\n * call `release` function returned by `acquire` to release the\n * lock. Failing to `release` the lock may lead to deadlocks.\n */\nclass Mutex {\n    #locked = false;\n    #acquirers = [];\n    // This is FIFO.\n    acquire() {\n        const state = { resolved: false };\n        if (this.#locked) {\n            return new Promise((resolve) => {\n                this.#acquirers.push(() => resolve(this.#release.bind(this, state)));\n            });\n        }\n        this.#locked = true;\n        return Promise.resolve(this.#release.bind(this, state));\n    }\n    #release(state) {\n        if (state.resolved) {\n            throw new Error('Cannot release more than once.');\n        }\n        state.resolved = true;\n        const resolve = this.#acquirers.shift();\n        if (!resolve) {\n            this.#locked = false;\n            return;\n        }\n        resolve();\n    }\n    async run(action) {\n        const release = await this.acquire();\n        try {\n            // Note we need to await here because we want the await to release AFTER\n            // that await happens. Returning action() will trigger the release\n            // immediately which is counter to what we want.\n            const result = await action();\n            return result;\n        }\n        finally {\n            release();\n        }\n    }\n}\nexports.Mutex = Mutex;\n//# sourceMappingURL=Mutex.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InputState = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst Mutex_js_1 = require(\"../../../utils/Mutex.js\");\nconst InputSource_js_1 = require(\"./InputSource.js\");\nclass InputState {\n    cancelList = [];\n    #sources = new Map();\n    #mutex = new Mutex_js_1.Mutex();\n    getOrCreate(id, type, subtype) {\n        let source = this.#sources.get(id);\n        if (!source) {\n            switch (type) {\n                case \"none\" /* SourceType.None */:\n                    source = new InputSource_js_1.NoneSource();\n                    break;\n                case \"key\" /* SourceType.Key */:\n                    source = new InputSource_js_1.KeySource();\n                    break;\n                case \"pointer\" /* SourceType.Pointer */: {\n                    let pointerId = subtype === \"mouse\" /* Input.PointerType.Mouse */ ? 0 : 2;\n                    const pointerIds = new Set();\n                    for (const [, source] of this.#sources) {\n                        if (source.type === \"pointer\" /* SourceType.Pointer */) {\n                            pointerIds.add(source.pointerId);\n                        }\n                    }\n                    while (pointerIds.has(pointerId)) {\n                        ++pointerId;\n                    }\n                    source = new InputSource_js_1.PointerSource(pointerId, subtype);\n                    break;\n                }\n                case \"wheel\" /* SourceType.Wheel */:\n                    source = new InputSource_js_1.WheelSource();\n                    break;\n                default:\n                    throw new protocol_js_1.InvalidArgumentException(`Expected \"${\"none\" /* SourceType.None */}\", \"${\"key\" /* SourceType.Key */}\", \"${\"pointer\" /* SourceType.Pointer */}\", or \"${\"wheel\" /* SourceType.Wheel */}\". Found unknown source type ${type}.`);\n            }\n            this.#sources.set(id, source);\n            return source;\n        }\n        if (source.type !== type) {\n            throw new protocol_js_1.InvalidArgumentException(`Input source type of ${id} is ${source.type}, but received ${type}.`);\n        }\n        return source;\n    }\n    get(id) {\n        const source = this.#sources.get(id);\n        if (!source) {\n            throw new protocol_js_1.UnknownErrorException(`Internal error.`);\n        }\n        return source;\n    }\n    getGlobalKeyState() {\n        const state = new InputSource_js_1.KeySource();\n        for (const [, source] of this.#sources) {\n            if (source.type !== \"key\" /* SourceType.Key */) {\n                continue;\n            }\n            for (const pressed of source.pressed) {\n                state.pressed.add(pressed);\n            }\n            state.alt ||= source.alt;\n            state.ctrl ||= source.ctrl;\n            state.meta ||= source.meta;\n            state.shift ||= source.shift;\n        }\n        return state;\n    }\n    get queue() {\n        return this.#mutex;\n    }\n}\nexports.InputState = InputState;\n//# sourceMappingURL=InputState.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InputStateManager = void 0;\nconst assert_js_1 = require(\"../../../utils/assert.js\");\nconst InputState_js_1 = require(\"./InputState.js\");\n// We use a weak map here as specified here:\n// https://www.w3.org/TR/webdriver/#dfn-browsing-context-input-state-map\nclass InputStateManager extends WeakMap {\n    get(context) {\n        (0, assert_js_1.assert)(context.isTopLevelContext());\n        if (!this.has(context)) {\n            this.set(context, new InputState_js_1.InputState());\n        }\n        return super.get(context);\n    }\n}\nexports.InputStateManager = InputStateManager;\n//# sourceMappingURL=InputStateManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InputProcessor = void 0;\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst assert_js_1 = require(\"../../../utils/assert.js\");\nconst ActionDispatcher_js_1 = require(\"../input/ActionDispatcher.js\");\nconst InputStateManager_js_1 = require(\"../input/InputStateManager.js\");\nclass InputProcessor {\n    #browsingContextStorage;\n    #inputStateManager = new InputStateManager_js_1.InputStateManager();\n    constructor(browsingContextStorage) {\n        this.#browsingContextStorage = browsingContextStorage;\n    }\n    async performActions(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        const inputState = this.#inputStateManager.get(context.top);\n        const actionsByTick = this.#getActionsByTick(params, inputState);\n        const dispatcher = new ActionDispatcher_js_1.ActionDispatcher(inputState, this.#browsingContextStorage, params.context, await ActionDispatcher_js_1.ActionDispatcher.isMacOS(context).catch(() => false));\n        await dispatcher.dispatchActions(actionsByTick);\n        return {};\n    }\n    async releaseActions(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        const topContext = context.top;\n        const inputState = this.#inputStateManager.get(topContext);\n        const dispatcher = new ActionDispatcher_js_1.ActionDispatcher(inputState, this.#browsingContextStorage, params.context, await ActionDispatcher_js_1.ActionDispatcher.isMacOS(context).catch(() => false));\n        await dispatcher.dispatchTickActions(inputState.cancelList.reverse());\n        this.#inputStateManager.delete(topContext);\n        return {};\n    }\n    async setFiles(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        const hiddenSandboxRealm = await context.getOrCreateHiddenSandbox();\n        let result;\n        try {\n            result = await hiddenSandboxRealm.callFunction(String(function getFiles(fileListLength) {\n                if (!(this instanceof HTMLInputElement)) {\n                    if (this instanceof Element) {\n                        return 1 /* ErrorCode.Element */;\n                    }\n                    return 0 /* ErrorCode.Node */;\n                }\n                if (this.type !== 'file') {\n                    return 2 /* ErrorCode.Type */;\n                }\n                if (this.disabled) {\n                    return 3 /* ErrorCode.Disabled */;\n                }\n                if (fileListLength > 1 && !this.multiple) {\n                    return 4 /* ErrorCode.Multiple */;\n                }\n                return;\n            }), false, params.element, [{ type: 'number', value: params.files.length }]);\n        }\n        catch {\n            throw new protocol_js_1.NoSuchNodeException(`Could not find element ${params.element.sharedId}`);\n        }\n        (0, assert_js_1.assert)(result.type === 'success');\n        if (result.result.type === 'number') {\n            switch (result.result.value) {\n                case 0 /* ErrorCode.Node */: {\n                    throw new protocol_js_1.NoSuchElementException(`Could not find element ${params.element.sharedId}`);\n                }\n                case 1 /* ErrorCode.Element */: {\n                    throw new protocol_js_1.UnableToSetFileInputException(`Element ${params.element.sharedId} is not a input`);\n                }\n                case 2 /* ErrorCode.Type */: {\n                    throw new protocol_js_1.UnableToSetFileInputException(`Input element ${params.element.sharedId} is not a file type`);\n                }\n                case 3 /* ErrorCode.Disabled */: {\n                    throw new protocol_js_1.UnableToSetFileInputException(`Input element ${params.element.sharedId} is disabled`);\n                }\n                case 4 /* ErrorCode.Multiple */: {\n                    throw new protocol_js_1.UnableToSetFileInputException(`Cannot set multiple files on a non-multiple input element`);\n                }\n            }\n        }\n        /**\n         * The zero-length array is a special case, it seems that\n         * DOM.setFileInputFiles does not actually update the files in that case, so\n         * the solution is to eval the element value to a new FileList directly.\n         */\n        if (params.files.length === 0) {\n            // XXX: These events should converted to trusted events. Perhaps do this\n            // in `DOM.setFileInputFiles`?\n            await hiddenSandboxRealm.callFunction(String(function dispatchEvent() {\n                if (this.files?.length === 0) {\n                    this.dispatchEvent(new Event('cancel', {\n                        bubbles: true,\n                    }));\n                    return;\n                }\n                this.files = new DataTransfer().files;\n                // Dispatch events for this case because it should behave akin to a user action.\n                this.dispatchEvent(new Event('input', { bubbles: true, composed: true }));\n                this.dispatchEvent(new Event('change', { bubbles: true }));\n            }), false, params.element);\n            return {};\n        }\n        // Our goal here is to iterate over the input element files and get their\n        // file paths.\n        const paths = [];\n        for (let i = 0; i < params.files.length; ++i) {\n            const result = await hiddenSandboxRealm.callFunction(String(function getFiles(index) {\n                return this.files?.item(index);\n            }), false, params.element, [{ type: 'number', value: 0 }], \"root\" /* Script.ResultOwnership.Root */);\n            (0, assert_js_1.assert)(result.type === 'success');\n            if (result.result.type !== 'object') {\n                break;\n            }\n            const { handle } = result.result;\n            (0, assert_js_1.assert)(handle !== undefined);\n            const { path } = await hiddenSandboxRealm.cdpClient.sendCommand('DOM.getFileInfo', {\n                objectId: handle,\n            });\n            paths.push(path);\n            // Cleanup the handle.\n            void hiddenSandboxRealm.disown(handle).catch(undefined);\n        }\n        paths.sort();\n        // We create a new array so we preserve the order of the original files.\n        const sortedFiles = [...params.files].sort();\n        if (paths.length !== params.files.length ||\n            sortedFiles.some((path, index) => {\n                return paths[index] !== path;\n            })) {\n            const { objectId } = await hiddenSandboxRealm.deserializeForCdp(params.element);\n            // This cannot throw since this was just used in `callFunction` above.\n            (0, assert_js_1.assert)(objectId !== undefined);\n            await hiddenSandboxRealm.cdpClient.sendCommand('DOM.setFileInputFiles', {\n                files: params.files,\n                objectId,\n            });\n        }\n        else {\n            // XXX: We should dispatch a trusted event.\n            await hiddenSandboxRealm.callFunction(String(function dispatchEvent() {\n                this.dispatchEvent(new Event('cancel', {\n                    bubbles: true,\n                }));\n            }), false, params.element);\n        }\n        return {};\n    }\n    #getActionsByTick(params, inputState) {\n        const actionsByTick = [];\n        for (const action of params.actions) {\n            switch (action.type) {\n                case \"pointer\" /* SourceType.Pointer */: {\n                    action.parameters ??= { pointerType: \"mouse\" /* Input.PointerType.Mouse */ };\n                    action.parameters.pointerType ??= \"mouse\" /* Input.PointerType.Mouse */;\n                    const source = inputState.getOrCreate(action.id, \"pointer\" /* SourceType.Pointer */, action.parameters.pointerType);\n                    if (source.subtype !== action.parameters.pointerType) {\n                        throw new protocol_js_1.InvalidArgumentException(`Expected input source ${action.id} to be ${source.subtype}; got ${action.parameters.pointerType}.`);\n                    }\n                    // https://github.com/GoogleChromeLabs/chromium-bidi/issues/3043\n                    source.resetClickCount();\n                    break;\n                }\n                default:\n                    inputState.getOrCreate(action.id, action.type);\n            }\n            const actions = action.actions.map((item) => ({\n                id: action.id,\n                action: item,\n            }));\n            for (let i = 0; i < actions.length; i++) {\n                if (actionsByTick.length === i) {\n                    actionsByTick.push([]);\n                }\n                actionsByTick[i].push(actions[i]);\n            }\n        }\n        return actionsByTick;\n    }\n}\nexports.InputProcessor = InputProcessor;\n//# sourceMappingURL=InputProcessor.js.map","\"use strict\";\n/**\n * Copyright 2024 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.base64ToString = base64ToString;\n/**\n * Encodes a string to base64.\n *\n * Uses the native Web API if available, otherwise falls back to a NodeJS Buffer.\n * @param {string} base64Str\n * @return {string}\n */\nfunction base64ToString(base64Str) {\n    // Available only if run in a browser context.\n    if ('atob' in globalThis) {\n        return globalThis.atob(base64Str);\n    }\n    // Available only if run in a NodeJS context.\n    return Buffer.from(base64Str, 'base64').toString('ascii');\n}\n//# sourceMappingURL=base64.js.map","\"use strict\";\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.computeHeadersSize = computeHeadersSize;\nexports.stringToBase64 = stringToBase64;\nexports.bidiNetworkHeadersFromCdpNetworkHeaders = bidiNetworkHeadersFromCdpNetworkHeaders;\nexports.bidiNetworkHeadersFromCdpNetworkHeadersEntries = bidiNetworkHeadersFromCdpNetworkHeadersEntries;\nexports.cdpNetworkHeadersFromBidiNetworkHeaders = cdpNetworkHeadersFromBidiNetworkHeaders;\nexports.bidiNetworkHeadersFromCdpFetchHeaders = bidiNetworkHeadersFromCdpFetchHeaders;\nexports.cdpFetchHeadersFromBidiNetworkHeaders = cdpFetchHeadersFromBidiNetworkHeaders;\nexports.networkHeaderFromCookieHeaders = networkHeaderFromCookieHeaders;\nexports.cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction = cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction;\nexports.cdpToBiDiCookie = cdpToBiDiCookie;\nexports.deserializeByteValue = deserializeByteValue;\nexports.bidiToCdpCookie = bidiToCdpCookie;\nexports.sameSiteBiDiToCdp = sameSiteBiDiToCdp;\nexports.isSpecialScheme = isSpecialScheme;\nexports.matchUrlPattern = matchUrlPattern;\nexports.bidiBodySizeFromCdpPostDataEntries = bidiBodySizeFromCdpPostDataEntries;\nexports.getTiming = getTiming;\nconst ErrorResponse_js_1 = require(\"../../../protocol/ErrorResponse.js\");\nconst base64_js_1 = require(\"../../../utils/base64.js\");\nfunction computeHeadersSize(headers) {\n    const requestHeaders = headers.reduce((acc, header) => {\n        return `${acc}${header.name}: ${header.value.value}\\r\\n`;\n    }, '');\n    return new TextEncoder().encode(requestHeaders).length;\n}\nfunction stringToBase64(str) {\n    return typedArrayToBase64(new TextEncoder().encode(str));\n}\nfunction typedArrayToBase64(typedArray) {\n    // chunkSize should be less V8 limit on number of arguments!\n    // https://github.com/v8/v8/blob/d3de848bea727518aee94dd2fd42ba0b62037a27/src/objects/code.h#L444\n    const chunkSize = 65534;\n    const chunks = [];\n    for (let i = 0; i < typedArray.length; i += chunkSize) {\n        const chunk = typedArray.subarray(i, i + chunkSize);\n        chunks.push(String.fromCodePoint.apply(null, chunk));\n    }\n    const binaryString = chunks.join('');\n    return btoa(binaryString);\n}\n/** Converts from CDP Network domain headers to BiDi network headers. */\nfunction bidiNetworkHeadersFromCdpNetworkHeaders(headers) {\n    if (!headers) {\n        return [];\n    }\n    return Object.entries(headers).map(([name, value]) => ({\n        name,\n        value: {\n            type: 'string',\n            value,\n        },\n    }));\n}\n/** Converts from CDP Fetch domain headers to BiDi network headers. */\nfunction bidiNetworkHeadersFromCdpNetworkHeadersEntries(headers) {\n    if (!headers) {\n        return [];\n    }\n    return headers.map(({ name, value }) => ({\n        name,\n        value: {\n            type: 'string',\n            value,\n        },\n    }));\n}\n/** Converts from Bidi network headers to CDP Network domain headers. */\nfunction cdpNetworkHeadersFromBidiNetworkHeaders(headers) {\n    if (headers === undefined) {\n        return undefined;\n    }\n    return headers.reduce((result, header) => {\n        // TODO: Distinguish between string and bytes?\n        result[header.name] = header.value.value;\n        return result;\n    }, {});\n}\n/** Converts from CDP Fetch domain header entries to Bidi network headers. */\nfunction bidiNetworkHeadersFromCdpFetchHeaders(headers) {\n    if (!headers) {\n        return [];\n    }\n    return headers.map(({ name, value }) => ({\n        name,\n        value: {\n            type: 'string',\n            value,\n        },\n    }));\n}\n/** Converts from Bidi network headers to CDP Fetch domain header entries. */\nfunction cdpFetchHeadersFromBidiNetworkHeaders(headers) {\n    if (headers === undefined) {\n        return undefined;\n    }\n    return headers.map(({ name, value }) => ({\n        name,\n        value: value.value,\n    }));\n}\nfunction networkHeaderFromCookieHeaders(headers) {\n    if (headers === undefined) {\n        return undefined;\n    }\n    const value = headers.reduce((acc, value, index) => {\n        if (index > 0) {\n            acc += ';';\n        }\n        const cookieValue = value.value.type === 'base64'\n            ? btoa(value.value.value)\n            : value.value.value;\n        acc += `${value.name}=${cookieValue}`;\n        return acc;\n    }, '');\n    return {\n        name: 'Cookie',\n        value: {\n            type: 'string',\n            value,\n        },\n    };\n}\n/** Converts from Bidi auth action to CDP auth challenge response. */\nfunction cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction(action) {\n    switch (action) {\n        case 'default':\n            return 'Default';\n        case 'cancel':\n            return 'CancelAuth';\n        case 'provideCredentials':\n            return 'ProvideCredentials';\n    }\n}\n/**\n * Converts from CDP Network domain cookie to BiDi network cookie.\n * * https://chromedevtools.github.io/devtools-protocol/tot/Network/#type-Cookie\n * * https://w3c.github.io/webdriver-bidi/#type-network-Cookie\n */\nfunction cdpToBiDiCookie(cookie) {\n    const result = {\n        name: cookie.name,\n        value: { type: 'string', value: cookie.value },\n        domain: cookie.domain,\n        path: cookie.path,\n        size: cookie.size,\n        httpOnly: cookie.httpOnly,\n        secure: cookie.secure,\n        sameSite: cookie.sameSite === undefined\n            ? \"none\" /* Network.SameSite.None */\n            : sameSiteCdpToBiDi(cookie.sameSite),\n        ...(cookie.expires >= 0 ? { expiry: cookie.expires } : undefined),\n    };\n    // Extending with CDP-specific properties with `goog:` prefix.\n    result[`goog:session`] = cookie.session;\n    result[`goog:priority`] = cookie.priority;\n    result[`goog:sameParty`] = cookie.sameParty;\n    result[`goog:sourceScheme`] = cookie.sourceScheme;\n    result[`goog:sourcePort`] = cookie.sourcePort;\n    if (cookie.partitionKey !== undefined) {\n        result[`goog:partitionKey`] = cookie.partitionKey;\n    }\n    if (cookie.partitionKeyOpaque !== undefined) {\n        result[`goog:partitionKeyOpaque`] = cookie.partitionKeyOpaque;\n    }\n    return result;\n}\n/**\n * Decodes a byte value to a string.\n * @param {Network.BytesValue} value\n * @return {string}\n */\nfunction deserializeByteValue(value) {\n    if (value.type === 'base64') {\n        return (0, base64_js_1.base64ToString)(value.value);\n    }\n    return value.value;\n}\n/**\n * Converts from BiDi set network cookie params to CDP Network domain cookie.\n * * https://w3c.github.io/webdriver-bidi/#type-network-Cookie\n * * https://chromedevtools.github.io/devtools-protocol/tot/Network/#type-CookieParam\n */\nfunction bidiToCdpCookie(params, partitionKey) {\n    const deserializedValue = deserializeByteValue(params.cookie.value);\n    const result = {\n        name: params.cookie.name,\n        value: deserializedValue,\n        domain: params.cookie.domain,\n        path: params.cookie.path ?? '/',\n        secure: params.cookie.secure ?? false,\n        httpOnly: params.cookie.httpOnly ?? false,\n        ...(partitionKey.sourceOrigin !== undefined && {\n            partitionKey: {\n                hasCrossSiteAncestor: false,\n                // CDP's `partitionKey.topLevelSite` is the BiDi's `partition.sourceOrigin`.\n                topLevelSite: partitionKey.sourceOrigin,\n            },\n        }),\n        ...(params.cookie.expiry !== undefined && {\n            expires: params.cookie.expiry,\n        }),\n        ...(params.cookie.sameSite !== undefined && {\n            sameSite: sameSiteBiDiToCdp(params.cookie.sameSite),\n        }),\n    };\n    // Extending with CDP-specific properties with `goog:` prefix.\n    if (params.cookie[`goog:url`] !== undefined) {\n        result.url = params.cookie[`goog:url`];\n    }\n    if (params.cookie[`goog:priority`] !== undefined) {\n        result.priority = params.cookie[`goog:priority`];\n    }\n    if (params.cookie[`goog:sameParty`] !== undefined) {\n        result.sameParty = params.cookie[`goog:sameParty`];\n    }\n    if (params.cookie[`goog:sourceScheme`] !== undefined) {\n        result.sourceScheme = params.cookie[`goog:sourceScheme`];\n    }\n    if (params.cookie[`goog:sourcePort`] !== undefined) {\n        result.sourcePort = params.cookie[`goog:sourcePort`];\n    }\n    return result;\n}\nfunction sameSiteCdpToBiDi(sameSite) {\n    switch (sameSite) {\n        case 'Strict':\n            return \"strict\" /* Network.SameSite.Strict */;\n        case 'None':\n            return \"none\" /* Network.SameSite.None */;\n        case 'Lax':\n            return \"lax\" /* Network.SameSite.Lax */;\n        default:\n            // Defaults to `Lax`:\n            // https://web.dev/articles/samesite-cookies-explained#samesitelax_by_default\n            return \"lax\" /* Network.SameSite.Lax */;\n    }\n}\nfunction sameSiteBiDiToCdp(sameSite) {\n    switch (sameSite) {\n        case \"none\" /* Network.SameSite.None */:\n            return 'None';\n        case \"strict\" /* Network.SameSite.Strict */:\n            return 'Strict';\n        // Defaults to `Lax`:\n        // https://web.dev/articles/samesite-cookies-explained#samesitelax_by_default\n        case \"default\" /* Network.SameSite.Default */:\n        case \"lax\" /* Network.SameSite.Lax */:\n            return 'Lax';\n    }\n    throw new ErrorResponse_js_1.InvalidArgumentException(`Unknown 'sameSite' value ${sameSite}`);\n}\n/**\n * Returns true if the given protocol is special.\n * Special protocols are those that have a default port.\n *\n * Example inputs: 'http', 'http:'\n *\n * @see https://url.spec.whatwg.org/#special-scheme\n */\nfunction isSpecialScheme(protocol) {\n    return ['ftp', 'file', 'http', 'https', 'ws', 'wss'].includes(protocol.replace(/:$/, ''));\n}\nfunction getScheme(url) {\n    return url.protocol.replace(/:$/, '');\n}\n/** Matches the given URLPattern against the given URL. */\nfunction matchUrlPattern(pattern, url) {\n    // Roughly https://w3c.github.io/webdriver-bidi/#match-url-pattern\n    // plus some differences based on the URL parsing methods.\n    const parsedUrl = new URL(url);\n    if (pattern.protocol !== undefined &&\n        pattern.protocol !== getScheme(parsedUrl)) {\n        return false;\n    }\n    if (pattern.hostname !== undefined &&\n        pattern.hostname !== parsedUrl.hostname) {\n        return false;\n    }\n    if (pattern.port !== undefined && pattern.port !== parsedUrl.port) {\n        return false;\n    }\n    if (pattern.pathname !== undefined &&\n        pattern.pathname !== parsedUrl.pathname) {\n        return false;\n    }\n    if (pattern.search !== undefined && pattern.search !== parsedUrl.search) {\n        return false;\n    }\n    return true;\n}\nfunction bidiBodySizeFromCdpPostDataEntries(entries) {\n    let size = 0;\n    for (const entry of entries) {\n        size += atob(entry.bytes ?? '').length;\n    }\n    return size;\n}\nfunction getTiming(timing, offset = 0) {\n    if (!timing) {\n        return 0;\n    }\n    if (timing <= 0 || timing + offset <= 0) {\n        return 0;\n    }\n    return timing + offset;\n}\n//# sourceMappingURL=NetworkUtils.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst NetworkUtils_js_1 = require(\"./NetworkUtils.js\");\n/** Dispatches Network module commands. */\nclass NetworkProcessor {\n    #browsingContextStorage;\n    #networkStorage;\n    #userContextStorage;\n    constructor(browsingContextStorage, networkStorage, userContextStorage) {\n        this.#userContextStorage = userContextStorage;\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#networkStorage = networkStorage;\n    }\n    async addIntercept(params) {\n        this.#browsingContextStorage.verifyTopLevelContextsList(params.contexts);\n        const urlPatterns = params.urlPatterns ?? [];\n        const parsedUrlPatterns = NetworkProcessor.parseUrlPatterns(urlPatterns);\n        const intercept = this.#networkStorage.addIntercept({\n            urlPatterns: parsedUrlPatterns,\n            phases: params.phases,\n            contexts: params.contexts,\n        });\n        // Adding interception may require enabling CDP Network domains.\n        await this.#toggleNetwork();\n        return {\n            intercept,\n        };\n    }\n    async continueRequest(params) {\n        if (params.url !== undefined) {\n            NetworkProcessor.parseUrlString(params.url);\n        }\n        if (params.method !== undefined) {\n            if (!NetworkProcessor.isMethodValid(params.method)) {\n                throw new protocol_js_1.InvalidArgumentException(`Method '${params.method}' is invalid.`);\n            }\n        }\n        if (params.headers) {\n            NetworkProcessor.validateHeaders(params.headers);\n        }\n        const request = this.#getBlockedRequestOrFail(params.request, [\n            \"beforeRequestSent\" /* Network.InterceptPhase.BeforeRequestSent */,\n        ]);\n        try {\n            await request.continueRequest(params);\n        }\n        catch (error) {\n            throw NetworkProcessor.wrapInterceptionError(error);\n        }\n        return {};\n    }\n    async continueResponse(params) {\n        if (params.headers) {\n            NetworkProcessor.validateHeaders(params.headers);\n        }\n        const request = this.#getBlockedRequestOrFail(params.request, [\n            \"authRequired\" /* Network.InterceptPhase.AuthRequired */,\n            \"responseStarted\" /* Network.InterceptPhase.ResponseStarted */,\n        ]);\n        try {\n            await request.continueResponse(params);\n        }\n        catch (error) {\n            throw NetworkProcessor.wrapInterceptionError(error);\n        }\n        return {};\n    }\n    async continueWithAuth(params) {\n        const networkId = params.request;\n        const request = this.#getBlockedRequestOrFail(networkId, [\n            \"authRequired\" /* Network.InterceptPhase.AuthRequired */,\n        ]);\n        await request.continueWithAuth(params);\n        return {};\n    }\n    async failRequest({ request: networkId, }) {\n        const request = this.#getRequestOrFail(networkId);\n        if (request.interceptPhase === \"authRequired\" /* Network.InterceptPhase.AuthRequired */) {\n            throw new protocol_js_1.InvalidArgumentException(`Request '${networkId}' in 'authRequired' phase cannot be failed`);\n        }\n        if (!request.interceptPhase) {\n            throw new protocol_js_1.NoSuchRequestException(`No blocked request found for network id '${networkId}'`);\n        }\n        await request.failRequest('Failed');\n        return {};\n    }\n    async provideResponse(params) {\n        if (params.headers) {\n            NetworkProcessor.validateHeaders(params.headers);\n        }\n        const request = this.#getBlockedRequestOrFail(params.request, [\n            \"beforeRequestSent\" /* Network.InterceptPhase.BeforeRequestSent */,\n            \"responseStarted\" /* Network.InterceptPhase.ResponseStarted */,\n            \"authRequired\" /* Network.InterceptPhase.AuthRequired */,\n        ]);\n        try {\n            await request.provideResponse(params);\n        }\n        catch (error) {\n            throw NetworkProcessor.wrapInterceptionError(error);\n        }\n        return {};\n    }\n    /**\n     * In some states CDP Network and Fetch domains are not required, but in some they have\n     * to be updated. Whenever potential change in these kinds of states is introduced,\n     * update the states of all the CDP targets.\n     */\n    async #toggleNetwork() {\n        await Promise.all(this.#browsingContextStorage.getAllContexts().map((context) => {\n            return context.cdpTarget.toggleNetwork();\n        }));\n    }\n    async removeIntercept(params) {\n        this.#networkStorage.removeIntercept(params.intercept);\n        // Removing interception may allow for disabling CDP Network domains.\n        await this.#toggleNetwork();\n        return {};\n    }\n    async setCacheBehavior(params) {\n        const contexts = this.#browsingContextStorage.verifyTopLevelContextsList(params.contexts);\n        // Change all targets\n        if (contexts.size === 0) {\n            this.#networkStorage.defaultCacheBehavior = params.cacheBehavior;\n            await Promise.all(this.#browsingContextStorage.getAllContexts().map((context) => {\n                return context.cdpTarget.toggleSetCacheDisabled();\n            }));\n            return {};\n        }\n        const cacheDisabled = params.cacheBehavior === 'bypass';\n        await Promise.all([...contexts.values()].map((context) => {\n            return context.cdpTarget.toggleSetCacheDisabled(cacheDisabled);\n        }));\n        return {};\n    }\n    #getRequestOrFail(id) {\n        const request = this.#networkStorage.getRequestById(id);\n        if (!request) {\n            throw new protocol_js_1.NoSuchRequestException(`Network request with ID '${id}' doesn't exist`);\n        }\n        return request;\n    }\n    #getBlockedRequestOrFail(id, phases) {\n        const request = this.#getRequestOrFail(id);\n        if (!request.interceptPhase) {\n            throw new protocol_js_1.NoSuchRequestException(`No blocked request found for network id '${id}'`);\n        }\n        if (request.interceptPhase && !phases.includes(request.interceptPhase)) {\n            throw new protocol_js_1.InvalidArgumentException(`Blocked request for network id '${id}' is in '${request.interceptPhase}' phase`);\n        }\n        return request;\n    }\n    /**\n     * Validate https://fetch.spec.whatwg.org/#header-value\n     */\n    static validateHeaders(headers) {\n        for (const header of headers) {\n            let headerValue;\n            if (header.value.type === 'string') {\n                headerValue = header.value.value;\n            }\n            else {\n                headerValue = atob(header.value.value);\n            }\n            if (headerValue !== headerValue.trim() ||\n                headerValue.includes('\\n') ||\n                headerValue.includes('\\0')) {\n                throw new protocol_js_1.InvalidArgumentException(`Header value '${headerValue}' is not acceptable value`);\n            }\n        }\n    }\n    static isMethodValid(method) {\n        // https://httpwg.org/specs/rfc9110.html#method.overview\n        return /^[!#$%&'*+\\-.^_`|~a-zA-Z\\d]+$/.test(method);\n    }\n    /**\n     * Attempts to parse the given url.\n     * Throws an InvalidArgumentException if the url is invalid.\n     */\n    static parseUrlString(url) {\n        try {\n            return new URL(url);\n        }\n        catch (error) {\n            throw new protocol_js_1.InvalidArgumentException(`Invalid URL '${url}': ${error}`);\n        }\n    }\n    static parseUrlPatterns(urlPatterns) {\n        return urlPatterns.map((urlPattern) => {\n            let patternUrl = '';\n            let hasProtocol = true;\n            let hasHostname = true;\n            let hasPort = true;\n            let hasPathname = true;\n            let hasSearch = true;\n            switch (urlPattern.type) {\n                case 'string': {\n                    patternUrl = unescapeURLPattern(urlPattern.pattern);\n                    break;\n                }\n                case 'pattern': {\n                    if (urlPattern.protocol === undefined) {\n                        hasProtocol = false;\n                        patternUrl += 'http';\n                    }\n                    else {\n                        if (urlPattern.protocol === '') {\n                            throw new protocol_js_1.InvalidArgumentException('URL pattern must specify a protocol');\n                        }\n                        urlPattern.protocol = unescapeURLPattern(urlPattern.protocol);\n                        if (!urlPattern.protocol.match(/^[a-zA-Z+-.]+$/)) {\n                            throw new protocol_js_1.InvalidArgumentException('Forbidden characters');\n                        }\n                        patternUrl += urlPattern.protocol;\n                    }\n                    const scheme = patternUrl.toLocaleLowerCase();\n                    patternUrl += ':';\n                    if ((0, NetworkUtils_js_1.isSpecialScheme)(scheme)) {\n                        patternUrl += '//';\n                    }\n                    if (urlPattern.hostname === undefined) {\n                        if (scheme !== 'file') {\n                            patternUrl += 'placeholder';\n                        }\n                        hasHostname = false;\n                    }\n                    else {\n                        if (urlPattern.hostname === '') {\n                            throw new protocol_js_1.InvalidArgumentException('URL pattern must specify a hostname');\n                        }\n                        if (urlPattern.protocol === 'file') {\n                            throw new protocol_js_1.InvalidArgumentException(`URL pattern protocol cannot be 'file'`);\n                        }\n                        urlPattern.hostname = unescapeURLPattern(urlPattern.hostname);\n                        let insideBrackets = false;\n                        for (const c of urlPattern.hostname) {\n                            if (c === '/' || c === '?' || c === '#') {\n                                throw new protocol_js_1.InvalidArgumentException(`'/', '?', '#' are forbidden in hostname`);\n                            }\n                            if (!insideBrackets && c === ':') {\n                                throw new protocol_js_1.InvalidArgumentException(`':' is only allowed inside brackets in hostname`);\n                            }\n                            if (c === '[') {\n                                insideBrackets = true;\n                            }\n                            if (c === ']') {\n                                insideBrackets = false;\n                            }\n                        }\n                        patternUrl += urlPattern.hostname;\n                    }\n                    if (urlPattern.port === undefined) {\n                        hasPort = false;\n                    }\n                    else {\n                        if (urlPattern.port === '') {\n                            throw new protocol_js_1.InvalidArgumentException(`URL pattern must specify a port`);\n                        }\n                        urlPattern.port = unescapeURLPattern(urlPattern.port);\n                        patternUrl += ':';\n                        if (!urlPattern.port.match(/^\\d+$/)) {\n                            throw new protocol_js_1.InvalidArgumentException('Forbidden characters');\n                        }\n                        patternUrl += urlPattern.port;\n                    }\n                    if (urlPattern.pathname === undefined) {\n                        hasPathname = false;\n                    }\n                    else {\n                        urlPattern.pathname = unescapeURLPattern(urlPattern.pathname);\n                        if (urlPattern.pathname[0] !== '/') {\n                            patternUrl += '/';\n                        }\n                        if (urlPattern.pathname.includes('#') ||\n                            urlPattern.pathname.includes('?')) {\n                            throw new protocol_js_1.InvalidArgumentException('Forbidden characters');\n                        }\n                        patternUrl += urlPattern.pathname;\n                    }\n                    if (urlPattern.search === undefined) {\n                        hasSearch = false;\n                    }\n                    else {\n                        urlPattern.search = unescapeURLPattern(urlPattern.search);\n                        if (urlPattern.search[0] !== '?') {\n                            patternUrl += '?';\n                        }\n                        if (urlPattern.search.includes('#')) {\n                            throw new protocol_js_1.InvalidArgumentException('Forbidden characters');\n                        }\n                        patternUrl += urlPattern.search;\n                    }\n                    break;\n                }\n            }\n            const serializePort = (url) => {\n                const defaultPorts = {\n                    'ftp:': 21,\n                    'file:': null,\n                    'http:': 80,\n                    'https:': 443,\n                    'ws:': 80,\n                    'wss:': 443,\n                };\n                if ((0, NetworkUtils_js_1.isSpecialScheme)(url.protocol) &&\n                    defaultPorts[url.protocol] !== null &&\n                    (!url.port || String(defaultPorts[url.protocol]) === url.port)) {\n                    return '';\n                }\n                else if (url.port) {\n                    return url.port;\n                }\n                return undefined;\n            };\n            try {\n                const url = new URL(patternUrl);\n                return {\n                    protocol: hasProtocol ? url.protocol.replace(/:$/, '') : undefined,\n                    hostname: hasHostname ? url.hostname : undefined,\n                    port: hasPort ? serializePort(url) : undefined,\n                    pathname: hasPathname && url.pathname ? url.pathname : undefined,\n                    search: hasSearch ? url.search : undefined,\n                };\n            }\n            catch (err) {\n                throw new protocol_js_1.InvalidArgumentException(`${err.message} '${patternUrl}'`);\n            }\n        });\n    }\n    static wrapInterceptionError(error) {\n        // https://source.chromium.org/chromium/chromium/src/+/main:content/browser/devtools/protocol/fetch_handler.cc;l=169\n        if (error?.message.includes('Invalid header') ||\n            error?.message.includes('Unsafe header')) {\n            return new protocol_js_1.InvalidArgumentException(error.message);\n        }\n        return error;\n    }\n    async addDataCollector(params) {\n        if (params.userContexts !== undefined && params.contexts !== undefined) {\n            throw new protocol_js_1.InvalidArgumentException(\"'contexts' and 'userContexts' are mutually exclusive\");\n        }\n        if (params.userContexts !== undefined) {\n            // Assert the user contexts exist.\n            await this.#userContextStorage.verifyUserContextIdList(params.userContexts);\n        }\n        if (params.contexts !== undefined) {\n            for (const browsingContextId of params.contexts) {\n                // Assert the browsing context exists and are top-level.\n                const browsingContext = this.#browsingContextStorage.getContext(browsingContextId);\n                if (!browsingContext.isTopLevelContext()) {\n                    throw new protocol_js_1.InvalidArgumentException(`Data collectors are available only on top-level browsing contexts`);\n                }\n            }\n        }\n        const collectorId = this.#networkStorage.addDataCollector(params);\n        // Adding data collectors may require enabling CDP Network domains.\n        await this.#toggleNetwork();\n        return { collector: collectorId };\n    }\n    async getData(params) {\n        return await this.#networkStorage.getCollectedData(params);\n    }\n    async removeDataCollector(params) {\n        this.#networkStorage.removeDataCollector(params);\n        // Removing data collectors may allow disabling CDP Network domains.\n        await this.#toggleNetwork();\n        return {};\n    }\n    disownData(params) {\n        this.#networkStorage.disownData(params);\n        return {};\n    }\n}\nexports.NetworkProcessor = NetworkProcessor;\n/**\n * See https://w3c.github.io/webdriver-bidi/#unescape-url-pattern\n */\nfunction unescapeURLPattern(pattern) {\n    const forbidden = new Set(['(', ')', '*', '{', '}']);\n    let result = '';\n    let isEscaped = false;\n    for (const c of pattern) {\n        if (!isEscaped) {\n            if (forbidden.has(c)) {\n                throw new protocol_js_1.InvalidArgumentException('Forbidden characters');\n            }\n            if (c === '\\\\') {\n                isEscaped = true;\n                continue;\n            }\n        }\n        result += c;\n        isEscaped = false;\n    }\n    return result;\n}\n//# sourceMappingURL=NetworkProcessor.js.map","\"use strict\";\n/**\n * Copyright 2024 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PermissionsProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nclass PermissionsProcessor {\n    #browserCdpClient;\n    constructor(browserCdpClient) {\n        this.#browserCdpClient = browserCdpClient;\n    }\n    async setPermissions(params) {\n        try {\n            const userContextId = params['goog:userContext'] ||\n                params.userContext;\n            await this.#browserCdpClient.sendCommand('Browser.setPermission', {\n                origin: params.origin,\n                browserContextId: userContextId && userContextId !== 'default'\n                    ? userContextId\n                    : undefined,\n                permission: {\n                    name: params.descriptor.name,\n                },\n                setting: params.state,\n            });\n        }\n        catch (err) {\n            if (err.message ===\n                `Permission can't be granted to opaque origins.`) {\n                // Return success if the origin is not valid (does not match any\n                // existing origins).\n                return {};\n            }\n            throw new protocol_js_1.InvalidArgumentException(err.message);\n        }\n        return {};\n    }\n}\nexports.PermissionsProcessor = PermissionsProcessor;\n//# sourceMappingURL=PermissionsProcessor.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uuidv4 = uuidv4;\nfunction bytesToHex(bytes) {\n    return bytes.reduce((str, byte) => str + byte.toString(16).padStart(2, '0'), '');\n}\n/**\n * Generates a random v4 UUID, as specified in RFC4122.\n *\n * Uses the native Web Crypto API if available, otherwise falls back to a\n * polyfill.\n *\n * Example: '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'\n */\nfunction uuidv4() {\n    // Available only in secure contexts\n    // https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API\n    if ('crypto' in globalThis && 'randomUUID' in globalThis.crypto) {\n        // Node with\n        // https://nodejs.org/dist/latest-v20.x/docs/api/globals.html#crypto_1 or\n        // secure browser context.\n        return globalThis.crypto.randomUUID();\n    }\n    const randomValues = new Uint8Array(16);\n    if ('crypto' in globalThis && 'getRandomValues' in globalThis.crypto) {\n        // Node (>=18) with\n        // https://nodejs.org/dist/latest-v20.x/docs/api/globals.html#crypto_1 or\n        // browser.\n        globalThis.crypto.getRandomValues(randomValues);\n    }\n    else {\n        // Node (<=16) without\n        // https://nodejs.org/dist/latest-v20.x/docs/api/globals.html#crypto_1.\n        // eslint-disable-next-line @typescript-eslint/no-require-imports\n        require('crypto').webcrypto.getRandomValues(randomValues);\n    }\n    // Set version (4) and variant (RFC4122) bits.\n    randomValues[6] = (randomValues[6] & 0x0f) | 0x40;\n    randomValues[8] = (randomValues[8] & 0x3f) | 0x80;\n    return [\n        bytesToHex(randomValues.subarray(0, 4)),\n        bytesToHex(randomValues.subarray(4, 6)),\n        bytesToHex(randomValues.subarray(6, 8)),\n        bytesToHex(randomValues.subarray(8, 10)),\n        bytesToHex(randomValues.subarray(10, 16)),\n    ].join('-');\n}\n//# sourceMappingURL=uuid.js.map","\"use strict\";\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChannelProxy = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst uuid_js_1 = require(\"../../../utils/uuid.js\");\n/**\n * Used to send messages from realm to BiDi user.\n */\nclass ChannelProxy {\n    #properties;\n    #id = (0, uuid_js_1.uuidv4)();\n    #logger;\n    constructor(channel, logger) {\n        this.#properties = channel;\n        this.#logger = logger;\n    }\n    /**\n     * Creates a channel proxy in the given realm, initialises listener and\n     * returns a handle to `sendMessage` delegate.\n     */\n    async init(realm, eventManager) {\n        const channelHandle = await ChannelProxy.#createAndGetHandleInRealm(realm);\n        const sendMessageHandle = await ChannelProxy.#createSendMessageHandle(realm, channelHandle);\n        void this.#startListener(realm, channelHandle, eventManager);\n        return sendMessageHandle;\n    }\n    /** Gets a ChannelProxy from window and returns its handle. */\n    async startListenerFromWindow(realm, eventManager) {\n        try {\n            const channelHandle = await this.#getHandleFromWindow(realm);\n            void this.#startListener(realm, channelHandle, eventManager);\n        }\n        catch (error) {\n            this.#logger?.(log_js_1.LogType.debugError, error);\n        }\n    }\n    /**\n     * Evaluation string which creates a ChannelProxy object on the client side.\n     */\n    static #createChannelProxyEvalStr() {\n        const functionStr = String(() => {\n            const queue = [];\n            let queueNonEmptyResolver = null;\n            return {\n                /**\n                 * Gets a promise, which is resolved as soon as a message occurs\n                 * in the queue.\n                 */\n                async getMessage() {\n                    const onMessage = queue.length > 0\n                        ? Promise.resolve()\n                        : new Promise((resolve) => {\n                            queueNonEmptyResolver = resolve;\n                        });\n                    await onMessage;\n                    return queue.shift();\n                },\n                /**\n                 * Adds a message to the queue.\n                 * Resolves the pending promise if needed.\n                 */\n                sendMessage(message) {\n                    queue.push(message);\n                    if (queueNonEmptyResolver !== null) {\n                        queueNonEmptyResolver();\n                        queueNonEmptyResolver = null;\n                    }\n                },\n            };\n        });\n        return `(${functionStr})()`;\n    }\n    /** Creates a ChannelProxy in the given realm. */\n    static async #createAndGetHandleInRealm(realm) {\n        const createChannelHandleResult = await realm.cdpClient.sendCommand('Runtime.evaluate', {\n            expression: this.#createChannelProxyEvalStr(),\n            contextId: realm.executionContextId,\n            serializationOptions: {\n                serialization: \"idOnly\" /* Protocol.Runtime.SerializationOptionsSerialization.IdOnly */,\n            },\n        });\n        if (createChannelHandleResult.exceptionDetails ||\n            createChannelHandleResult.result.objectId === undefined) {\n            throw new Error(`Cannot create channel`);\n        }\n        return createChannelHandleResult.result.objectId;\n    }\n    /** Gets a handle to `sendMessage` delegate from the ChannelProxy handle. */\n    static async #createSendMessageHandle(realm, channelHandle) {\n        const sendMessageArgResult = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n            functionDeclaration: String((channelHandle) => {\n                return channelHandle.sendMessage;\n            }),\n            arguments: [{ objectId: channelHandle }],\n            executionContextId: realm.executionContextId,\n            serializationOptions: {\n                serialization: \"idOnly\" /* Protocol.Runtime.SerializationOptionsSerialization.IdOnly */,\n            },\n        });\n        // TODO: check for exceptionDetails.\n        return sendMessageArgResult.result.objectId;\n    }\n    /** Starts listening for the channel events of the provided ChannelProxy. */\n    async #startListener(realm, channelHandle, eventManager) {\n        // noinspection InfiniteLoopJS\n        for (;;) {\n            try {\n                const message = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                    functionDeclaration: String(async (channelHandle) => await channelHandle.getMessage()),\n                    arguments: [\n                        {\n                            objectId: channelHandle,\n                        },\n                    ],\n                    awaitPromise: true,\n                    executionContextId: realm.executionContextId,\n                    serializationOptions: {\n                        serialization: \"deep\" /* Protocol.Runtime.SerializationOptionsSerialization.Deep */,\n                        maxDepth: this.#properties.serializationOptions?.maxObjectDepth ??\n                            undefined,\n                    },\n                });\n                if (message.exceptionDetails) {\n                    throw new Error('Runtime.callFunctionOn in ChannelProxy', {\n                        cause: message.exceptionDetails,\n                    });\n                }\n                for (const browsingContext of realm.associatedBrowsingContexts) {\n                    eventManager.registerEvent({\n                        type: 'event',\n                        method: protocol_js_1.ChromiumBidi.Script.EventNames.Message,\n                        params: {\n                            channel: this.#properties.channel,\n                            data: realm.cdpToBidiValue(message, this.#properties.ownership ?? \"none\" /* Script.ResultOwnership.None */),\n                            source: realm.source,\n                        },\n                    }, browsingContext.id);\n                }\n            }\n            catch (error) {\n                // If an error is thrown, then the channel is permanently broken, so we\n                // exit the loop.\n                this.#logger?.(log_js_1.LogType.debugError, error);\n                break;\n            }\n        }\n    }\n    /**\n     * Returns a handle of ChannelProxy from window's property which was set there\n     * by `getEvalInWindowStr`. If window property is not set yet, sets a promise\n     * resolver to the window property, so that `getEvalInWindowStr` can resolve\n     * the promise later on with the channel.\n     * This is needed because `getEvalInWindowStr` can be called before or\n     * after this method.\n     */\n    async #getHandleFromWindow(realm) {\n        const channelHandleResult = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n            functionDeclaration: String((id) => {\n                const w = window;\n                if (w[id] === undefined) {\n                    // The channelProxy is not created yet. Create a promise, put the\n                    // resolver to window property and return the promise.\n                    // `getEvalInWindowStr` will resolve the promise later.\n                    return new Promise((resolve) => (w[id] = resolve));\n                }\n                // The channelProxy is already created by `getEvalInWindowStr` and\n                // is set into window property. Return it.\n                const channelProxy = w[id];\n                delete w[id];\n                return channelProxy;\n            }),\n            arguments: [{ value: this.#id }],\n            executionContextId: realm.executionContextId,\n            awaitPromise: true,\n            serializationOptions: {\n                serialization: \"idOnly\" /* Protocol.Runtime.SerializationOptionsSerialization.IdOnly */,\n            },\n        });\n        if (channelHandleResult.exceptionDetails !== undefined ||\n            channelHandleResult.result.objectId === undefined) {\n            throw new Error(`ChannelHandle not found in window[\"${this.#id}\"]`);\n        }\n        return channelHandleResult.result.objectId;\n    }\n    /**\n     * String to be evaluated to create a ProxyChannel and put it to window.\n     * Returns the delegate `sendMessage`. Used to provide an argument for preload\n     * script. Does the following:\n     * 1. Creates a ChannelProxy.\n     * 2. Puts the ChannelProxy to window['${this.#id}'] or resolves the promise\n     *    by calling delegate stored in window['${this.#id}'].\n     *    This is needed because `#getHandleFromWindow` can be called before or\n     *    after this method.\n     * 3. Returns the delegate `sendMessage` of the created ChannelProxy.\n     */\n    getEvalInWindowStr() {\n        const delegate = String((id, channelProxy) => {\n            const w = window;\n            if (w[id] === undefined) {\n                // `#getHandleFromWindow` is not initialized yet, and will get the\n                // channelProxy later.\n                w[id] = channelProxy;\n            }\n            else {\n                // `#getHandleFromWindow` is already set a delegate to window property\n                // and is waiting for it to be called with the channelProxy.\n                w[id](channelProxy);\n                delete w[id];\n            }\n            return channelProxy.sendMessage;\n        });\n        const channelProxyEval = ChannelProxy.#createChannelProxyEvalStr();\n        return `(${delegate})('${this.#id}',${channelProxyEval})`;\n    }\n}\nexports.ChannelProxy = ChannelProxy;\n//# sourceMappingURL=ChannelProxy.js.map","\"use strict\";\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PreloadScript = void 0;\nconst uuid_js_1 = require(\"../../../utils/uuid.js\");\nconst ChannelProxy_js_1 = require(\"./ChannelProxy.js\");\n/**\n * BiDi IDs are generated by the server and are unique within contexts.\n *\n * CDP preload script IDs are generated by the client and are unique\n * within sessions.\n *\n * The mapping between BiDi and CDP preload script IDs is 1:many.\n * BiDi IDs are needed by the mapper to keep track of potential multiple CDP IDs\n * in the client.\n */\nclass PreloadScript {\n    /** BiDi ID, an automatically generated UUID. */\n    #id = (0, uuid_js_1.uuidv4)();\n    /** CDP preload scripts. */\n    #cdpPreloadScripts = [];\n    /** The script itself, in a format expected by the spec i.e. a function. */\n    #functionDeclaration;\n    /** Targets, in which the preload script is initialized. */\n    #targetIds = new Set();\n    /** Channels to be added as arguments to functionDeclaration. */\n    #channels;\n    /** The script sandbox / world name. */\n    #sandbox;\n    /** The browsing contexts to execute the preload scripts in, if any. */\n    #contexts;\n    /** The browsing contexts to execute the preload scripts in, if any. */\n    #userContexts;\n    get id() {\n        return this.#id;\n    }\n    get targetIds() {\n        return this.#targetIds;\n    }\n    constructor(params, logger) {\n        this.#channels =\n            params.arguments?.map((a) => new ChannelProxy_js_1.ChannelProxy(a.value, logger)) ?? [];\n        this.#functionDeclaration = params.functionDeclaration;\n        this.#sandbox = params.sandbox;\n        this.#contexts = params.contexts;\n        this.#userContexts = params.userContexts;\n    }\n    /** Channels of the preload script. */\n    get channels() {\n        return this.#channels;\n    }\n    /** Contexts of the preload script, if any */\n    get contexts() {\n        return this.#contexts;\n    }\n    /** UserContexts of the preload script, if any */\n    get userContexts() {\n        return this.#userContexts;\n    }\n    /**\n     * String to be evaluated. Wraps user-provided function so that the following\n     * steps are run:\n     * 1. Create channels.\n     * 2. Store the created channels in window.\n     * 3. Call the user-provided function with channels as arguments.\n     */\n    #getEvaluateString() {\n        const channelsArgStr = `[${this.channels\n            .map((c) => c.getEvalInWindowStr())\n            .join(', ')}]`;\n        return `(()=>{(${this.#functionDeclaration})(...${channelsArgStr})})()`;\n    }\n    /**\n     * Adds the script to the given CDP targets by calling the\n     * `Page.addScriptToEvaluateOnNewDocument` command.\n     */\n    async initInTargets(cdpTargets, runImmediately) {\n        await Promise.all(Array.from(cdpTargets).map((cdpTarget) => this.initInTarget(cdpTarget, runImmediately)));\n    }\n    /**\n     * Adds the script to the given CDP target by calling the\n     * `Page.addScriptToEvaluateOnNewDocument` command.\n     */\n    async initInTarget(cdpTarget, runImmediately) {\n        const addCdpPreloadScriptResult = await cdpTarget.cdpClient.sendCommand('Page.addScriptToEvaluateOnNewDocument', {\n            source: this.#getEvaluateString(),\n            worldName: this.#sandbox,\n            runImmediately,\n        });\n        this.#cdpPreloadScripts.push({\n            target: cdpTarget,\n            preloadScriptId: addCdpPreloadScriptResult.identifier,\n        });\n        this.#targetIds.add(cdpTarget.id);\n    }\n    /**\n     * Removes this script from all CDP targets.\n     */\n    async remove() {\n        await Promise.all([\n            this.#cdpPreloadScripts.map(async (cdpPreloadScript) => {\n                const cdpTarget = cdpPreloadScript.target;\n                const cdpPreloadScriptId = cdpPreloadScript.preloadScriptId;\n                return await cdpTarget.cdpClient.sendCommand('Page.removeScriptToEvaluateOnNewDocument', {\n                    identifier: cdpPreloadScriptId,\n                });\n            }),\n        ]);\n    }\n    /** Removes the provided cdp target from the list of cdp preload scripts. */\n    dispose(cdpTargetId) {\n        this.#cdpPreloadScripts = this.#cdpPreloadScripts.filter((cdpPreloadScript) => cdpPreloadScript.target?.id !== cdpTargetId);\n        this.#targetIds.delete(cdpTargetId);\n    }\n}\nexports.PreloadScript = PreloadScript;\n//# sourceMappingURL=PreloadScript.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScriptProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst PreloadScript_js_1 = require(\"./PreloadScript.js\");\nclass ScriptProcessor {\n    #eventManager;\n    #browsingContextStorage;\n    #realmStorage;\n    #preloadScriptStorage;\n    #userContextStorage;\n    #logger;\n    constructor(eventManager, browsingContextStorage, realmStorage, preloadScriptStorage, userContextStorage, logger) {\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#realmStorage = realmStorage;\n        this.#preloadScriptStorage = preloadScriptStorage;\n        this.#userContextStorage = userContextStorage;\n        this.#logger = logger;\n        this.#eventManager = eventManager;\n        this.#eventManager.addSubscribeHook(protocol_js_1.ChromiumBidi.Script.EventNames.RealmCreated, this.#onRealmCreatedSubscribeHook.bind(this));\n    }\n    #onRealmCreatedSubscribeHook(contextId) {\n        const context = this.#browsingContextStorage.getContext(contextId);\n        const contextsToReport = [\n            context,\n            ...this.#browsingContextStorage.getContext(contextId).allChildren,\n        ];\n        const realms = new Set();\n        for (const reportContext of contextsToReport) {\n            const realmsForContext = this.#realmStorage.findRealms({\n                browsingContextId: reportContext.id,\n            });\n            for (const realm of realmsForContext) {\n                realms.add(realm);\n            }\n        }\n        for (const realm of realms) {\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: protocol_js_1.ChromiumBidi.Script.EventNames.RealmCreated,\n                params: realm.realmInfo,\n            }, context.id);\n        }\n        return Promise.resolve();\n    }\n    async addPreloadScript(params) {\n        if (params.userContexts?.length && params.contexts?.length) {\n            throw new protocol_js_1.InvalidArgumentException('Both userContexts and contexts cannot be specified.');\n        }\n        const userContexts = await this.#userContextStorage.verifyUserContextIdList(params.userContexts ?? []);\n        const browsingContexts = this.#browsingContextStorage.verifyTopLevelContextsList(params.contexts);\n        const preloadScript = new PreloadScript_js_1.PreloadScript(params, this.#logger);\n        this.#preloadScriptStorage.add(preloadScript);\n        let contextsToRunIn = [];\n        if (userContexts.size) {\n            contextsToRunIn = this.#browsingContextStorage\n                .getTopLevelContexts()\n                .filter((context) => {\n                return userContexts.has(context.userContext);\n            });\n        }\n        else if (browsingContexts.size) {\n            contextsToRunIn = [...browsingContexts.values()];\n        }\n        else {\n            contextsToRunIn = this.#browsingContextStorage.getTopLevelContexts();\n        }\n        const cdpTargets = new Set(contextsToRunIn.map((context) => context.cdpTarget));\n        await preloadScript.initInTargets(cdpTargets, false);\n        return {\n            script: preloadScript.id,\n        };\n    }\n    async removePreloadScript(params) {\n        const { script: id } = params;\n        const script = this.#preloadScriptStorage.getPreloadScript(id);\n        await script.remove();\n        this.#preloadScriptStorage.remove(id);\n        return {};\n    }\n    async callFunction(params) {\n        const realm = await this.#getRealm(params.target);\n        return await realm.callFunction(params.functionDeclaration, params.awaitPromise, params.this, params.arguments, params.resultOwnership, params.serializationOptions, params.userActivation);\n    }\n    async evaluate(params) {\n        const realm = await this.#getRealm(params.target);\n        return await realm.evaluate(params.expression, params.awaitPromise, params.resultOwnership, params.serializationOptions, params.userActivation);\n    }\n    async disown(params) {\n        const realm = await this.#getRealm(params.target);\n        await Promise.all(params.handles.map(async (handle) => await realm.disown(handle)));\n        return {};\n    }\n    getRealms(params) {\n        if (params.context !== undefined) {\n            // Make sure the context is known.\n            this.#browsingContextStorage.getContext(params.context);\n        }\n        const realms = this.#realmStorage\n            .findRealms({\n            browsingContextId: params.context,\n            type: params.type,\n            isHidden: false,\n        })\n            .map((realm) => realm.realmInfo);\n        return { realms };\n    }\n    async #getRealm(target) {\n        if ('context' in target) {\n            const context = this.#browsingContextStorage.getContext(target.context);\n            return await context.getOrCreateUserSandbox(target.sandbox);\n        }\n        return this.#realmStorage.getRealm({\n            realmId: target.realm,\n            isHidden: false,\n        });\n    }\n}\nexports.ScriptProcessor = ScriptProcessor;\n//# sourceMappingURL=ScriptProcessor.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nclass SessionProcessor {\n    #eventManager;\n    #browserCdpClient;\n    #initConnection;\n    #created = false;\n    constructor(eventManager, browserCdpClient, initConnection) {\n        this.#eventManager = eventManager;\n        this.#browserCdpClient = browserCdpClient;\n        this.#initConnection = initConnection;\n    }\n    status() {\n        return { ready: false, message: 'already connected' };\n    }\n    #mergeCapabilities(capabilitiesRequest) {\n        // Roughly following https://www.w3.org/TR/webdriver2/#dfn-capabilities-processing.\n        // Validations should already be done by the parser.\n        const mergedCapabilities = [];\n        for (const first of capabilitiesRequest.firstMatch ?? [{}]) {\n            const result = {\n                ...capabilitiesRequest.alwaysMatch,\n            };\n            for (const key of Object.keys(first)) {\n                if (result[key] !== undefined) {\n                    throw new protocol_js_1.InvalidArgumentException(`Capability ${key} in firstMatch is already defined in alwaysMatch`);\n                }\n                result[key] = first[key];\n            }\n            mergedCapabilities.push(result);\n        }\n        const match = mergedCapabilities.find((c) => c.browserName === 'chrome') ??\n            mergedCapabilities[0] ??\n            {};\n        match.unhandledPromptBehavior = this.#getUnhandledPromptBehavior(match.unhandledPromptBehavior);\n        return match;\n    }\n    #getUnhandledPromptBehavior(capabilityValue) {\n        if (capabilityValue === undefined) {\n            return undefined;\n        }\n        if (typeof capabilityValue === 'object') {\n            // Do not validate capabilities. Incorrect ones will be ignored by Mapper.\n            return capabilityValue;\n        }\n        if (typeof capabilityValue !== 'string') {\n            throw new protocol_js_1.InvalidArgumentException(`Unexpected 'unhandledPromptBehavior' type: ${typeof capabilityValue}`);\n        }\n        switch (capabilityValue) {\n            // `beforeUnload: accept` has higher priority over string capability, as the latest\n            // one is set to \"fallbackDefault\".\n            // https://w3c.github.io/webdriver/#dfn-deserialize-as-an-unhandled-prompt-behavior\n            // https://w3c.github.io/webdriver/#dfn-get-the-prompt-handler\n            case 'accept':\n            case 'accept and notify':\n                return {\n                    default: \"accept\" /* Session.UserPromptHandlerType.Accept */,\n                    beforeUnload: \"accept\" /* Session.UserPromptHandlerType.Accept */,\n                };\n            case 'dismiss':\n            case 'dismiss and notify':\n                return {\n                    default: \"dismiss\" /* Session.UserPromptHandlerType.Dismiss */,\n                    beforeUnload: \"accept\" /* Session.UserPromptHandlerType.Accept */,\n                };\n            case 'ignore':\n                return {\n                    default: \"ignore\" /* Session.UserPromptHandlerType.Ignore */,\n                    beforeUnload: \"accept\" /* Session.UserPromptHandlerType.Accept */,\n                };\n            default:\n                throw new protocol_js_1.InvalidArgumentException(`Unexpected 'unhandledPromptBehavior' value: ${capabilityValue}`);\n        }\n    }\n    async new(params) {\n        if (this.#created) {\n            throw new Error('Session has been already created.');\n        }\n        this.#created = true;\n        const matchedCapabitlites = this.#mergeCapabilities(params.capabilities);\n        await this.#initConnection(matchedCapabitlites);\n        const version = await this.#browserCdpClient.sendCommand('Browser.getVersion');\n        return {\n            sessionId: 'unknown',\n            capabilities: {\n                ...matchedCapabitlites,\n                acceptInsecureCerts: matchedCapabitlites.acceptInsecureCerts ?? false,\n                browserName: version.product,\n                browserVersion: version.revision,\n                platformName: '',\n                setWindowRect: false,\n                webSocketUrl: '',\n                userAgent: version.userAgent,\n            },\n        };\n    }\n    async subscribe(params, googChannel = null) {\n        const subscription = await this.#eventManager.subscribe(params.events, params.contexts ?? [], params.userContexts ?? [], googChannel);\n        return {\n            subscription,\n        };\n    }\n    async unsubscribe(params, googChannel = null) {\n        if ('subscriptions' in params) {\n            await this.#eventManager.unsubscribeByIds(params.subscriptions);\n            return {};\n        }\n        await this.#eventManager.unsubscribe(params.events, params.contexts ?? [], googChannel);\n        return {};\n    }\n}\nexports.SessionProcessor = SessionProcessor;\n//# sourceMappingURL=SessionProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StorageProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst assert_js_1 = require(\"../../../utils/assert.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst NetworkProcessor_js_1 = require(\"../network/NetworkProcessor.js\");\nconst NetworkUtils_js_1 = require(\"../network/NetworkUtils.js\");\n/**\n * Responsible for handling the `storage` module.\n */\nclass StorageProcessor {\n    #browserCdpClient;\n    #browsingContextStorage;\n    #logger;\n    constructor(browserCdpClient, browsingContextStorage, logger) {\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#browserCdpClient = browserCdpClient;\n        this.#logger = logger;\n    }\n    async deleteCookies(params) {\n        const partitionKey = this.#expandStoragePartitionSpec(params.partition);\n        let cdpResponse;\n        try {\n            cdpResponse = await this.#browserCdpClient.sendCommand('Storage.getCookies', {\n                browserContextId: this.#getCdpBrowserContextId(partitionKey),\n            });\n        }\n        catch (err) {\n            if (this.#isNoSuchUserContextError(err)) {\n                // If the user context is not found, special error is thrown.\n                throw new protocol_js_1.NoSuchUserContextException(err.message);\n            }\n            throw err;\n        }\n        const cdpCookiesToDelete = cdpResponse.cookies\n            .filter(\n        // CDP's partition key is the source origin. If the request specifies the\n        // `sourceOrigin` partition key, only cookies with the requested source origin\n        // are returned.\n        (c) => partitionKey.sourceOrigin === undefined ||\n            c.partitionKey?.topLevelSite === partitionKey.sourceOrigin)\n            .filter((cdpCookie) => {\n            const bidiCookie = (0, NetworkUtils_js_1.cdpToBiDiCookie)(cdpCookie);\n            return this.#matchCookie(bidiCookie, params.filter);\n        })\n            .map((cookie) => ({\n            ...cookie,\n            // Set expiry to pass date to delete the cookie.\n            expires: 1,\n        }));\n        await this.#browserCdpClient.sendCommand('Storage.setCookies', {\n            cookies: cdpCookiesToDelete,\n            browserContextId: this.#getCdpBrowserContextId(partitionKey),\n        });\n        return {\n            partitionKey,\n        };\n    }\n    async getCookies(params) {\n        const partitionKey = this.#expandStoragePartitionSpec(params.partition);\n        let cdpResponse;\n        try {\n            cdpResponse = await this.#browserCdpClient.sendCommand('Storage.getCookies', {\n                browserContextId: this.#getCdpBrowserContextId(partitionKey),\n            });\n        }\n        catch (err) {\n            if (this.#isNoSuchUserContextError(err)) {\n                // If the user context is not found, special error is thrown.\n                throw new protocol_js_1.NoSuchUserContextException(err.message);\n            }\n            throw err;\n        }\n        const filteredBiDiCookies = cdpResponse.cookies\n            .filter(\n        // CDP's partition key is the source origin. If the request specifies the\n        // `sourceOrigin` partition key, only cookies with the requested source origin\n        // are returned.\n        (c) => partitionKey.sourceOrigin === undefined ||\n            c.partitionKey?.topLevelSite === partitionKey.sourceOrigin)\n            .map((c) => (0, NetworkUtils_js_1.cdpToBiDiCookie)(c))\n            .filter((c) => this.#matchCookie(c, params.filter));\n        return {\n            cookies: filteredBiDiCookies,\n            partitionKey,\n        };\n    }\n    async setCookie(params) {\n        const partitionKey = this.#expandStoragePartitionSpec(params.partition);\n        const cdpCookie = (0, NetworkUtils_js_1.bidiToCdpCookie)(params, partitionKey);\n        try {\n            await this.#browserCdpClient.sendCommand('Storage.setCookies', {\n                cookies: [cdpCookie],\n                browserContextId: this.#getCdpBrowserContextId(partitionKey),\n            });\n        }\n        catch (err) {\n            if (this.#isNoSuchUserContextError(err)) {\n                // If the user context is not found, special error is thrown.\n                throw new protocol_js_1.NoSuchUserContextException(err.message);\n            }\n            this.#logger?.(log_js_1.LogType.debugError, err);\n            throw new protocol_js_1.UnableToSetCookieException(err.toString());\n        }\n        return {\n            partitionKey,\n        };\n    }\n    #isNoSuchUserContextError(err) {\n        // Heuristic to detect if the user context is not found.\n        // See https://source.chromium.org/chromium/chromium/src/+/main:content/browser/devtools/protocol/browser_handler.cc;drc=a56154dd81e4679712422ac6eed2c9581cb51ab0;l=314\n        return err.message?.startsWith('Failed to find browser context for id');\n    }\n    #getCdpBrowserContextId(partitionKey) {\n        return partitionKey.userContext === 'default'\n            ? undefined\n            : partitionKey.userContext;\n    }\n    #expandStoragePartitionSpecByBrowsingContext(descriptor) {\n        const browsingContextId = descriptor.context;\n        const browsingContext = this.#browsingContextStorage.getContext(browsingContextId);\n        // https://w3c.github.io/webdriver-bidi/#associated-storage-partition.\n        // Each browsing context also has an associated storage partition, which is the\n        // storage partition it uses to persist data. In Chromium it's a `BrowserContext`\n        // which maps to BiDi `UserContext`.\n        return {\n            userContext: browsingContext.userContext,\n        };\n    }\n    #expandStoragePartitionSpecByStorageKey(descriptor) {\n        const unsupportedPartitionKeys = new Map();\n        let sourceOrigin = descriptor.sourceOrigin;\n        if (sourceOrigin !== undefined) {\n            const url = NetworkProcessor_js_1.NetworkProcessor.parseUrlString(sourceOrigin);\n            if (url.origin === 'null') {\n                // Origin `null` is a special case for local pages.\n                sourceOrigin = url.origin;\n            }\n            else {\n                // Port is not supported in CDP Cookie's `partitionKey`, so it should be stripped\n                // from the requested source origin.\n                sourceOrigin = `${url.protocol}//${url.hostname}`;\n            }\n        }\n        for (const [key, value] of Object.entries(descriptor)) {\n            if (key !== undefined &&\n                value !== undefined &&\n                !['type', 'sourceOrigin', 'userContext'].includes(key)) {\n                unsupportedPartitionKeys.set(key, value);\n            }\n        }\n        if (unsupportedPartitionKeys.size > 0) {\n            this.#logger?.(log_js_1.LogType.debugInfo, `Unsupported partition keys: ${JSON.stringify(Object.fromEntries(unsupportedPartitionKeys))}`);\n        }\n        // Set `userContext` to `default` if not provided, as it's required in Chromium.\n        const userContext = descriptor.userContext ?? 'default';\n        return {\n            userContext,\n            ...(sourceOrigin === undefined ? {} : { sourceOrigin }),\n        };\n    }\n    #expandStoragePartitionSpec(partitionSpec) {\n        if (partitionSpec === undefined) {\n            // `userContext` is required in Chromium.\n            return { userContext: 'default' };\n        }\n        if (partitionSpec.type === 'context') {\n            return this.#expandStoragePartitionSpecByBrowsingContext(partitionSpec);\n        }\n        (0, assert_js_1.assert)(partitionSpec.type === 'storageKey', 'Unknown partition type');\n        // Partition spec is a storage partition.\n        // Let partition key be partition spec.\n        return this.#expandStoragePartitionSpecByStorageKey(partitionSpec);\n    }\n    #matchCookie(cookie, filter) {\n        if (filter === undefined) {\n            return true;\n        }\n        return ((filter.domain === undefined || filter.domain === cookie.domain) &&\n            (filter.name === undefined || filter.name === cookie.name) &&\n            // `value` contains fields `type` and `value`.\n            (filter.value === undefined ||\n                (0, NetworkUtils_js_1.deserializeByteValue)(filter.value) ===\n                    (0, NetworkUtils_js_1.deserializeByteValue)(cookie.value)) &&\n            (filter.path === undefined || filter.path === cookie.path) &&\n            (filter.size === undefined || filter.size === cookie.size) &&\n            (filter.httpOnly === undefined || filter.httpOnly === cookie.httpOnly) &&\n            (filter.secure === undefined || filter.secure === cookie.secure) &&\n            (filter.sameSite === undefined || filter.sameSite === cookie.sameSite) &&\n            (filter.expiry === undefined || filter.expiry === cookie.expiry));\n    }\n}\nexports.StorageProcessor = StorageProcessor;\n//# sourceMappingURL=StorageProcessor.js.map","\"use strict\";\n/**\n * Copyright 2025 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebExtensionProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\n/**\n * Responsible for handling the `webModule` module.\n */\nclass WebExtensionProcessor {\n    #browserCdpClient;\n    constructor(browserCdpClient) {\n        this.#browserCdpClient = browserCdpClient;\n    }\n    async install(params) {\n        switch (params.extensionData.type) {\n            case 'archivePath':\n            case 'base64':\n                throw new protocol_js_1.UnsupportedOperationException('Archived and Base64 extensions are not supported');\n            case 'path':\n                break;\n        }\n        try {\n            const response = await this.#browserCdpClient.sendCommand('Extensions.loadUnpacked', {\n                path: params.extensionData.path,\n            });\n            return {\n                extension: response.id,\n            };\n        }\n        catch (err) {\n            if (err.message.startsWith('invalid web extension')) {\n                throw new protocol_js_1.InvalidWebExtensionException(err.message);\n            }\n            throw err;\n        }\n    }\n    async uninstall(params) {\n        try {\n            await this.#browserCdpClient.sendCommand('Extensions.uninstall', {\n                id: params.extension,\n            });\n            return {};\n        }\n        catch (err) {\n            if (err.message ===\n                'Uninstall failed. Reason: could not find extension.') {\n                throw new protocol_js_1.NoSuchWebExtensionException('no such web extension');\n            }\n            throw err;\n        }\n    }\n}\nexports.WebExtensionProcessor = WebExtensionProcessor;\n//# sourceMappingURL=WebExtensionProcessor.js.map","\"use strict\";\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OutgoingMessage = void 0;\nclass OutgoingMessage {\n    #message;\n    #googChannel;\n    constructor(message, googChannel = null) {\n        this.#message = message;\n        this.#googChannel = googChannel;\n    }\n    static createFromPromise(messagePromise, googChannel) {\n        return messagePromise.then((message) => {\n            if (message.kind === 'success') {\n                return {\n                    kind: 'success',\n                    value: new OutgoingMessage(message.value, googChannel),\n                };\n            }\n            return message;\n        });\n    }\n    static createResolved(message, googChannel = null) {\n        return Promise.resolve({\n            kind: 'success',\n            value: new OutgoingMessage(message, googChannel),\n        });\n    }\n    get message() {\n        return this.#message;\n    }\n    get googChannel() {\n        return this.#googChannel;\n    }\n}\nexports.OutgoingMessage = OutgoingMessage;\n//# sourceMappingURL=OutgoingMessage.js.map","\"use strict\";\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CommandProcessor = void 0;\nconst protocol_js_1 = require(\"../protocol/protocol.js\");\nconst EventEmitter_js_1 = require(\"../utils/EventEmitter.js\");\nconst log_js_1 = require(\"../utils/log.js\");\nconst BidiNoOpParser_js_1 = require(\"./BidiNoOpParser.js\");\nconst BrowserProcessor_js_1 = require(\"./modules/browser/BrowserProcessor.js\");\nconst CdpProcessor_js_1 = require(\"./modules/cdp/CdpProcessor.js\");\nconst BrowsingContextProcessor_js_1 = require(\"./modules/context/BrowsingContextProcessor.js\");\nconst EmulationProcessor_js_1 = require(\"./modules/emulation/EmulationProcessor.js\");\nconst InputProcessor_js_1 = require(\"./modules/input/InputProcessor.js\");\nconst NetworkProcessor_js_1 = require(\"./modules/network/NetworkProcessor.js\");\nconst PermissionsProcessor_js_1 = require(\"./modules/permissions/PermissionsProcessor.js\");\nconst ScriptProcessor_js_1 = require(\"./modules/script/ScriptProcessor.js\");\nconst SessionProcessor_js_1 = require(\"./modules/session/SessionProcessor.js\");\nconst StorageProcessor_js_1 = require(\"./modules/storage/StorageProcessor.js\");\nconst WebExtensionProcessor_js_1 = require(\"./modules/webExtension/WebExtensionProcessor.js\");\nconst OutgoingMessage_js_1 = require(\"./OutgoingMessage.js\");\nclass CommandProcessor extends EventEmitter_js_1.EventEmitter {\n    // keep-sorted start\n    #bluetoothProcessor;\n    #browserCdpClient;\n    #browserProcessor;\n    #browsingContextProcessor;\n    #cdpProcessor;\n    #emulationProcessor;\n    #inputProcessor;\n    #networkProcessor;\n    #permissionsProcessor;\n    #scriptProcessor;\n    #sessionProcessor;\n    #storageProcessor;\n    #webExtensionProcessor;\n    // keep-sorted end\n    #parser;\n    #logger;\n    constructor(cdpConnection, browserCdpClient, eventManager, browsingContextStorage, realmStorage, preloadScriptStorage, networkStorage, mapperOptionsStorage, bluetoothProcessor, userContextStorage, parser = new BidiNoOpParser_js_1.BidiNoOpParser(), initConnection, logger) {\n        super();\n        this.#browserCdpClient = browserCdpClient;\n        this.#parser = parser;\n        this.#logger = logger;\n        this.#bluetoothProcessor = bluetoothProcessor;\n        // keep-sorted start block=yes\n        this.#browserProcessor = new BrowserProcessor_js_1.BrowserProcessor(browserCdpClient, browsingContextStorage, mapperOptionsStorage, userContextStorage);\n        this.#browsingContextProcessor = new BrowsingContextProcessor_js_1.BrowsingContextProcessor(browserCdpClient, browsingContextStorage, userContextStorage, eventManager);\n        this.#cdpProcessor = new CdpProcessor_js_1.CdpProcessor(browsingContextStorage, realmStorage, cdpConnection, browserCdpClient);\n        this.#emulationProcessor = new EmulationProcessor_js_1.EmulationProcessor(browsingContextStorage, userContextStorage);\n        this.#inputProcessor = new InputProcessor_js_1.InputProcessor(browsingContextStorage);\n        this.#networkProcessor = new NetworkProcessor_js_1.NetworkProcessor(browsingContextStorage, networkStorage, userContextStorage);\n        this.#permissionsProcessor = new PermissionsProcessor_js_1.PermissionsProcessor(browserCdpClient);\n        this.#scriptProcessor = new ScriptProcessor_js_1.ScriptProcessor(eventManager, browsingContextStorage, realmStorage, preloadScriptStorage, userContextStorage, logger);\n        this.#sessionProcessor = new SessionProcessor_js_1.SessionProcessor(eventManager, browserCdpClient, initConnection);\n        this.#storageProcessor = new StorageProcessor_js_1.StorageProcessor(browserCdpClient, browsingContextStorage, logger);\n        this.#webExtensionProcessor = new WebExtensionProcessor_js_1.WebExtensionProcessor(browserCdpClient);\n        // keep-sorted end\n    }\n    async #processCommand(command) {\n        switch (command.method) {\n            // Bluetooth module\n            // keep-sorted start block=yes\n            case 'bluetooth.disableSimulation':\n                return await this.#bluetoothProcessor.disableSimulation(this.#parser.parseDisableSimulationParameters(command.params));\n            case 'bluetooth.handleRequestDevicePrompt':\n                return await this.#bluetoothProcessor.handleRequestDevicePrompt(this.#parser.parseHandleRequestDevicePromptParams(command.params));\n            case 'bluetooth.simulateAdapter':\n                return await this.#bluetoothProcessor.simulateAdapter(this.#parser.parseSimulateAdapterParameters(command.params));\n            case 'bluetooth.simulateAdvertisement':\n                return await this.#bluetoothProcessor.simulateAdvertisement(this.#parser.parseSimulateAdvertisementParameters(command.params));\n            case 'bluetooth.simulateCharacteristic':\n                return await this.#bluetoothProcessor.simulateCharacteristic(this.#parser.parseSimulateCharacteristicParameters(command.params));\n            case 'bluetooth.simulateCharacteristicResponse':\n                return await this.#bluetoothProcessor.simulateCharacteristicResponse(this.#parser.parseSimulateCharacteristicResponseParameters(command.params));\n            case 'bluetooth.simulateDescriptor':\n                return await this.#bluetoothProcessor.simulateDescriptor(this.#parser.parseSimulateDescriptorParameters(command.params));\n            case 'bluetooth.simulateDescriptorResponse':\n                return await this.#bluetoothProcessor.simulateDescriptorResponse(this.#parser.parseSimulateDescriptorResponseParameters(command.params));\n            case 'bluetooth.simulateGattConnectionResponse':\n                return await this.#bluetoothProcessor.simulateGattConnectionResponse(this.#parser.parseSimulateGattConnectionResponseParameters(command.params));\n            case 'bluetooth.simulateGattDisconnection':\n                return await this.#bluetoothProcessor.simulateGattDisconnection(this.#parser.parseSimulateGattDisconnectionParameters(command.params));\n            case 'bluetooth.simulatePreconnectedPeripheral':\n                return await this.#bluetoothProcessor.simulatePreconnectedPeripheral(this.#parser.parseSimulatePreconnectedPeripheralParameters(command.params));\n            case 'bluetooth.simulateService':\n                return await this.#bluetoothProcessor.simulateService(this.#parser.parseSimulateServiceParameters(command.params));\n            // keep-sorted end\n            // Browser module\n            // keep-sorted start block=yes\n            case 'browser.close':\n                return this.#browserProcessor.close();\n            case 'browser.createUserContext':\n                return await this.#browserProcessor.createUserContext(this.#parser.parseCreateUserContextParameters(command.params));\n            case 'browser.getClientWindows':\n                return await this.#browserProcessor.getClientWindows();\n            case 'browser.getUserContexts':\n                return await this.#browserProcessor.getUserContexts();\n            case 'browser.removeUserContext':\n                return await this.#browserProcessor.removeUserContext(this.#parser.parseRemoveUserContextParameters(command.params));\n            case 'browser.setClientWindowState':\n                this.#parser.parseSetClientWindowStateParameters(command.params);\n                throw new protocol_js_1.UnknownErrorException(`Method ${command.method} is not implemented.`);\n            // keep-sorted end\n            // Browsing Context module\n            // keep-sorted start block=yes\n            case 'browsingContext.activate':\n                return await this.#browsingContextProcessor.activate(this.#parser.parseActivateParams(command.params));\n            case 'browsingContext.captureScreenshot':\n                return await this.#browsingContextProcessor.captureScreenshot(this.#parser.parseCaptureScreenshotParams(command.params));\n            case 'browsingContext.close':\n                return await this.#browsingContextProcessor.close(this.#parser.parseCloseParams(command.params));\n            case 'browsingContext.create':\n                return await this.#browsingContextProcessor.create(this.#parser.parseCreateParams(command.params));\n            case 'browsingContext.getTree':\n                return this.#browsingContextProcessor.getTree(this.#parser.parseGetTreeParams(command.params));\n            case 'browsingContext.handleUserPrompt':\n                return await this.#browsingContextProcessor.handleUserPrompt(this.#parser.parseHandleUserPromptParams(command.params));\n            case 'browsingContext.locateNodes':\n                return await this.#browsingContextProcessor.locateNodes(this.#parser.parseLocateNodesParams(command.params));\n            case 'browsingContext.navigate':\n                return await this.#browsingContextProcessor.navigate(this.#parser.parseNavigateParams(command.params));\n            case 'browsingContext.print':\n                return await this.#browsingContextProcessor.print(this.#parser.parsePrintParams(command.params));\n            case 'browsingContext.reload':\n                return await this.#browsingContextProcessor.reload(this.#parser.parseReloadParams(command.params));\n            case 'browsingContext.setViewport':\n                return await this.#browsingContextProcessor.setViewport(this.#parser.parseSetViewportParams(command.params));\n            case 'browsingContext.traverseHistory':\n                return await this.#browsingContextProcessor.traverseHistory(this.#parser.parseTraverseHistoryParams(command.params));\n            // keep-sorted end\n            // CDP module\n            // keep-sorted start block=yes\n            case 'goog:cdp.getSession':\n                return this.#cdpProcessor.getSession(this.#parser.parseGetSessionParams(command.params));\n            case 'goog:cdp.resolveRealm':\n                return this.#cdpProcessor.resolveRealm(this.#parser.parseResolveRealmParams(command.params));\n            case 'goog:cdp.sendCommand':\n                return await this.#cdpProcessor.sendCommand(this.#parser.parseSendCommandParams(command.params));\n            // keep-sorted end\n            // Emulation module\n            // keep-sorted start block=yes\n            case 'emulation.setGeolocationOverride':\n                return await this.#emulationProcessor.setGeolocationOverride(this.#parser.parseSetGeolocationOverrideParams(command.params));\n            case 'emulation.setLocaleOverride':\n                return await this.#emulationProcessor.setLocaleOverride(this.#parser.parseSetLocaleOverrideParams(command.params));\n            case 'emulation.setScreenOrientationOverride':\n                return await this.#emulationProcessor.setScreenOrientationOverride(this.#parser.parseSetScreenOrientationOverrideParams(command.params));\n            case 'emulation.setTimezoneOverride':\n                return await this.#emulationProcessor.setTimezoneOverride(this.#parser.parseSetTimezoneOverrideParams(command.params));\n            // keep-sorted end\n            // Input module\n            // keep-sorted start block=yes\n            case 'input.performActions':\n                return await this.#inputProcessor.performActions(this.#parser.parsePerformActionsParams(command.params));\n            case 'input.releaseActions':\n                return await this.#inputProcessor.releaseActions(this.#parser.parseReleaseActionsParams(command.params));\n            case 'input.setFiles':\n                return await this.#inputProcessor.setFiles(this.#parser.parseSetFilesParams(command.params));\n            // keep-sorted end\n            // Network module\n            // keep-sorted start block=yes\n            case 'network.addDataCollector':\n                return await this.#networkProcessor.addDataCollector(this.#parser.parseAddDataCollectorParams(command.params));\n            case 'network.addIntercept':\n                return await this.#networkProcessor.addIntercept(this.#parser.parseAddInterceptParams(command.params));\n            case 'network.continueRequest':\n                return await this.#networkProcessor.continueRequest(this.#parser.parseContinueRequestParams(command.params));\n            case 'network.continueResponse':\n                return await this.#networkProcessor.continueResponse(this.#parser.parseContinueResponseParams(command.params));\n            case 'network.continueWithAuth':\n                return await this.#networkProcessor.continueWithAuth(this.#parser.parseContinueWithAuthParams(command.params));\n            case 'network.disownData':\n                return this.#networkProcessor.disownData(this.#parser.parseDisownDataParams(command.params));\n            case 'network.failRequest':\n                return await this.#networkProcessor.failRequest(this.#parser.parseFailRequestParams(command.params));\n            case 'network.getData':\n                return await this.#networkProcessor.getData(this.#parser.parseGetDataParams(command.params));\n            case 'network.provideResponse':\n                return await this.#networkProcessor.provideResponse(this.#parser.parseProvideResponseParams(command.params));\n            case 'network.removeDataCollector':\n                return await this.#networkProcessor.removeDataCollector(this.#parser.parseRemoveDataCollectorParams(command.params));\n            case 'network.removeIntercept':\n                return await this.#networkProcessor.removeIntercept(this.#parser.parseRemoveInterceptParams(command.params));\n            case 'network.setCacheBehavior':\n                return await this.#networkProcessor.setCacheBehavior(this.#parser.parseSetCacheBehavior(command.params));\n            // keep-sorted end\n            // Permissions module\n            // keep-sorted start block=yes\n            case 'permissions.setPermission':\n                return await this.#permissionsProcessor.setPermissions(this.#parser.parseSetPermissionsParams(command.params));\n            // keep-sorted end\n            // Script module\n            // keep-sorted start block=yes\n            case 'script.addPreloadScript':\n                return await this.#scriptProcessor.addPreloadScript(this.#parser.parseAddPreloadScriptParams(command.params));\n            case 'script.callFunction':\n                return await this.#scriptProcessor.callFunction(this.#parser.parseCallFunctionParams(this.#processTargetParams(command.params)));\n            case 'script.disown':\n                return await this.#scriptProcessor.disown(this.#parser.parseDisownParams(this.#processTargetParams(command.params)));\n            case 'script.evaluate':\n                return await this.#scriptProcessor.evaluate(this.#parser.parseEvaluateParams(this.#processTargetParams(command.params)));\n            case 'script.getRealms':\n                return this.#scriptProcessor.getRealms(this.#parser.parseGetRealmsParams(command.params));\n            case 'script.removePreloadScript':\n                return await this.#scriptProcessor.removePreloadScript(this.#parser.parseRemovePreloadScriptParams(command.params));\n            // keep-sorted end\n            // Session module\n            // keep-sorted start block=yes\n            case 'session.end':\n                throw new protocol_js_1.UnknownErrorException(`Method ${command.method} is not implemented.`);\n            case 'session.new':\n                return await this.#sessionProcessor.new(command.params);\n            case 'session.status':\n                return this.#sessionProcessor.status();\n            case 'session.subscribe':\n                return await this.#sessionProcessor.subscribe(this.#parser.parseSubscribeParams(command.params), command['goog:channel']);\n            case 'session.unsubscribe':\n                return await this.#sessionProcessor.unsubscribe(this.#parser.parseUnsubscribeParams(command.params), command['goog:channel']);\n            // keep-sorted end\n            // Storage module\n            // keep-sorted start block=yes\n            case 'storage.deleteCookies':\n                return await this.#storageProcessor.deleteCookies(this.#parser.parseDeleteCookiesParams(command.params));\n            case 'storage.getCookies':\n                return await this.#storageProcessor.getCookies(this.#parser.parseGetCookiesParams(command.params));\n            case 'storage.setCookie':\n                return await this.#storageProcessor.setCookie(this.#parser.parseSetCookieParams(command.params));\n            // keep-sorted end\n            // WebExtension module\n            // keep-sorted start block=yes\n            case 'webExtension.install':\n                return await this.#webExtensionProcessor.install(this.#parser.parseInstallParams(command.params));\n            case 'webExtension.uninstall':\n                return await this.#webExtensionProcessor.uninstall(this.#parser.parseUninstallParams(command.params));\n            // keep-sorted end\n        }\n        // Intentionally kept outside the switch statement to ensure that\n        // ESLint @typescript-eslint/switch-exhaustiveness-check triggers if a new\n        // command is added.\n        throw new protocol_js_1.UnknownCommandException(`Unknown command '${command?.method}'.`);\n    }\n    // Workaround for as zod.union always take the first schema\n    // https://github.com/w3c/webdriver-bidi/issues/635\n    #processTargetParams(params) {\n        if (typeof params === 'object' &&\n            params &&\n            'target' in params &&\n            typeof params.target === 'object' &&\n            params.target &&\n            'context' in params.target) {\n            delete params.target['realm'];\n        }\n        return params;\n    }\n    async processCommand(command) {\n        try {\n            const result = await this.#processCommand(command);\n            const response = {\n                type: 'success',\n                id: command.id,\n                result,\n            };\n            this.emit(\"response\" /* CommandProcessorEvents.Response */, {\n                message: OutgoingMessage_js_1.OutgoingMessage.createResolved(response, command['goog:channel']),\n                event: command.method,\n            });\n        }\n        catch (e) {\n            if (e instanceof protocol_js_1.Exception) {\n                this.emit(\"response\" /* CommandProcessorEvents.Response */, {\n                    message: OutgoingMessage_js_1.OutgoingMessage.createResolved(e.toErrorResponse(command.id), command['goog:channel']),\n                    event: command.method,\n                });\n            }\n            else {\n                const error = e;\n                this.#logger?.(log_js_1.LogType.bidi, error);\n                // Heuristic required for processing cases when a browsing context is gone\n                // during the command processing, e.g. like in test\n                // `test_input_keyDown_closes_browsing_context`.\n                const errorException = this.#browserCdpClient.isCloseError(e)\n                    ? new protocol_js_1.NoSuchFrameException(`Browsing context is gone`)\n                    : new protocol_js_1.UnknownErrorException(error.message, error.stack);\n                this.emit(\"response\" /* CommandProcessorEvents.Response */, {\n                    message: OutgoingMessage_js_1.OutgoingMessage.createResolved(errorException.toErrorResponse(command.id), command['goog:channel']),\n                    event: command.method,\n                });\n            }\n        }\n    }\n}\nexports.CommandProcessor = CommandProcessor;\n//# sourceMappingURL=CommandProcessor.js.map","\"use strict\";\n/*\n *  Copyright 2025 Google LLC.\n *  Copyright (c) Microsoft Corporation.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapperOptionsStorage = void 0;\nclass MapperOptionsStorage {\n    mapperOptions;\n}\nexports.MapperOptionsStorage = MapperOptionsStorage;\n//# sourceMappingURL=MapperOptions.js.map","\"use strict\";\n/**\n * Copyright 2024 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BluetoothProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\n/** Represents a base Bluetooth GATT item. */\nclass BluetoothGattItem {\n    id;\n    uuid;\n    constructor(id, uuid) {\n        this.id = id;\n        this.uuid = uuid;\n    }\n}\n/** Represents a Bluetooth descriptor. */\nclass BluetoothDescriptor extends BluetoothGattItem {\n    characteristic;\n    constructor(id, uuid, characteristic) {\n        super(id, uuid);\n        this.characteristic = characteristic;\n    }\n}\n/** Represents a Bluetooth characteristic. */\nclass BluetoothCharacteristic extends BluetoothGattItem {\n    descriptors = new Map();\n    service;\n    constructor(id, uuid, service) {\n        super(id, uuid);\n        this.service = service;\n    }\n}\n/** Represents a Bluetooth service. */\nclass BluetoothService extends BluetoothGattItem {\n    characteristics = new Map();\n    device;\n    constructor(id, uuid, device) {\n        super(id, uuid);\n        this.device = device;\n    }\n}\n/** Represents a Bluetooth device. */\nclass BluetoothDevice {\n    address;\n    services = new Map();\n    constructor(address) {\n        this.address = address;\n    }\n}\nclass BluetoothProcessor {\n    #eventManager;\n    #browsingContextStorage;\n    #bluetoothDevices = new Map();\n    // A map from a characteristic id from CDP to its BluetoothCharacteristic object.\n    #bluetoothCharacteristics = new Map();\n    // A map from a descriptor id from CDP to its BluetoothDescriptor object.\n    #bluetoothDescriptors = new Map();\n    constructor(eventManager, browsingContextStorage) {\n        this.#eventManager = eventManager;\n        this.#browsingContextStorage = browsingContextStorage;\n    }\n    #getDevice(address) {\n        const device = this.#bluetoothDevices.get(address);\n        if (!device) {\n            throw new protocol_js_1.InvalidArgumentException(`Bluetooth device with address ${address} does not exist`);\n        }\n        return device;\n    }\n    #getService(device, serviceUuid) {\n        const service = device.services.get(serviceUuid);\n        if (!service) {\n            throw new protocol_js_1.InvalidArgumentException(`Service with UUID ${serviceUuid} on device ${device.address} does not exist`);\n        }\n        return service;\n    }\n    #getCharacteristic(service, characteristicUuid) {\n        const characteristic = service.characteristics.get(characteristicUuid);\n        if (!characteristic) {\n            throw new protocol_js_1.InvalidArgumentException(`Characteristic with UUID ${characteristicUuid} does not exist for service ${service.uuid} on device ${service.device.address}`);\n        }\n        return characteristic;\n    }\n    #getDescriptor(characteristic, descriptorUuid) {\n        const descriptor = characteristic.descriptors.get(descriptorUuid);\n        if (!descriptor) {\n            throw new protocol_js_1.InvalidArgumentException(`Descriptor with UUID ${descriptorUuid} does not exist for characteristic ${characteristic.uuid} on service ${characteristic.service.uuid} on device ${characteristic.service.device.address}`);\n        }\n        return descriptor;\n    }\n    async simulateAdapter(params) {\n        if (params.state === undefined) {\n            // The bluetooth.simulateAdapter Command\n            // Step 4.2. If params[\"state\"] does not exist, return error with error code invalid argument.\n            // https://webbluetoothcg.github.io/web-bluetooth/#bluetooth-simulateAdapter-command\n            throw new protocol_js_1.InvalidArgumentException(`Parameter \"state\" is required for creating a Bluetooth adapter`);\n        }\n        const context = this.#browsingContextStorage.getContext(params.context);\n        // Bluetooth spec requires overriding the existing adapter (step 6). From the CDP\n        // perspective, we need to disable the emulation first.\n        // https://webbluetoothcg.github.io/web-bluetooth/#bluetooth-simulateAdapter-command\n        await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.disable');\n        this.#bluetoothDevices.clear();\n        this.#bluetoothCharacteristics.clear();\n        this.#bluetoothDescriptors.clear();\n        await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.enable', {\n            state: params.state,\n            leSupported: params.leSupported ?? true,\n        });\n        return {};\n    }\n    async disableSimulation(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.disable');\n        this.#bluetoothDevices.clear();\n        this.#bluetoothCharacteristics.clear();\n        this.#bluetoothDescriptors.clear();\n        return {};\n    }\n    async simulatePreconnectedPeripheral(params) {\n        if (this.#bluetoothDevices.has(params.address)) {\n            throw new protocol_js_1.InvalidArgumentException(`Bluetooth device with address ${params.address} already exists`);\n        }\n        const context = this.#browsingContextStorage.getContext(params.context);\n        await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.simulatePreconnectedPeripheral', {\n            address: params.address,\n            name: params.name,\n            knownServiceUuids: params.knownServiceUuids,\n            manufacturerData: params.manufacturerData,\n        });\n        this.#bluetoothDevices.set(params.address, new BluetoothDevice(params.address));\n        return {};\n    }\n    async simulateAdvertisement(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.simulateAdvertisement', {\n            entry: params.scanEntry,\n        });\n        return {};\n    }\n    async simulateCharacteristic(params) {\n        const device = this.#getDevice(params.address);\n        const service = this.#getService(device, params.serviceUuid);\n        const context = this.#browsingContextStorage.getContext(params.context);\n        switch (params.type) {\n            case 'add': {\n                if (params.characteristicProperties === undefined) {\n                    throw new protocol_js_1.InvalidArgumentException(`Parameter \"characteristicProperties\" is required for adding a Bluetooth characteristic`);\n                }\n                if (service.characteristics.has(params.characteristicUuid)) {\n                    throw new protocol_js_1.InvalidArgumentException(`Characteristic with UUID ${params.characteristicUuid} already exists`);\n                }\n                const response = await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.addCharacteristic', {\n                    serviceId: service.id,\n                    characteristicUuid: params.characteristicUuid,\n                    properties: params.characteristicProperties,\n                });\n                const characteristic = new BluetoothCharacteristic(response.characteristicId, params.characteristicUuid, service);\n                service.characteristics.set(params.characteristicUuid, characteristic);\n                this.#bluetoothCharacteristics.set(characteristic.id, characteristic);\n                return {};\n            }\n            case 'remove': {\n                if (params.characteristicProperties !== undefined) {\n                    throw new protocol_js_1.InvalidArgumentException(`Parameter \"characteristicProperties\" should not be provided for removing a Bluetooth characteristic`);\n                }\n                const characteristic = this.#getCharacteristic(service, params.characteristicUuid);\n                await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.removeCharacteristic', {\n                    characteristicId: characteristic.id,\n                });\n                service.characteristics.delete(params.characteristicUuid);\n                this.#bluetoothCharacteristics.delete(characteristic.id);\n                return {};\n            }\n            default:\n                throw new protocol_js_1.InvalidArgumentException(`Parameter \"type\" of ${params.type} is not supported`);\n        }\n    }\n    async simulateCharacteristicResponse(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        const device = this.#getDevice(params.address);\n        const service = this.#getService(device, params.serviceUuid);\n        const characteristic = this.#getCharacteristic(service, params.characteristicUuid);\n        await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.simulateCharacteristicOperationResponse', {\n            characteristicId: characteristic.id,\n            type: params.type,\n            code: params.code,\n            ...(params.data && {\n                data: btoa(String.fromCharCode(...params.data)),\n            }),\n        });\n        return {};\n    }\n    async simulateDescriptor(params) {\n        const device = this.#getDevice(params.address);\n        const service = this.#getService(device, params.serviceUuid);\n        const characteristic = this.#getCharacteristic(service, params.characteristicUuid);\n        const context = this.#browsingContextStorage.getContext(params.context);\n        switch (params.type) {\n            case 'add': {\n                if (characteristic.descriptors.has(params.descriptorUuid)) {\n                    throw new protocol_js_1.InvalidArgumentException(`Descriptor with UUID ${params.descriptorUuid} already exists`);\n                }\n                const response = await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.addDescriptor', {\n                    characteristicId: characteristic.id,\n                    descriptorUuid: params.descriptorUuid,\n                });\n                const descriptor = new BluetoothDescriptor(response.descriptorId, params.descriptorUuid, characteristic);\n                characteristic.descriptors.set(params.descriptorUuid, descriptor);\n                this.#bluetoothDescriptors.set(descriptor.id, descriptor);\n                return {};\n            }\n            case 'remove': {\n                const descriptor = this.#getDescriptor(characteristic, params.descriptorUuid);\n                await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.removeDescriptor', {\n                    descriptorId: descriptor.id,\n                });\n                characteristic.descriptors.delete(params.descriptorUuid);\n                this.#bluetoothDescriptors.delete(descriptor.id);\n                return {};\n            }\n            default:\n                throw new protocol_js_1.InvalidArgumentException(`Parameter \"type\" of ${params.type} is not supported`);\n        }\n    }\n    async simulateDescriptorResponse(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        const device = this.#getDevice(params.address);\n        const service = this.#getService(device, params.serviceUuid);\n        const characteristic = this.#getCharacteristic(service, params.characteristicUuid);\n        const descriptor = this.#getDescriptor(characteristic, params.descriptorUuid);\n        await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.simulateDescriptorOperationResponse', {\n            descriptorId: descriptor.id,\n            type: params.type,\n            code: params.code,\n            ...(params.data && {\n                data: btoa(String.fromCharCode(...params.data)),\n            }),\n        });\n        return {};\n    }\n    async simulateGattConnectionResponse(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.simulateGATTOperationResponse', {\n            address: params.address,\n            type: 'connection',\n            code: params.code,\n        });\n        return {};\n    }\n    async simulateGattDisconnection(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.simulateGATTDisconnection', {\n            address: params.address,\n        });\n        return {};\n    }\n    async simulateService(params) {\n        const device = this.#getDevice(params.address);\n        const context = this.#browsingContextStorage.getContext(params.context);\n        switch (params.type) {\n            case 'add': {\n                if (device.services.has(params.uuid)) {\n                    throw new protocol_js_1.InvalidArgumentException(`Service with UUID ${params.uuid} already exists`);\n                }\n                const response = await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.addService', {\n                    address: params.address,\n                    serviceUuid: params.uuid,\n                });\n                device.services.set(params.uuid, new BluetoothService(response.serviceId, params.uuid, device));\n                return {};\n            }\n            case 'remove': {\n                const service = this.#getService(device, params.uuid);\n                await context.cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.removeService', {\n                    serviceId: service.id,\n                });\n                device.services.delete(params.uuid);\n                return {};\n            }\n            default:\n                throw new protocol_js_1.InvalidArgumentException(`Parameter \"type\" of ${params.type} is not supported`);\n        }\n    }\n    onCdpTargetCreated(cdpTarget) {\n        cdpTarget.cdpClient.on('DeviceAccess.deviceRequestPrompted', (event) => {\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: 'bluetooth.requestDevicePromptUpdated',\n                params: {\n                    context: cdpTarget.id,\n                    prompt: event.id,\n                    devices: event.devices,\n                },\n            }, cdpTarget.id);\n        });\n        cdpTarget.browserCdpClient.on('BluetoothEmulation.gattOperationReceived', async (event) => {\n            switch (event.type) {\n                case 'connection':\n                    this.#eventManager.registerEvent({\n                        type: 'event',\n                        method: 'bluetooth.gattConnectionAttempted',\n                        params: {\n                            context: cdpTarget.id,\n                            address: event.address,\n                        },\n                    }, cdpTarget.id);\n                    return;\n                case 'discovery':\n                    // Chromium Web Bluetooth simulation generates this GATT discovery event when\n                    // a page attempts to get services for a given Bluetooth device for the first time.\n                    // This 'get services' operation is put on hold until a GATT discovery response\n                    // is sent to the simulation.\n                    // Note: Web Bluetooth automation (see https://webbluetoothcg.github.io/web-bluetooth/#automated-testing)\n                    // does not support simulating a GATT discovery response. This is because simulated services, characteristics,\n                    // or descriptors are immediately visible to the simulation, meaning it doesn't have a distinct\n                    // DISCOVERY state. Therefore, this code simulates a successful GATT discovery\n                    // response upon receiving this event.\n                    await cdpTarget.browserCdpClient.sendCommand('BluetoothEmulation.simulateGATTOperationResponse', {\n                        address: event.address,\n                        type: 'discovery',\n                        code: 0x0,\n                    });\n            }\n        });\n        cdpTarget.browserCdpClient.on('BluetoothEmulation.characteristicOperationReceived', (event) => {\n            if (!this.#bluetoothCharacteristics.has(event.characteristicId)) {\n                return;\n            }\n            let type;\n            if (event.type === 'write') {\n                // write-default-deprecated comes from\n                // https://webbluetoothcg.github.io/web-bluetooth/#dom-bluetoothremotegattcharacteristic-writevalue,\n                // which is deprecated so not supported.\n                if (event.writeType === 'write-default-deprecated') {\n                    return;\n                }\n                type = event.writeType;\n            }\n            else {\n                type = event.type;\n            }\n            const characteristic = this.#bluetoothCharacteristics.get(event.characteristicId);\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: 'bluetooth.characteristicEventGenerated',\n                params: {\n                    context: cdpTarget.id,\n                    address: characteristic.service.device.address,\n                    serviceUuid: characteristic.service.uuid,\n                    characteristicUuid: characteristic.uuid,\n                    type,\n                    ...(event.data && {\n                        data: Array.from(atob(event.data), (c) => c.charCodeAt(0)),\n                    }),\n                },\n            }, cdpTarget.id);\n        });\n        cdpTarget.browserCdpClient.on('BluetoothEmulation.descriptorOperationReceived', (event) => {\n            if (!this.#bluetoothDescriptors.has(event.descriptorId)) {\n                return;\n            }\n            const descriptor = this.#bluetoothDescriptors.get(event.descriptorId);\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: 'bluetooth.descriptorEventGenerated',\n                params: {\n                    context: cdpTarget.id,\n                    address: descriptor.characteristic.service.device.address,\n                    serviceUuid: descriptor.characteristic.service.uuid,\n                    characteristicUuid: descriptor.characteristic.uuid,\n                    descriptorUuid: descriptor.uuid,\n                    type: event.type,\n                    ...(event.data && {\n                        data: Array.from(atob(event.data), (c) => c.charCodeAt(0)),\n                    }),\n                },\n            }, cdpTarget.id);\n        });\n    }\n    async handleRequestDevicePrompt(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        if (params.accept) {\n            await context.cdpTarget.cdpClient.sendCommand('DeviceAccess.selectPrompt', {\n                id: params.prompt,\n                deviceId: params.device,\n            });\n        }\n        else {\n            await context.cdpTarget.cdpClient.sendCommand('DeviceAccess.cancelPrompt', {\n                id: params.prompt,\n            });\n        }\n        return {};\n    }\n}\nexports.BluetoothProcessor = BluetoothProcessor;\n//# sourceMappingURL=BluetoothProcessor.js.map","\"use strict\";\n/**\n * Copyright 2025 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserContextConfig = void 0;\n/**\n * Represents a user context configurations. Each new CDP target of the given user context\n * will be configured with this.\n */\nclass UserContextConfig {\n    /**\n     * The ID of the user context.\n     */\n    userContextId;\n    acceptInsecureCerts;\n    viewport;\n    devicePixelRatio;\n    geolocation;\n    locale;\n    screenOrientation;\n    timezone;\n    userPromptHandler;\n    constructor(userContextId) {\n        this.userContextId = userContextId;\n    }\n}\nexports.UserContextConfig = UserContextConfig;\n//# sourceMappingURL=UserContextConfig.js.map","\"use strict\";\n/**\n * Copyright 2025 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserContextStorage = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst UserContextConfig_js_1 = require(\"./UserContextConfig.js\");\nclass UserContextStorage {\n    #browserClient;\n    #userConfigMap = new Map();\n    constructor(browserClient) {\n        this.#browserClient = browserClient;\n    }\n    async getUserContexts() {\n        const result = await this.#browserClient.sendCommand('Target.getBrowserContexts');\n        return [\n            {\n                userContext: 'default',\n            },\n            ...result.browserContextIds.map((id) => {\n                return {\n                    userContext: id,\n                };\n            }),\n        ];\n    }\n    getConfig(userContextId) {\n        const userContextConfig = this.#userConfigMap.get(userContextId) ??\n            new UserContextConfig_js_1.UserContextConfig(userContextId);\n        this.#userConfigMap.set(userContextId, userContextConfig);\n        return userContextConfig;\n    }\n    async verifyUserContextIdList(userContextIds) {\n        const foundContexts = new Set();\n        if (!userContextIds.length) {\n            return foundContexts;\n        }\n        const userContexts = await this.getUserContexts();\n        const knownUserContextIds = new Set(userContexts.map((userContext) => userContext.userContext));\n        for (const userContextId of userContextIds) {\n            if (!knownUserContextIds.has(userContextId)) {\n                throw new protocol_js_1.NoSuchUserContextException(`User context ${userContextId} not found`);\n            }\n            foundContexts.add(userContextId);\n        }\n        return foundContexts;\n    }\n}\nexports.UserContextStorage = UserContextStorage;\n//# sourceMappingURL=UserContextStorage.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Deferred = void 0;\nclass Deferred {\n    #isFinished = false;\n    #promise;\n    #result;\n    #resolve;\n    #reject;\n    get isFinished() {\n        return this.#isFinished;\n    }\n    get result() {\n        if (!this.#isFinished) {\n            throw new Error('Deferred is not finished yet');\n        }\n        return this.#result;\n    }\n    constructor() {\n        this.#promise = new Promise((resolve, reject) => {\n            this.#resolve = resolve;\n            this.#reject = reject;\n        });\n        // Needed to avoid `Uncaught (in promise)`. The promises returned by `then`\n        // and `catch` will be rejected anyway.\n        this.#promise.catch((_error) => {\n            // Intentionally empty.\n        });\n    }\n    then(onFulfilled, onRejected) {\n        return this.#promise.then(onFulfilled, onRejected);\n    }\n    catch(onRejected) {\n        return this.#promise.catch(onRejected);\n    }\n    resolve(value) {\n        this.#result = value;\n        if (!this.#isFinished) {\n            this.#isFinished = true;\n            this.#resolve(value);\n        }\n    }\n    reject(reason) {\n        if (!this.#isFinished) {\n            this.#isFinished = true;\n            this.#reject(reason);\n        }\n    }\n    finally(onFinally) {\n        return this.#promise.finally(onFinally);\n    }\n    [Symbol.toStringTag] = 'Promise';\n}\nexports.Deferred = Deferred;\n//# sourceMappingURL=Deferred.js.map","\"use strict\";\n/**\n * Copyright 2024 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getTimestamp = getTimestamp;\nfunction getTimestamp() {\n    // `timestamp` from the event is MonotonicTime, not real time, so\n    // the best Mapper can do is to set the timestamp to the epoch time\n    // of the event arrived.\n    // https://chromedevtools.github.io/devtools-protocol/tot/Network/#type-MonotonicTime\n    return new Date().getTime();\n}\n//# sourceMappingURL=time.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.inchesFromCm = inchesFromCm;\n/** @return Given an input in cm, convert it to inches. */\nfunction inchesFromCm(cm) {\n    return cm / 2.54;\n}\n//# sourceMappingURL=unitConversions.js.map","\"use strict\";\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSharedId = getSharedId;\nexports.parseSharedId = parseSharedId;\nconst SHARED_ID_DIVIDER = '_element_';\nfunction getSharedId(frameId, documentId, backendNodeId) {\n    return `f.${frameId}.d.${documentId}.e.${backendNodeId}`;\n}\nfunction parseLegacySharedId(sharedId) {\n    const match = sharedId.match(new RegExp(`(.*)${SHARED_ID_DIVIDER}(.*)`));\n    if (!match) {\n        // SharedId is incorrectly formatted.\n        return null;\n    }\n    const documentId = match[1];\n    const elementId = match[2];\n    if (documentId === undefined || elementId === undefined) {\n        return null;\n    }\n    const backendNodeId = parseInt(elementId ?? '');\n    if (isNaN(backendNodeId)) {\n        return null;\n    }\n    return {\n        documentId,\n        backendNodeId,\n    };\n}\nfunction parseSharedId(sharedId) {\n    // TODO: remove legacy check once ChromeDriver provides sharedId in the new format.\n    const legacyFormattedSharedId = parseLegacySharedId(sharedId);\n    if (legacyFormattedSharedId !== null) {\n        return { ...legacyFormattedSharedId, frameId: undefined };\n    }\n    const match = sharedId.match(/f\\.(.*)\\.d\\.(.*)\\.e\\.([0-9]*)/);\n    if (!match) {\n        // SharedId is incorrectly formatted.\n        return null;\n    }\n    const frameId = match[1];\n    const documentId = match[2];\n    const elementId = match[3];\n    if (frameId === undefined ||\n        documentId === undefined ||\n        elementId === undefined) {\n        return null;\n    }\n    const backendNodeId = parseInt(elementId ?? '');\n    if (isNaN(backendNodeId)) {\n        return null;\n    }\n    return {\n        frameId,\n        documentId,\n        backendNodeId,\n    };\n}\n//# sourceMappingURL=SharedId.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Realm = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst uuid_js_1 = require(\"../../../utils/uuid.js\");\nconst ChannelProxy_js_1 = require(\"./ChannelProxy.js\");\nclass Realm {\n    #cdpClient;\n    #eventManager;\n    #executionContextId;\n    #logger;\n    #origin;\n    #realmId;\n    realmStorage;\n    constructor(cdpClient, eventManager, executionContextId, logger, origin, realmId, realmStorage) {\n        this.#cdpClient = cdpClient;\n        this.#eventManager = eventManager;\n        this.#executionContextId = executionContextId;\n        this.#logger = logger;\n        this.#origin = origin;\n        this.#realmId = realmId;\n        this.realmStorage = realmStorage;\n        this.realmStorage.addRealm(this);\n    }\n    cdpToBidiValue(cdpValue, resultOwnership) {\n        const bidiValue = this.serializeForBiDi(cdpValue.result.deepSerializedValue, new Map());\n        if (cdpValue.result.objectId) {\n            const objectId = cdpValue.result.objectId;\n            if (resultOwnership === \"root\" /* Script.ResultOwnership.Root */) {\n                // Extend BiDi value with `handle` based on required `resultOwnership`\n                // and  CDP response but not on the actual BiDi type.\n                bidiValue.handle = objectId;\n                // Remember all the handles sent to client.\n                this.realmStorage.knownHandlesToRealmMap.set(objectId, this.realmId);\n            }\n            else {\n                // No need to await for the object to be released.\n                void this.#releaseObject(objectId).catch((error) => this.#logger?.(log_js_1.LogType.debugError, error));\n            }\n        }\n        return bidiValue;\n    }\n    isHidden() {\n        return false;\n    }\n    /**\n     * Relies on the CDP to implement proper BiDi serialization, except:\n     * * CDP integer property `backendNodeId` is replaced with `sharedId` of\n     * `{documentId}_element_{backendNodeId}`;\n     * * CDP integer property `weakLocalObjectReference` is replaced with UUID `internalId`\n     * using unique-per serialization `internalIdMap`.\n     * * CDP type `platformobject` is replaced with `object`.\n     * @param deepSerializedValue - CDP value to be converted to BiDi.\n     * @param internalIdMap - Map from CDP integer `weakLocalObjectReference` to BiDi UUID\n     * `internalId`.\n     */\n    serializeForBiDi(deepSerializedValue, internalIdMap) {\n        if (Object.hasOwn(deepSerializedValue, 'weakLocalObjectReference')) {\n            const weakLocalObjectReference = deepSerializedValue.weakLocalObjectReference;\n            if (!internalIdMap.has(weakLocalObjectReference)) {\n                internalIdMap.set(weakLocalObjectReference, (0, uuid_js_1.uuidv4)());\n            }\n            deepSerializedValue.internalId = internalIdMap.get(weakLocalObjectReference);\n            delete deepSerializedValue['weakLocalObjectReference'];\n        }\n        if (deepSerializedValue.type === 'node' &&\n            deepSerializedValue.value &&\n            Object.hasOwn(deepSerializedValue.value, 'frameId')) {\n            // `frameId` is not needed in BiDi as it is not yet specified.\n            delete deepSerializedValue.value['frameId'];\n        }\n        // Platform object is a special case. It should have only `{type: object}`\n        // without `value` field.\n        if (deepSerializedValue.type === 'platformobject') {\n            return { type: 'object' };\n        }\n        const bidiValue = deepSerializedValue.value;\n        if (bidiValue === undefined) {\n            return deepSerializedValue;\n        }\n        // Recursively update the nested values.\n        if (['array', 'set', 'htmlcollection', 'nodelist'].includes(deepSerializedValue.type)) {\n            for (const i in bidiValue) {\n                bidiValue[i] = this.serializeForBiDi(bidiValue[i], internalIdMap);\n            }\n        }\n        if (['object', 'map'].includes(deepSerializedValue.type)) {\n            for (const i in bidiValue) {\n                bidiValue[i] = [\n                    this.serializeForBiDi(bidiValue[i][0], internalIdMap),\n                    this.serializeForBiDi(bidiValue[i][1], internalIdMap),\n                ];\n            }\n        }\n        return deepSerializedValue;\n    }\n    get realmId() {\n        return this.#realmId;\n    }\n    get executionContextId() {\n        return this.#executionContextId;\n    }\n    get origin() {\n        return this.#origin;\n    }\n    get source() {\n        return {\n            realm: this.realmId,\n        };\n    }\n    get cdpClient() {\n        return this.#cdpClient;\n    }\n    get baseInfo() {\n        return {\n            realm: this.realmId,\n            origin: this.origin,\n        };\n    }\n    async evaluate(expression, awaitPromise, resultOwnership = \"none\" /* Script.ResultOwnership.None */, serializationOptions = {}, userActivation = false, includeCommandLineApi = false) {\n        const cdpEvaluateResult = await this.cdpClient.sendCommand('Runtime.evaluate', {\n            contextId: this.executionContextId,\n            expression,\n            awaitPromise,\n            serializationOptions: Realm.#getSerializationOptions(\"deep\" /* Protocol.Runtime.SerializationOptionsSerialization.Deep */, serializationOptions),\n            userGesture: userActivation,\n            includeCommandLineAPI: includeCommandLineApi,\n        });\n        if (cdpEvaluateResult.exceptionDetails) {\n            return await this.#getExceptionResult(cdpEvaluateResult.exceptionDetails, 0, resultOwnership);\n        }\n        return {\n            realm: this.realmId,\n            result: this.cdpToBidiValue(cdpEvaluateResult, resultOwnership),\n            type: 'success',\n        };\n    }\n    #registerEvent(event) {\n        if (this.associatedBrowsingContexts.length === 0) {\n            this.#eventManager.registerGlobalEvent(event);\n        }\n        else {\n            for (const browsingContext of this.associatedBrowsingContexts) {\n                this.#eventManager.registerEvent(event, browsingContext.id);\n            }\n        }\n    }\n    initialize() {\n        if (!this.isHidden()) {\n            // Report only not-hidden realms.\n            this.#registerEvent({\n                type: 'event',\n                method: protocol_js_1.ChromiumBidi.Script.EventNames.RealmCreated,\n                params: this.realmInfo,\n            });\n        }\n    }\n    /**\n     * Serializes a given CDP object into BiDi, keeping references in the\n     * target's `globalThis`.\n     */\n    async serializeCdpObject(cdpRemoteObject, resultOwnership) {\n        // TODO: if the object is a primitive, return it directly without CDP roundtrip.\n        const argument = Realm.#cdpRemoteObjectToCallArgument(cdpRemoteObject);\n        const cdpValue = await this.cdpClient.sendCommand('Runtime.callFunctionOn', {\n            functionDeclaration: String((remoteObject) => remoteObject),\n            awaitPromise: false,\n            arguments: [argument],\n            serializationOptions: {\n                serialization: \"deep\" /* Protocol.Runtime.SerializationOptionsSerialization.Deep */,\n            },\n            executionContextId: this.executionContextId,\n        });\n        return this.cdpToBidiValue(cdpValue, resultOwnership);\n    }\n    static #cdpRemoteObjectToCallArgument(cdpRemoteObject) {\n        if (cdpRemoteObject.objectId !== undefined) {\n            return { objectId: cdpRemoteObject.objectId };\n        }\n        if (cdpRemoteObject.unserializableValue !== undefined) {\n            return { unserializableValue: cdpRemoteObject.unserializableValue };\n        }\n        return { value: cdpRemoteObject.value };\n    }\n    /**\n     * Gets the string representation of an object. This is equivalent to\n     * calling `toString()` on the object value.\n     */\n    async stringifyObject(cdpRemoteObject) {\n        const { result } = await this.cdpClient.sendCommand('Runtime.callFunctionOn', {\n            functionDeclaration: String((remoteObject) => String(remoteObject)),\n            awaitPromise: false,\n            arguments: [cdpRemoteObject],\n            returnByValue: true,\n            executionContextId: this.executionContextId,\n        });\n        return result.value;\n    }\n    async #flattenKeyValuePairs(mappingLocalValue) {\n        const keyValueArray = await Promise.all(mappingLocalValue.map(async ([key, value]) => {\n            let keyArg;\n            if (typeof key === 'string') {\n                // Key is a string.\n                keyArg = { value: key };\n            }\n            else {\n                // Key is a serialized value.\n                keyArg = await this.deserializeForCdp(key);\n            }\n            const valueArg = await this.deserializeForCdp(value);\n            return [keyArg, valueArg];\n        }));\n        return keyValueArray.flat();\n    }\n    async #flattenValueList(listLocalValue) {\n        return await Promise.all(listLocalValue.map((localValue) => this.deserializeForCdp(localValue)));\n    }\n    async #serializeCdpExceptionDetails(cdpExceptionDetails, lineOffset, resultOwnership) {\n        const callFrames = cdpExceptionDetails.stackTrace?.callFrames.map((frame) => ({\n            url: frame.url,\n            functionName: frame.functionName,\n            lineNumber: frame.lineNumber - lineOffset,\n            columnNumber: frame.columnNumber,\n        })) ?? [];\n        // Exception should always be there.\n        const exception = cdpExceptionDetails.exception;\n        return {\n            exception: await this.serializeCdpObject(exception, resultOwnership),\n            columnNumber: cdpExceptionDetails.columnNumber,\n            lineNumber: cdpExceptionDetails.lineNumber - lineOffset,\n            stackTrace: {\n                callFrames,\n            },\n            text: (await this.stringifyObject(exception)) || cdpExceptionDetails.text,\n        };\n    }\n    async callFunction(functionDeclaration, awaitPromise, thisLocalValue = {\n        type: 'undefined',\n    }, argumentsLocalValues = [], resultOwnership = \"none\" /* Script.ResultOwnership.None */, serializationOptions = {}, userActivation = false) {\n        const callFunctionAndSerializeScript = `(...args) => {\n      function callFunction(f, args) {\n        const deserializedThis = args.shift();\n        const deserializedArgs = args;\n        return f.apply(deserializedThis, deserializedArgs);\n      }\n      return callFunction((\n        ${functionDeclaration}\n      ), args);\n    }`;\n        const thisAndArgumentsList = [\n            await this.deserializeForCdp(thisLocalValue),\n            ...(await Promise.all(argumentsLocalValues.map(async (argumentLocalValue) => await this.deserializeForCdp(argumentLocalValue)))),\n        ];\n        let cdpCallFunctionResult;\n        try {\n            cdpCallFunctionResult = await this.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                functionDeclaration: callFunctionAndSerializeScript,\n                awaitPromise,\n                arguments: thisAndArgumentsList,\n                serializationOptions: Realm.#getSerializationOptions(\"deep\" /* Protocol.Runtime.SerializationOptionsSerialization.Deep */, serializationOptions),\n                executionContextId: this.executionContextId,\n                userGesture: userActivation,\n            });\n        }\n        catch (error) {\n            // Heuristic to determine if the problem is in the argument.\n            // The check can be done on the `deserialization` step, but this approach\n            // helps to save round-trips.\n            if (error.code === -32000 /* CdpErrorConstants.GENERIC_ERROR */ &&\n                [\n                    'Could not find object with given id',\n                    'Argument should belong to the same JavaScript world as target object',\n                    'Invalid remote object id',\n                ].includes(error.message)) {\n                throw new protocol_js_1.NoSuchHandleException('Handle was not found.');\n            }\n            throw error;\n        }\n        if (cdpCallFunctionResult.exceptionDetails) {\n            return await this.#getExceptionResult(cdpCallFunctionResult.exceptionDetails, 1, resultOwnership);\n        }\n        return {\n            type: 'success',\n            result: this.cdpToBidiValue(cdpCallFunctionResult, resultOwnership),\n            realm: this.realmId,\n        };\n    }\n    async deserializeForCdp(localValue) {\n        if ('handle' in localValue && localValue.handle) {\n            return { objectId: localValue.handle };\n            // We tried to find a handle value but failed\n            // This allows us to have exhaustive switch on `localValue.type`\n        }\n        else if ('handle' in localValue || 'sharedId' in localValue) {\n            throw new protocol_js_1.NoSuchHandleException('Handle was not found.');\n        }\n        switch (localValue.type) {\n            case 'undefined':\n                return { unserializableValue: 'undefined' };\n            case 'null':\n                return { unserializableValue: 'null' };\n            case 'string':\n                return { value: localValue.value };\n            case 'number':\n                if (localValue.value === 'NaN') {\n                    return { unserializableValue: 'NaN' };\n                }\n                else if (localValue.value === '-0') {\n                    return { unserializableValue: '-0' };\n                }\n                else if (localValue.value === 'Infinity') {\n                    return { unserializableValue: 'Infinity' };\n                }\n                else if (localValue.value === '-Infinity') {\n                    return { unserializableValue: '-Infinity' };\n                }\n                return {\n                    value: localValue.value,\n                };\n            case 'boolean':\n                return { value: Boolean(localValue.value) };\n            case 'bigint':\n                return {\n                    unserializableValue: `BigInt(${JSON.stringify(localValue.value)})`,\n                };\n            case 'date':\n                return {\n                    unserializableValue: `new Date(Date.parse(${JSON.stringify(localValue.value)}))`,\n                };\n            case 'regexp':\n                return {\n                    unserializableValue: `new RegExp(${JSON.stringify(localValue.value.pattern)}, ${JSON.stringify(localValue.value.flags)})`,\n                };\n            case 'map': {\n                // TODO: If none of the nested keys and values has a remote\n                // reference, serialize to `unserializableValue` without CDP roundtrip.\n                const keyValueArray = await this.#flattenKeyValuePairs(localValue.value);\n                const { result } = await this.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                    functionDeclaration: String((...args) => {\n                        const result = new Map();\n                        for (let i = 0; i < args.length; i += 2) {\n                            result.set(args[i], args[i + 1]);\n                        }\n                        return result;\n                    }),\n                    awaitPromise: false,\n                    arguments: keyValueArray,\n                    returnByValue: false,\n                    executionContextId: this.executionContextId,\n                });\n                // TODO(#375): Release `result.objectId` after using.\n                return { objectId: result.objectId };\n            }\n            case 'object': {\n                // TODO: If none of the nested keys and values has a remote\n                // reference, serialize to `unserializableValue` without CDP roundtrip.\n                const keyValueArray = await this.#flattenKeyValuePairs(localValue.value);\n                const { result } = await this.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                    functionDeclaration: String((...args) => {\n                        const result = {};\n                        for (let i = 0; i < args.length; i += 2) {\n                            // Key should be either `string`, `number`, or `symbol`.\n                            const key = args[i];\n                            result[key] = args[i + 1];\n                        }\n                        return result;\n                    }),\n                    awaitPromise: false,\n                    arguments: keyValueArray,\n                    returnByValue: false,\n                    executionContextId: this.executionContextId,\n                });\n                // TODO(#375): Release `result.objectId` after using.\n                return { objectId: result.objectId };\n            }\n            case 'array': {\n                // TODO: If none of the nested items has a remote reference,\n                // serialize to `unserializableValue` without CDP roundtrip.\n                const args = await this.#flattenValueList(localValue.value);\n                const { result } = await this.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                    functionDeclaration: String((...args) => args),\n                    awaitPromise: false,\n                    arguments: args,\n                    returnByValue: false,\n                    executionContextId: this.executionContextId,\n                });\n                // TODO(#375): Release `result.objectId` after using.\n                return { objectId: result.objectId };\n            }\n            case 'set': {\n                // TODO: if none of the nested items has a remote reference,\n                // serialize to `unserializableValue` without CDP roundtrip.\n                const args = await this.#flattenValueList(localValue.value);\n                const { result } = await this.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                    functionDeclaration: String((...args) => new Set(args)),\n                    awaitPromise: false,\n                    arguments: args,\n                    returnByValue: false,\n                    executionContextId: this.executionContextId,\n                });\n                // TODO(#375): Release `result.objectId` after using.\n                return { objectId: result.objectId };\n            }\n            case 'channel': {\n                const channelProxy = new ChannelProxy_js_1.ChannelProxy(localValue.value, this.#logger);\n                const channelProxySendMessageHandle = await channelProxy.init(this, this.#eventManager);\n                return { objectId: channelProxySendMessageHandle };\n            }\n            // TODO(#375): Dispose of nested objects.\n        }\n        // Intentionally outside to handle unknown types\n        throw new Error(`Value ${JSON.stringify(localValue)} is not deserializable.`);\n    }\n    async #getExceptionResult(exceptionDetails, lineOffset, resultOwnership) {\n        return {\n            exceptionDetails: await this.#serializeCdpExceptionDetails(exceptionDetails, lineOffset, resultOwnership),\n            realm: this.realmId,\n            type: 'exception',\n        };\n    }\n    static #getSerializationOptions(serialization, serializationOptions) {\n        return {\n            serialization,\n            additionalParameters: Realm.#getAdditionalSerializationParameters(serializationOptions),\n            ...Realm.#getMaxObjectDepth(serializationOptions),\n        };\n    }\n    static #getAdditionalSerializationParameters(serializationOptions) {\n        const additionalParameters = {};\n        if (serializationOptions.maxDomDepth !== undefined) {\n            additionalParameters['maxNodeDepth'] =\n                serializationOptions.maxDomDepth === null\n                    ? 1000\n                    : serializationOptions.maxDomDepth;\n        }\n        if (serializationOptions.includeShadowTree !== undefined) {\n            additionalParameters['includeShadowTree'] =\n                serializationOptions.includeShadowTree;\n        }\n        return additionalParameters;\n    }\n    static #getMaxObjectDepth(serializationOptions) {\n        return serializationOptions.maxObjectDepth === undefined ||\n            serializationOptions.maxObjectDepth === null\n            ? {}\n            : { maxDepth: serializationOptions.maxObjectDepth };\n    }\n    async #releaseObject(handle) {\n        try {\n            await this.cdpClient.sendCommand('Runtime.releaseObject', {\n                objectId: handle,\n            });\n        }\n        catch (error) {\n            // Heuristic to determine if the problem is in the unknown handler.\n            // Ignore the error if so.\n            if (!(error.code === -32000 /* CdpErrorConstants.GENERIC_ERROR */ &&\n                error.message === 'Invalid remote object id')) {\n                throw error;\n            }\n        }\n    }\n    async disown(handle) {\n        // Disowning an object from different realm does nothing.\n        if (this.realmStorage.knownHandlesToRealmMap.get(handle) !== this.realmId) {\n            return;\n        }\n        await this.#releaseObject(handle);\n        this.realmStorage.knownHandlesToRealmMap.delete(handle);\n    }\n    dispose() {\n        this.#registerEvent({\n            type: 'event',\n            method: protocol_js_1.ChromiumBidi.Script.EventNames.RealmDestroyed,\n            params: {\n                realm: this.realmId,\n            },\n        });\n    }\n}\nexports.Realm = Realm;\n//# sourceMappingURL=Realm.js.map","\"use strict\";\n/**\n * Copyright 2024 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WindowRealm = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst Realm_js_1 = require(\"./Realm.js\");\nconst SharedId_js_1 = require(\"./SharedId.js\");\nclass WindowRealm extends Realm_js_1.Realm {\n    #browsingContextId;\n    #browsingContextStorage;\n    sandbox;\n    constructor(browsingContextId, browsingContextStorage, cdpClient, eventManager, executionContextId, logger, origin, realmId, realmStorage, sandbox) {\n        super(cdpClient, eventManager, executionContextId, logger, origin, realmId, realmStorage);\n        this.#browsingContextId = browsingContextId;\n        this.#browsingContextStorage = browsingContextStorage;\n        this.sandbox = sandbox;\n        this.initialize();\n    }\n    #getBrowsingContextId(navigableId) {\n        const maybeBrowsingContext = this.#browsingContextStorage\n            .getAllContexts()\n            .find((context) => context.navigableId === navigableId);\n        return maybeBrowsingContext?.id ?? 'UNKNOWN';\n    }\n    get browsingContext() {\n        return this.#browsingContextStorage.getContext(this.#browsingContextId);\n    }\n    /**\n     * Do not expose to user hidden realms.\n     */\n    isHidden() {\n        return this.realmStorage.hiddenSandboxes.has(this.sandbox);\n    }\n    get associatedBrowsingContexts() {\n        return [this.browsingContext];\n    }\n    get realmType() {\n        return 'window';\n    }\n    get realmInfo() {\n        return {\n            ...this.baseInfo,\n            type: this.realmType,\n            context: this.#browsingContextId,\n            sandbox: this.sandbox,\n        };\n    }\n    get source() {\n        return {\n            realm: this.realmId,\n            context: this.browsingContext.id,\n        };\n    }\n    serializeForBiDi(deepSerializedValue, internalIdMap) {\n        const bidiValue = deepSerializedValue.value;\n        if (deepSerializedValue.type === 'node' && bidiValue !== undefined) {\n            if (Object.hasOwn(bidiValue, 'backendNodeId')) {\n                let navigableId = this.browsingContext.navigableId ?? 'UNKNOWN';\n                if (Object.hasOwn(bidiValue, 'loaderId')) {\n                    // `loaderId` should be always there after ~2024-03-05, when\n                    // https://crrev.com/c/5116240 reaches stable.\n                    // TODO: remove the check after the date.\n                    navigableId = bidiValue.loaderId;\n                    delete bidiValue['loaderId'];\n                }\n                deepSerializedValue.sharedId =\n                    (0, SharedId_js_1.getSharedId)(this.#getBrowsingContextId(navigableId), navigableId, bidiValue.backendNodeId);\n                delete bidiValue['backendNodeId'];\n            }\n            if (Object.hasOwn(bidiValue, 'children')) {\n                for (const i in bidiValue.children) {\n                    bidiValue.children[i] = this.serializeForBiDi(bidiValue.children[i], internalIdMap);\n                }\n            }\n            if (Object.hasOwn(bidiValue, 'shadowRoot') &&\n                bidiValue.shadowRoot !== null) {\n                bidiValue.shadowRoot = this.serializeForBiDi(bidiValue.shadowRoot, internalIdMap);\n            }\n            // `namespaceURI` can be is either `null` or non-empty string.\n            if (bidiValue.namespaceURI === '') {\n                bidiValue.namespaceURI = null;\n            }\n        }\n        return super.serializeForBiDi(deepSerializedValue, internalIdMap);\n    }\n    async deserializeForCdp(localValue) {\n        if ('sharedId' in localValue && localValue.sharedId) {\n            const parsedSharedId = (0, SharedId_js_1.parseSharedId)(localValue.sharedId);\n            if (parsedSharedId === null) {\n                throw new protocol_js_1.NoSuchNodeException(`SharedId \"${localValue.sharedId}\" was not found.`);\n            }\n            const { documentId, backendNodeId } = parsedSharedId;\n            // TODO: add proper validation if the element is accessible from the current realm.\n            if (this.browsingContext.navigableId !== documentId) {\n                throw new protocol_js_1.NoSuchNodeException(`SharedId \"${localValue.sharedId}\" belongs to different document. Current document is ${this.browsingContext.navigableId}.`);\n            }\n            try {\n                const { object } = await this.cdpClient.sendCommand('DOM.resolveNode', {\n                    backendNodeId,\n                    executionContextId: this.executionContextId,\n                });\n                // TODO(#375): Release `obj.object.objectId` after using.\n                return { objectId: object.objectId };\n            }\n            catch (error) {\n                // Heuristic to detect \"no such node\" exception. Based on the  specific\n                // CDP implementation.\n                if (error.code === -32000 /* CdpErrorConstants.GENERIC_ERROR */ &&\n                    error.message === 'No node with given id found') {\n                    throw new protocol_js_1.NoSuchNodeException(`SharedId \"${localValue.sharedId}\" was not found.`);\n                }\n                throw new protocol_js_1.UnknownErrorException(error.message, error.stack);\n            }\n        }\n        return await super.deserializeForCdp(localValue);\n    }\n    async evaluate(expression, awaitPromise, resultOwnership, serializationOptions, userActivation, includeCommandLineApi) {\n        await this.#browsingContextStorage\n            .getContext(this.#browsingContextId)\n            .targetUnblockedOrThrow();\n        return await super.evaluate(expression, awaitPromise, resultOwnership, serializationOptions, userActivation, includeCommandLineApi);\n    }\n    async callFunction(functionDeclaration, awaitPromise, thisLocalValue, argumentsLocalValues, resultOwnership, serializationOptions, userActivation) {\n        await this.#browsingContextStorage\n            .getContext(this.#browsingContextId)\n            .targetUnblockedOrThrow();\n        return await super.callFunction(functionDeclaration, awaitPromise, thisLocalValue, argumentsLocalValues, resultOwnership, serializationOptions, userActivation);\n    }\n}\nexports.WindowRealm = WindowRealm;\n//# sourceMappingURL=WindowRealm.js.map","\"use strict\";\n/*\n *  Copyright 2024 Google LLC.\n *  Copyright (c) Microsoft Corporation.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.urlMatchesAboutBlank = urlMatchesAboutBlank;\n/**\n * A URL matches about:blank if its scheme is \"about\", its path contains a single string\n * \"blank\", its username and password are the empty string, and its host is null.\n * https://html.spec.whatwg.org/multipage/urls-and-fetching.html#matches-about:blank\n * @param {string} url\n * @return {boolean}\n */\nfunction urlMatchesAboutBlank(url) {\n    // An empty string is a special case, and considered to be about:blank.\n    // https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-open-steps\n    if (url === '') {\n        return true;\n    }\n    try {\n        const parsedUrl = new URL(url);\n        const schema = parsedUrl.protocol.replace(/:$/, '');\n        return (schema.toLowerCase() === 'about' &&\n            parsedUrl.pathname.toLowerCase() === 'blank' &&\n            parsedUrl.username === '' &&\n            parsedUrl.password === '' &&\n            parsedUrl.host === '');\n    }\n    catch (err) {\n        // Wrong URL considered do not match about:blank.\n        if (err instanceof TypeError) {\n            return false;\n        }\n        // Re-throw other unexpected errors.\n        throw err;\n    }\n}\n//# sourceMappingURL=urlHelpers.js.map","\"use strict\";\n/*\n *  Copyright 2024 Google LLC.\n *  Copyright (c) Microsoft Corporation.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NavigationTracker = exports.NavigationState = exports.NavigationResult = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst Deferred_js_1 = require(\"../../../utils/Deferred.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst time_js_1 = require(\"../../../utils/time.js\");\nconst urlHelpers_js_1 = require(\"../../../utils/urlHelpers.js\");\nconst uuid_js_1 = require(\"../../../utils/uuid.js\");\nclass NavigationResult {\n    eventName;\n    message;\n    constructor(eventName, message) {\n        this.eventName = eventName;\n        this.message = message;\n    }\n}\nexports.NavigationResult = NavigationResult;\nclass NavigationState {\n    navigationId = (0, uuid_js_1.uuidv4)();\n    #browsingContextId;\n    #started = false;\n    #finished = new Deferred_js_1.Deferred();\n    url;\n    loaderId;\n    #isInitial;\n    #eventManager;\n    committed = new Deferred_js_1.Deferred();\n    isFragmentNavigation;\n    get finished() {\n        return this.#finished;\n    }\n    constructor(url, browsingContextId, isInitial, eventManager) {\n        this.#browsingContextId = browsingContextId;\n        this.url = url;\n        this.#isInitial = isInitial;\n        this.#eventManager = eventManager;\n    }\n    navigationInfo() {\n        return {\n            context: this.#browsingContextId,\n            navigation: this.navigationId,\n            timestamp: (0, time_js_1.getTimestamp)(),\n            url: this.url,\n        };\n    }\n    start() {\n        if (\n        // Initial navigation should not be reported.\n        !this.#isInitial &&\n            // No need in reporting started navigation twice.\n            !this.#started &&\n            // No need for reporting fragment navigations. Step 13 vs step 16 of the spec:\n            // https://html.spec.whatwg.org/#beginning-navigation:webdriver-bidi-navigation-started\n            !this.isFragmentNavigation) {\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.NavigationStarted,\n                params: this.navigationInfo(),\n            }, this.#browsingContextId);\n        }\n        this.#started = true;\n    }\n    #finish(navigationResult) {\n        this.#started = true;\n        if (!this.#isInitial &&\n            !this.#finished.isFinished &&\n            navigationResult.eventName !== \"browsingContext.load\" /* NavigationEventName.Load */) {\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: navigationResult.eventName,\n                params: this.navigationInfo(),\n            }, this.#browsingContextId);\n        }\n        this.#finished.resolve(navigationResult);\n    }\n    frameNavigated() {\n        this.committed.resolve();\n        if (!this.#isInitial) {\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.NavigationCommitted,\n                params: this.navigationInfo(),\n            }, this.#browsingContextId);\n        }\n    }\n    fragmentNavigated() {\n        this.committed.resolve();\n        this.#finish(new NavigationResult(\"browsingContext.fragmentNavigated\" /* NavigationEventName.FragmentNavigated */));\n    }\n    load() {\n        this.#finish(new NavigationResult(\"browsingContext.load\" /* NavigationEventName.Load */));\n    }\n    fail(message) {\n        this.#finish(new NavigationResult(this.committed.isFinished\n            ? \"browsingContext.navigationAborted\" /* NavigationEventName.NavigationAborted */\n            : \"browsingContext.navigationFailed\" /* NavigationEventName.NavigationFailed */, message));\n    }\n}\nexports.NavigationState = NavigationState;\n/**\n * Keeps track of navigations. Details: http://go/webdriver:bidi-navigation\n */\nclass NavigationTracker {\n    #eventManager;\n    #logger;\n    #loaderIdToNavigationsMap = new Map();\n    #browsingContextId;\n    /**\n     * Last committed navigation is committed, but is not guaranteed to be finished, as it\n     * can still wait for `load` or `DOMContentLoaded` events.\n     */\n    #lastCommittedNavigation;\n    /**\n     * Pending navigation is a navigation that is started but not yet committed.\n     */\n    #pendingNavigation;\n    // Flags if the initial navigation to `about:blank` is in progress.\n    #isInitialNavigation = true;\n    constructor(url, browsingContextId, eventManager, logger) {\n        this.#browsingContextId = browsingContextId;\n        this.#eventManager = eventManager;\n        this.#logger = logger;\n        this.#isInitialNavigation = true;\n        // The initial navigation is always committed.\n        this.#lastCommittedNavigation = new NavigationState(url, browsingContextId, (0, urlHelpers_js_1.urlMatchesAboutBlank)(url), this.#eventManager);\n    }\n    /**\n     * Returns current started ongoing navigation. It can be either a started pending\n     * navigation, or one is already navigated.\n     */\n    get currentNavigationId() {\n        if (this.#pendingNavigation?.isFragmentNavigation === false) {\n            // Use pending navigation if it is started and it is not a fragment navigation.\n            return this.#pendingNavigation.navigationId;\n        }\n        // If the pending navigation is a fragment one, or if it is not exists, the last\n        // committed navigation should be used.\n        return this.#lastCommittedNavigation.navigationId;\n    }\n    /**\n     * Flags if the current navigation relates to the initial to `about:blank` navigation.\n     */\n    get isInitialNavigation() {\n        return this.#isInitialNavigation;\n    }\n    /**\n     * Url of the last navigated navigation.\n     */\n    get url() {\n        return this.#lastCommittedNavigation.url;\n    }\n    /**\n     * Creates a pending navigation e.g. when navigation command is called. Required to\n     * provide navigation id before the actual navigation is started. It will be used when\n     * navigation started. Can be aborted, failed, fragment navigated, or became a current\n     * navigation.\n     */\n    createPendingNavigation(url, canBeInitialNavigation = false) {\n        this.#logger?.(log_js_1.LogType.debug, 'createCommandNavigation');\n        this.#isInitialNavigation =\n            canBeInitialNavigation &&\n                this.#isInitialNavigation &&\n                (0, urlHelpers_js_1.urlMatchesAboutBlank)(url);\n        this.#pendingNavigation?.fail('navigation canceled by concurrent navigation');\n        const navigation = new NavigationState(url, this.#browsingContextId, this.#isInitialNavigation, this.#eventManager);\n        this.#pendingNavigation = navigation;\n        return navigation;\n    }\n    dispose() {\n        this.#pendingNavigation?.fail('navigation canceled by context disposal');\n        this.#lastCommittedNavigation.fail('navigation canceled by context disposal');\n    }\n    // Update the current url.\n    onTargetInfoChanged(url) {\n        this.#logger?.(log_js_1.LogType.debug, `onTargetInfoChanged ${url}`);\n        this.#lastCommittedNavigation.url = url;\n    }\n    #getNavigationForFrameNavigated(url, loaderId) {\n        if (this.#loaderIdToNavigationsMap.has(loaderId)) {\n            return this.#loaderIdToNavigationsMap.get(loaderId);\n        }\n        if (this.#pendingNavigation !== undefined &&\n            this.#pendingNavigation.loaderId === undefined) {\n            // This can be a pending navigation to `about:blank` created by a command. Use the\n            // pending navigation in this case.\n            return this.#pendingNavigation;\n        }\n        // Create a new pending navigation.\n        return this.createPendingNavigation(url, true);\n    }\n    /**\n     * @param {string} unreachableUrl indicated the navigation is actually failed.\n     */\n    frameNavigated(url, loaderId, unreachableUrl) {\n        this.#logger?.(log_js_1.LogType.debug, `frameNavigated ${url}`);\n        if (unreachableUrl !== undefined) {\n            // The navigation failed.\n            const navigation = this.#loaderIdToNavigationsMap.get(loaderId) ??\n                this.#pendingNavigation ??\n                this.createPendingNavigation(unreachableUrl, true);\n            navigation.url = unreachableUrl;\n            navigation.start();\n            navigation.fail('the requested url is unreachable');\n            return;\n        }\n        const navigation = this.#getNavigationForFrameNavigated(url, loaderId);\n        if (navigation !== this.#lastCommittedNavigation) {\n            // Even though the `lastCommittedNavigation` is navigated, it still can be waiting\n            // for `load` or `DOMContentLoaded` events.\n            this.#lastCommittedNavigation.fail('navigation canceled by concurrent navigation');\n        }\n        navigation.url = url;\n        navigation.loaderId = loaderId;\n        this.#loaderIdToNavigationsMap.set(loaderId, navigation);\n        navigation.start();\n        navigation.frameNavigated();\n        this.#lastCommittedNavigation = navigation;\n        if (this.#pendingNavigation === navigation) {\n            this.#pendingNavigation = undefined;\n        }\n    }\n    navigatedWithinDocument(url, navigationType) {\n        this.#logger?.(log_js_1.LogType.debug, `navigatedWithinDocument ${url}, ${navigationType}`);\n        // Current navigation URL should be updated.\n        this.#lastCommittedNavigation.url = url;\n        if (navigationType !== 'fragment') {\n            // TODO: check for other navigation types, like `javascript`.\n            return;\n        }\n        // There is no way to map `navigatedWithinDocument` to a specific navigation. Consider\n        // it is the pending navigation, if it is a fragment one.\n        const fragmentNavigation = this.#pendingNavigation?.isFragmentNavigation === true\n            ? this.#pendingNavigation\n            : new NavigationState(url, this.#browsingContextId, false, this.#eventManager);\n        // Finish ongoing navigation.\n        fragmentNavigation.fragmentNavigated();\n        if (fragmentNavigation === this.#pendingNavigation) {\n            this.#pendingNavigation = undefined;\n        }\n    }\n    /**\n     * Required to mark navigation as fully complete.\n     * TODO: navigation should be complete when it became the current one on\n     * `Page.frameNavigated` or on navigating command finished with a new loader Id.\n     */\n    loadPageEvent(loaderId) {\n        this.#logger?.(log_js_1.LogType.debug, 'loadPageEvent');\n        // Even if it was an initial navigation, it is finished.\n        this.#isInitialNavigation = false;\n        this.#loaderIdToNavigationsMap.get(loaderId)?.load();\n    }\n    /**\n     * Fail navigation due to navigation command failed.\n     */\n    failNavigation(navigation, errorText) {\n        this.#logger?.(log_js_1.LogType.debug, 'failCommandNavigation');\n        navigation.fail(errorText);\n    }\n    /**\n     * Updates the navigation's `loaderId` and sets it as current one, if it is a\n     * cross-document navigation.\n     */\n    navigationCommandFinished(navigation, loaderId) {\n        this.#logger?.(log_js_1.LogType.debug, `finishCommandNavigation ${navigation.navigationId}, ${loaderId}`);\n        if (loaderId !== undefined) {\n            navigation.loaderId = loaderId;\n            this.#loaderIdToNavigationsMap.set(loaderId, navigation);\n        }\n        navigation.isFragmentNavigation = loaderId === undefined;\n    }\n    frameStartedNavigating(url, loaderId, navigationType) {\n        this.#logger?.(log_js_1.LogType.debug, `frameStartedNavigating ${url}, ${loaderId}`);\n        if (this.#pendingNavigation &&\n            this.#pendingNavigation?.loaderId !== undefined &&\n            this.#pendingNavigation?.loaderId !== loaderId) {\n            // If there is a pending navigation with loader id set, but not equal to the new\n            // loader id, cancel pending navigation.\n            this.#pendingNavigation?.fail('navigation canceled by concurrent navigation');\n            this.#pendingNavigation = undefined;\n        }\n        if (this.#loaderIdToNavigationsMap.has(loaderId)) {\n            const existingNavigation = this.#loaderIdToNavigationsMap.get(loaderId);\n            // Navigation can be changed from `sameDocument` to `differentDocument`.\n            existingNavigation.isFragmentNavigation =\n                NavigationTracker.#isFragmentNavigation(navigationType);\n            this.#pendingNavigation = existingNavigation;\n            return;\n        }\n        const pendingNavigation = this.#pendingNavigation ?? this.createPendingNavigation(url, true);\n        this.#loaderIdToNavigationsMap.set(loaderId, pendingNavigation);\n        pendingNavigation.isFragmentNavigation =\n            NavigationTracker.#isFragmentNavigation(navigationType);\n        pendingNavigation.url = url;\n        pendingNavigation.loaderId = loaderId;\n        pendingNavigation.start();\n    }\n    static #isFragmentNavigation(navigationType) {\n        // Page.frameStartedNavigating.navigationType can be one of the following values:\n        // reload, reloadBypassingCache, restore, restoreWithPost, historySameDocument,\n        // historyDifferentDocument, sameDocument, differentDocument.\n        // https://chromedevtools.github.io/devtools-protocol/tot/Page/#event-frameStartedNavigating\n        return ['historySameDocument', 'sameDocument'].includes(navigationType);\n    }\n    /**\n     * If there is a navigation with the loaderId equals to the network request id, it means\n     * that the navigation failed.\n     */\n    networkLoadingFailed(loaderId, errorText) {\n        this.#loaderIdToNavigationsMap.get(loaderId)?.fail(errorText);\n    }\n}\nexports.NavigationTracker = NavigationTracker;\n//# sourceMappingURL=NavigationTracker.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowsingContextImpl = void 0;\nexports.serializeOrigin = serializeOrigin;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst assert_js_1 = require(\"../../../utils/assert.js\");\nconst Deferred_js_1 = require(\"../../../utils/Deferred.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst time_js_1 = require(\"../../../utils/time.js\");\nconst unitConversions_js_1 = require(\"../../../utils/unitConversions.js\");\nconst uuid_js_1 = require(\"../../../utils/uuid.js\");\nconst SharedId_js_1 = require(\"../script/SharedId.js\");\nconst WindowRealm_js_1 = require(\"../script/WindowRealm.js\");\nconst NavigationTracker_js_1 = require(\"./NavigationTracker.js\");\nclass BrowsingContextImpl {\n    static LOGGER_PREFIX = `${log_js_1.LogType.debug}:browsingContext`;\n    /** Direct children browsing contexts. */\n    #children = new Set();\n    /** The ID of this browsing context. */\n    #id;\n    userContext;\n    // Used for running helper scripts.\n    #hiddenSandbox = (0, uuid_js_1.uuidv4)();\n    #downloadIdToUrlMap = new Map();\n    /**\n     * The ID of the parent browsing context.\n     * If null, this is a top-level context.\n     */\n    #loaderId;\n    #parentId = null;\n    #originalOpener;\n    #lifecycle = {\n        DOMContentLoaded: new Deferred_js_1.Deferred(),\n        load: new Deferred_js_1.Deferred(),\n    };\n    #cdpTarget;\n    #defaultRealmDeferred = new Deferred_js_1.Deferred();\n    #browsingContextStorage;\n    #eventManager;\n    #logger;\n    #navigationTracker;\n    #realmStorage;\n    // The deferred will be resolved when the default realm is created.\n    #unhandledPromptBehavior;\n    #userContextConfig;\n    // Set when the user prompt is opened. Required to provide the type in closing event.\n    #lastUserPromptType;\n    constructor(id, parentId, userContext, userContextConfig, cdpTarget, eventManager, browsingContextStorage, realmStorage, url, originalOpener, unhandledPromptBehavior, logger) {\n        this.#userContextConfig = userContextConfig;\n        this.#cdpTarget = cdpTarget;\n        this.#id = id;\n        this.#parentId = parentId;\n        this.userContext = userContext;\n        this.#eventManager = eventManager;\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#realmStorage = realmStorage;\n        this.#unhandledPromptBehavior = unhandledPromptBehavior;\n        this.#logger = logger;\n        this.#originalOpener = originalOpener;\n        // Register helper realm as hidden, so that it will not be reported to the user.\n        this.#realmStorage.hiddenSandboxes.add(this.#hiddenSandbox);\n        this.#navigationTracker = new NavigationTracker_js_1.NavigationTracker(url, id, eventManager, logger);\n    }\n    static create(id, parentId, userContext, userContextConfig, cdpTarget, eventManager, browsingContextStorage, realmStorage, url, originalOpener, unhandledPromptBehavior, logger) {\n        const context = new _a(id, parentId, userContext, userContextConfig, cdpTarget, eventManager, browsingContextStorage, realmStorage, url, originalOpener, unhandledPromptBehavior, logger);\n        context.#initListeners();\n        browsingContextStorage.addContext(context);\n        if (!context.isTopLevelContext()) {\n            context.parent.addChild(context.id);\n        }\n        // Hold on the `contextCreated` event until the target is unblocked. This is required,\n        // as the parent of the context can be set later in case of reconnecting to an\n        // existing browser instance + OOPiF.\n        eventManager.registerPromiseEvent(context.targetUnblockedOrThrow().then(() => {\n            return {\n                kind: 'success',\n                value: {\n                    type: 'event',\n                    method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.ContextCreated,\n                    params: {\n                        ...context.serializeToBidiValue(),\n                        // Hack to provide the initial URL of the context, as it can be changed\n                        // between the page target is attached and unblocked, as the page is not\n                        // fully paused in MPArch session (https://crbug.com/372842894).\n                        // TODO: remove once https://crbug.com/372842894 is addressed.\n                        url,\n                    },\n                },\n            };\n        }, (error) => {\n            return {\n                kind: 'error',\n                error,\n            };\n        }), context.id, protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.ContextCreated);\n        return context;\n    }\n    /**\n     * @see https://html.spec.whatwg.org/multipage/document-sequences.html#navigable\n     */\n    get navigableId() {\n        return this.#loaderId;\n    }\n    get navigationId() {\n        return this.#navigationTracker.currentNavigationId;\n    }\n    dispose(emitContextDestroyed) {\n        this.#navigationTracker.dispose();\n        this.#realmStorage.deleteRealms({\n            browsingContextId: this.id,\n        });\n        // Delete context from the parent.\n        if (!this.isTopLevelContext()) {\n            this.parent.#children.delete(this.id);\n        }\n        // Fail all ongoing navigations.\n        this.#failLifecycleIfNotFinished();\n        if (emitContextDestroyed) {\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.ContextDestroyed,\n                params: this.serializeToBidiValue(null),\n            }, this.id);\n        }\n        // Dispose children after the events are emitted.\n        this.#deleteAllChildren();\n        this.#eventManager.clearBufferedEvents(this.id);\n        this.#browsingContextStorage.deleteContextById(this.id);\n    }\n    /** Returns the ID of this context. */\n    get id() {\n        return this.#id;\n    }\n    /** Returns the parent context ID. */\n    get parentId() {\n        return this.#parentId;\n    }\n    /** Sets the parent context ID and updates parent's children. */\n    set parentId(parentId) {\n        if (this.#parentId !== null) {\n            this.#logger?.(log_js_1.LogType.debugError, 'Parent context already set');\n            // Cannot do anything except logging, as throwing will stop event processing. So\n            // just return,\n            return;\n        }\n        this.#parentId = parentId;\n        if (!this.isTopLevelContext()) {\n            this.parent.addChild(this.id);\n        }\n    }\n    /** Returns the parent context. */\n    get parent() {\n        if (this.parentId === null) {\n            return null;\n        }\n        return this.#browsingContextStorage.getContext(this.parentId);\n    }\n    /** Returns all direct children contexts. */\n    get directChildren() {\n        return [...this.#children].map((id) => this.#browsingContextStorage.getContext(id));\n    }\n    /** Returns all children contexts, flattened. */\n    get allChildren() {\n        const children = this.directChildren;\n        return children.concat(...children.map((child) => child.allChildren));\n    }\n    /**\n     * Returns true if this is a top-level context.\n     * This is the case whenever the parent context ID is null.\n     */\n    isTopLevelContext() {\n        return this.#parentId === null;\n    }\n    get top() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        let topContext = this;\n        let parent = topContext.parent;\n        while (parent) {\n            topContext = parent;\n            parent = topContext.parent;\n        }\n        return topContext;\n    }\n    addChild(childId) {\n        this.#children.add(childId);\n    }\n    #deleteAllChildren(emitContextDestroyed = false) {\n        this.directChildren.map((child) => child.dispose(emitContextDestroyed));\n    }\n    get cdpTarget() {\n        return this.#cdpTarget;\n    }\n    updateCdpTarget(cdpTarget) {\n        this.#cdpTarget = cdpTarget;\n        this.#initListeners();\n    }\n    get url() {\n        return this.#navigationTracker.url;\n    }\n    async lifecycleLoaded() {\n        await this.#lifecycle.load;\n    }\n    async targetUnblockedOrThrow() {\n        const result = await this.#cdpTarget.unblocked;\n        if (result.kind === 'error') {\n            throw result.error;\n        }\n    }\n    /** Returns a sandbox for internal helper scripts which is not exposed to the user.*/\n    async getOrCreateHiddenSandbox() {\n        return await this.#getOrCreateSandboxInternal(this.#hiddenSandbox);\n    }\n    /** Returns a sandbox which is exposed to user. */\n    async getOrCreateUserSandbox(sandbox) {\n        const realm = await this.#getOrCreateSandboxInternal(sandbox);\n        if (realm.isHidden()) {\n            throw new protocol_js_1.NoSuchFrameException(`Realm \"${sandbox}\" not found`);\n        }\n        return realm;\n    }\n    async #getOrCreateSandboxInternal(sandbox) {\n        if (sandbox === undefined || sandbox === '') {\n            // Default realm is not guaranteed to be created at this point, so return a deferred.\n            return await this.#defaultRealmDeferred;\n        }\n        let maybeSandboxes = this.#realmStorage.findRealms({\n            browsingContextId: this.id,\n            sandbox,\n        });\n        if (maybeSandboxes.length === 0) {\n            await this.#cdpTarget.cdpClient.sendCommand('Page.createIsolatedWorld', {\n                frameId: this.id,\n                worldName: sandbox,\n            });\n            // `Runtime.executionContextCreated` should be emitted by the time the\n            // previous command is done.\n            maybeSandboxes = this.#realmStorage.findRealms({\n                browsingContextId: this.id,\n                sandbox,\n            });\n            (0, assert_js_1.assert)(maybeSandboxes.length !== 0);\n        }\n        // It's possible for more than one sandbox to be created due to provisional\n        // frames. In this case, it's always the first one (i.e. the oldest one)\n        // that is more relevant since the user may have set that one up already\n        // through evaluation.\n        return maybeSandboxes[0];\n    }\n    /**\n     * Implements https://w3c.github.io/webdriver-bidi/#get-the-navigable-info.\n     */\n    serializeToBidiValue(maxDepth = 0, addParentField = true) {\n        return {\n            context: this.#id,\n            url: this.url,\n            userContext: this.userContext,\n            originalOpener: this.#originalOpener ?? null,\n            clientWindow: `${this.cdpTarget.windowId}`,\n            children: maxDepth === null || maxDepth > 0\n                ? this.directChildren.map((c) => c.serializeToBidiValue(maxDepth === null ? maxDepth : maxDepth - 1, false))\n                : null,\n            ...(addParentField ? { parent: this.#parentId } : {}),\n        };\n    }\n    onTargetInfoChanged(params) {\n        this.#navigationTracker.onTargetInfoChanged(params.targetInfo.url);\n    }\n    #initListeners() {\n        this.#cdpTarget.cdpClient.on('Network.loadingFailed', (params) => {\n            // Detect navigation errors like `net::ERR_BLOCKED_BY_RESPONSE`.\n            // Network related to navigation has request id equals to navigation's loader id.\n            this.#navigationTracker.networkLoadingFailed(params.requestId, params.errorText);\n        });\n        this.#cdpTarget.cdpClient.on('Page.fileChooserOpened', (params) => {\n            if (this.id !== params.frameId) {\n                return;\n            }\n            if (this.#loaderId === undefined) {\n                this.#logger?.(log_js_1.LogType.debugError, 'LoaderId should be defined when file upload is shown', params);\n                return;\n            }\n            const element = params.backendNodeId === undefined\n                ? undefined\n                : {\n                    sharedId: (0, SharedId_js_1.getSharedId)(this.id, this.#loaderId, params.backendNodeId),\n                };\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: protocol_js_1.ChromiumBidi.Input.EventNames.FileDialogOpened,\n                params: {\n                    context: this.id,\n                    multiple: params.mode === 'selectMultiple',\n                    element,\n                },\n            }, this.id);\n        });\n        this.#cdpTarget.cdpClient.on('Page.frameNavigated', (params) => {\n            if (this.id !== params.frame.id) {\n                return;\n            }\n            this.#navigationTracker.frameNavigated(params.frame.url + (params.frame.urlFragment ?? ''), params.frame.loaderId, \n            // `unreachableUrl` indicates if the navigation failed.\n            params.frame.unreachableUrl);\n            // At the point the page is initialized, all the nested iframes from the\n            // previous page are detached and realms are destroyed.\n            // Delete children from context.\n            this.#deleteAllChildren();\n            this.#documentChanged(params.frame.loaderId);\n        });\n        this.#cdpTarget.cdpClient.on('Page.frameStartedNavigating', (params) => {\n            if (this.id !== params.frameId) {\n                return;\n            }\n            this.#navigationTracker.frameStartedNavigating(params.url, params.loaderId, params.navigationType);\n        });\n        this.#cdpTarget.cdpClient.on('Page.navigatedWithinDocument', (params) => {\n            if (this.id !== params.frameId) {\n                return;\n            }\n            this.#navigationTracker.navigatedWithinDocument(params.url, params.navigationType);\n            if (params.navigationType === 'historyApi') {\n                this.#eventManager.registerEvent({\n                    type: 'event',\n                    method: 'browsingContext.historyUpdated',\n                    params: {\n                        context: this.id,\n                        timestamp: (0, time_js_1.getTimestamp)(),\n                        url: this.#navigationTracker.url,\n                    },\n                }, this.id);\n                return;\n            }\n        });\n        this.#cdpTarget.cdpClient.on('Page.lifecycleEvent', (params) => {\n            if (this.id !== params.frameId) {\n                return;\n            }\n            if (params.name === 'init') {\n                this.#documentChanged(params.loaderId);\n                return;\n            }\n            if (params.name === 'commit') {\n                this.#loaderId = params.loaderId;\n                return;\n            }\n            // If mapper attached to the page late, it might miss init and\n            // commit events. In that case, save the first loaderId for this\n            // frameId.\n            if (!this.#loaderId) {\n                this.#loaderId = params.loaderId;\n            }\n            // Ignore event from not current navigation.\n            if (params.loaderId !== this.#loaderId) {\n                return;\n            }\n            switch (params.name) {\n                case 'DOMContentLoaded':\n                    if (!this.#navigationTracker.isInitialNavigation) {\n                        // Do not emit for the initial navigation.\n                        this.#eventManager.registerEvent({\n                            type: 'event',\n                            method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.DomContentLoaded,\n                            params: {\n                                context: this.id,\n                                navigation: this.#navigationTracker.currentNavigationId,\n                                timestamp: (0, time_js_1.getTimestamp)(),\n                                url: this.#navigationTracker.url,\n                            },\n                        }, this.id);\n                    }\n                    this.#lifecycle.DOMContentLoaded.resolve();\n                    break;\n                case 'load':\n                    if (!this.#navigationTracker.isInitialNavigation) {\n                        // Do not emit for the initial navigation.\n                        this.#eventManager.registerEvent({\n                            type: 'event',\n                            method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.Load,\n                            params: {\n                                context: this.id,\n                                navigation: this.#navigationTracker.currentNavigationId,\n                                timestamp: (0, time_js_1.getTimestamp)(),\n                                url: this.#navigationTracker.url,\n                            },\n                        }, this.id);\n                    }\n                    // The initial navigation is finished.\n                    this.#navigationTracker.loadPageEvent(params.loaderId);\n                    this.#lifecycle.load.resolve();\n                    break;\n            }\n        });\n        this.#cdpTarget.cdpClient.on('Runtime.executionContextCreated', (params) => {\n            const { auxData, name, uniqueId, id } = params.context;\n            if (!auxData || auxData.frameId !== this.id) {\n                return;\n            }\n            let origin;\n            let sandbox;\n            // Only these execution contexts are supported for now.\n            switch (auxData.type) {\n                case 'isolated':\n                    sandbox = name;\n                    // Sandbox should have the same origin as the context itself, but in CDP\n                    // it has an empty one.\n                    if (!this.#defaultRealmDeferred.isFinished) {\n                        this.#logger?.(log_js_1.LogType.debugError, 'Unexpectedly, isolated realm created before the default one');\n                    }\n                    origin = this.#defaultRealmDeferred.isFinished\n                        ? this.#defaultRealmDeferred.result.origin\n                        : // This fallback is not expected to be ever reached.\n                            '';\n                    break;\n                case 'default':\n                    origin = serializeOrigin(params.context.origin);\n                    break;\n                default:\n                    return;\n            }\n            const realm = new WindowRealm_js_1.WindowRealm(this.id, this.#browsingContextStorage, this.#cdpTarget.cdpClient, this.#eventManager, id, this.#logger, origin, uniqueId, this.#realmStorage, sandbox);\n            if (auxData.isDefault) {\n                this.#defaultRealmDeferred.resolve(realm);\n                // Initialize ChannelProxy listeners for all the channels of all the\n                // preload scripts related to this BrowsingContext.\n                // TODO: extend for not default realms by the sandbox name.\n                void Promise.all(this.#cdpTarget\n                    .getChannels()\n                    .map((channel) => channel.startListenerFromWindow(realm, this.#eventManager)));\n            }\n        });\n        this.#cdpTarget.cdpClient.on('Runtime.executionContextDestroyed', (params) => {\n            if (this.#defaultRealmDeferred.isFinished &&\n                this.#defaultRealmDeferred.result.executionContextId ===\n                    params.executionContextId) {\n                this.#defaultRealmDeferred = new Deferred_js_1.Deferred();\n            }\n            this.#realmStorage.deleteRealms({\n                cdpSessionId: this.#cdpTarget.cdpSessionId,\n                executionContextId: params.executionContextId,\n            });\n        });\n        this.#cdpTarget.cdpClient.on('Runtime.executionContextsCleared', () => {\n            if (!this.#defaultRealmDeferred.isFinished) {\n                this.#defaultRealmDeferred.reject(new protocol_js_1.UnknownErrorException('execution contexts cleared'));\n            }\n            this.#defaultRealmDeferred = new Deferred_js_1.Deferred();\n            this.#realmStorage.deleteRealms({\n                cdpSessionId: this.#cdpTarget.cdpSessionId,\n            });\n        });\n        this.#cdpTarget.cdpClient.on('Page.javascriptDialogClosed', (params) => {\n            // Checking for `params.frameId` for comptaibility with Chrome\n            // versions that do not have a frameId. TODO: remove once\n            // https://crrev.com/c/6487891 is in stable.\n            if (params.frameId && this.id !== params.frameId) {\n                return;\n            }\n            if (!params.frameId &&\n                this.#parentId &&\n                this.#cdpTarget.cdpClient !==\n                    this.#browsingContextStorage.getContext(this.#parentId)?.cdpTarget\n                        .cdpClient) {\n                // If CDP event `Page.javascriptDialogClosed` does not have a frameId, this\n                // heuristic emits the event only for top-level per-cdp target context, ignoring\n                // the event for same-process iframes. So the event will be emitted only once per\n                // CDP target. TODO: remove once https://crrev.com/c/6487891 is in stable.\n                return;\n            }\n            const accepted = params.result;\n            if (this.#lastUserPromptType === undefined) {\n                this.#logger?.(log_js_1.LogType.debugError, 'Unexpectedly no opening prompt event before closing one');\n            }\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.UserPromptClosed,\n                params: {\n                    context: this.id,\n                    accepted,\n                    // `lastUserPromptType` should never be undefined here, so fallback to\n                    // `UNKNOWN`. The fallback is required to prevent tests from hanging while\n                    // waiting for the closing event. The cast is required, as the `UNKNOWN` value\n                    // is not standard.\n                    type: this.#lastUserPromptType ??\n                        'UNKNOWN',\n                    userText: accepted && params.userInput ? params.userInput : undefined,\n                },\n            }, this.id);\n            this.#lastUserPromptType = undefined;\n        });\n        this.#cdpTarget.cdpClient.on('Page.javascriptDialogOpening', (params) => {\n            // Checking for `params.frameId` for comptaibility with Chrome\n            // versions that do not have a frameId. TODO: remove once\n            // https://crrev.com/c/6487891 is in stable.\n            if (params.frameId && this.id !== params.frameId) {\n                return;\n            }\n            if (!params.frameId &&\n                this.#parentId &&\n                this.#cdpTarget.cdpClient !==\n                    this.#browsingContextStorage.getContext(this.#parentId)?.cdpTarget\n                        .cdpClient) {\n                // If CDP event `Page.javascriptDialogClosed` does not have a frameId, this\n                // heuristic emits the event only for top-level per-cdp target context, ignoring\n                // the event for same-process iframes. So the event will be emitted only once per\n                // CDP target. TODO: remove once https://crrev.com/c/6487891 is in stable.\n                return;\n            }\n            const promptType = _a.#getPromptType(params.type);\n            // Set the last prompt type to provide it in closing event.\n            this.#lastUserPromptType = promptType;\n            const promptHandler = this.#getPromptHandler(promptType);\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.UserPromptOpened,\n                params: {\n                    context: this.id,\n                    handler: promptHandler,\n                    type: promptType,\n                    message: params.message,\n                    ...(params.type === 'prompt'\n                        ? { defaultValue: params.defaultPrompt }\n                        : {}),\n                },\n            }, this.id);\n            switch (promptHandler) {\n                // Based on `unhandledPromptBehavior`, check if the prompt should be handled\n                // automatically (`accept`, `dismiss`) or wait for the user to do it.\n                case \"accept\" /* Session.UserPromptHandlerType.Accept */:\n                    void this.handleUserPrompt(true);\n                    break;\n                case \"dismiss\" /* Session.UserPromptHandlerType.Dismiss */:\n                    void this.handleUserPrompt(false);\n                    break;\n                case \"ignore\" /* Session.UserPromptHandlerType.Ignore */:\n                    break;\n            }\n        });\n        this.#cdpTarget.browserCdpClient.on('Browser.downloadWillBegin', (params) => {\n            if (this.id !== params.frameId) {\n                return;\n            }\n            this.#downloadIdToUrlMap.set(params.guid, params.url);\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.DownloadWillBegin,\n                params: {\n                    context: this.id,\n                    suggestedFilename: params.suggestedFilename,\n                    navigation: params.guid,\n                    timestamp: (0, time_js_1.getTimestamp)(),\n                    url: params.url,\n                },\n            }, this.id);\n        });\n        this.#cdpTarget.browserCdpClient.on('Browser.downloadProgress', (params) => {\n            if (!this.#downloadIdToUrlMap.has(params.guid)) {\n                // The event is not related to this browsing context.\n                return;\n            }\n            if (params.state === 'inProgress') {\n                // No need in reporting progress.\n                return;\n            }\n            const url = this.#downloadIdToUrlMap.get(params.guid);\n            switch (params.state) {\n                case 'canceled':\n                    this.#eventManager.registerEvent({\n                        type: 'event',\n                        method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.DownloadEnd,\n                        params: {\n                            status: 'canceled',\n                            context: this.id,\n                            navigation: params.guid,\n                            timestamp: (0, time_js_1.getTimestamp)(),\n                            url,\n                        },\n                    }, this.id);\n                    break;\n                case 'completed':\n                    this.#eventManager.registerEvent({\n                        type: 'event',\n                        method: protocol_js_1.ChromiumBidi.BrowsingContext.EventNames.DownloadEnd,\n                        params: {\n                            filepath: params.filePath ?? null,\n                            status: 'complete',\n                            context: this.id,\n                            navigation: params.guid,\n                            timestamp: (0, time_js_1.getTimestamp)(),\n                            url,\n                        },\n                    }, this.id);\n                    break;\n                default:\n                    // Unreachable.\n                    throw new protocol_js_1.UnknownErrorException(`Unknown download state: ${params.state}`);\n            }\n        });\n    }\n    static #getPromptType(cdpType) {\n        switch (cdpType) {\n            case 'alert':\n                return \"alert\" /* BrowsingContext.UserPromptType.Alert */;\n            case 'beforeunload':\n                return \"beforeunload\" /* BrowsingContext.UserPromptType.Beforeunload */;\n            case 'confirm':\n                return \"confirm\" /* BrowsingContext.UserPromptType.Confirm */;\n            case 'prompt':\n                return \"prompt\" /* BrowsingContext.UserPromptType.Prompt */;\n        }\n    }\n    /**\n     * Returns either custom UserContext's prompt handler, global or default one.\n     */\n    #getPromptHandler(promptType) {\n        const defaultPromptHandler = \"dismiss\" /* Session.UserPromptHandlerType.Dismiss */;\n        switch (promptType) {\n            case \"alert\" /* BrowsingContext.UserPromptType.Alert */:\n                return (this.#userContextConfig.userPromptHandler?.alert ??\n                    this.#userContextConfig.userPromptHandler?.default ??\n                    this.#unhandledPromptBehavior?.alert ??\n                    this.#unhandledPromptBehavior?.default ??\n                    defaultPromptHandler);\n            case \"beforeunload\" /* BrowsingContext.UserPromptType.Beforeunload */:\n                return (this.#userContextConfig.userPromptHandler?.beforeUnload ??\n                    this.#userContextConfig.userPromptHandler?.default ??\n                    this.#unhandledPromptBehavior?.beforeUnload ??\n                    this.#unhandledPromptBehavior?.default ??\n                    \"accept\" /* Session.UserPromptHandlerType.Accept */);\n            case \"confirm\" /* BrowsingContext.UserPromptType.Confirm */:\n                return (this.#userContextConfig.userPromptHandler?.confirm ??\n                    this.#userContextConfig.userPromptHandler?.default ??\n                    this.#unhandledPromptBehavior?.confirm ??\n                    this.#unhandledPromptBehavior?.default ??\n                    defaultPromptHandler);\n            case \"prompt\" /* BrowsingContext.UserPromptType.Prompt */:\n                return (this.#userContextConfig.userPromptHandler?.prompt ??\n                    this.#userContextConfig.userPromptHandler?.default ??\n                    this.#unhandledPromptBehavior?.prompt ??\n                    this.#unhandledPromptBehavior?.default ??\n                    defaultPromptHandler);\n        }\n    }\n    #documentChanged(loaderId) {\n        if (loaderId === undefined || this.#loaderId === loaderId) {\n            return;\n        }\n        // Document changed.\n        this.#resetLifecycleIfFinished();\n        this.#loaderId = loaderId;\n        // Delete all child iframes and notify about top level destruction.\n        this.#deleteAllChildren(true);\n    }\n    #resetLifecycleIfFinished() {\n        if (this.#lifecycle.DOMContentLoaded.isFinished) {\n            this.#lifecycle.DOMContentLoaded = new Deferred_js_1.Deferred();\n        }\n        else {\n            this.#logger?.(_a.LOGGER_PREFIX, 'Document changed (DOMContentLoaded)');\n        }\n        if (this.#lifecycle.load.isFinished) {\n            this.#lifecycle.load = new Deferred_js_1.Deferred();\n        }\n        else {\n            this.#logger?.(_a.LOGGER_PREFIX, 'Document changed (load)');\n        }\n    }\n    #failLifecycleIfNotFinished() {\n        if (!this.#lifecycle.DOMContentLoaded.isFinished) {\n            this.#lifecycle.DOMContentLoaded.reject(new protocol_js_1.UnknownErrorException('navigation canceled'));\n        }\n        if (!this.#lifecycle.load.isFinished) {\n            this.#lifecycle.load.reject(new protocol_js_1.UnknownErrorException('navigation canceled'));\n        }\n    }\n    async navigate(url, wait) {\n        try {\n            new URL(url);\n        }\n        catch {\n            throw new protocol_js_1.InvalidArgumentException(`Invalid URL: ${url}`);\n        }\n        const navigationState = this.#navigationTracker.createPendingNavigation(url);\n        // Navigate and wait for the result. If the navigation fails, the error event is\n        // emitted and the promise is rejected.\n        const cdpNavigatePromise = (async () => {\n            const cdpNavigateResult = await this.#cdpTarget.cdpClient.sendCommand('Page.navigate', {\n                url,\n                frameId: this.id,\n            });\n            if (cdpNavigateResult.errorText) {\n                // If navigation failed, no pending navigation is left.\n                this.#navigationTracker.failNavigation(navigationState, cdpNavigateResult.errorText);\n                throw new protocol_js_1.UnknownErrorException(cdpNavigateResult.errorText);\n            }\n            this.#navigationTracker.navigationCommandFinished(navigationState, cdpNavigateResult.loaderId);\n            this.#documentChanged(cdpNavigateResult.loaderId);\n        })();\n        // Wait for either the navigation is finished or canceled by another navigation.\n        const result = await Promise.race([\n            // No `loaderId` means same-document navigation.\n            this.#waitNavigation(wait, cdpNavigatePromise, navigationState),\n            // Throw an error if the navigation is canceled.\n            navigationState.finished,\n        ]);\n        if (result instanceof NavigationTracker_js_1.NavigationResult) {\n            if (\n            // TODO: check after decision on the spec is done:\n            //  https://github.com/w3c/webdriver-bidi/issues/799.\n            result.eventName === \"browsingContext.navigationAborted\" /* NavigationEventName.NavigationAborted */ ||\n                result.eventName === \"browsingContext.navigationFailed\" /* NavigationEventName.NavigationFailed */) {\n                throw new protocol_js_1.UnknownErrorException(result.message ?? 'unknown exception');\n            }\n        }\n        return {\n            navigation: navigationState.navigationId,\n            // Url can change due to redirects. Get the one from commandNavigation.\n            url: navigationState.url,\n        };\n    }\n    async #waitNavigation(wait, cdpCommandPromise, navigationState) {\n        await Promise.all([navigationState.committed, cdpCommandPromise]);\n        if (wait === \"none\" /* BrowsingContext.ReadinessState.None */) {\n            return;\n        }\n        if (navigationState.isFragmentNavigation === true) {\n            // After the cdp command is finished, the `fragmentNavigation` should be already\n            // settled. If it's the fragment navigation, wait for the `navigationStatus` to be\n            // finished, which happens after the fragment navigation happened. No need to wait for\n            // DOM events.\n            await navigationState.finished;\n            return;\n        }\n        if (wait === \"interactive\" /* BrowsingContext.ReadinessState.Interactive */) {\n            await this.#lifecycle.DOMContentLoaded;\n            return;\n        }\n        if (wait === \"complete\" /* BrowsingContext.ReadinessState.Complete */) {\n            await this.#lifecycle.load;\n            return;\n        }\n        throw new protocol_js_1.InvalidArgumentException(`Wait condition ${wait} is not supported`);\n    }\n    // TODO: support concurrent navigations analogous to `navigate`.\n    async reload(ignoreCache, wait) {\n        await this.targetUnblockedOrThrow();\n        this.#resetLifecycleIfFinished();\n        const navigationState = this.#navigationTracker.createPendingNavigation(this.#navigationTracker.url);\n        const cdpReloadPromise = this.#cdpTarget.cdpClient.sendCommand('Page.reload', {\n            ignoreCache,\n        });\n        // Wait for either the navigation is finished or canceled by another navigation.\n        const result = await Promise.race([\n            // No `loaderId` means same-document navigation.\n            this.#waitNavigation(wait, cdpReloadPromise, navigationState),\n            // Throw an error if the navigation is canceled.\n            navigationState.finished,\n        ]);\n        if (result instanceof NavigationTracker_js_1.NavigationResult) {\n            if (result.eventName === \"browsingContext.navigationAborted\" /* NavigationEventName.NavigationAborted */ ||\n                result.eventName === \"browsingContext.navigationFailed\" /* NavigationEventName.NavigationFailed */) {\n                throw new protocol_js_1.UnknownErrorException(result.message ?? 'unknown exception');\n            }\n        }\n        return {\n            navigation: navigationState.navigationId,\n            // Url can change due to redirects. Get the one from commandNavigation.\n            url: navigationState.url,\n        };\n    }\n    async setViewport(viewport, devicePixelRatio) {\n        // Set the target's viewport.\n        await this.cdpTarget.setViewport(viewport, devicePixelRatio);\n    }\n    async handleUserPrompt(accept, userText) {\n        await this.#cdpTarget.cdpClient.sendCommand('Page.handleJavaScriptDialog', {\n            accept: accept ?? true,\n            promptText: userText,\n        });\n    }\n    async activate() {\n        await this.#cdpTarget.cdpClient.sendCommand('Page.bringToFront');\n    }\n    async captureScreenshot(params) {\n        if (!this.isTopLevelContext()) {\n            throw new protocol_js_1.UnsupportedOperationException(`Non-top-level 'context' (${params.context}) is currently not supported`);\n        }\n        const formatParameters = getImageFormatParameters(params);\n        let captureBeyondViewport = false;\n        let script;\n        params.origin ??= 'viewport';\n        switch (params.origin) {\n            case 'document': {\n                script = String(() => {\n                    const element = document.documentElement;\n                    return {\n                        x: 0,\n                        y: 0,\n                        width: element.scrollWidth,\n                        height: element.scrollHeight,\n                    };\n                });\n                captureBeyondViewport = true;\n                break;\n            }\n            case 'viewport': {\n                script = String(() => {\n                    const viewport = window.visualViewport;\n                    return {\n                        x: viewport.pageLeft,\n                        y: viewport.pageTop,\n                        width: viewport.width,\n                        height: viewport.height,\n                    };\n                });\n                break;\n            }\n        }\n        const hiddenSandboxRealm = await this.getOrCreateHiddenSandbox();\n        const originResult = await hiddenSandboxRealm.callFunction(script, false);\n        (0, assert_js_1.assert)(originResult.type === 'success');\n        const origin = deserializeDOMRect(originResult.result);\n        (0, assert_js_1.assert)(origin);\n        let rect = origin;\n        if (params.clip) {\n            const clip = params.clip;\n            if (params.origin === 'viewport' && clip.type === 'box') {\n                // For viewport origin, the clip is relative to the viewport, while the CDP\n                // screenshot is relative to the document. So correction for the viewport position\n                // is required.\n                clip.x += origin.x;\n                clip.y += origin.y;\n            }\n            rect = getIntersectionRect(await this.#parseRect(clip), origin);\n        }\n        if (rect.width === 0 || rect.height === 0) {\n            throw new protocol_js_1.UnableToCaptureScreenException(`Unable to capture screenshot with zero dimensions: width=${rect.width}, height=${rect.height}`);\n        }\n        return await this.#cdpTarget.cdpClient.sendCommand('Page.captureScreenshot', {\n            clip: { ...rect, scale: 1.0 },\n            ...formatParameters,\n            captureBeyondViewport,\n        });\n    }\n    async print(params) {\n        if (!this.isTopLevelContext()) {\n            throw new protocol_js_1.UnsupportedOperationException('Printing of non-top level contexts is not supported');\n        }\n        const cdpParams = {};\n        if (params.background !== undefined) {\n            cdpParams.printBackground = params.background;\n        }\n        if (params.margin?.bottom !== undefined) {\n            cdpParams.marginBottom = (0, unitConversions_js_1.inchesFromCm)(params.margin.bottom);\n        }\n        if (params.margin?.left !== undefined) {\n            cdpParams.marginLeft = (0, unitConversions_js_1.inchesFromCm)(params.margin.left);\n        }\n        if (params.margin?.right !== undefined) {\n            cdpParams.marginRight = (0, unitConversions_js_1.inchesFromCm)(params.margin.right);\n        }\n        if (params.margin?.top !== undefined) {\n            cdpParams.marginTop = (0, unitConversions_js_1.inchesFromCm)(params.margin.top);\n        }\n        if (params.orientation !== undefined) {\n            cdpParams.landscape = params.orientation === 'landscape';\n        }\n        if (params.page?.height !== undefined) {\n            cdpParams.paperHeight = (0, unitConversions_js_1.inchesFromCm)(params.page.height);\n        }\n        if (params.page?.width !== undefined) {\n            cdpParams.paperWidth = (0, unitConversions_js_1.inchesFromCm)(params.page.width);\n        }\n        if (params.pageRanges !== undefined) {\n            for (const range of params.pageRanges) {\n                if (typeof range === 'number') {\n                    continue;\n                }\n                const rangeParts = range.split('-');\n                if (rangeParts.length < 1 || rangeParts.length > 2) {\n                    throw new protocol_js_1.InvalidArgumentException(`Invalid page range: ${range} is not a valid integer range.`);\n                }\n                if (rangeParts.length === 1) {\n                    void parseInteger(rangeParts[0] ?? '');\n                    continue;\n                }\n                let lowerBound;\n                let upperBound;\n                const [rangeLowerPart = '', rangeUpperPart = ''] = rangeParts;\n                if (rangeLowerPart === '') {\n                    lowerBound = 1;\n                }\n                else {\n                    lowerBound = parseInteger(rangeLowerPart);\n                }\n                if (rangeUpperPart === '') {\n                    upperBound = Number.MAX_SAFE_INTEGER;\n                }\n                else {\n                    upperBound = parseInteger(rangeUpperPart);\n                }\n                if (lowerBound > upperBound) {\n                    throw new protocol_js_1.InvalidArgumentException(`Invalid page range: ${rangeLowerPart} > ${rangeUpperPart}`);\n                }\n            }\n            cdpParams.pageRanges = params.pageRanges.join(',');\n        }\n        if (params.scale !== undefined) {\n            cdpParams.scale = params.scale;\n        }\n        if (params.shrinkToFit !== undefined) {\n            cdpParams.preferCSSPageSize = !params.shrinkToFit;\n        }\n        try {\n            const result = await this.#cdpTarget.cdpClient.sendCommand('Page.printToPDF', cdpParams);\n            return {\n                data: result.data,\n            };\n        }\n        catch (error) {\n            // Effectively zero dimensions.\n            if (error.message ===\n                'invalid print parameters: content area is empty') {\n                throw new protocol_js_1.UnsupportedOperationException(error.message);\n            }\n            throw error;\n        }\n    }\n    /**\n     * See\n     * https://w3c.github.io/webdriver-bidi/#:~:text=If%20command%20parameters%20contains%20%22clip%22%3A\n     */\n    async #parseRect(clip) {\n        switch (clip.type) {\n            case 'box':\n                return { x: clip.x, y: clip.y, width: clip.width, height: clip.height };\n            case 'element': {\n                const hiddenSandboxRealm = await this.getOrCreateHiddenSandbox();\n                const result = await hiddenSandboxRealm.callFunction(String((element) => {\n                    return element instanceof Element;\n                }), false, { type: 'undefined' }, [clip.element]);\n                if (result.type === 'exception') {\n                    throw new protocol_js_1.NoSuchElementException(`Element '${clip.element.sharedId}' was not found`);\n                }\n                (0, assert_js_1.assert)(result.result.type === 'boolean');\n                if (!result.result.value) {\n                    throw new protocol_js_1.NoSuchElementException(`Node '${clip.element.sharedId}' is not an Element`);\n                }\n                {\n                    const result = await hiddenSandboxRealm.callFunction(String((element) => {\n                        const rect = element.getBoundingClientRect();\n                        return {\n                            x: rect.x,\n                            y: rect.y,\n                            height: rect.height,\n                            width: rect.width,\n                        };\n                    }), false, { type: 'undefined' }, [clip.element]);\n                    (0, assert_js_1.assert)(result.type === 'success');\n                    const rect = deserializeDOMRect(result.result);\n                    if (!rect) {\n                        throw new protocol_js_1.UnableToCaptureScreenException(`Could not get bounding box for Element '${clip.element.sharedId}'`);\n                    }\n                    return rect;\n                }\n            }\n        }\n    }\n    async close() {\n        await this.#cdpTarget.cdpClient.sendCommand('Page.close');\n    }\n    async traverseHistory(delta) {\n        if (delta === 0) {\n            return;\n        }\n        const history = await this.#cdpTarget.cdpClient.sendCommand('Page.getNavigationHistory');\n        const entry = history.entries[history.currentIndex + delta];\n        if (!entry) {\n            throw new protocol_js_1.NoSuchHistoryEntryException(`No history entry at delta ${delta}`);\n        }\n        await this.#cdpTarget.cdpClient.sendCommand('Page.navigateToHistoryEntry', {\n            entryId: entry.id,\n        });\n    }\n    async toggleModulesIfNeeded() {\n        await Promise.all([\n            this.#cdpTarget.toggleNetworkIfNeeded(),\n            this.#cdpTarget.toggleDeviceAccessIfNeeded(),\n        ]);\n    }\n    async locateNodes(params) {\n        // TODO: create a dedicated sandbox instead of `#defaultRealm`.\n        return await this.#locateNodesByLocator(await this.#defaultRealmDeferred, params.locator, params.startNodes ?? [], params.maxNodeCount, params.serializationOptions);\n    }\n    async #getLocatorDelegate(realm, locator, maxNodeCount, startNodes) {\n        switch (locator.type) {\n            case 'context':\n                throw new Error('Unreachable');\n            case 'css':\n                return {\n                    functionDeclaration: String((cssSelector, maxNodeCount, ...startNodes) => {\n                        const locateNodesUsingCss = (element) => {\n                            if (!(element instanceof HTMLElement ||\n                                element instanceof Document ||\n                                element instanceof DocumentFragment)) {\n                                throw new Error('startNodes in css selector should be HTMLElement, Document or DocumentFragment');\n                            }\n                            return [...element.querySelectorAll(cssSelector)];\n                        };\n                        startNodes = startNodes.length > 0 ? startNodes : [document];\n                        const returnedNodes = startNodes\n                            .map((startNode) => \n                        // TODO: stop search early if `maxNodeCount` is reached.\n                        locateNodesUsingCss(startNode))\n                            .flat(1);\n                        return maxNodeCount === 0\n                            ? returnedNodes\n                            : returnedNodes.slice(0, maxNodeCount);\n                    }),\n                    argumentsLocalValues: [\n                        // `cssSelector`\n                        { type: 'string', value: locator.value },\n                        // `maxNodeCount` with `0` means no limit.\n                        { type: 'number', value: maxNodeCount ?? 0 },\n                        // `startNodes`\n                        ...startNodes,\n                    ],\n                };\n            case 'xpath':\n                return {\n                    functionDeclaration: String((xPathSelector, maxNodeCount, ...startNodes) => {\n                        // https://w3c.github.io/webdriver-bidi/#locate-nodes-using-xpath\n                        const evaluator = new XPathEvaluator();\n                        const expression = evaluator.createExpression(xPathSelector);\n                        const locateNodesUsingXpath = (element) => {\n                            const xPathResult = expression.evaluate(element, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);\n                            const returnedNodes = [];\n                            for (let i = 0; i < xPathResult.snapshotLength; i++) {\n                                returnedNodes.push(xPathResult.snapshotItem(i));\n                            }\n                            return returnedNodes;\n                        };\n                        startNodes = startNodes.length > 0 ? startNodes : [document];\n                        const returnedNodes = startNodes\n                            .map((startNode) => \n                        // TODO: stop search early if `maxNodeCount` is reached.\n                        locateNodesUsingXpath(startNode))\n                            .flat(1);\n                        return maxNodeCount === 0\n                            ? returnedNodes\n                            : returnedNodes.slice(0, maxNodeCount);\n                    }),\n                    argumentsLocalValues: [\n                        // `xPathSelector`\n                        { type: 'string', value: locator.value },\n                        // `maxNodeCount` with `0` means no limit.\n                        { type: 'number', value: maxNodeCount ?? 0 },\n                        // `startNodes`\n                        ...startNodes,\n                    ],\n                };\n            case 'innerText':\n                // https://w3c.github.io/webdriver-bidi/#locate-nodes-using-inner-text\n                if (locator.value === '') {\n                    throw new protocol_js_1.InvalidSelectorException('innerText locator cannot be empty');\n                }\n                return {\n                    functionDeclaration: String((innerTextSelector, fullMatch, ignoreCase, maxNodeCount, maxDepth, ...startNodes) => {\n                        const searchText = ignoreCase\n                            ? innerTextSelector.toUpperCase()\n                            : innerTextSelector;\n                        const locateNodesUsingInnerText = (node, currentMaxDepth) => {\n                            const returnedNodes = [];\n                            if (node instanceof DocumentFragment ||\n                                node instanceof Document) {\n                                const children = [...node.children];\n                                children.forEach((child) => \n                                // `currentMaxDepth` is not decremented intentionally according to\n                                // https://github.com/w3c/webdriver-bidi/pull/713.\n                                returnedNodes.push(...locateNodesUsingInnerText(child, currentMaxDepth)));\n                                return returnedNodes;\n                            }\n                            if (!(node instanceof HTMLElement)) {\n                                return [];\n                            }\n                            const element = node;\n                            const nodeInnerText = ignoreCase\n                                ? element.innerText?.toUpperCase()\n                                : element.innerText;\n                            if (!nodeInnerText.includes(searchText)) {\n                                return [];\n                            }\n                            const childNodes = [];\n                            for (const child of element.children) {\n                                if (child instanceof HTMLElement) {\n                                    childNodes.push(child);\n                                }\n                            }\n                            if (childNodes.length === 0) {\n                                if (fullMatch && nodeInnerText === searchText) {\n                                    returnedNodes.push(element);\n                                }\n                                else {\n                                    if (!fullMatch) {\n                                        // Note: `nodeInnerText.includes(searchText)` is already checked\n                                        returnedNodes.push(element);\n                                    }\n                                }\n                            }\n                            else {\n                                const childNodeMatches = \n                                // Don't search deeper if `maxDepth` is reached.\n                                currentMaxDepth <= 0\n                                    ? []\n                                    : childNodes\n                                        .map((child) => locateNodesUsingInnerText(child, currentMaxDepth - 1))\n                                        .flat(1);\n                                if (childNodeMatches.length === 0) {\n                                    // Note: `nodeInnerText.includes(searchText)` is already checked\n                                    if (!fullMatch || nodeInnerText === searchText) {\n                                        returnedNodes.push(element);\n                                    }\n                                }\n                                else {\n                                    returnedNodes.push(...childNodeMatches);\n                                }\n                            }\n                            // TODO: stop search early if `maxNodeCount` is reached.\n                            return returnedNodes;\n                        };\n                        // TODO: stop search early if `maxNodeCount` is reached.\n                        startNodes = startNodes.length > 0 ? startNodes : [document];\n                        const returnedNodes = startNodes\n                            .map((startNode) => \n                        // TODO: stop search early if `maxNodeCount` is reached.\n                        locateNodesUsingInnerText(startNode, maxDepth))\n                            .flat(1);\n                        return maxNodeCount === 0\n                            ? returnedNodes\n                            : returnedNodes.slice(0, maxNodeCount);\n                    }),\n                    argumentsLocalValues: [\n                        // `innerTextSelector`\n                        { type: 'string', value: locator.value },\n                        // `fullMatch` with default `true`.\n                        { type: 'boolean', value: locator.matchType !== 'partial' },\n                        // `ignoreCase` with default `false`.\n                        { type: 'boolean', value: locator.ignoreCase === true },\n                        // `maxNodeCount` with `0` means no limit.\n                        { type: 'number', value: maxNodeCount ?? 0 },\n                        // `maxDepth` with default `1000` (same as default full serialization depth).\n                        { type: 'number', value: locator.maxDepth ?? 1000 },\n                        // `startNodes`\n                        ...startNodes,\n                    ],\n                };\n            case 'accessibility': {\n                // https://w3c.github.io/webdriver-bidi/#locate-nodes-using-accessibility-attributes\n                if (!locator.value.name && !locator.value.role) {\n                    throw new protocol_js_1.InvalidSelectorException('Either name or role has to be specified');\n                }\n                // The next two commands cause a11y caches for the target to be\n                // preserved. We probably do not need to disable them if the\n                // client is using a11y features, but we could by calling\n                // Accessibility.disable.\n                await Promise.all([\n                    this.#cdpTarget.cdpClient.sendCommand('Accessibility.enable'),\n                    this.#cdpTarget.cdpClient.sendCommand('Accessibility.getRootAXNode'),\n                ]);\n                const bindings = await realm.evaluate(\n                /* expression=*/ '({getAccessibleName, getAccessibleRole})', \n                /* awaitPromise=*/ false, \"root\" /* Script.ResultOwnership.Root */, \n                /* serializationOptions= */ undefined, \n                /* userActivation=*/ false, \n                /* includeCommandLineApi=*/ true);\n                if (bindings.type !== 'success') {\n                    throw new Error('Could not get bindings');\n                }\n                if (bindings.result.type !== 'object') {\n                    throw new Error('Could not get bindings');\n                }\n                return {\n                    functionDeclaration: String((name, role, bindings, maxNodeCount, ...startNodes) => {\n                        const returnedNodes = [];\n                        let aborted = false;\n                        function collect(contextNodes, selector) {\n                            if (aborted) {\n                                return;\n                            }\n                            for (const contextNode of contextNodes) {\n                                let match = true;\n                                if (selector.role) {\n                                    const role = bindings.getAccessibleRole(contextNode);\n                                    if (selector.role !== role) {\n                                        match = false;\n                                    }\n                                }\n                                if (selector.name) {\n                                    const name = bindings.getAccessibleName(contextNode);\n                                    if (selector.name !== name) {\n                                        match = false;\n                                    }\n                                }\n                                if (match) {\n                                    if (maxNodeCount !== 0 &&\n                                        returnedNodes.length === maxNodeCount) {\n                                        aborted = true;\n                                        break;\n                                    }\n                                    returnedNodes.push(contextNode);\n                                }\n                                const childNodes = [];\n                                for (const child of contextNode.children) {\n                                    if (child instanceof HTMLElement) {\n                                        childNodes.push(child);\n                                    }\n                                }\n                                collect(childNodes, selector);\n                            }\n                        }\n                        startNodes =\n                            startNodes.length > 0\n                                ? startNodes\n                                : Array.from(document.documentElement.children).filter((c) => c instanceof HTMLElement);\n                        collect(startNodes, {\n                            role,\n                            name,\n                        });\n                        return returnedNodes;\n                    }),\n                    argumentsLocalValues: [\n                        // `name`\n                        { type: 'string', value: locator.value.name || '' },\n                        // `role`\n                        { type: 'string', value: locator.value.role || '' },\n                        // `bindings`.\n                        { handle: bindings.result.handle },\n                        // `maxNodeCount` with `0` means no limit.\n                        { type: 'number', value: maxNodeCount ?? 0 },\n                        // `startNodes`\n                        ...startNodes,\n                    ],\n                };\n            }\n        }\n    }\n    async #locateNodesByLocator(realm, locator, startNodes, maxNodeCount, serializationOptions) {\n        if (locator.type === 'context') {\n            if (startNodes.length !== 0) {\n                throw new protocol_js_1.InvalidArgumentException('Start nodes are not supported');\n            }\n            const contextId = locator.value.context;\n            if (!contextId) {\n                throw new protocol_js_1.InvalidSelectorException('Invalid context');\n            }\n            const context = this.#browsingContextStorage.getContext(contextId);\n            const parent = context.parent;\n            if (!parent) {\n                throw new protocol_js_1.InvalidArgumentException('This context has no container');\n            }\n            try {\n                const { backendNodeId } = await parent.#cdpTarget.cdpClient.sendCommand('DOM.getFrameOwner', {\n                    frameId: contextId,\n                });\n                const { object } = await parent.#cdpTarget.cdpClient.sendCommand('DOM.resolveNode', {\n                    backendNodeId,\n                });\n                const locatorResult = await realm.callFunction(`function () { return this; }`, false, { handle: object.objectId }, [], \"none\" /* Script.ResultOwnership.None */, serializationOptions);\n                if (locatorResult.type === 'exception') {\n                    throw new Error('Unknown exception');\n                }\n                return { nodes: [locatorResult.result] };\n            }\n            catch {\n                throw new protocol_js_1.InvalidArgumentException('Context does not exist');\n            }\n        }\n        const locatorDelegate = await this.#getLocatorDelegate(realm, locator, maxNodeCount, startNodes);\n        serializationOptions = {\n            ...serializationOptions,\n            // The returned object is an array of nodes, so no need in deeper JS serialization.\n            maxObjectDepth: 1,\n        };\n        const locatorResult = await realm.callFunction(locatorDelegate.functionDeclaration, false, { type: 'undefined' }, locatorDelegate.argumentsLocalValues, \"none\" /* Script.ResultOwnership.None */, serializationOptions);\n        if (locatorResult.type !== 'success') {\n            this.#logger?.(_a.LOGGER_PREFIX, 'Failed locateNodesByLocator', locatorResult);\n            // Heuristic to detect invalid selector for different types of selectors.\n            if (\n            // CSS selector.\n            locatorResult.exceptionDetails.text?.endsWith('is not a valid selector.') ||\n                // XPath selector.\n                locatorResult.exceptionDetails.text?.endsWith('is not a valid XPath expression.')) {\n                throw new protocol_js_1.InvalidSelectorException(`Not valid selector ${typeof locator.value === 'string' ? locator.value : JSON.stringify(locator.value)}`);\n            }\n            // Heuristic to detect if the `startNode` is not an `HTMLElement` in css selector.\n            if (locatorResult.exceptionDetails.text ===\n                'Error: startNodes in css selector should be HTMLElement, Document or DocumentFragment') {\n                throw new protocol_js_1.InvalidArgumentException('startNodes in css selector should be HTMLElement, Document or DocumentFragment');\n            }\n            throw new protocol_js_1.UnknownErrorException(`Unexpected error in selector script: ${locatorResult.exceptionDetails.text}`);\n        }\n        if (locatorResult.result.type !== 'array') {\n            throw new protocol_js_1.UnknownErrorException(`Unexpected selector script result type: ${locatorResult.result.type}`);\n        }\n        // Check there are no non-node elements in the result.\n        const nodes = locatorResult.result.value.map((value) => {\n            if (value.type !== 'node') {\n                throw new protocol_js_1.UnknownErrorException(`Unexpected selector script result element: ${value.type}`);\n            }\n            return value;\n        });\n        return { nodes };\n    }\n}\nexports.BrowsingContextImpl = BrowsingContextImpl;\n_a = BrowsingContextImpl;\nfunction serializeOrigin(origin) {\n    // https://html.spec.whatwg.org/multipage/origin.html#ascii-serialisation-of-an-origin\n    if (['://', ''].includes(origin)) {\n        origin = 'null';\n    }\n    return origin;\n}\nfunction getImageFormatParameters(params) {\n    const { quality, type } = params.format ?? {\n        type: 'image/png',\n    };\n    switch (type) {\n        case 'image/png': {\n            return { format: 'png' };\n        }\n        case 'image/jpeg': {\n            return {\n                format: 'jpeg',\n                ...(quality === undefined ? {} : { quality: Math.round(quality * 100) }),\n            };\n        }\n        case 'image/webp': {\n            return {\n                format: 'webp',\n                ...(quality === undefined ? {} : { quality: Math.round(quality * 100) }),\n            };\n        }\n    }\n    throw new protocol_js_1.InvalidArgumentException(`Image format '${type}' is not a supported format`);\n}\nfunction deserializeDOMRect(result) {\n    if (result.type !== 'object' || result.value === undefined) {\n        return;\n    }\n    const x = result.value.find(([key]) => {\n        return key === 'x';\n    })?.[1];\n    const y = result.value.find(([key]) => {\n        return key === 'y';\n    })?.[1];\n    const height = result.value.find(([key]) => {\n        return key === 'height';\n    })?.[1];\n    const width = result.value.find(([key]) => {\n        return key === 'width';\n    })?.[1];\n    if (x?.type !== 'number' ||\n        y?.type !== 'number' ||\n        height?.type !== 'number' ||\n        width?.type !== 'number') {\n        return;\n    }\n    return {\n        x: x.value,\n        y: y.value,\n        width: width.value,\n        height: height.value,\n    };\n}\n/** @see https://w3c.github.io/webdriver-bidi/#normalize-rect */\nfunction normalizeRect(box) {\n    return {\n        ...(box.width < 0\n            ? {\n                x: box.x + box.width,\n                width: -box.width,\n            }\n            : {\n                x: box.x,\n                width: box.width,\n            }),\n        ...(box.height < 0\n            ? {\n                y: box.y + box.height,\n                height: -box.height,\n            }\n            : {\n                y: box.y,\n                height: box.height,\n            }),\n    };\n}\n/** @see https://w3c.github.io/webdriver-bidi/#rectangle-intersection */\nfunction getIntersectionRect(first, second) {\n    first = normalizeRect(first);\n    second = normalizeRect(second);\n    const x = Math.max(first.x, second.x);\n    const y = Math.max(first.y, second.y);\n    return {\n        x,\n        y,\n        width: Math.max(Math.min(first.x + first.width, second.x + second.width) - x, 0),\n        height: Math.max(Math.min(first.y + first.height, second.y + second.height) - y, 0),\n    };\n}\nfunction parseInteger(value) {\n    value = value.trim();\n    if (!/^[0-9]+$/.test(value)) {\n        throw new protocol_js_1.InvalidArgumentException(`Invalid integer: ${value}`);\n    }\n    return parseInt(value);\n}\n//# sourceMappingURL=BrowsingContextImpl.js.map","\"use strict\";\n/**\n * Copyright 2024 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkerRealm = void 0;\nconst Realm_js_1 = require(\"./Realm.js\");\nclass WorkerRealm extends Realm_js_1.Realm {\n    #realmType;\n    #ownerRealms;\n    constructor(cdpClient, eventManager, executionContextId, logger, origin, ownerRealms, realmId, realmStorage, realmType) {\n        super(cdpClient, eventManager, executionContextId, logger, origin, realmId, realmStorage);\n        this.#ownerRealms = ownerRealms;\n        this.#realmType = realmType;\n        this.initialize();\n    }\n    get associatedBrowsingContexts() {\n        return this.#ownerRealms.flatMap((realm) => realm.associatedBrowsingContexts);\n    }\n    get realmType() {\n        return this.#realmType;\n    }\n    get source() {\n        return {\n            realm: this.realmId,\n            // This is a hack to make Puppeteer able to track workers.\n            // TODO: remove after Puppeteer tracks workers by owners and use the base version.\n            context: this.associatedBrowsingContexts[0]?.id,\n        };\n    }\n    get realmInfo() {\n        const owners = this.#ownerRealms.map((realm) => realm.realmId);\n        const { realmType } = this;\n        switch (realmType) {\n            case 'dedicated-worker': {\n                const owner = owners[0];\n                if (owner === undefined || owners.length !== 1) {\n                    throw new Error('Dedicated worker must have exactly one owner');\n                }\n                return {\n                    ...this.baseInfo,\n                    type: realmType,\n                    owners: [owner],\n                };\n            }\n            case 'service-worker':\n            case 'shared-worker': {\n                return {\n                    ...this.baseInfo,\n                    type: realmType,\n                };\n            }\n        }\n    }\n}\nexports.WorkerRealm = WorkerRealm;\n//# sourceMappingURL=WorkerRealm.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.logMessageFormatter = logMessageFormatter;\nexports.getRemoteValuesText = getRemoteValuesText;\nconst assert_js_1 = require(\"../../../utils/assert.js\");\nconst specifiers = ['%s', '%d', '%i', '%f', '%o', '%O', '%c'];\nfunction isFormatSpecifier(str) {\n    return specifiers.some((spec) => str.includes(spec));\n}\n/**\n * @param args input remote values to be format printed\n * @return parsed text of the remote values in specific format\n */\nfunction logMessageFormatter(args) {\n    let output = '';\n    const argFormat = args[0].value.toString();\n    const argValues = args.slice(1, undefined);\n    const tokens = argFormat.split(new RegExp(specifiers.map((spec) => `(${spec})`).join('|'), 'g'));\n    for (const token of tokens) {\n        if (token === undefined || token === '') {\n            continue;\n        }\n        if (isFormatSpecifier(token)) {\n            const arg = argValues.shift();\n            // raise an exception when less value is provided\n            (0, assert_js_1.assert)(arg, `Less value is provided: \"${getRemoteValuesText(args, false)}\"`);\n            if (token === '%s') {\n                output += stringFromArg(arg);\n            }\n            else if (token === '%d' || token === '%i') {\n                if (arg.type === 'bigint' ||\n                    arg.type === 'number' ||\n                    arg.type === 'string') {\n                    output += parseInt(arg.value.toString(), 10);\n                }\n                else {\n                    output += 'NaN';\n                }\n            }\n            else if (token === '%f') {\n                if (arg.type === 'bigint' ||\n                    arg.type === 'number' ||\n                    arg.type === 'string') {\n                    output += parseFloat(arg.value.toString());\n                }\n                else {\n                    output += 'NaN';\n                }\n            }\n            else {\n                // %o, %O, %c\n                output += toJson(arg);\n            }\n        }\n        else {\n            output += token;\n        }\n    }\n    // raise an exception when more value is provided\n    if (argValues.length > 0) {\n        throw new Error(`More value is provided: \"${getRemoteValuesText(args, false)}\"`);\n    }\n    return output;\n}\n/**\n * @param arg input remote value to be parsed\n * @return parsed text of the remote value\n *\n * input: {\"type\": \"number\", \"value\": 1}\n * output: 1\n *\n * input: {\"type\": \"string\", \"value\": \"abc\"}\n * output: \"abc\"\n *\n * input: {\"type\": \"object\",  \"value\": [[\"id\", {\"type\": \"number\", \"value\": 1}]]}\n * output: '{\"id\": 1}'\n *\n * input: {\"type\": \"object\", \"value\": [[\"font-size\", {\"type\": \"string\", \"value\": \"20px\"}]]}\n * output: '{\"font-size\": \"20px\"}'\n */\nfunction toJson(arg) {\n    // arg type validation\n    if (arg.type !== 'array' &&\n        arg.type !== 'bigint' &&\n        arg.type !== 'date' &&\n        arg.type !== 'number' &&\n        arg.type !== 'object' &&\n        arg.type !== 'string') {\n        return stringFromArg(arg);\n    }\n    if (arg.type === 'bigint') {\n        return `${arg.value.toString()}n`;\n    }\n    if (arg.type === 'number') {\n        return arg.value.toString();\n    }\n    if (['date', 'string'].includes(arg.type)) {\n        return JSON.stringify(arg.value);\n    }\n    if (arg.type === 'object') {\n        return `{${arg.value\n            .map((pair) => {\n            return `${JSON.stringify(pair[0])}:${toJson(pair[1])}`;\n        })\n            .join(',')}}`;\n    }\n    if (arg.type === 'array') {\n        return `[${arg.value?.map((val) => toJson(val)).join(',') ?? ''}]`;\n    }\n    throw Error(`Invalid value type: ${arg}`);\n}\nfunction stringFromArg(arg) {\n    if (!Object.hasOwn(arg, 'value')) {\n        return arg.type;\n    }\n    switch (arg.type) {\n        case 'string':\n        case 'number':\n        case 'boolean':\n        case 'bigint':\n            return String(arg.value);\n        case 'regexp':\n            return `/${arg.value.pattern}/${arg.value.flags ?? ''}`;\n        case 'date':\n            return new Date(arg.value).toString();\n        case 'object':\n            return `Object(${arg.value?.length ?? ''})`;\n        case 'array':\n            return `Array(${arg.value?.length ?? ''})`;\n        case 'map':\n            return `Map(${arg.value?.length})`;\n        case 'set':\n            return `Set(${arg.value?.length})`;\n        default:\n            return arg.type;\n    }\n}\nfunction getRemoteValuesText(args, formatText) {\n    const arg = args[0];\n    if (!arg) {\n        return '';\n    }\n    // if args[0] is a format specifier, format the args as output\n    if (arg.type === 'string' &&\n        isFormatSpecifier(arg.value.toString()) &&\n        formatText) {\n        return logMessageFormatter(args);\n    }\n    // if args[0] is not a format specifier, just join the args with \\u0020 (unicode 'SPACE')\n    return args\n        .map((arg) => {\n        return stringFromArg(arg);\n    })\n        .join('\\u0020');\n}\n//# sourceMappingURL=logHelper.js.map","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LogManager = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst logHelper_js_1 = require(\"./logHelper.js\");\n/** Converts CDP StackTrace object to BiDi StackTrace object. */\nfunction getBidiStackTrace(cdpStackTrace) {\n    const stackFrames = cdpStackTrace?.callFrames.map((callFrame) => {\n        return {\n            columnNumber: callFrame.columnNumber,\n            functionName: callFrame.functionName,\n            lineNumber: callFrame.lineNumber,\n            url: callFrame.url,\n        };\n    });\n    return stackFrames ? { callFrames: stackFrames } : undefined;\n}\nfunction getLogLevel(consoleApiType) {\n    if ([\"error\" /* Log.Level.Error */, 'assert'].includes(consoleApiType)) {\n        return \"error\" /* Log.Level.Error */;\n    }\n    if ([\"debug\" /* Log.Level.Debug */, 'trace'].includes(consoleApiType)) {\n        return \"debug\" /* Log.Level.Debug */;\n    }\n    if ([\"warn\" /* Log.Level.Warn */, 'warning'].includes(consoleApiType)) {\n        return \"warn\" /* Log.Level.Warn */;\n    }\n    return \"info\" /* Log.Level.Info */;\n}\nfunction getLogMethod(consoleApiType) {\n    switch (consoleApiType) {\n        case 'warning':\n            return 'warn';\n        case 'startGroup':\n            return 'group';\n        case 'startGroupCollapsed':\n            return 'groupCollapsed';\n        case 'endGroup':\n            return 'groupEnd';\n    }\n    return consoleApiType;\n}\nclass LogManager {\n    #eventManager;\n    #realmStorage;\n    #cdpTarget;\n    #logger;\n    constructor(cdpTarget, realmStorage, eventManager, logger) {\n        this.#cdpTarget = cdpTarget;\n        this.#realmStorage = realmStorage;\n        this.#eventManager = eventManager;\n        this.#logger = logger;\n    }\n    static create(cdpTarget, realmStorage, eventManager, logger) {\n        const logManager = new _a(cdpTarget, realmStorage, eventManager, logger);\n        logManager.#initializeEntryAddedEventListener();\n        return logManager;\n    }\n    /**\n     * Heuristic serialization of CDP remote object. If possible, return the BiDi value\n     * without deep serialization.\n     */\n    async #heuristicSerializeArg(arg, realm) {\n        switch (arg.type) {\n            // TODO: Implement regexp, array, object, map and set heuristics base on\n            //  preview.\n            case 'undefined':\n                return { type: 'undefined' };\n            case 'boolean':\n                return { type: 'boolean', value: arg.value };\n            case 'string':\n                return { type: 'string', value: arg.value };\n            case 'number':\n                // The value can be either a number or a string like `Infinity` or `-0`.\n                return { type: 'number', value: arg.unserializableValue ?? arg.value };\n            case 'bigint':\n                if (arg.unserializableValue !== undefined &&\n                    arg.unserializableValue[arg.unserializableValue.length - 1] === 'n') {\n                    return {\n                        type: arg.type,\n                        value: arg.unserializableValue.slice(0, -1),\n                    };\n                }\n                // Unexpected bigint value, fall back to CDP deep serialization.\n                break;\n            case 'object':\n                if (arg.subtype === 'null') {\n                    return { type: 'null' };\n                }\n                // Fall back to CDP deep serialization.\n                break;\n            default:\n                // Fall back to CDP deep serialization.\n                break;\n        }\n        // Fall back to CDP deep serialization.\n        return await realm.serializeCdpObject(arg, \"none\" /* Script.ResultOwnership.None */);\n    }\n    #initializeEntryAddedEventListener() {\n        this.#cdpTarget.cdpClient.on('Runtime.consoleAPICalled', (params) => {\n            // Try to find realm by `cdpSessionId` and `executionContextId`,\n            // if provided.\n            const realm = this.#realmStorage.findRealm({\n                cdpSessionId: this.#cdpTarget.cdpSessionId,\n                executionContextId: params.executionContextId,\n            });\n            if (realm === undefined) {\n                // Ignore exceptions not attached to any realm.\n                this.#logger?.(log_js_1.LogType.cdp, params);\n                return;\n            }\n            const argsPromise = Promise.all(params.args.map((arg) => this.#heuristicSerializeArg(arg, realm)));\n            for (const browsingContext of realm.associatedBrowsingContexts) {\n                this.#eventManager.registerPromiseEvent(argsPromise.then((args) => ({\n                    kind: 'success',\n                    value: {\n                        type: 'event',\n                        method: protocol_js_1.ChromiumBidi.Log.EventNames.LogEntryAdded,\n                        params: {\n                            level: getLogLevel(params.type),\n                            source: realm.source,\n                            text: (0, logHelper_js_1.getRemoteValuesText)(args, true),\n                            timestamp: Math.round(params.timestamp),\n                            stackTrace: getBidiStackTrace(params.stackTrace),\n                            type: 'console',\n                            method: getLogMethod(params.type),\n                            args,\n                        },\n                    },\n                }), (error) => ({\n                    kind: 'error',\n                    error,\n                })), browsingContext.id, protocol_js_1.ChromiumBidi.Log.EventNames.LogEntryAdded);\n            }\n        });\n        this.#cdpTarget.cdpClient.on('Runtime.exceptionThrown', (params) => {\n            // Try to find realm by `cdpSessionId` and `executionContextId`,\n            // if provided.\n            const realm = this.#realmStorage.findRealm({\n                cdpSessionId: this.#cdpTarget.cdpSessionId,\n                executionContextId: params.exceptionDetails.executionContextId,\n            });\n            if (realm === undefined) {\n                // Ignore exceptions not attached to any realm.\n                this.#logger?.(log_js_1.LogType.cdp, params);\n                return;\n            }\n            for (const browsingContext of realm.associatedBrowsingContexts) {\n                this.#eventManager.registerPromiseEvent(_a.#getExceptionText(params, realm).then((text) => ({\n                    kind: 'success',\n                    value: {\n                        type: 'event',\n                        method: protocol_js_1.ChromiumBidi.Log.EventNames.LogEntryAdded,\n                        params: {\n                            level: \"error\" /* Log.Level.Error */,\n                            source: realm.source,\n                            text,\n                            timestamp: Math.round(params.timestamp),\n                            stackTrace: getBidiStackTrace(params.exceptionDetails.stackTrace),\n                            type: 'javascript',\n                        },\n                    },\n                }), (error) => ({\n                    kind: 'error',\n                    error,\n                })), browsingContext.id, protocol_js_1.ChromiumBidi.Log.EventNames.LogEntryAdded);\n            }\n        });\n    }\n    /**\n     * Try the best to get the exception text.\n     */\n    static async #getExceptionText(params, realm) {\n        if (!params.exceptionDetails.exception) {\n            return params.exceptionDetails.text;\n        }\n        if (realm === undefined) {\n            return JSON.stringify(params.exceptionDetails.exception);\n        }\n        return await realm.stringifyObject(params.exceptionDetails.exception);\n    }\n}\nexports.LogManager = LogManager;\n_a = LogManager;\n//# sourceMappingURL=LogManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CdpTarget = void 0;\nconst chromium_bidi_js_1 = require(\"../../../protocol/chromium-bidi.js\");\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst Deferred_js_1 = require(\"../../../utils/Deferred.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst BrowsingContextImpl_js_1 = require(\"../context/BrowsingContextImpl.js\");\nconst LogManager_js_1 = require(\"../log/LogManager.js\");\nclass CdpTarget {\n    #id;\n    #cdpClient;\n    #browserCdpClient;\n    #parentCdpClient;\n    #realmStorage;\n    #eventManager;\n    #preloadScriptStorage;\n    #browsingContextStorage;\n    #prerenderingDisabled;\n    #networkStorage;\n    #userContextConfig;\n    #unblocked = new Deferred_js_1.Deferred();\n    #unhandledPromptBehavior;\n    #logger;\n    // Keeps track of the previously set viewport.\n    #previousDeviceMetricsOverride = {\n        width: 0,\n        height: 0,\n        deviceScaleFactor: 0,\n        mobile: false,\n        dontSetVisibleSize: true,\n    };\n    /**\n     * Target's window id. Is filled when the CDP target is created and do not reflect\n     * moving targets from one window to another. The actual values\n     * will be set during `#unblock`.\n     * */\n    #windowId;\n    #deviceAccessEnabled = false;\n    #cacheDisableState = false;\n    #fetchDomainStages = {\n        request: false,\n        response: false,\n        auth: false,\n    };\n    static create(targetId, cdpClient, browserCdpClient, parentCdpClient, realmStorage, eventManager, preloadScriptStorage, browsingContextStorage, networkStorage, prerenderingDisabled, userContextConfig, unhandledPromptBehavior, logger) {\n        const cdpTarget = new CdpTarget(targetId, cdpClient, browserCdpClient, parentCdpClient, eventManager, realmStorage, preloadScriptStorage, browsingContextStorage, networkStorage, prerenderingDisabled, userContextConfig, unhandledPromptBehavior, logger);\n        LogManager_js_1.LogManager.create(cdpTarget, realmStorage, eventManager, logger);\n        cdpTarget.#setEventListeners();\n        // No need to await.\n        // Deferred will be resolved when the target is unblocked.\n        void cdpTarget.#unblock();\n        return cdpTarget;\n    }\n    constructor(targetId, cdpClient, browserCdpClient, parentCdpClient, eventManager, realmStorage, preloadScriptStorage, browsingContextStorage, networkStorage, prerenderingDisabled, userContextConfig, unhandledPromptBehavior, logger) {\n        this.#userContextConfig = userContextConfig;\n        this.#id = targetId;\n        this.#cdpClient = cdpClient;\n        this.#browserCdpClient = browserCdpClient;\n        this.#parentCdpClient = parentCdpClient;\n        this.#eventManager = eventManager;\n        this.#realmStorage = realmStorage;\n        this.#preloadScriptStorage = preloadScriptStorage;\n        this.#networkStorage = networkStorage;\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#prerenderingDisabled = prerenderingDisabled;\n        this.#unhandledPromptBehavior = unhandledPromptBehavior;\n        this.#logger = logger;\n    }\n    /** Returns a deferred that resolves when the target is unblocked. */\n    get unblocked() {\n        return this.#unblocked;\n    }\n    get id() {\n        return this.#id;\n    }\n    get cdpClient() {\n        return this.#cdpClient;\n    }\n    get parentCdpClient() {\n        return this.#parentCdpClient;\n    }\n    get browserCdpClient() {\n        return this.#browserCdpClient;\n    }\n    /** Needed for CDP escape path. */\n    get cdpSessionId() {\n        // SAFETY we got the client by it's id for creating\n        return this.#cdpClient.sessionId;\n    }\n    /**\n     * Window id the target belongs to. If not known, returns 0.\n     */\n    get windowId() {\n        if (this.#windowId === undefined) {\n            this.#logger?.(log_js_1.LogType.debugError, 'Getting windowId before it was set, returning 0');\n        }\n        return this.#windowId ?? 0;\n    }\n    /**\n     * Enables all the required CDP domains and unblocks the target.\n     */\n    async #unblock() {\n        try {\n            await Promise.all([\n                this.#cdpClient.sendCommand('Page.enable', {\n                    enableFileChooserOpenedEvent: true,\n                }),\n                ...(this.#ignoreFileDialog()\n                    ? []\n                    : [\n                        this.#cdpClient.sendCommand('Page.setInterceptFileChooserDialog', {\n                            enabled: true,\n                            // The intercepted dialog should be canceled.\n                            cancel: true,\n                        }),\n                    ]),\n                // There can be some existing frames in the target, if reconnecting to an\n                // existing browser instance, e.g. via Puppeteer. Need to restore the browsing\n                // contexts for the frames to correctly handle further events, like\n                // `Runtime.executionContextCreated`.\n                // It's important to schedule this task together with enabling domains commands to\n                // prepare the tree before the events (e.g. Runtime.executionContextCreated) start\n                // coming.\n                // https://github.com/GoogleChromeLabs/chromium-bidi/issues/2282\n                this.#cdpClient\n                    .sendCommand('Page.getFrameTree')\n                    .then((frameTree) => this.#restoreFrameTreeState(frameTree.frameTree)),\n                this.#cdpClient.sendCommand('Runtime.enable'),\n                this.#cdpClient.sendCommand('Page.setLifecycleEventsEnabled', {\n                    enabled: true,\n                }),\n                this.#cdpClient\n                    .sendCommand('Page.setPrerenderingAllowed', {\n                    isAllowed: !this.#prerenderingDisabled,\n                })\n                    .catch(() => {\n                    // Ignore CDP errors, as the command is not supported by iframe targets or\n                    // prerendered pages. Generic catch, as the error can vary between CdpClient\n                    // implementations: Tab vs Puppeteer.\n                }),\n                // Enabling CDP Network domain is required for navigation detection:\n                // https://github.com/GoogleChromeLabs/chromium-bidi/issues/2856.\n                this.#cdpClient\n                    .sendCommand('Network.enable')\n                    .then(() => this.toggleNetworkIfNeeded()),\n                this.#cdpClient.sendCommand('Target.setAutoAttach', {\n                    autoAttach: true,\n                    waitForDebuggerOnStart: true,\n                    flatten: true,\n                }),\n                this.#updateWindowId(),\n                this.#setUserContextConfig(),\n                this.#initAndEvaluatePreloadScripts(),\n                this.#cdpClient.sendCommand('Runtime.runIfWaitingForDebugger'),\n                // Resume tab execution as well if it was paused by the debugger.\n                this.#parentCdpClient.sendCommand('Runtime.runIfWaitingForDebugger'),\n                this.toggleDeviceAccessIfNeeded(),\n            ]);\n        }\n        catch (error) {\n            this.#logger?.(log_js_1.LogType.debugError, 'Failed to unblock target', error);\n            // The target might have been closed before the initialization finished.\n            if (!this.#cdpClient.isCloseError(error)) {\n                this.#unblocked.resolve({\n                    kind: 'error',\n                    error,\n                });\n                return;\n            }\n        }\n        this.#unblocked.resolve({\n            kind: 'success',\n            value: undefined,\n        });\n    }\n    #restoreFrameTreeState(frameTree) {\n        const frame = frameTree.frame;\n        const maybeContext = this.#browsingContextStorage.findContext(frame.id);\n        if (maybeContext !== undefined) {\n            // Restoring parent of already known browsing context. This means the target is\n            // OOPiF and the BiDi session was connected to already existing browser instance.\n            if (maybeContext.parentId === null &&\n                frame.parentId !== null &&\n                frame.parentId !== undefined) {\n                maybeContext.parentId = frame.parentId;\n            }\n        }\n        if (maybeContext === undefined && frame.parentId !== undefined) {\n            // Restore not yet known nested frames. The top-level frame is created when the\n            // target is attached.\n            const parentBrowsingContext = this.#browsingContextStorage.getContext(frame.parentId);\n            BrowsingContextImpl_js_1.BrowsingContextImpl.create(frame.id, frame.parentId, parentBrowsingContext.userContext, this.#userContextConfig, parentBrowsingContext.cdpTarget, this.#eventManager, this.#browsingContextStorage, this.#realmStorage, frame.url, undefined, this.#unhandledPromptBehavior, this.#logger);\n        }\n        frameTree.childFrames?.map((frameTree) => this.#restoreFrameTreeState(frameTree));\n    }\n    async toggleFetchIfNeeded() {\n        const stages = this.#networkStorage.getInterceptionStages(this.topLevelId);\n        if (this.#fetchDomainStages.request === stages.request &&\n            this.#fetchDomainStages.response === stages.response &&\n            this.#fetchDomainStages.auth === stages.auth) {\n            return;\n        }\n        const patterns = [];\n        this.#fetchDomainStages = stages;\n        if (stages.request || stages.auth) {\n            // CDP quirk we need request interception when we intercept auth\n            patterns.push({\n                urlPattern: '*',\n                requestStage: 'Request',\n            });\n        }\n        if (stages.response) {\n            patterns.push({\n                urlPattern: '*',\n                requestStage: 'Response',\n            });\n        }\n        if (patterns.length) {\n            await this.#cdpClient.sendCommand('Fetch.enable', {\n                patterns,\n                handleAuthRequests: stages.auth,\n            });\n        }\n        else {\n            const blockedRequest = this.#networkStorage\n                .getRequestsByTarget(this)\n                .filter((request) => request.interceptPhase);\n            void Promise.allSettled(blockedRequest.map((request) => request.waitNextPhase))\n                .then(async () => {\n                const blockedRequest = this.#networkStorage\n                    .getRequestsByTarget(this)\n                    .filter((request) => request.interceptPhase);\n                if (blockedRequest.length) {\n                    return await this.toggleFetchIfNeeded();\n                }\n                return await this.#cdpClient.sendCommand('Fetch.disable');\n            })\n                .catch((error) => {\n                this.#logger?.(log_js_1.LogType.bidi, 'Disable failed', error);\n            });\n        }\n    }\n    /**\n     * Toggles CDP \"Fetch\" domain and enable/disable network cache.\n     */\n    async toggleNetworkIfNeeded() {\n        // Although the Network domain remains active, Fetch domain activation and caching\n        // settings should be managed dynamically.\n        try {\n            await Promise.all([\n                this.toggleSetCacheDisabled(),\n                this.toggleFetchIfNeeded(),\n            ]);\n        }\n        catch (err) {\n            this.#logger?.(log_js_1.LogType.debugError, err);\n            if (!this.#isExpectedError(err)) {\n                throw err;\n            }\n        }\n    }\n    async toggleSetCacheDisabled(disable) {\n        const defaultCacheDisabled = this.#networkStorage.defaultCacheBehavior === 'bypass';\n        const cacheDisabled = disable ?? defaultCacheDisabled;\n        if (this.#cacheDisableState === cacheDisabled) {\n            return;\n        }\n        this.#cacheDisableState = cacheDisabled;\n        try {\n            await this.#cdpClient.sendCommand('Network.setCacheDisabled', {\n                cacheDisabled,\n            });\n        }\n        catch (err) {\n            this.#logger?.(log_js_1.LogType.debugError, err);\n            this.#cacheDisableState = !cacheDisabled;\n            if (!this.#isExpectedError(err)) {\n                throw err;\n            }\n        }\n    }\n    async toggleDeviceAccessIfNeeded() {\n        const enabled = this.isSubscribedTo(chromium_bidi_js_1.Bluetooth.EventNames.RequestDevicePromptUpdated);\n        if (this.#deviceAccessEnabled === enabled) {\n            return;\n        }\n        this.#deviceAccessEnabled = enabled;\n        try {\n            await this.#cdpClient.sendCommand(enabled ? 'DeviceAccess.enable' : 'DeviceAccess.disable');\n        }\n        catch (err) {\n            this.#logger?.(log_js_1.LogType.debugError, err);\n            this.#deviceAccessEnabled = !enabled;\n            if (!this.#isExpectedError(err)) {\n                throw err;\n            }\n        }\n    }\n    /**\n     * Heuristic checking if the error is due to the session being closed. If so, ignore the\n     * error.\n     */\n    #isExpectedError(err) {\n        const error = err;\n        return ((error.code === -32001 &&\n            error.message === 'Session with given id not found.') ||\n            this.#cdpClient.isCloseError(err));\n    }\n    #setEventListeners() {\n        this.#cdpClient.on('*', (event, params) => {\n            // We may encounter uses for EventEmitter other than CDP events,\n            // which we want to skip.\n            if (typeof event !== 'string') {\n                return;\n            }\n            this.#eventManager.registerEvent({\n                type: 'event',\n                method: `goog:cdp.${event}`,\n                params: {\n                    event,\n                    params,\n                    session: this.cdpSessionId,\n                },\n            }, this.id);\n        });\n    }\n    async #enableFetch(stages) {\n        const patterns = [];\n        if (stages.request || stages.auth) {\n            // CDP quirk we need request interception when we intercept auth\n            patterns.push({\n                urlPattern: '*',\n                requestStage: 'Request',\n            });\n        }\n        if (stages.response) {\n            patterns.push({\n                urlPattern: '*',\n                requestStage: 'Response',\n            });\n        }\n        if (patterns.length) {\n            const oldStages = this.#fetchDomainStages;\n            this.#fetchDomainStages = stages;\n            try {\n                await this.#cdpClient.sendCommand('Fetch.enable', {\n                    patterns,\n                    handleAuthRequests: stages.auth,\n                });\n            }\n            catch {\n                this.#fetchDomainStages = oldStages;\n            }\n        }\n    }\n    async #disableFetch() {\n        const blockedRequest = this.#networkStorage\n            .getRequestsByTarget(this)\n            .filter((request) => request.interceptPhase);\n        if (blockedRequest.length === 0) {\n            this.#fetchDomainStages = {\n                request: false,\n                response: false,\n                auth: false,\n            };\n            await this.#cdpClient.sendCommand('Fetch.disable');\n        }\n    }\n    async toggleNetwork() {\n        // TODO: respect the data collectors once CDP Network domain is enabled on-demand:\n        // const networkEnable = this.#networkStorage.getCollectorsForBrowsingContext(this.topLevelId).length > 0;\n        const stages = this.#networkStorage.getInterceptionStages(this.topLevelId);\n        const fetchEnable = Object.values(stages).some((value) => value);\n        const fetchChanged = this.#fetchDomainStages.request !== stages.request ||\n            this.#fetchDomainStages.response !== stages.response ||\n            this.#fetchDomainStages.auth !== stages.auth;\n        this.#logger?.(log_js_1.LogType.debugInfo, 'Toggle Network', `Fetch (${fetchEnable}) ${fetchChanged}`);\n        if (fetchEnable && fetchChanged) {\n            await this.#enableFetch(stages);\n        }\n        if (!fetchEnable && fetchChanged) {\n            await this.#disableFetch();\n        }\n    }\n    /**\n     * All the ProxyChannels from all the preload scripts of the given\n     * BrowsingContext.\n     */\n    getChannels() {\n        return this.#preloadScriptStorage\n            .find()\n            .flatMap((script) => script.channels);\n    }\n    async #updateWindowId() {\n        const { windowId } = await this.#browserCdpClient.sendCommand('Browser.getWindowForTarget', { targetId: this.id });\n        this.#windowId = windowId;\n    }\n    /** Loads all top-level preload scripts. */\n    async #initAndEvaluatePreloadScripts() {\n        await Promise.all(this.#preloadScriptStorage\n            .find({\n            // Needed for OOPIF\n            targetId: this.topLevelId,\n        })\n            .map((script) => {\n            return script.initInTarget(this, true);\n        }));\n    }\n    async setViewport(viewport, devicePixelRatio) {\n        if (viewport === null && devicePixelRatio === null) {\n            await this.cdpClient.sendCommand('Emulation.clearDeviceMetricsOverride');\n            return;\n        }\n        const newViewport = { ...this.#previousDeviceMetricsOverride };\n        if (viewport === null) {\n            // Disable override.\n            newViewport.width = 0;\n            newViewport.height = 0;\n        }\n        else if (viewport !== undefined) {\n            newViewport.width = viewport.width;\n            newViewport.height = viewport.height;\n        }\n        if (devicePixelRatio === null) {\n            // Disable override.\n            newViewport.deviceScaleFactor = 0;\n        }\n        else if (devicePixelRatio !== undefined) {\n            newViewport.deviceScaleFactor = devicePixelRatio;\n        }\n        try {\n            await this.cdpClient.sendCommand('Emulation.setDeviceMetricsOverride', newViewport);\n            this.#previousDeviceMetricsOverride = newViewport;\n        }\n        catch (err) {\n            if (err.message.startsWith(\n            // https://crsrc.org/c/content/browser/devtools/protocol/emulation_handler.cc;l=257;drc=2f6eee84cf98d4227e7c41718dd71b82f26d90ff\n            'Width and height values must be positive')) {\n                throw new protocol_js_1.UnsupportedOperationException('Provided viewport dimensions are not supported');\n            }\n            throw err;\n        }\n    }\n    /**\n     * Immediately schedules all the required commands to configure user context\n     * configuration and waits for them to finish. It's important to schedule them\n     * in parallel, so that they are enqueued before any page's scripts.\n     */\n    async #setUserContextConfig() {\n        const promises = [];\n        if (this.#userContextConfig.viewport !== undefined ||\n            this.#userContextConfig.devicePixelRatio !== undefined) {\n            promises.push(this.setViewport(this.#userContextConfig.viewport, this.#userContextConfig.devicePixelRatio));\n        }\n        if (this.#userContextConfig.geolocation !== undefined &&\n            this.#userContextConfig.geolocation !== null) {\n            promises.push(this.setGeolocationOverride(this.#userContextConfig.geolocation));\n        }\n        if (this.#userContextConfig.screenOrientation !== undefined &&\n            this.#userContextConfig.screenOrientation !== null) {\n            promises.push(this.setScreenOrientationOverride(this.#userContextConfig.screenOrientation));\n        }\n        if (this.#userContextConfig.locale !== undefined) {\n            promises.push(this.setLocaleOverride(this.#userContextConfig.locale));\n        }\n        if (this.#userContextConfig.timezone !== undefined) {\n            promises.push(this.setTimezoneOverride(this.#userContextConfig.timezone));\n        }\n        if (this.#userContextConfig.acceptInsecureCerts !== undefined) {\n            promises.push(this.cdpClient.sendCommand('Security.setIgnoreCertificateErrors', {\n                ignore: this.#userContextConfig.acceptInsecureCerts,\n            }));\n        }\n        await Promise.all(promises);\n    }\n    get topLevelId() {\n        return (this.#browsingContextStorage.findTopLevelContextId(this.id) ?? this.id);\n    }\n    isSubscribedTo(moduleOrEvent) {\n        return this.#eventManager.subscriptionManager.isSubscribedTo(moduleOrEvent, this.topLevelId);\n    }\n    #ignoreFileDialog() {\n        return ((this.#unhandledPromptBehavior?.file ??\n            this.#unhandledPromptBehavior?.default ??\n            \"ignore\" /* Session.UserPromptHandlerType.Ignore */) ===\n            \"ignore\" /* Session.UserPromptHandlerType.Ignore */);\n    }\n    async setGeolocationOverride(geolocation) {\n        if (geolocation === null) {\n            await this.cdpClient.sendCommand('Emulation.clearGeolocationOverride');\n        }\n        else if ('type' in geolocation) {\n            if (geolocation.type !== 'positionUnavailable') {\n                // Unreachable. Handled by params parser.\n                throw new protocol_js_1.UnknownErrorException(`Unknown geolocation error ${geolocation.type}`);\n            }\n            // Omitting latitude, longitude or accuracy emulates position unavailable.\n            await this.cdpClient.sendCommand('Emulation.setGeolocationOverride', {});\n        }\n        else if ('latitude' in geolocation) {\n            await this.cdpClient.sendCommand('Emulation.setGeolocationOverride', {\n                latitude: geolocation.latitude,\n                longitude: geolocation.longitude,\n                accuracy: geolocation.accuracy ?? 1,\n                // `null` value is treated as \"missing\".\n                altitude: geolocation.altitude ?? undefined,\n                altitudeAccuracy: geolocation.altitudeAccuracy ?? undefined,\n                heading: geolocation.heading ?? undefined,\n                speed: geolocation.speed ?? undefined,\n            });\n        }\n        else {\n            // Unreachable. Handled by params parser.\n            throw new protocol_js_1.UnknownErrorException('Unexpected geolocation coordinates value');\n        }\n    }\n    async setScreenOrientationOverride(screenOrientation) {\n        const newViewport = { ...this.#previousDeviceMetricsOverride };\n        if (screenOrientation === null) {\n            delete newViewport.screenOrientation;\n        }\n        else {\n            newViewport.screenOrientation =\n                this.#toCdpScreenOrientationAngle(screenOrientation);\n        }\n        await this.cdpClient.sendCommand('Emulation.setDeviceMetricsOverride', newViewport);\n        this.#previousDeviceMetricsOverride = newViewport;\n    }\n    #toCdpScreenOrientationAngle(orientation) {\n        // https://w3c.github.io/screen-orientation/#the-current-screen-orientation-type-and-angle\n        if (orientation.natural === \"portrait\" /* Emulation.ScreenOrientationNatural.Portrait */) {\n            switch (orientation.type) {\n                case 'portrait-primary':\n                    return {\n                        angle: 0,\n                        type: 'portraitPrimary',\n                    };\n                case 'landscape-primary':\n                    return {\n                        angle: 90,\n                        type: 'landscapePrimary',\n                    };\n                case 'portrait-secondary':\n                    return {\n                        angle: 180,\n                        type: 'portraitSecondary',\n                    };\n                case 'landscape-secondary':\n                    return {\n                        angle: 270,\n                        type: 'landscapeSecondary',\n                    };\n                default:\n                    // Unreachable.\n                    throw new protocol_js_1.UnknownErrorException(`Unexpected screen orientation type ${orientation.type}`);\n            }\n        }\n        if (orientation.natural === \"landscape\" /* Emulation.ScreenOrientationNatural.Landscape */) {\n            switch (orientation.type) {\n                case 'landscape-primary':\n                    return {\n                        angle: 0,\n                        type: 'landscapePrimary',\n                    };\n                case 'portrait-primary':\n                    return {\n                        angle: 90,\n                        type: 'portraitPrimary',\n                    };\n                case 'landscape-secondary':\n                    return {\n                        angle: 180,\n                        type: 'landscapeSecondary',\n                    };\n                case 'portrait-secondary':\n                    return {\n                        angle: 270,\n                        type: 'portraitSecondary',\n                    };\n                default:\n                    // Unreachable.\n                    throw new protocol_js_1.UnknownErrorException(`Unexpected screen orientation type ${orientation.type}`);\n            }\n        }\n        // Unreachable.\n        throw new protocol_js_1.UnknownErrorException(`Unexpected orientation natural ${orientation.natural}`);\n    }\n    async setLocaleOverride(locale) {\n        if (locale === null) {\n            await this.cdpClient.sendCommand('Emulation.setLocaleOverride', {});\n        }\n        else {\n            await this.cdpClient.sendCommand('Emulation.setLocaleOverride', {\n                locale,\n            });\n        }\n    }\n    async setTimezoneOverride(timezone) {\n        if (timezone === null) {\n            await this.cdpClient.sendCommand('Emulation.setTimezoneOverride', {\n                // If empty, disables the override and restores default host system timezone.\n                timezoneId: '',\n            });\n        }\n        else {\n            await this.cdpClient.sendCommand('Emulation.setTimezoneOverride', {\n                timezoneId: timezone,\n            });\n        }\n    }\n}\nexports.CdpTarget = CdpTarget;\n//# sourceMappingURL=CdpTarget.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CdpTargetManager = void 0;\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst BrowsingContextImpl_js_1 = require(\"../context/BrowsingContextImpl.js\");\nconst WorkerRealm_js_1 = require(\"../script/WorkerRealm.js\");\nconst CdpTarget_js_1 = require(\"./CdpTarget.js\");\nconst cdpToBidiTargetTypes = {\n    service_worker: 'service-worker',\n    shared_worker: 'shared-worker',\n    worker: 'dedicated-worker',\n};\nclass CdpTargetManager {\n    #browserCdpClient;\n    #cdpConnection;\n    #targetKeysToBeIgnoredByAutoAttach = new Set();\n    #selfTargetId;\n    #eventManager;\n    #browsingContextStorage;\n    #networkStorage;\n    #userContextStorage;\n    #bluetoothProcessor;\n    #preloadScriptStorage;\n    #realmStorage;\n    #defaultUserContextId;\n    #logger;\n    #unhandledPromptBehavior;\n    #prerenderingDisabled;\n    constructor(cdpConnection, browserCdpClient, selfTargetId, eventManager, browsingContextStorage, userContextStorage, realmStorage, networkStorage, bluetoothProcessor, preloadScriptStorage, defaultUserContextId, prerenderingDisabled, unhandledPromptBehavior, logger) {\n        this.#userContextStorage = userContextStorage;\n        this.#cdpConnection = cdpConnection;\n        this.#browserCdpClient = browserCdpClient;\n        this.#targetKeysToBeIgnoredByAutoAttach.add(selfTargetId);\n        this.#selfTargetId = selfTargetId;\n        this.#eventManager = eventManager;\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#preloadScriptStorage = preloadScriptStorage;\n        this.#networkStorage = networkStorage;\n        this.#bluetoothProcessor = bluetoothProcessor;\n        this.#realmStorage = realmStorage;\n        this.#defaultUserContextId = defaultUserContextId;\n        this.#prerenderingDisabled = prerenderingDisabled;\n        this.#unhandledPromptBehavior = unhandledPromptBehavior;\n        this.#logger = logger;\n        this.#setEventListeners(browserCdpClient);\n    }\n    /**\n     * This method is called for each CDP session, since this class is responsible\n     * for creating and destroying all targets and browsing contexts.\n     */\n    #setEventListeners(cdpClient) {\n        cdpClient.on('Target.attachedToTarget', (params) => {\n            this.#handleAttachedToTargetEvent(params, cdpClient);\n        });\n        cdpClient.on('Target.detachedFromTarget', this.#handleDetachedFromTargetEvent.bind(this));\n        cdpClient.on('Target.targetInfoChanged', this.#handleTargetInfoChangedEvent.bind(this));\n        cdpClient.on('Inspector.targetCrashed', () => {\n            this.#handleTargetCrashedEvent(cdpClient);\n        });\n        cdpClient.on('Page.frameAttached', this.#handleFrameAttachedEvent.bind(this));\n        cdpClient.on('Page.frameSubtreeWillBeDetached', this.#handleFrameSubtreeWillBeDetached.bind(this));\n    }\n    #handleFrameAttachedEvent(params) {\n        const parentBrowsingContext = this.#browsingContextStorage.findContext(params.parentFrameId);\n        if (parentBrowsingContext !== undefined) {\n            BrowsingContextImpl_js_1.BrowsingContextImpl.create(params.frameId, params.parentFrameId, parentBrowsingContext.userContext, this.#userContextStorage.getConfig(parentBrowsingContext.userContext), parentBrowsingContext.cdpTarget, this.#eventManager, this.#browsingContextStorage, this.#realmStorage, \n            // At this point, we don't know the URL of the frame yet, so it will be updated\n            // later.\n            'about:blank', undefined, this.#unhandledPromptBehavior, this.#logger);\n        }\n    }\n    #handleFrameSubtreeWillBeDetached(params) {\n        this.#browsingContextStorage.findContext(params.frameId)?.dispose(true);\n    }\n    #handleAttachedToTargetEvent(params, parentSessionCdpClient) {\n        const { sessionId, targetInfo } = params;\n        const targetCdpClient = this.#cdpConnection.getCdpClient(sessionId);\n        const detach = async () => {\n            // Detaches and resumes the target suppressing errors.\n            await targetCdpClient\n                .sendCommand('Runtime.runIfWaitingForDebugger')\n                .then(() => parentSessionCdpClient.sendCommand('Target.detachFromTarget', params))\n                .catch((error) => this.#logger?.(log_js_1.LogType.debugError, error));\n        };\n        // Do not attach to the Mapper target.\n        if (this.#selfTargetId === targetInfo.targetId) {\n            void detach();\n            return;\n        }\n        // Service workers are special case because they attach to the\n        // browser target and the page target (so twice per worker) during\n        // the regular auto-attach and might hang if the CDP session on\n        // the browser level is not detached. The logic to detach the\n        // right session is handled in the switch below.\n        const targetKey = targetInfo.type === 'service_worker'\n            ? `${parentSessionCdpClient.sessionId}_${targetInfo.targetId}`\n            : targetInfo.targetId;\n        // Mapper generally only needs one session per target. If we\n        // receive additional auto-attached sessions, that is very likely\n        // coming from custom CDP sessions.\n        if (this.#targetKeysToBeIgnoredByAutoAttach.has(targetKey)) {\n            // Return to leave the session untouched.\n            return;\n        }\n        this.#targetKeysToBeIgnoredByAutoAttach.add(targetKey);\n        const userContext = targetInfo.browserContextId &&\n            targetInfo.browserContextId !== this.#defaultUserContextId\n            ? targetInfo.browserContextId\n            : 'default';\n        switch (targetInfo.type) {\n            case 'tab': {\n                // Tab targets are required only to handle page targets beneath them.\n                this.#setEventListeners(targetCdpClient);\n                // Auto-attach to the page target. No need in resuming tab target debugger, as it\n                // should preserve the page target debugger state, and will be resumed by the page\n                // target.\n                void (async () => {\n                    await targetCdpClient.sendCommand('Target.setAutoAttach', {\n                        autoAttach: true,\n                        waitForDebuggerOnStart: true,\n                        flatten: true,\n                    });\n                })();\n                return;\n            }\n            case 'page':\n            case 'iframe': {\n                const cdpTarget = this.#createCdpTarget(targetCdpClient, parentSessionCdpClient, targetInfo, userContext);\n                const maybeContext = this.#browsingContextStorage.findContext(targetInfo.targetId);\n                if (maybeContext && targetInfo.type === 'iframe') {\n                    // OOPiF.\n                    maybeContext.updateCdpTarget(cdpTarget);\n                }\n                else {\n                    // If attaching to existing browser instance, there could be OOPiF targets. This\n                    // case is handled by the `findFrameParentId` method.\n                    const parentId = this.#findFrameParentId(targetInfo, parentSessionCdpClient.sessionId);\n                    // New context.\n                    BrowsingContextImpl_js_1.BrowsingContextImpl.create(targetInfo.targetId, parentId, userContext, this.#userContextStorage.getConfig(userContext), cdpTarget, this.#eventManager, this.#browsingContextStorage, this.#realmStorage, \n                    // Hack: when a new target created, CDP emits targetInfoChanged with an empty\n                    // url, and navigates it to about:blank later. When the event is emitted for\n                    // an existing target (reconnect), the url is already known, and navigation\n                    // events will not be emitted anymore. Replacing empty url with `about:blank`\n                    // allows to handle both cases in the same way.\n                    // \"7.3.2.1 Creating browsing contexts\".\n                    // https://html.spec.whatwg.org/multipage/document-sequences.html#creating-browsing-contexts\n                    // TODO: check who to deal with non-null creator and its `creatorOrigin`.\n                    targetInfo.url === '' ? 'about:blank' : targetInfo.url, targetInfo.openerFrameId ?? targetInfo.openerId, this.#unhandledPromptBehavior, this.#logger);\n                }\n                return;\n            }\n            case 'service_worker':\n            case 'worker': {\n                const realm = this.#realmStorage.findRealm({\n                    cdpSessionId: parentSessionCdpClient.sessionId,\n                });\n                // If there is no browsing context, this worker is already terminated.\n                if (!realm) {\n                    void detach();\n                    return;\n                }\n                const cdpTarget = this.#createCdpTarget(targetCdpClient, parentSessionCdpClient, targetInfo, userContext);\n                this.#handleWorkerTarget(cdpToBidiTargetTypes[targetInfo.type], cdpTarget, realm);\n                return;\n            }\n            // In CDP, we only emit shared workers on the browser and not the set of\n            // frames that use the shared worker. If we change this in the future to\n            // behave like service workers (emits on both browser and frame targets),\n            // we can remove this block and merge service workers with the above one.\n            case 'shared_worker': {\n                const cdpTarget = this.#createCdpTarget(targetCdpClient, parentSessionCdpClient, targetInfo, userContext);\n                this.#handleWorkerTarget(cdpToBidiTargetTypes[targetInfo.type], cdpTarget);\n                return;\n            }\n        }\n        // DevTools or some other not supported by BiDi target. Just release\n        // debugger and ignore them.\n        void detach();\n    }\n    /** Try to find the parent browsing context ID for the given attached target. */\n    #findFrameParentId(targetInfo, parentSessionId) {\n        if (targetInfo.type !== 'iframe') {\n            return null;\n        }\n        const parentId = targetInfo.openerFrameId ?? targetInfo.openerId;\n        if (parentId !== undefined) {\n            return parentId;\n        }\n        if (parentSessionId !== undefined) {\n            return (this.#browsingContextStorage.findContextBySession(parentSessionId)\n                ?.id ?? null);\n        }\n        return null;\n    }\n    #createCdpTarget(targetCdpClient, parentCdpClient, targetInfo, userContext) {\n        this.#setEventListeners(targetCdpClient);\n        this.#preloadScriptStorage.onCdpTargetCreated(targetInfo.targetId, userContext);\n        const target = CdpTarget_js_1.CdpTarget.create(targetInfo.targetId, targetCdpClient, this.#browserCdpClient, parentCdpClient, this.#realmStorage, this.#eventManager, this.#preloadScriptStorage, this.#browsingContextStorage, this.#networkStorage, this.#prerenderingDisabled, this.#userContextStorage.getConfig(userContext), this.#unhandledPromptBehavior, this.#logger);\n        this.#networkStorage.onCdpTargetCreated(target);\n        this.#bluetoothProcessor.onCdpTargetCreated(target);\n        return target;\n    }\n    #workers = new Map();\n    #handleWorkerTarget(realmType, cdpTarget, ownerRealm) {\n        cdpTarget.cdpClient.on('Runtime.executionContextCreated', (params) => {\n            const { uniqueId, id, origin } = params.context;\n            const workerRealm = new WorkerRealm_js_1.WorkerRealm(cdpTarget.cdpClient, this.#eventManager, id, this.#logger, (0, BrowsingContextImpl_js_1.serializeOrigin)(origin), ownerRealm ? [ownerRealm] : [], uniqueId, this.#realmStorage, realmType);\n            this.#workers.set(cdpTarget.cdpSessionId, workerRealm);\n        });\n    }\n    #handleDetachedFromTargetEvent({ sessionId, targetId, }) {\n        if (targetId) {\n            this.#preloadScriptStorage.find({ targetId }).map((preloadScript) => {\n                preloadScript.dispose(targetId);\n            });\n        }\n        const context = this.#browsingContextStorage.findContextBySession(sessionId);\n        if (context) {\n            context.dispose(true);\n            return;\n        }\n        const worker = this.#workers.get(sessionId);\n        if (worker) {\n            this.#realmStorage.deleteRealms({\n                cdpSessionId: worker.cdpClient.sessionId,\n            });\n        }\n    }\n    #handleTargetInfoChangedEvent(params) {\n        const context = this.#browsingContextStorage.findContext(params.targetInfo.targetId);\n        if (context) {\n            context.onTargetInfoChanged(params);\n        }\n    }\n    #handleTargetCrashedEvent(cdpClient) {\n        // This is primarily used for service and shared workers. CDP tends to not\n        // signal they closed gracefully and instead says they crashed to signal\n        // they are closed.\n        const realms = this.#realmStorage.findRealms({\n            cdpSessionId: cdpClient.sessionId,\n        });\n        for (const realm of realms) {\n            realm.dispose();\n        }\n    }\n}\nexports.CdpTargetManager = CdpTargetManager;\n//# sourceMappingURL=CdpTargetManager.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowsingContextStorage = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst EventEmitter_js_1 = require(\"../../../utils/EventEmitter.js\");\n/** Container class for browsing contexts. */\nclass BrowsingContextStorage {\n    /** Map from context ID to context implementation. */\n    #contexts = new Map();\n    /** Event emitter for browsing context storage eventsis not expected to be exposed to\n     * the outside world. */\n    #eventEmitter = new EventEmitter_js_1.EventEmitter();\n    /** Gets all top-level contexts, i.e. those with no parent. */\n    getTopLevelContexts() {\n        return this.getAllContexts().filter((context) => context.isTopLevelContext());\n    }\n    /** Gets all contexts. */\n    getAllContexts() {\n        return Array.from(this.#contexts.values());\n    }\n    /** Deletes the context with the given ID. */\n    deleteContextById(id) {\n        this.#contexts.delete(id);\n    }\n    /** Deletes the given context. */\n    deleteContext(context) {\n        this.#contexts.delete(context.id);\n    }\n    /** Tracks the given context. */\n    addContext(context) {\n        this.#contexts.set(context.id, context);\n        this.#eventEmitter.emit(\"added\" /* BrowsingContextStorageEvents.Added */, {\n            browsingContext: context,\n        });\n    }\n    /**\n     * Waits for a context with the given ID to be added and returns it.\n     */\n    waitForContext(browsingContextId) {\n        if (this.#contexts.has(browsingContextId)) {\n            return Promise.resolve(this.getContext(browsingContextId));\n        }\n        return new Promise((resolve) => {\n            const listener = (event) => {\n                if (event.browsingContext.id === browsingContextId) {\n                    this.#eventEmitter.off(\"added\" /* BrowsingContextStorageEvents.Added */, listener);\n                    resolve(event.browsingContext);\n                }\n            };\n            this.#eventEmitter.on(\"added\" /* BrowsingContextStorageEvents.Added */, listener);\n        });\n    }\n    /** Returns true whether there is an existing context with the given ID. */\n    hasContext(id) {\n        return this.#contexts.has(id);\n    }\n    /** Gets the context with the given ID, if any. */\n    findContext(id) {\n        return this.#contexts.get(id);\n    }\n    /** Returns the top-level context ID of the given context, if any. */\n    findTopLevelContextId(id) {\n        if (id === null) {\n            return null;\n        }\n        const maybeContext = this.findContext(id);\n        if (!maybeContext) {\n            return null;\n        }\n        const parentId = maybeContext.parentId ?? null;\n        if (parentId === null) {\n            return id;\n        }\n        return this.findTopLevelContextId(parentId);\n    }\n    findContextBySession(sessionId) {\n        for (const context of this.#contexts.values()) {\n            if (context.cdpTarget.cdpSessionId === sessionId) {\n                return context;\n            }\n        }\n        return;\n    }\n    /** Gets the context with the given ID, if any, otherwise throws. */\n    getContext(id) {\n        const result = this.findContext(id);\n        if (result === undefined) {\n            throw new protocol_js_1.NoSuchFrameException(`Context ${id} not found`);\n        }\n        return result;\n    }\n    verifyTopLevelContextsList(contexts) {\n        const foundContexts = new Set();\n        if (!contexts) {\n            return foundContexts;\n        }\n        for (const contextId of contexts) {\n            const context = this.getContext(contextId);\n            if (context.isTopLevelContext()) {\n                foundContexts.add(context);\n            }\n            else {\n                throw new protocol_js_1.InvalidArgumentException(`Non top-level context '${contextId}' given.`);\n            }\n        }\n        return foundContexts;\n    }\n    verifyContextsList(contexts) {\n        if (!contexts.length) {\n            return;\n        }\n        for (const contextId of contexts) {\n            this.getContext(contextId);\n        }\n    }\n}\nexports.BrowsingContextStorage = BrowsingContextStorage;\n//# sourceMappingURL=BrowsingContextStorage.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultMap = void 0;\n/**\n * A subclass of Map whose functionality is almost the same as its parent\n * except for the fact that DefaultMap never returns undefined. It provides a\n * default value for keys that do not exist.\n */\nclass DefaultMap extends Map {\n    /** The default value to return whenever a key is not present in the map. */\n    #getDefaultValue;\n    constructor(getDefaultValue, entries) {\n        super(entries);\n        this.#getDefaultValue = getDefaultValue;\n    }\n    get(key) {\n        if (!this.has(key)) {\n            this.set(key, this.#getDefaultValue(key));\n        }\n        return super.get(key);\n    }\n}\nexports.DefaultMap = DefaultMap;\n//# sourceMappingURL=DefaultMap.js.map","\"use strict\";\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkRequest = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst assert_js_1 = require(\"../../../utils/assert.js\");\nconst DefaultMap_js_1 = require(\"../../../utils/DefaultMap.js\");\nconst Deferred_js_1 = require(\"../../../utils/Deferred.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst NetworkUtils_js_1 = require(\"./NetworkUtils.js\");\nconst REALM_REGEX = /(?<=realm=\").*(?=\")/;\n/** Abstracts one individual network request. */\nclass NetworkRequest {\n    static unknownParameter = 'UNKNOWN';\n    /**\n     * Each network request has an associated request id, which is a string\n     * uniquely identifying that request.\n     *\n     * The identifier for a request resulting from a redirect matches that of the\n     * request that initiated it.\n     */\n    #id;\n    #fetchId;\n    /**\n     * Indicates the network intercept phase, if the request is currently blocked.\n     * Undefined necessarily implies that the request is not blocked.\n     */\n    #interceptPhase;\n    #servedFromCache = false;\n    #redirectCount;\n    #request = {};\n    #requestOverrides;\n    #responseOverrides;\n    #response = {};\n    #eventManager;\n    #networkStorage;\n    #cdpTarget;\n    #logger;\n    #emittedEvents = {\n        [protocol_js_1.ChromiumBidi.Network.EventNames.AuthRequired]: false,\n        [protocol_js_1.ChromiumBidi.Network.EventNames.BeforeRequestSent]: false,\n        [protocol_js_1.ChromiumBidi.Network.EventNames.FetchError]: false,\n        [protocol_js_1.ChromiumBidi.Network.EventNames.ResponseCompleted]: false,\n        [protocol_js_1.ChromiumBidi.Network.EventNames.ResponseStarted]: false,\n    };\n    waitNextPhase = new Deferred_js_1.Deferred();\n    constructor(id, eventManager, networkStorage, cdpTarget, redirectCount = 0, logger) {\n        this.#id = id;\n        this.#eventManager = eventManager;\n        this.#networkStorage = networkStorage;\n        this.#cdpTarget = cdpTarget;\n        this.#redirectCount = redirectCount;\n        this.#logger = logger;\n    }\n    get id() {\n        return this.#id;\n    }\n    get fetchId() {\n        return this.#fetchId;\n    }\n    /**\n     * When blocked returns the phase for it\n     */\n    get interceptPhase() {\n        return this.#interceptPhase;\n    }\n    get url() {\n        const fragment = this.#request.info?.request.urlFragment ??\n            this.#request.paused?.request.urlFragment ??\n            '';\n        const url = this.#response.paused?.request.url ??\n            this.#requestOverrides?.url ??\n            this.#response.info?.url ??\n            this.#request.auth?.request.url ??\n            this.#request.info?.request.url ??\n            this.#request.paused?.request.url ??\n            _a.unknownParameter;\n        return `${url}${fragment}`;\n    }\n    get redirectCount() {\n        return this.#redirectCount;\n    }\n    get cdpTarget() {\n        return this.#cdpTarget;\n    }\n    get cdpClient() {\n        return this.#cdpTarget.cdpClient;\n    }\n    isRedirecting() {\n        return Boolean(this.#request.info);\n    }\n    #isDataUrl() {\n        return this.url.startsWith('data:');\n    }\n    get #method() {\n        return (this.#requestOverrides?.method ??\n            this.#request.info?.request.method ??\n            this.#request.paused?.request.method ??\n            this.#request.auth?.request.method ??\n            this.#response.paused?.request.method);\n    }\n    get #navigationId() {\n        // Heuristic to determine if this is a navigation request, and if not return null.\n        if (!this.#request.info ||\n            !this.#request.info.loaderId ||\n            // When we navigate all CDP network events have `loaderId`\n            // CDP's `loaderId` and `requestId` match when\n            // that request triggered the loading\n            this.#request.info.loaderId !== this.#request.info.requestId) {\n            return null;\n        }\n        // Get virtual navigation ID from the browsing context.\n        return this.#networkStorage.getNavigationId(this.#context ?? undefined);\n    }\n    get #cookies() {\n        let cookies = [];\n        if (this.#request.extraInfo) {\n            cookies = this.#request.extraInfo.associatedCookies\n                .filter(({ blockedReasons }) => {\n                return !Array.isArray(blockedReasons) || blockedReasons.length === 0;\n            })\n                .map(({ cookie }) => (0, NetworkUtils_js_1.cdpToBiDiCookie)(cookie));\n        }\n        return cookies;\n    }\n    get #bodySize() {\n        let bodySize = 0;\n        if (typeof this.#requestOverrides?.bodySize === 'number') {\n            bodySize = this.#requestOverrides.bodySize;\n        }\n        else {\n            bodySize = (0, NetworkUtils_js_1.bidiBodySizeFromCdpPostDataEntries)(this.#request.info?.request.postDataEntries ?? []);\n        }\n        return bodySize;\n    }\n    get #context() {\n        const result = this.#response.paused?.frameId ??\n            this.#request.info?.frameId ??\n            this.#request.paused?.frameId ??\n            this.#request.auth?.frameId;\n        if (result !== undefined) {\n            return result;\n        }\n        // Heuristic for associating a preflight request with context via it's initiator\n        // request. Useful for preflight requests.\n        // https://github.com/GoogleChromeLabs/chromium-bidi/issues/3570\n        if (this.#request?.info?.initiator.type === 'preflight' &&\n            this.#request?.info?.initiator.requestId !== undefined) {\n            const maybeInitiator = this.#networkStorage.getRequestById(this.#request?.info?.initiator.requestId);\n            if (maybeInitiator !== undefined) {\n                return maybeInitiator.#request.info?.frameId ?? null;\n            }\n        }\n        return null;\n    }\n    /** Returns the HTTP status code associated with this request if any. */\n    get #statusCode() {\n        return (this.#responseOverrides?.statusCode ??\n            this.#response.paused?.responseStatusCode ??\n            this.#response.extraInfo?.statusCode ??\n            this.#response.info?.status);\n    }\n    get #requestHeaders() {\n        let headers = [];\n        if (this.#requestOverrides?.headers) {\n            const headerMap = new DefaultMap_js_1.DefaultMap(() => []);\n            for (const header of this.#requestOverrides.headers) {\n                headerMap.get(header.name).push(header.value.value);\n            }\n            for (const [name, value] of headerMap.entries()) {\n                headers.push({\n                    name,\n                    value: {\n                        type: 'string',\n                        value: value.join('\\n').trimEnd(),\n                    },\n                });\n            }\n        }\n        else {\n            headers = [\n                ...(0, NetworkUtils_js_1.bidiNetworkHeadersFromCdpNetworkHeaders)(this.#request.info?.request.headers),\n                ...(0, NetworkUtils_js_1.bidiNetworkHeadersFromCdpNetworkHeaders)(this.#request.extraInfo?.headers),\n            ];\n        }\n        return headers;\n    }\n    get #authChallenges() {\n        // TODO: get headers from Fetch.requestPaused\n        if (!this.#response.info) {\n            return;\n        }\n        if (!(this.#statusCode === 401 || this.#statusCode === 407)) {\n            return undefined;\n        }\n        const headerName = this.#statusCode === 401 ? 'WWW-Authenticate' : 'Proxy-Authenticate';\n        const authChallenges = [];\n        for (const [header, value] of Object.entries(this.#response.info.headers)) {\n            // TODO: Do a proper match based on https://httpwg.org/specs/rfc9110.html#credentials\n            // Or verify this works\n            if (header.localeCompare(headerName, undefined, { sensitivity: 'base' }) === 0) {\n                authChallenges.push({\n                    scheme: value.split(' ').at(0) ?? '',\n                    realm: value.match(REALM_REGEX)?.at(0) ?? '',\n                });\n            }\n        }\n        return authChallenges;\n    }\n    get #timings() {\n        // The timing in the CDP events are provided relative to the event's baseline.\n        // However, the baseline can be different for different events, and the events have to\n        // be normalized throughout resource events. Normalize events timestamps  by the\n        // request.\n        // TODO: Verify this is correct.\n        const responseTimeOffset = (0, NetworkUtils_js_1.getTiming)((0, NetworkUtils_js_1.getTiming)(this.#response.info?.timing?.requestTime) -\n            (0, NetworkUtils_js_1.getTiming)(this.#request.info?.timestamp));\n        return {\n            // TODO: Verify this is correct\n            timeOrigin: Math.round((0, NetworkUtils_js_1.getTiming)(this.#request.info?.wallTime) * 1000),\n            // Timing baseline.\n            // TODO: Verify this is correct.\n            requestTime: 0,\n            // TODO: set if redirect detected.\n            redirectStart: 0,\n            // TODO: set if redirect detected.\n            redirectEnd: 0,\n            // TODO: Verify this is correct\n            // https://source.chromium.org/chromium/chromium/src/+/main:net/base/load_timing_info.h;l=145\n            fetchStart: (0, NetworkUtils_js_1.getTiming)(this.#response.info?.timing?.workerFetchStart, responseTimeOffset),\n            // fetchStart: 0,\n            dnsStart: (0, NetworkUtils_js_1.getTiming)(this.#response.info?.timing?.dnsStart, responseTimeOffset),\n            dnsEnd: (0, NetworkUtils_js_1.getTiming)(this.#response.info?.timing?.dnsEnd, responseTimeOffset),\n            connectStart: (0, NetworkUtils_js_1.getTiming)(this.#response.info?.timing?.connectStart, responseTimeOffset),\n            connectEnd: (0, NetworkUtils_js_1.getTiming)(this.#response.info?.timing?.connectEnd, responseTimeOffset),\n            tlsStart: (0, NetworkUtils_js_1.getTiming)(this.#response.info?.timing?.sslStart, responseTimeOffset),\n            requestStart: (0, NetworkUtils_js_1.getTiming)(this.#response.info?.timing?.sendStart, responseTimeOffset),\n            // https://source.chromium.org/chromium/chromium/src/+/main:net/base/load_timing_info.h;l=196\n            responseStart: (0, NetworkUtils_js_1.getTiming)(this.#response.info?.timing?.receiveHeadersStart, responseTimeOffset),\n            responseEnd: (0, NetworkUtils_js_1.getTiming)(this.#response.info?.timing?.receiveHeadersEnd, responseTimeOffset),\n        };\n    }\n    #phaseChanged() {\n        this.waitNextPhase.resolve();\n        this.waitNextPhase = new Deferred_js_1.Deferred();\n    }\n    #interceptsInPhase(phase) {\n        if (!this.#cdpTarget.isSubscribedTo(`network.${phase}`)) {\n            return new Set();\n        }\n        return this.#networkStorage.getInterceptsForPhase(this, phase);\n    }\n    #isBlockedInPhase(phase) {\n        return this.#interceptsInPhase(phase).size > 0;\n    }\n    handleRedirect(event) {\n        // TODO: use event.redirectResponse;\n        // Temporary workaround to emit ResponseCompleted event for redirects\n        this.#response.hasExtraInfo = false;\n        this.#response.info = event.redirectResponse;\n        this.#emitEventsIfReady({\n            wasRedirected: true,\n        });\n    }\n    #emitEventsIfReady(options = {}) {\n        const requestExtraInfoCompleted = \n        // Flush redirects\n        options.wasRedirected ||\n            options.hasFailed ||\n            this.#isDataUrl() ||\n            Boolean(this.#request.extraInfo) ||\n            // Requests from cache don't have extra info\n            this.#servedFromCache ||\n            // Sometimes there is no extra info and the response\n            // is the only place we can find out\n            Boolean(this.#response.info && !this.#response.hasExtraInfo);\n        const noInterceptionExpected = \n        // We can't intercept data urls from CDP\n        this.#isDataUrl() ||\n            // Cached requests never hit the network\n            this.#servedFromCache;\n        const requestInterceptionExpected = !noInterceptionExpected &&\n            this.#isBlockedInPhase(\"beforeRequestSent\" /* Network.InterceptPhase.BeforeRequestSent */);\n        const requestInterceptionCompleted = !requestInterceptionExpected ||\n            (requestInterceptionExpected && Boolean(this.#request.paused));\n        if (Boolean(this.#request.info) &&\n            (requestInterceptionExpected\n                ? requestInterceptionCompleted\n                : requestExtraInfoCompleted)) {\n            this.#emitEvent(this.#getBeforeRequestEvent.bind(this));\n        }\n        const responseExtraInfoCompleted = Boolean(this.#response.extraInfo) ||\n            // Response from cache don't have extra info\n            this.#servedFromCache ||\n            // Don't expect extra info if the flag is false\n            Boolean(this.#response.info && !this.#response.hasExtraInfo);\n        const responseInterceptionExpected = !noInterceptionExpected &&\n            this.#isBlockedInPhase(\"responseStarted\" /* Network.InterceptPhase.ResponseStarted */);\n        if (this.#response.info ||\n            (responseInterceptionExpected && Boolean(this.#response.paused))) {\n            this.#emitEvent(this.#getResponseStartedEvent.bind(this));\n        }\n        const responseInterceptionCompleted = !responseInterceptionExpected ||\n            (responseInterceptionExpected && Boolean(this.#response.paused));\n        if (Boolean(this.#response.info) &&\n            responseExtraInfoCompleted &&\n            responseInterceptionCompleted) {\n            this.#emitEvent(this.#getResponseReceivedEvent.bind(this));\n            this.#networkStorage.disposeRequest(this.id);\n        }\n    }\n    onRequestWillBeSentEvent(event) {\n        this.#request.info = event;\n        this.#emitEventsIfReady();\n    }\n    onRequestWillBeSentExtraInfoEvent(event) {\n        this.#request.extraInfo = event;\n        this.#emitEventsIfReady();\n    }\n    onResponseReceivedExtraInfoEvent(event) {\n        if (event.statusCode >= 300 &&\n            event.statusCode <= 399 &&\n            this.#request.info &&\n            event.headers['location'] === this.#request.info.request.url) {\n            // We received the Response Extra info for the redirect\n            // Too late so we need to skip it as it will\n            // fire wrongly for the last one\n            return;\n        }\n        this.#response.extraInfo = event;\n        this.#emitEventsIfReady();\n    }\n    onResponseReceivedEvent(event) {\n        this.#response.hasExtraInfo = event.hasExtraInfo;\n        this.#response.info = event.response;\n        this.#networkStorage.markRequestCollectedIfNeeded(this);\n        this.#emitEventsIfReady();\n    }\n    onServedFromCache() {\n        this.#servedFromCache = true;\n        this.#emitEventsIfReady();\n    }\n    onLoadingFailedEvent(event) {\n        this.#emitEventsIfReady({\n            hasFailed: true,\n        });\n        this.#emitEvent(() => {\n            return {\n                method: protocol_js_1.ChromiumBidi.Network.EventNames.FetchError,\n                params: {\n                    ...this.#getBaseEventParams(),\n                    errorText: event.errorText,\n                },\n            };\n        });\n    }\n    /** @see https://chromedevtools.github.io/devtools-protocol/tot/Fetch/#method-failRequest */\n    async failRequest(errorReason) {\n        (0, assert_js_1.assert)(this.#fetchId, 'Network Interception not set-up.');\n        await this.cdpClient.sendCommand('Fetch.failRequest', {\n            requestId: this.#fetchId,\n            errorReason,\n        });\n        this.#interceptPhase = undefined;\n    }\n    onRequestPaused(event) {\n        this.#fetchId = event.requestId;\n        // CDP https://chromedevtools.github.io/devtools-protocol/tot/Fetch/#event-requestPaused\n        if (event.responseStatusCode || event.responseErrorReason) {\n            this.#response.paused = event;\n            if (this.#isBlockedInPhase(\"responseStarted\" /* Network.InterceptPhase.ResponseStarted */) &&\n                // CDP may emit multiple events for a single request\n                !this.#emittedEvents[protocol_js_1.ChromiumBidi.Network.EventNames.ResponseStarted] &&\n                // Continue all response that have not enabled Network domain\n                this.#fetchId !== this.id) {\n                this.#interceptPhase = \"responseStarted\" /* Network.InterceptPhase.ResponseStarted */;\n            }\n            else {\n                void this.#continueResponse();\n            }\n        }\n        else {\n            this.#request.paused = event;\n            if (this.#isBlockedInPhase(\"beforeRequestSent\" /* Network.InterceptPhase.BeforeRequestSent */) &&\n                // CDP may emit multiple events for a single request\n                !this.#emittedEvents[protocol_js_1.ChromiumBidi.Network.EventNames.BeforeRequestSent] &&\n                // Continue all requests that have not enabled Network domain\n                this.#fetchId !== this.id) {\n                this.#interceptPhase = \"beforeRequestSent\" /* Network.InterceptPhase.BeforeRequestSent */;\n            }\n            else {\n                void this.#continueRequest();\n            }\n        }\n        this.#emitEventsIfReady();\n    }\n    onAuthRequired(event) {\n        this.#fetchId = event.requestId;\n        this.#request.auth = event;\n        if (this.#isBlockedInPhase(\"authRequired\" /* Network.InterceptPhase.AuthRequired */) &&\n            // Continue all auth requests that have not enabled Network domain\n            this.#fetchId !== this.id) {\n            this.#interceptPhase = \"authRequired\" /* Network.InterceptPhase.AuthRequired */;\n        }\n        else {\n            void this.#continueWithAuth({\n                response: 'Default',\n            });\n        }\n        this.#emitEvent(() => {\n            return {\n                method: protocol_js_1.ChromiumBidi.Network.EventNames.AuthRequired,\n                params: {\n                    ...this.#getBaseEventParams(\"authRequired\" /* Network.InterceptPhase.AuthRequired */),\n                    response: this.#getResponseEventParams(),\n                },\n            };\n        });\n    }\n    /** @see https://chromedevtools.github.io/devtools-protocol/tot/Fetch/#method-continueRequest */\n    async continueRequest(overrides = {}) {\n        const overrideHeaders = this.#getOverrideHeader(overrides.headers, overrides.cookies);\n        const headers = (0, NetworkUtils_js_1.cdpFetchHeadersFromBidiNetworkHeaders)(overrideHeaders);\n        const postData = getCdpBodyFromBiDiBytesValue(overrides.body);\n        await this.#continueRequest({\n            url: overrides.url,\n            method: overrides.method,\n            headers,\n            postData,\n        });\n        this.#requestOverrides = {\n            url: overrides.url,\n            method: overrides.method,\n            headers: overrides.headers,\n            cookies: overrides.cookies,\n            bodySize: getSizeFromBiDiBytesValue(overrides.body),\n        };\n    }\n    async #continueRequest(overrides = {}) {\n        (0, assert_js_1.assert)(this.#fetchId, 'Network Interception not set-up.');\n        await this.cdpClient.sendCommand('Fetch.continueRequest', {\n            requestId: this.#fetchId,\n            url: overrides.url,\n            method: overrides.method,\n            headers: overrides.headers,\n            postData: overrides.postData,\n        });\n        this.#interceptPhase = undefined;\n    }\n    /** @see https://chromedevtools.github.io/devtools-protocol/tot/Fetch/#method-continueResponse */\n    async continueResponse(overrides = {}) {\n        if (this.interceptPhase === \"authRequired\" /* Network.InterceptPhase.AuthRequired */) {\n            if (overrides.credentials) {\n                await Promise.all([\n                    this.waitNextPhase,\n                    await this.#continueWithAuth({\n                        response: 'ProvideCredentials',\n                        username: overrides.credentials.username,\n                        password: overrides.credentials.password,\n                    }),\n                ]);\n            }\n            else {\n                // We need to use `ProvideCredentials`\n                // As `Default` may cancel the request\n                return await this.#continueWithAuth({\n                    response: 'ProvideCredentials',\n                });\n            }\n        }\n        if (this.#interceptPhase === \"responseStarted\" /* Network.InterceptPhase.ResponseStarted */) {\n            const overrideHeaders = this.#getOverrideHeader(overrides.headers, overrides.cookies);\n            const responseHeaders = (0, NetworkUtils_js_1.cdpFetchHeadersFromBidiNetworkHeaders)(overrideHeaders);\n            await this.#continueResponse({\n                responseCode: overrides.statusCode ?? this.#response.paused?.responseStatusCode,\n                responsePhrase: overrides.reasonPhrase ?? this.#response.paused?.responseStatusText,\n                responseHeaders: responseHeaders ?? this.#response.paused?.responseHeaders,\n            });\n            this.#responseOverrides = {\n                statusCode: overrides.statusCode,\n                headers: overrideHeaders,\n            };\n        }\n    }\n    async #continueResponse({ responseCode, responsePhrase, responseHeaders, } = {}) {\n        (0, assert_js_1.assert)(this.#fetchId, 'Network Interception not set-up.');\n        await this.cdpClient.sendCommand('Fetch.continueResponse', {\n            requestId: this.#fetchId,\n            responseCode,\n            responsePhrase,\n            responseHeaders,\n        });\n        this.#interceptPhase = undefined;\n    }\n    /** @see https://chromedevtools.github.io/devtools-protocol/tot/Fetch/#method-continueWithAuth */\n    async continueWithAuth(authChallenge) {\n        let username;\n        let password;\n        if (authChallenge.action === 'provideCredentials') {\n            const { credentials } = authChallenge;\n            username = credentials.username;\n            password = credentials.password;\n        }\n        const response = (0, NetworkUtils_js_1.cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction)(authChallenge.action);\n        await this.#continueWithAuth({\n            response,\n            username,\n            password,\n        });\n    }\n    /** @see https://chromedevtools.github.io/devtools-protocol/tot/Fetch/#method-provideResponse */\n    async provideResponse(overrides) {\n        (0, assert_js_1.assert)(this.#fetchId, 'Network Interception not set-up.');\n        // We need to pass through if the request is already in\n        // AuthRequired phase\n        if (this.interceptPhase === \"authRequired\" /* Network.InterceptPhase.AuthRequired */) {\n            // We need to use `ProvideCredentials`\n            // As `Default` may cancel the request\n            return await this.#continueWithAuth({\n                response: 'ProvideCredentials',\n            });\n        }\n        // If we don't modify the response\n        // just continue the request\n        if (!overrides.body && !overrides.headers) {\n            return await this.#continueRequest();\n        }\n        const overrideHeaders = this.#getOverrideHeader(overrides.headers, overrides.cookies);\n        const responseHeaders = (0, NetworkUtils_js_1.cdpFetchHeadersFromBidiNetworkHeaders)(overrideHeaders);\n        const responseCode = overrides.statusCode ?? this.#statusCode ?? 200;\n        await this.cdpClient.sendCommand('Fetch.fulfillRequest', {\n            requestId: this.#fetchId,\n            responseCode,\n            responsePhrase: overrides.reasonPhrase,\n            responseHeaders,\n            body: getCdpBodyFromBiDiBytesValue(overrides.body),\n        });\n        this.#interceptPhase = undefined;\n    }\n    dispose() {\n        this.waitNextPhase.reject(new Error('waitNextPhase disposed'));\n    }\n    async #continueWithAuth(authChallengeResponse) {\n        (0, assert_js_1.assert)(this.#fetchId, 'Network Interception not set-up.');\n        await this.cdpClient.sendCommand('Fetch.continueWithAuth', {\n            requestId: this.#fetchId,\n            authChallengeResponse,\n        });\n        this.#interceptPhase = undefined;\n    }\n    #emitEvent(getEvent) {\n        let event;\n        try {\n            event = getEvent();\n        }\n        catch (error) {\n            this.#logger?.(log_js_1.LogType.debugError, error);\n            return;\n        }\n        if (this.#isIgnoredEvent() ||\n            (this.#emittedEvents[event.method] &&\n                // Special case this event can be emitted multiple times\n                event.method !== protocol_js_1.ChromiumBidi.Network.EventNames.AuthRequired)) {\n            return;\n        }\n        this.#phaseChanged();\n        this.#emittedEvents[event.method] = true;\n        if (this.#context) {\n            this.#eventManager.registerEvent(Object.assign(event, {\n                type: 'event',\n            }), this.#context);\n        }\n        else {\n            this.#eventManager.registerGlobalEvent(Object.assign(event, {\n                type: 'event',\n            }));\n        }\n    }\n    #getBaseEventParams(phase) {\n        const interceptProps = {\n            isBlocked: false,\n        };\n        if (phase) {\n            const blockedBy = this.#interceptsInPhase(phase);\n            interceptProps.isBlocked = blockedBy.size > 0;\n            if (interceptProps.isBlocked) {\n                interceptProps.intercepts = [...blockedBy];\n            }\n        }\n        return {\n            context: this.#context,\n            navigation: this.#navigationId,\n            redirectCount: this.#redirectCount,\n            request: this.#getRequestData(),\n            // Timestamp should be in milliseconds, while CDP provides it in seconds.\n            timestamp: Math.round((0, NetworkUtils_js_1.getTiming)(this.#request.info?.wallTime) * 1000),\n            // Contains isBlocked and intercepts\n            ...interceptProps,\n        };\n    }\n    #getResponseEventParams() {\n        // Chromium sends wrong extraInfo events for responses served from cache.\n        // See https://github.com/puppeteer/puppeteer/issues/9965 and\n        // https://crbug.com/1340398.\n        if (this.#response.info?.fromDiskCache) {\n            this.#response.extraInfo = undefined;\n        }\n        const headers = [\n            ...(0, NetworkUtils_js_1.bidiNetworkHeadersFromCdpNetworkHeaders)(this.#response.info?.headers),\n            ...(0, NetworkUtils_js_1.bidiNetworkHeadersFromCdpNetworkHeaders)(this.#response.extraInfo?.headers),\n            // TODO: Verify how to dedupe these\n            // ...bidiNetworkHeadersFromCdpNetworkHeadersEntries(\n            //   this.#response.paused?.responseHeaders\n            // ),\n        ];\n        const authChallenges = this.#authChallenges;\n        const response = {\n            url: this.url,\n            protocol: this.#response.info?.protocol ?? '',\n            status: this.#statusCode ?? -1, // TODO: Throw an exception or use some other status code?\n            statusText: this.#response.info?.statusText ||\n                this.#response.paused?.responseStatusText ||\n                '',\n            fromCache: this.#response.info?.fromDiskCache ||\n                this.#response.info?.fromPrefetchCache ||\n                this.#servedFromCache,\n            headers: this.#responseOverrides?.headers ?? headers,\n            mimeType: this.#response.info?.mimeType || '',\n            bytesReceived: this.#response.info?.encodedDataLength || 0,\n            headersSize: (0, NetworkUtils_js_1.computeHeadersSize)(headers),\n            // TODO: consider removing from spec.\n            bodySize: 0,\n            content: {\n                // TODO: consider removing from spec.\n                size: 0,\n            },\n            ...(authChallenges ? { authChallenges } : {}),\n        };\n        return {\n            ...response,\n            'goog:securityDetails': this.#response.info?.securityDetails,\n        };\n    }\n    #getRequestData() {\n        const headers = this.#requestHeaders;\n        const request = {\n            request: this.#id,\n            url: this.url,\n            method: this.#method ?? _a.unknownParameter,\n            headers,\n            cookies: this.#cookies,\n            headersSize: (0, NetworkUtils_js_1.computeHeadersSize)(headers),\n            bodySize: this.#bodySize,\n            // TODO: populate\n            destination: this.#getDestination(),\n            // TODO: populate\n            initiatorType: this.#getInitiatorType(),\n            timings: this.#timings,\n        };\n        return {\n            ...request,\n            'goog:postData': this.#request.info?.request?.postData,\n            'goog:hasPostData': this.#request.info?.request?.hasPostData,\n            'goog:resourceType': this.#request.info?.type,\n            'goog:resourceInitiator': this.#request.info?.initiator,\n        };\n    }\n    /**\n     * Heuristic trying to guess the destination.\n     * Specification: https://fetch.spec.whatwg.org/#concept-request-destination.\n     * Specified values: \"audio\", \"audioworklet\", \"document\", \"embed\", \"font\", \"frame\",\n     * \"iframe\", \"image\", \"json\", \"manifest\", \"object\", \"paintworklet\", \"report\", \"script\",\n     * \"serviceworker\", \"sharedworker\", \"style\", \"track\", \"video\", \"webidentity\", \"worker\",\n     * \"xslt\".\n     */\n    #getDestination() {\n        switch (this.#request.info?.type) {\n            case 'Script':\n                return 'script';\n            case 'Stylesheet':\n                return 'style';\n            case 'Image':\n                return 'image';\n            case 'Document':\n                // If request to document is initiated by parser, assume it is expected to\n                // arrive in an iframe. Otherwise, fallback to empty string.\n                return this.#request.info?.initiator.type === 'parser' ? 'iframe' : '';\n            default:\n                return '';\n        }\n    }\n    /**\n     * Heuristic trying to guess the initiator type.\n     * Specification: https://fetch.spec.whatwg.org/#request-initiator-type.\n     * Specified values: \"audio\", \"beacon\", \"body\", \"css\", \"early-hints\", \"embed\", \"fetch\",\n     * \"font\", \"frame\", \"iframe\", \"image\", \"img\", \"input\", \"link\", \"object\", \"ping\",\n     * \"script\", \"track\", \"video\", \"xmlhttprequest\", \"other\".\n     */\n    #getInitiatorType() {\n        if (this.#request.info?.initiator.type === 'parser') {\n            switch (this.#request.info?.type) {\n                case 'Document':\n                    // The request to document is initiated by the parser. Assuming it's an iframe.\n                    return 'iframe';\n                case 'Font':\n                    // If the document's url is not the parser's url, assume the resource is loaded\n                    // from css. Otherwise, it's a `font` element.\n                    return this.#request.info?.initiator?.url ===\n                        this.#request.info?.documentURL\n                        ? 'font'\n                        : 'css';\n                case 'Image':\n                    // If the document's url is not the parser's url, assume the resource is loaded\n                    // from css. Otherwise, it's a `img` element.\n                    return this.#request.info?.initiator?.url ===\n                        this.#request.info?.documentURL\n                        ? 'img'\n                        : 'css';\n                case 'Script':\n                    return 'script';\n                case 'Stylesheet':\n                    return 'link';\n                default:\n                    return null;\n            }\n        }\n        if (this.#request?.info?.type === 'Fetch') {\n            return 'fetch';\n        }\n        return null;\n    }\n    #getBeforeRequestEvent() {\n        (0, assert_js_1.assert)(this.#request.info, 'RequestWillBeSentEvent is not set');\n        return {\n            method: protocol_js_1.ChromiumBidi.Network.EventNames.BeforeRequestSent,\n            params: {\n                ...this.#getBaseEventParams(\"beforeRequestSent\" /* Network.InterceptPhase.BeforeRequestSent */),\n                initiator: {\n                    type: _a.#getInitiator(this.#request.info.initiator.type),\n                    columnNumber: this.#request.info.initiator.columnNumber,\n                    lineNumber: this.#request.info.initiator.lineNumber,\n                    stackTrace: this.#request.info.initiator.stack,\n                    request: this.#request.info.initiator.requestId,\n                },\n            },\n        };\n    }\n    #getResponseStartedEvent() {\n        return {\n            method: protocol_js_1.ChromiumBidi.Network.EventNames.ResponseStarted,\n            params: {\n                ...this.#getBaseEventParams(\"responseStarted\" /* Network.InterceptPhase.ResponseStarted */),\n                response: this.#getResponseEventParams(),\n            },\n        };\n    }\n    #getResponseReceivedEvent() {\n        return {\n            method: protocol_js_1.ChromiumBidi.Network.EventNames.ResponseCompleted,\n            params: {\n                ...this.#getBaseEventParams(),\n                response: this.#getResponseEventParams(),\n            },\n        };\n    }\n    #isIgnoredEvent() {\n        const faviconUrl = '/favicon.ico';\n        return (this.#request.paused?.request.url.endsWith(faviconUrl) ??\n            this.#request.info?.request.url.endsWith(faviconUrl) ??\n            false);\n    }\n    #getOverrideHeader(headers, cookies) {\n        if (!headers && !cookies) {\n            return undefined;\n        }\n        let overrideHeaders = headers;\n        const cookieHeader = (0, NetworkUtils_js_1.networkHeaderFromCookieHeaders)(cookies);\n        if (cookieHeader && !overrideHeaders) {\n            overrideHeaders = this.#requestHeaders;\n        }\n        if (cookieHeader && overrideHeaders) {\n            overrideHeaders.filter((header) => header.name.localeCompare('cookie', undefined, {\n                sensitivity: 'base',\n            }) !== 0);\n            overrideHeaders.push(cookieHeader);\n        }\n        return overrideHeaders;\n    }\n    static #getInitiator(initiatorType) {\n        switch (initiatorType) {\n            case 'parser':\n            case 'script':\n            case 'preflight':\n                return initiatorType;\n            default:\n                return 'other';\n        }\n    }\n}\nexports.NetworkRequest = NetworkRequest;\n_a = NetworkRequest;\nfunction getCdpBodyFromBiDiBytesValue(body) {\n    let parsedBody;\n    if (body?.type === 'string') {\n        parsedBody = (0, NetworkUtils_js_1.stringToBase64)(body.value);\n    }\n    else if (body?.type === 'base64') {\n        parsedBody = body.value;\n    }\n    return parsedBody;\n}\nfunction getSizeFromBiDiBytesValue(body) {\n    if (body?.type === 'string') {\n        return body.value.length;\n    }\n    else if (body?.type === 'base64') {\n        return atob(body.value).length;\n    }\n    return 0;\n}\n//# sourceMappingURL=NetworkRequest.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkStorage = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst uuid_js_1 = require(\"../../../utils/uuid.js\");\nconst NetworkRequest_js_1 = require(\"./NetworkRequest.js\");\nconst NetworkUtils_js_1 = require(\"./NetworkUtils.js\");\n/** Stores network and intercept maps. */\nclass NetworkStorage {\n    #browsingContextStorage;\n    #eventManager;\n    #logger;\n    /**\n     * A map from network request ID to Network Request objects.\n     * Needed as long as information about requests comes from different events.\n     */\n    #requests = new Map();\n    /** A map from intercept ID to track active network intercepts. */\n    #intercepts = new Map();\n    #collectors = new Map();\n    #requestCollectors = new Map();\n    #defaultCacheBehavior = 'default';\n    constructor(eventManager, browsingContextStorage, browserClient, logger) {\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#eventManager = eventManager;\n        browserClient.on('Target.detachedFromTarget', ({ sessionId }) => {\n            this.disposeRequestMap(sessionId);\n        });\n        this.#logger = logger;\n    }\n    /**\n     * Gets the network request with the given ID, if any.\n     * Otherwise, creates a new network request with the given ID and cdp target.\n     */\n    #getOrCreateNetworkRequest(id, cdpTarget, redirectCount) {\n        let request = this.getRequestById(id);\n        if (request) {\n            return request;\n        }\n        request = new NetworkRequest_js_1.NetworkRequest(id, this.#eventManager, this, cdpTarget, redirectCount, this.#logger);\n        this.addRequest(request);\n        return request;\n    }\n    onCdpTargetCreated(cdpTarget) {\n        const cdpClient = cdpTarget.cdpClient;\n        // TODO: Wrap into object\n        const listeners = [\n            [\n                'Network.requestWillBeSent',\n                (params) => {\n                    const request = this.getRequestById(params.requestId);\n                    if (request && request.isRedirecting()) {\n                        request.handleRedirect(params);\n                        this.disposeRequest(params.requestId);\n                        this.#getOrCreateNetworkRequest(params.requestId, cdpTarget, request.redirectCount + 1).onRequestWillBeSentEvent(params);\n                    }\n                    else {\n                        this.#getOrCreateNetworkRequest(params.requestId, cdpTarget).onRequestWillBeSentEvent(params);\n                    }\n                },\n            ],\n            [\n                'Network.requestWillBeSentExtraInfo',\n                (params) => {\n                    this.#getOrCreateNetworkRequest(params.requestId, cdpTarget).onRequestWillBeSentExtraInfoEvent(params);\n                },\n            ],\n            [\n                'Network.responseReceived',\n                (params) => {\n                    this.#getOrCreateNetworkRequest(params.requestId, cdpTarget).onResponseReceivedEvent(params);\n                },\n            ],\n            [\n                'Network.responseReceivedExtraInfo',\n                (params) => {\n                    this.#getOrCreateNetworkRequest(params.requestId, cdpTarget).onResponseReceivedExtraInfoEvent(params);\n                },\n            ],\n            [\n                'Network.requestServedFromCache',\n                (params) => {\n                    this.#getOrCreateNetworkRequest(params.requestId, cdpTarget).onServedFromCache();\n                },\n            ],\n            [\n                'Network.loadingFailed',\n                (params) => {\n                    this.#getOrCreateNetworkRequest(params.requestId, cdpTarget).onLoadingFailedEvent(params);\n                },\n            ],\n            [\n                'Fetch.requestPaused',\n                (event) => {\n                    this.#getOrCreateNetworkRequest(\n                    // CDP quirk if the Network domain is not present this is undefined\n                    event.networkId ?? event.requestId, cdpTarget).onRequestPaused(event);\n                },\n            ],\n            [\n                'Fetch.authRequired',\n                (event) => {\n                    let request = this.getRequestByFetchId(event.requestId);\n                    if (!request) {\n                        request = this.#getOrCreateNetworkRequest(event.requestId, cdpTarget);\n                    }\n                    request.onAuthRequired(event);\n                },\n            ],\n        ];\n        for (const [event, listener] of listeners) {\n            cdpClient.on(event, listener);\n        }\n    }\n    getCollectorsForBrowsingContext(browsingContextId) {\n        if (!this.#browsingContextStorage.hasContext(browsingContextId)) {\n            this.#logger?.(log_js_1.LogType.debugError, 'trying to get collector for unknown browsing context');\n            return [];\n        }\n        const userContext = this.#browsingContextStorage.getContext(browsingContextId).userContext;\n        const collectors = new Set();\n        for (const collector of this.#collectors.values()) {\n            if (collector.contexts?.includes(browsingContextId)) {\n                // Collector is targeted to the browsing context.\n                collectors.add(collector);\n            }\n            if (collector.userContexts?.includes(userContext)) {\n                // Collector is targeted to the user context.\n                collectors.add(collector);\n            }\n            if (collector.userContexts === undefined &&\n                collector.contexts === undefined) {\n                // Collector is global.\n                collectors.add(collector);\n            }\n        }\n        return [...collectors.values()];\n    }\n    async getCollectedData(params) {\n        if (params.collector !== undefined &&\n            !this.#collectors.has(params.collector)) {\n            throw new protocol_js_1.NoSuchNetworkCollectorException(`Unknown collector ${params.collector}`);\n        }\n        const requestCollectors = this.#requestCollectors.get(params.request);\n        if (requestCollectors === undefined) {\n            throw new protocol_js_1.NoSuchNetworkDataException(`No collected data for request ${params.request}`);\n        }\n        if (params.collector !== undefined &&\n            !requestCollectors.has(params.collector)) {\n            throw new protocol_js_1.NoSuchNetworkDataException(`Collector ${params.collector} didn't collect data for request ${params.request}`);\n        }\n        if (params.disown && params.collector === undefined) {\n            throw new protocol_js_1.InvalidArgumentException('Cannot disown collected data without collector ID');\n        }\n        const request = this.getRequestById(params.request);\n        if (request === undefined) {\n            throw new protocol_js_1.NoSuchNetworkDataException(`No collected data for request ${params.request}`);\n        }\n        // TODO: handle CDP error in case of the renderer is gone.\n        const responseBody = await request.cdpClient.sendCommand('Network.getResponseBody', { requestId: request.id });\n        if (params.disown && params.collector !== undefined) {\n            this.#requestCollectors.delete(params.request);\n            this.disposeRequest(request.id);\n        }\n        return {\n            bytes: {\n                type: responseBody.base64Encoded ? 'base64' : 'string',\n                value: responseBody.body,\n            },\n        };\n    }\n    #getCollectorIdsForRequest(request) {\n        const collectors = new Set();\n        for (const collectorId of this.#collectors.keys()) {\n            const collector = this.#collectors.get(collectorId);\n            if (!collector.userContexts && !collector.contexts) {\n                // A global collector.\n                collectors.add(collectorId);\n            }\n            if (collector.contexts?.includes(request.cdpTarget.topLevelId)) {\n                collectors.add(collectorId);\n            }\n            if (collector.userContexts?.includes(this.#browsingContextStorage.getContext(request.cdpTarget.topLevelId)\n                .userContext)) {\n                collectors.add(collectorId);\n            }\n        }\n        this.#logger?.(log_js_1.LogType.debug, `Request ${request.id} has ${collectors.size} collectors`);\n        return [...collectors.values()];\n    }\n    markRequestCollectedIfNeeded(request) {\n        const collectorIds = this.#getCollectorIdsForRequest(request);\n        if (collectorIds.length > 0) {\n            this.#requestCollectors.set(request.id, new Set(collectorIds));\n        }\n    }\n    getInterceptionStages(browsingContextId) {\n        const stages = {\n            request: false,\n            response: false,\n            auth: false,\n        };\n        for (const intercept of this.#intercepts.values()) {\n            if (intercept.contexts &&\n                !intercept.contexts.includes(browsingContextId)) {\n                continue;\n            }\n            stages.request ||= intercept.phases.includes(\"beforeRequestSent\" /* Network.InterceptPhase.BeforeRequestSent */);\n            stages.response ||= intercept.phases.includes(\"responseStarted\" /* Network.InterceptPhase.ResponseStarted */);\n            stages.auth ||= intercept.phases.includes(\"authRequired\" /* Network.InterceptPhase.AuthRequired */);\n        }\n        return stages;\n    }\n    getInterceptsForPhase(request, phase) {\n        if (request.url === NetworkRequest_js_1.NetworkRequest.unknownParameter) {\n            return new Set();\n        }\n        const intercepts = new Set();\n        for (const [interceptId, intercept] of this.#intercepts.entries()) {\n            if (!intercept.phases.includes(phase) ||\n                (intercept.contexts &&\n                    !intercept.contexts.includes(request.cdpTarget.topLevelId))) {\n                continue;\n            }\n            if (intercept.urlPatterns.length === 0) {\n                intercepts.add(interceptId);\n                continue;\n            }\n            for (const pattern of intercept.urlPatterns) {\n                if ((0, NetworkUtils_js_1.matchUrlPattern)(pattern, request.url)) {\n                    intercepts.add(interceptId);\n                    break;\n                }\n            }\n        }\n        return intercepts;\n    }\n    disposeRequestMap(sessionId) {\n        for (const request of this.#requests.values()) {\n            if (request.cdpClient.sessionId === sessionId) {\n                this.#requests.delete(request.id);\n                request.dispose();\n            }\n        }\n    }\n    /**\n     * Adds the given entry to the intercept map.\n     * URL patterns are assumed to be parsed.\n     *\n     * @return The intercept ID.\n     */\n    addIntercept(value) {\n        const interceptId = (0, uuid_js_1.uuidv4)();\n        this.#intercepts.set(interceptId, value);\n        return interceptId;\n    }\n    /**\n     * Removes the given intercept from the intercept map.\n     * Throws NoSuchInterceptException if the intercept does not exist.\n     */\n    removeIntercept(intercept) {\n        if (!this.#intercepts.has(intercept)) {\n            throw new protocol_js_1.NoSuchInterceptException(`Intercept '${intercept}' does not exist.`);\n        }\n        this.#intercepts.delete(intercept);\n    }\n    getRequestsByTarget(target) {\n        const requests = [];\n        for (const request of this.#requests.values()) {\n            if (request.cdpTarget === target) {\n                requests.push(request);\n            }\n        }\n        return requests;\n    }\n    getRequestById(id) {\n        return this.#requests.get(id);\n    }\n    getRequestByFetchId(fetchId) {\n        for (const request of this.#requests.values()) {\n            if (request.fetchId === fetchId) {\n                return request;\n            }\n        }\n        return;\n    }\n    addRequest(request) {\n        this.#requests.set(request.id, request);\n    }\n    disposeRequest(id) {\n        if (this.#requestCollectors.get(id)?.size ?? 0 > 0) {\n            // Keep request, as it's data can be accessed later.\n            return;\n        }\n        // TODO: dispose Network data from Chromium once there is a CDP command for that.\n        this.#requests.delete(id);\n    }\n    /**\n     * Gets the virtual navigation ID for the given navigable ID.\n     */\n    getNavigationId(contextId) {\n        if (contextId === undefined) {\n            return null;\n        }\n        return (this.#browsingContextStorage.findContext(contextId)?.navigationId ?? null);\n    }\n    set defaultCacheBehavior(behavior) {\n        this.#defaultCacheBehavior = behavior;\n    }\n    get defaultCacheBehavior() {\n        return this.#defaultCacheBehavior;\n    }\n    addDataCollector(params) {\n        const collectorId = (0, uuid_js_1.uuidv4)();\n        this.#collectors.set(collectorId, params);\n        return collectorId;\n    }\n    removeDataCollector(params) {\n        const collectorId = params.collector;\n        if (!this.#collectors.has(collectorId)) {\n            throw new protocol_js_1.NoSuchNetworkCollectorException(`Collector ${params.collector} does not exist`);\n        }\n        this.#collectors.delete(params.collector);\n        // Clean up collected responses.\n        for (const [requestId, collectorIds] of this.#requestCollectors) {\n            if (collectorIds.has(collectorId)) {\n                collectorIds.delete(collectorId);\n                if (collectorIds.size === 0) {\n                    this.#requestCollectors.delete(requestId);\n                    this.disposeRequest(requestId);\n                }\n            }\n        }\n    }\n    disownData(params) {\n        const collectorId = params.collector;\n        const requestId = params.request;\n        if (!this.#collectors.has(collectorId)) {\n            throw new protocol_js_1.NoSuchNetworkCollectorException(`Collector ${collectorId} does not exist`);\n        }\n        if (!this.#requestCollectors.has(requestId)) {\n            throw new protocol_js_1.NoSuchNetworkDataException(`No collected data for request ${requestId}`);\n        }\n        const collectorIds = this.#requestCollectors.get(requestId);\n        if (!collectorIds.has(collectorId)) {\n            throw new protocol_js_1.NoSuchNetworkDataException(`No collected data for request ${requestId} and collector ${collectorId}`);\n        }\n        collectorIds.delete(collectorId);\n        if (collectorIds.size === 0) {\n            this.#requestCollectors.delete(requestId);\n            this.disposeRequest(requestId);\n        }\n    }\n}\nexports.NetworkStorage = NetworkStorage;\n//# sourceMappingURL=NetworkStorage.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PreloadScriptStorage = void 0;\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst ErrorResponse_js_1 = require(\"../../../protocol/ErrorResponse.js\");\n/**\n * Container class for preload scripts.\n */\nclass PreloadScriptStorage {\n    /** Tracks all BiDi preload scripts.  */\n    #scripts = new Set();\n    /**\n     * Finds all entries that match the given filter (OR logic).\n     */\n    find(filter) {\n        if (!filter) {\n            return [...this.#scripts];\n        }\n        return [...this.#scripts].filter((script) => {\n            // Global scripts have no contexts or userContext\n            if (script.contexts === undefined && script.userContexts === undefined) {\n                return true;\n            }\n            if (filter.targetId !== undefined &&\n                script.targetIds.has(filter.targetId)) {\n                return true;\n            }\n            return false;\n        });\n    }\n    add(preloadScript) {\n        this.#scripts.add(preloadScript);\n    }\n    /** Deletes all BiDi preload script entries that match the given filter. */\n    remove(id) {\n        const script = [...this.#scripts].find((script) => script.id === id);\n        if (script === undefined) {\n            throw new ErrorResponse_js_1.NoSuchScriptException(`No preload script with id '${id}'`);\n        }\n        this.#scripts.delete(script);\n    }\n    /** Gets the preload script with the given ID, if any, otherwise throws. */\n    getPreloadScript(id) {\n        const script = [...this.#scripts].find((script) => script.id === id);\n        if (script === undefined) {\n            throw new ErrorResponse_js_1.NoSuchScriptException(`No preload script with id '${id}'`);\n        }\n        return script;\n    }\n    onCdpTargetCreated(targetId, userContext) {\n        const scriptInUserContext = [...this.#scripts].filter((script) => {\n            // Global scripts\n            if (!script.userContexts && !script.contexts) {\n                return true;\n            }\n            return script.userContexts?.includes(userContext);\n        });\n        for (const script of scriptInUserContext) {\n            script.targetIds.add(targetId);\n        }\n    }\n}\nexports.PreloadScriptStorage = PreloadScriptStorage;\n//# sourceMappingURL=PreloadScriptStorage.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RealmStorage = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst WindowRealm_js_1 = require(\"./WindowRealm.js\");\n/** Container class for browsing realms. */\nclass RealmStorage {\n    /** Tracks handles and their realms sent to the client. */\n    #knownHandlesToRealmMap = new Map();\n    /** Map from realm ID to Realm. */\n    #realmMap = new Map();\n    /** List of the internal sandboxed realms which should not be reported to the user. */\n    hiddenSandboxes = new Set();\n    get knownHandlesToRealmMap() {\n        return this.#knownHandlesToRealmMap;\n    }\n    addRealm(realm) {\n        this.#realmMap.set(realm.realmId, realm);\n    }\n    /** Finds all realms that match the given filter. */\n    findRealms(filter) {\n        return Array.from(this.#realmMap.values()).filter((realm) => {\n            if (filter.realmId !== undefined && filter.realmId !== realm.realmId) {\n                return false;\n            }\n            if (filter.browsingContextId !== undefined &&\n                !realm.associatedBrowsingContexts\n                    .map((browsingContext) => browsingContext.id)\n                    .includes(filter.browsingContextId)) {\n                return false;\n            }\n            if (filter.sandbox !== undefined &&\n                (!(realm instanceof WindowRealm_js_1.WindowRealm) || filter.sandbox !== realm.sandbox)) {\n                return false;\n            }\n            if (filter.executionContextId !== undefined &&\n                filter.executionContextId !== realm.executionContextId) {\n                return false;\n            }\n            if (filter.origin !== undefined && filter.origin !== realm.origin) {\n                return false;\n            }\n            if (filter.type !== undefined && filter.type !== realm.realmType) {\n                return false;\n            }\n            if (filter.cdpSessionId !== undefined &&\n                filter.cdpSessionId !== realm.cdpClient.sessionId) {\n                return false;\n            }\n            if (filter.isHidden !== undefined &&\n                filter.isHidden !== realm.isHidden()) {\n                return false;\n            }\n            return true;\n        });\n    }\n    findRealm(filter) {\n        const maybeRealms = this.findRealms(filter);\n        if (maybeRealms.length !== 1) {\n            return undefined;\n        }\n        return maybeRealms[0];\n    }\n    /** Gets the only realm that matches the given filter, if any, otherwise throws. */\n    getRealm(filter) {\n        const maybeRealm = this.findRealm(filter);\n        if (maybeRealm === undefined) {\n            throw new protocol_js_1.NoSuchFrameException(`Realm ${JSON.stringify(filter)} not found`);\n        }\n        return maybeRealm;\n    }\n    /** Deletes all realms that match the given filter. */\n    deleteRealms(filter) {\n        this.findRealms(filter).map((realm) => {\n            realm.dispose();\n            this.#realmMap.delete(realm.realmId);\n            Array.from(this.knownHandlesToRealmMap.entries())\n                .filter(([, r]) => r === realm.realmId)\n                .map(([handle]) => this.knownHandlesToRealmMap.delete(handle));\n        });\n    }\n}\nexports.RealmStorage = RealmStorage;\n//# sourceMappingURL=RealmStorage.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Buffer = void 0;\n/** Implements a FIFO buffer with a fixed size. */\nclass Buffer {\n    #capacity;\n    #entries = [];\n    #onItemRemoved;\n    /**\n     * @param capacity The buffer capacity.\n     * @param onItemRemoved Delegate called for each removed element.\n     */\n    constructor(capacity, onItemRemoved) {\n        this.#capacity = capacity;\n        this.#onItemRemoved = onItemRemoved;\n    }\n    get() {\n        return this.#entries;\n    }\n    add(value) {\n        this.#entries.push(value);\n        while (this.#entries.length > this.#capacity) {\n            const item = this.#entries.shift();\n            if (item !== undefined) {\n                this.#onItemRemoved?.(item);\n            }\n        }\n    }\n}\nexports.Buffer = Buffer;\n//# sourceMappingURL=Buffer.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IdWrapper = void 0;\n/**\n * Creates an object with a positive unique incrementing id.\n */\nclass IdWrapper {\n    static #counter = 0;\n    #id;\n    constructor() {\n        this.#id = ++IdWrapper.#counter;\n    }\n    get id() {\n        return this.#id;\n    }\n}\nexports.IdWrapper = IdWrapper;\n//# sourceMappingURL=IdWrapper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isCdpEvent = isCdpEvent;\nexports.assertSupportedEvent = assertSupportedEvent;\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\n/**\n * Returns true if the given event is a CDP event.\n * @see https://chromedevtools.github.io/devtools-protocol/\n */\nfunction isCdpEvent(name) {\n    return (name.split('.').at(0)?.startsWith(protocol_js_1.ChromiumBidi.BiDiModule.Cdp) ?? false);\n}\n/**\n * Asserts that the given event is known to BiDi or BiDi+, or throws otherwise.\n */\nfunction assertSupportedEvent(name) {\n    if (!protocol_js_1.ChromiumBidi.EVENT_NAMES.has(name) && !isCdpEvent(name)) {\n        throw new protocol_js_1.InvalidArgumentException(`Unknown event: ${name}`);\n    }\n}\n//# sourceMappingURL=events.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SubscriptionManager = void 0;\nexports.cartesianProduct = cartesianProduct;\nexports.unrollEvents = unrollEvents;\nexports.difference = difference;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst uuid_js_1 = require(\"../../../utils/uuid.js\");\n/**\n * Returns the cartesian product of the given arrays.\n *\n * Example:\n *   cartesian([1, 2], ['a', 'b']); => [[1, 'a'], [1, 'b'], [2, 'a'], [2, 'b']]\n */\nfunction cartesianProduct(...a) {\n    return a.reduce((a, b) => a.flatMap((d) => b.map((e) => [d, e].flat())));\n}\n/** Expands \"AllEvents\" events into atomic events. */\nfunction unrollEvents(events) {\n    const allEvents = new Set();\n    function addEvents(events) {\n        for (const event of events) {\n            allEvents.add(event);\n        }\n    }\n    for (const event of events) {\n        switch (event) {\n            case protocol_js_1.ChromiumBidi.BiDiModule.Bluetooth:\n                addEvents(Object.values(protocol_js_1.ChromiumBidi.Bluetooth.EventNames));\n                break;\n            case protocol_js_1.ChromiumBidi.BiDiModule.BrowsingContext:\n                addEvents(Object.values(protocol_js_1.ChromiumBidi.BrowsingContext.EventNames));\n                break;\n            case protocol_js_1.ChromiumBidi.BiDiModule.Input:\n                addEvents(Object.values(protocol_js_1.ChromiumBidi.Input.EventNames));\n                break;\n            case protocol_js_1.ChromiumBidi.BiDiModule.Log:\n                addEvents(Object.values(protocol_js_1.ChromiumBidi.Log.EventNames));\n                break;\n            case protocol_js_1.ChromiumBidi.BiDiModule.Network:\n                addEvents(Object.values(protocol_js_1.ChromiumBidi.Network.EventNames));\n                break;\n            case protocol_js_1.ChromiumBidi.BiDiModule.Script:\n                addEvents(Object.values(protocol_js_1.ChromiumBidi.Script.EventNames));\n                break;\n            default:\n                allEvents.add(event);\n        }\n    }\n    return allEvents.values();\n}\nclass SubscriptionManager {\n    #subscriptions = [];\n    #knownSubscriptionIds = new Set();\n    #browsingContextStorage;\n    constructor(browsingContextStorage) {\n        this.#browsingContextStorage = browsingContextStorage;\n    }\n    getGoogChannelsSubscribedToEvent(eventName, contextId) {\n        const googChannels = new Set();\n        for (const subscription of this.#subscriptions) {\n            if (this.#isSubscribedTo(subscription, eventName, contextId)) {\n                googChannels.add(subscription.googChannel);\n            }\n        }\n        return Array.from(googChannels);\n    }\n    getGoogChannelsSubscribedToEventGlobally(eventName) {\n        const googChannels = new Set();\n        for (const subscription of this.#subscriptions) {\n            if (this.#isSubscribedTo(subscription, eventName)) {\n                googChannels.add(subscription.googChannel);\n            }\n        }\n        return Array.from(googChannels);\n    }\n    #isSubscribedTo(subscription, moduleOrEvent, browsingContextId) {\n        let includesEvent = false;\n        for (const eventName of subscription.eventNames) {\n            // This also covers the `goog:cdp` case where\n            // we don't unroll the event names\n            if (\n            // Event explicitly subscribed\n            eventName === moduleOrEvent ||\n                // Event subscribed via module\n                eventName === moduleOrEvent.split('.').at(0) ||\n                // Event explicitly subscribed compared to module\n                eventName.split('.').at(0) === moduleOrEvent) {\n                includesEvent = true;\n                break;\n            }\n        }\n        if (!includesEvent) {\n            return false;\n        }\n        // user context subscription.\n        if (subscription.userContextIds.size !== 0) {\n            if (!browsingContextId) {\n                return false;\n            }\n            const context = this.#browsingContextStorage.findContext(browsingContextId);\n            if (!context) {\n                return false;\n            }\n            return subscription.userContextIds.has(context.userContext);\n        }\n        // context subscription.\n        if (subscription.topLevelTraversableIds.size !== 0) {\n            if (!browsingContextId) {\n                return false;\n            }\n            const topLevelContext = this.#browsingContextStorage.findTopLevelContextId(browsingContextId);\n            return (topLevelContext !== null &&\n                subscription.topLevelTraversableIds.has(topLevelContext));\n        }\n        // global subscription.\n        return true;\n    }\n    isSubscribedTo(moduleOrEvent, contextId) {\n        for (const subscription of this.#subscriptions) {\n            if (this.#isSubscribedTo(subscription, moduleOrEvent, contextId)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Subscribes to event in the given context and goog:channel.\n     * @return {SubscriptionItem[]} List of\n     * subscriptions. If the event is a whole module, it will return all the specific\n     * events. If the contextId is null, it will return all the top-level contexts which were\n     * not subscribed before the command.\n     */\n    subscribe(eventNames, contextIds, userContextIds, googChannel) {\n        // All the subscriptions are handled on the top-level contexts.\n        const subscription = {\n            id: (0, uuid_js_1.uuidv4)(),\n            eventNames: new Set(unrollEvents(eventNames)),\n            topLevelTraversableIds: new Set(contextIds.map((contextId) => {\n                const topLevelContext = this.#browsingContextStorage.findTopLevelContextId(contextId);\n                if (!topLevelContext) {\n                    throw new protocol_js_1.NoSuchFrameException(`Top-level navigable not found for context id ${contextId}`);\n                }\n                return topLevelContext;\n            })),\n            userContextIds: new Set(userContextIds),\n            googChannel,\n        };\n        this.#subscriptions.push(subscription);\n        this.#knownSubscriptionIds.add(subscription.id);\n        return subscription;\n    }\n    /**\n     * Unsubscribes atomically from all events in the given contexts and channel.\n     *\n     * This is a legacy spec branch to unsubscribe by attributes.\n     */\n    unsubscribe(inputEventNames, inputContextIds, googChannel) {\n        const eventNames = new Set(unrollEvents(inputEventNames));\n        // Validation that contexts exist.\n        this.#browsingContextStorage.verifyContextsList(inputContextIds);\n        const topLevelTraversables = new Set(inputContextIds.map((contextId) => {\n            const topLevelContext = this.#browsingContextStorage.findTopLevelContextId(contextId);\n            if (!topLevelContext) {\n                throw new protocol_js_1.NoSuchFrameException(`Top-level navigable not found for context id ${contextId}`);\n            }\n            return topLevelContext;\n        }));\n        const isGlobalUnsubscribe = topLevelTraversables.size === 0;\n        const newSubscriptions = [];\n        const eventsMatched = new Set();\n        const contextsMatched = new Set();\n        for (const subscription of this.#subscriptions) {\n            if (subscription.googChannel !== googChannel) {\n                newSubscriptions.push(subscription);\n                continue;\n            }\n            // Skip user context subscriptions.\n            if (subscription.userContextIds.size !== 0) {\n                newSubscriptions.push(subscription);\n                continue;\n            }\n            // Skip subscriptions when none of the event names match.\n            if (intersection(subscription.eventNames, eventNames).size === 0) {\n                newSubscriptions.push(subscription);\n                continue;\n            }\n            if (isGlobalUnsubscribe) {\n                // Skip non-global subscriptions.\n                if (subscription.topLevelTraversableIds.size !== 0) {\n                    newSubscriptions.push(subscription);\n                    continue;\n                }\n                const subscriptionEventNames = new Set(subscription.eventNames);\n                for (const eventName of eventNames) {\n                    if (subscriptionEventNames.has(eventName)) {\n                        eventsMatched.add(eventName);\n                        subscriptionEventNames.delete(eventName);\n                    }\n                }\n                // If some events remain in the subscription, we keep it.\n                if (subscriptionEventNames.size !== 0) {\n                    newSubscriptions.push({\n                        ...subscription,\n                        eventNames: subscriptionEventNames,\n                    });\n                }\n            }\n            else {\n                // Skip global subscriptions.\n                if (subscription.topLevelTraversableIds.size === 0) {\n                    newSubscriptions.push(subscription);\n                    continue;\n                }\n                // Splitting context subscriptions.\n                const eventMap = new Map();\n                for (const eventName of subscription.eventNames) {\n                    eventMap.set(eventName, new Set(subscription.topLevelTraversableIds));\n                }\n                for (const eventName of eventNames) {\n                    const eventContextSet = eventMap.get(eventName);\n                    if (!eventContextSet) {\n                        continue;\n                    }\n                    for (const toRemoveId of topLevelTraversables) {\n                        if (eventContextSet.has(toRemoveId)) {\n                            contextsMatched.add(toRemoveId);\n                            eventsMatched.add(eventName);\n                            eventContextSet.delete(toRemoveId);\n                        }\n                    }\n                    if (eventContextSet.size === 0) {\n                        eventMap.delete(eventName);\n                    }\n                }\n                for (const [eventName, remainingContextIds] of eventMap) {\n                    const partialSubscription = {\n                        id: subscription.id,\n                        googChannel: subscription.googChannel,\n                        eventNames: new Set([eventName]),\n                        topLevelTraversableIds: remainingContextIds,\n                        userContextIds: new Set(),\n                    };\n                    newSubscriptions.push(partialSubscription);\n                }\n            }\n        }\n        // If some events did not match, it is an invalid request.\n        if (!equal(eventsMatched, eventNames)) {\n            throw new protocol_js_1.InvalidArgumentException('No subscription found');\n        }\n        // If some contexts did not match, it is an invalid request.\n        if (!isGlobalUnsubscribe && !equal(contextsMatched, topLevelTraversables)) {\n            throw new protocol_js_1.InvalidArgumentException('No subscription found');\n        }\n        // Committing the new subscriptions.\n        this.#subscriptions = newSubscriptions;\n    }\n    /**\n     * Unsubscribes by subscriptionId.\n     */\n    unsubscribeById(subscriptionIds) {\n        const subscriptionIdsSet = new Set(subscriptionIds);\n        const unknownIds = difference(subscriptionIdsSet, this.#knownSubscriptionIds);\n        if (unknownIds.size !== 0) {\n            throw new protocol_js_1.InvalidArgumentException('No subscription found');\n        }\n        this.#subscriptions = this.#subscriptions.filter((subscription) => {\n            return !subscriptionIdsSet.has(subscription.id);\n        });\n        this.#knownSubscriptionIds = difference(this.#knownSubscriptionIds, subscriptionIdsSet);\n    }\n}\nexports.SubscriptionManager = SubscriptionManager;\n/**\n * Replace with Set.prototype.intersection once Node 20 is dropped.\n */\nfunction intersection(setA, setB) {\n    const result = new Set();\n    for (const a of setA) {\n        if (setB.has(a)) {\n            result.add(a);\n        }\n    }\n    return result;\n}\n/**\n * Replace with Set.prototype.difference once Node 20 is dropped.\n */\nfunction difference(setA, setB) {\n    const result = new Set();\n    for (const a of setA) {\n        if (!setB.has(a)) {\n            result.add(a);\n        }\n    }\n    return result;\n}\nfunction equal(setA, setB) {\n    if (setA.size !== setB.size) {\n        return false;\n    }\n    for (const a of setA) {\n        if (!setB.has(a)) {\n            return false;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=SubscriptionManager.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventManager = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst Buffer_js_1 = require(\"../../../utils/Buffer.js\");\nconst DefaultMap_js_1 = require(\"../../../utils/DefaultMap.js\");\nconst EventEmitter_js_1 = require(\"../../../utils/EventEmitter.js\");\nconst IdWrapper_js_1 = require(\"../../../utils/IdWrapper.js\");\nconst OutgoingMessage_js_1 = require(\"../../OutgoingMessage.js\");\nconst events_js_1 = require(\"./events.js\");\nconst SubscriptionManager_js_1 = require(\"./SubscriptionManager.js\");\nclass EventWrapper {\n    #idWrapper = new IdWrapper_js_1.IdWrapper();\n    #contextId;\n    #event;\n    constructor(event, contextId) {\n        this.#event = event;\n        this.#contextId = contextId;\n    }\n    get id() {\n        return this.#idWrapper.id;\n    }\n    get contextId() {\n        return this.#contextId;\n    }\n    get event() {\n        return this.#event;\n    }\n}\n/**\n * Maps event name to a desired buffer length.\n */\nconst eventBufferLength = new Map([[protocol_js_1.ChromiumBidi.Log.EventNames.LogEntryAdded, 100]]);\nclass EventManager extends EventEmitter_js_1.EventEmitter {\n    /**\n     * Maps event name to a set of contexts where this event already happened.\n     * Needed for getting buffered events from all the contexts in case of\n     * subscripting to all contexts.\n     */\n    #eventToContextsMap = new DefaultMap_js_1.DefaultMap(() => new Set());\n    /**\n     * Maps `eventName` + `browsingContext` to buffer. Used to get buffered events\n     * during subscription. Channel-agnostic.\n     */\n    #eventBuffers = new Map();\n    /**\n     * Maps `eventName` + `browsingContext` to  Map of goog:channel to last id.\n     * Used to avoid sending duplicated events when user\n     * subscribes -> unsubscribes -> subscribes.\n     */\n    #lastMessageSent = new Map();\n    #subscriptionManager;\n    #browsingContextStorage;\n    /**\n     * Map of event name to hooks to be called when client is subscribed to the event.\n     */\n    #subscribeHooks;\n    #userContextStorage;\n    constructor(browsingContextStorage, userContextStorage) {\n        super();\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#userContextStorage = userContextStorage;\n        this.#subscriptionManager = new SubscriptionManager_js_1.SubscriptionManager(browsingContextStorage);\n        this.#subscribeHooks = new DefaultMap_js_1.DefaultMap(() => []);\n    }\n    get subscriptionManager() {\n        return this.#subscriptionManager;\n    }\n    /**\n     * Returns consistent key to be used to access value maps.\n     */\n    static #getMapKey(eventName, browsingContext) {\n        return JSON.stringify({ eventName, browsingContext });\n    }\n    addSubscribeHook(event, hook) {\n        this.#subscribeHooks.get(event).push(hook);\n    }\n    registerEvent(event, contextId) {\n        this.registerPromiseEvent(Promise.resolve({\n            kind: 'success',\n            value: event,\n        }), contextId, event.method);\n    }\n    registerGlobalEvent(event) {\n        this.registerGlobalPromiseEvent(Promise.resolve({\n            kind: 'success',\n            value: event,\n        }), event.method);\n    }\n    registerPromiseEvent(event, contextId, eventName) {\n        const eventWrapper = new EventWrapper(event, contextId);\n        const sortedGoogChannels = this.#subscriptionManager.getGoogChannelsSubscribedToEvent(eventName, contextId);\n        this.#bufferEvent(eventWrapper, eventName);\n        // Send events to channels in the subscription priority.\n        for (const googChannel of sortedGoogChannels) {\n            this.emit(\"event\" /* EventManagerEvents.Event */, {\n                message: OutgoingMessage_js_1.OutgoingMessage.createFromPromise(event, googChannel),\n                event: eventName,\n            });\n            this.#markEventSent(eventWrapper, googChannel, eventName);\n        }\n    }\n    registerGlobalPromiseEvent(event, eventName) {\n        const eventWrapper = new EventWrapper(event, null);\n        const sortedGoogChannels = this.#subscriptionManager.getGoogChannelsSubscribedToEventGlobally(eventName);\n        this.#bufferEvent(eventWrapper, eventName);\n        // Send events to goog:channels in the subscription priority.\n        for (const googChannel of sortedGoogChannels) {\n            this.emit(\"event\" /* EventManagerEvents.Event */, {\n                message: OutgoingMessage_js_1.OutgoingMessage.createFromPromise(event, googChannel),\n                event: eventName,\n            });\n            this.#markEventSent(eventWrapper, googChannel, eventName);\n        }\n    }\n    async subscribe(eventNames, contextIds, userContextIds, googChannel) {\n        for (const name of eventNames) {\n            (0, events_js_1.assertSupportedEvent)(name);\n        }\n        if (userContextIds.length && contextIds.length) {\n            throw new protocol_js_1.InvalidArgumentException('Both userContexts and contexts cannot be specified.');\n        }\n        // First check if all the contexts are known.\n        this.#browsingContextStorage.verifyContextsList(contextIds);\n        // Validate user contexts.\n        await this.#userContextStorage.verifyUserContextIdList(userContextIds);\n        const unrolledEventNames = new Set((0, SubscriptionManager_js_1.unrollEvents)(eventNames));\n        const subscribeStepEvents = new Map();\n        const subscriptionNavigableIds = new Set(contextIds.length\n            ? contextIds.map((contextId) => {\n                const id = this.#browsingContextStorage.findTopLevelContextId(contextId);\n                if (!id) {\n                    throw new protocol_js_1.InvalidArgumentException('Invalid context id');\n                }\n                return id;\n            })\n            : this.#browsingContextStorage.getTopLevelContexts().map((c) => c.id));\n        for (const eventName of unrolledEventNames) {\n            const subscribedNavigableIds = new Set(this.#browsingContextStorage\n                .getTopLevelContexts()\n                .map((c) => c.id)\n                .filter((id) => {\n                return this.#subscriptionManager.isSubscribedTo(eventName, id);\n            }));\n            subscribeStepEvents.set(eventName, (0, SubscriptionManager_js_1.difference)(subscriptionNavigableIds, subscribedNavigableIds));\n        }\n        const subscription = this.#subscriptionManager.subscribe(eventNames, contextIds, userContextIds, googChannel);\n        for (const eventName of subscription.eventNames) {\n            for (const contextId of subscriptionNavigableIds) {\n                for (const eventWrapper of this.#getBufferedEvents(eventName, contextId, googChannel)) {\n                    // The order of the events is important.\n                    this.emit(\"event\" /* EventManagerEvents.Event */, {\n                        message: OutgoingMessage_js_1.OutgoingMessage.createFromPromise(eventWrapper.event, googChannel),\n                        event: eventName,\n                    });\n                    this.#markEventSent(eventWrapper, googChannel, eventName);\n                }\n            }\n        }\n        for (const [eventName, contextIds] of subscribeStepEvents) {\n            for (const contextId of contextIds) {\n                this.#subscribeHooks.get(eventName).forEach((hook) => hook(contextId));\n            }\n        }\n        await this.toggleModulesIfNeeded();\n        return subscription.id;\n    }\n    async unsubscribe(eventNames, contextIds, googChannel) {\n        for (const name of eventNames) {\n            (0, events_js_1.assertSupportedEvent)(name);\n        }\n        this.#subscriptionManager.unsubscribe(eventNames, contextIds, googChannel);\n        await this.toggleModulesIfNeeded();\n    }\n    async unsubscribeByIds(subscriptionIds) {\n        this.#subscriptionManager.unsubscribeById(subscriptionIds);\n        await this.toggleModulesIfNeeded();\n    }\n    async toggleModulesIfNeeded() {\n        // TODO(1): Only update changed subscribers\n        // TODO(2): Enable for Worker Targets\n        await Promise.all(this.#browsingContextStorage.getAllContexts().map(async (context) => {\n            return await context.toggleModulesIfNeeded();\n        }));\n    }\n    clearBufferedEvents(contextId) {\n        for (const eventName of eventBufferLength.keys()) {\n            const bufferMapKey = _a.#getMapKey(eventName, contextId);\n            this.#eventBuffers.delete(bufferMapKey);\n        }\n    }\n    /**\n     * If the event is buffer-able, put it in the buffer.\n     */\n    #bufferEvent(eventWrapper, eventName) {\n        if (!eventBufferLength.has(eventName)) {\n            // Do nothing if the event is no buffer-able.\n            return;\n        }\n        const bufferMapKey = _a.#getMapKey(eventName, eventWrapper.contextId);\n        if (!this.#eventBuffers.has(bufferMapKey)) {\n            this.#eventBuffers.set(bufferMapKey, new Buffer_js_1.Buffer(eventBufferLength.get(eventName)));\n        }\n        this.#eventBuffers.get(bufferMapKey).add(eventWrapper);\n        // Add the context to the list of contexts having `eventName` events.\n        this.#eventToContextsMap.get(eventName).add(eventWrapper.contextId);\n    }\n    /**\n     * If the event is buffer-able, mark it as sent to the given contextId and goog:channel.\n     */\n    #markEventSent(eventWrapper, googChannel, eventName) {\n        if (!eventBufferLength.has(eventName)) {\n            // Do nothing if the event is no buffer-able.\n            return;\n        }\n        const lastSentMapKey = _a.#getMapKey(eventName, eventWrapper.contextId);\n        const lastId = Math.max(this.#lastMessageSent.get(lastSentMapKey)?.get(googChannel) ?? 0, eventWrapper.id);\n        const googChannelMap = this.#lastMessageSent.get(lastSentMapKey);\n        if (googChannelMap) {\n            googChannelMap.set(googChannel, lastId);\n        }\n        else {\n            this.#lastMessageSent.set(lastSentMapKey, new Map([[googChannel, lastId]]));\n        }\n    }\n    /**\n     * Returns events which are buffered and not yet sent to the given goog:channel events.\n     */\n    #getBufferedEvents(eventName, contextId, googChannel) {\n        const bufferMapKey = _a.#getMapKey(eventName, contextId);\n        const lastSentMessageId = this.#lastMessageSent.get(bufferMapKey)?.get(googChannel) ?? -Infinity;\n        const result = this.#eventBuffers\n            .get(bufferMapKey)\n            ?.get()\n            .filter((wrapper) => wrapper.id > lastSentMessageId) ?? [];\n        if (contextId === null) {\n            // For global subscriptions, events buffered in each context should be sent back.\n            Array.from(this.#eventToContextsMap.get(eventName).keys())\n                .filter((_contextId) => \n            // Events without context are already in the result.\n            _contextId !== null &&\n                // Events from deleted contexts should not be sent.\n                this.#browsingContextStorage.hasContext(_contextId))\n                .map((_contextId) => this.#getBufferedEvents(eventName, _contextId, googChannel))\n                .forEach((events) => result.push(...events));\n        }\n        return result.sort((e1, e2) => e1.id - e2.id);\n    }\n}\nexports.EventManager = EventManager;\n_a = EventManager;\n//# sourceMappingURL=EventManager.js.map","\"use strict\";\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BidiServer = void 0;\nconst EventEmitter_js_1 = require(\"../utils/EventEmitter.js\");\nconst log_js_1 = require(\"../utils/log.js\");\nconst ProcessingQueue_js_1 = require(\"../utils/ProcessingQueue.js\");\nconst CommandProcessor_js_1 = require(\"./CommandProcessor.js\");\nconst MapperOptions_js_1 = require(\"./MapperOptions.js\");\nconst BluetoothProcessor_js_1 = require(\"./modules/bluetooth/BluetoothProcessor.js\");\nconst UserContextStorage_js_1 = require(\"./modules/browser/UserContextStorage.js\");\nconst CdpTargetManager_js_1 = require(\"./modules/cdp/CdpTargetManager.js\");\nconst BrowsingContextStorage_js_1 = require(\"./modules/context/BrowsingContextStorage.js\");\nconst NetworkStorage_js_1 = require(\"./modules/network/NetworkStorage.js\");\nconst PreloadScriptStorage_js_1 = require(\"./modules/script/PreloadScriptStorage.js\");\nconst RealmStorage_js_1 = require(\"./modules/script/RealmStorage.js\");\nconst EventManager_js_1 = require(\"./modules/session/EventManager.js\");\nclass BidiServer extends EventEmitter_js_1.EventEmitter {\n    #messageQueue;\n    #transport;\n    #commandProcessor;\n    #eventManager;\n    #browsingContextStorage = new BrowsingContextStorage_js_1.BrowsingContextStorage();\n    #realmStorage = new RealmStorage_js_1.RealmStorage();\n    #preloadScriptStorage = new PreloadScriptStorage_js_1.PreloadScriptStorage();\n    #bluetoothProcessor;\n    #logger;\n    #handleIncomingMessage = (message) => {\n        void this.#commandProcessor.processCommand(message).catch((error) => {\n            this.#logger?.(log_js_1.LogType.debugError, error);\n        });\n    };\n    #processOutgoingMessage = async (messageEntry) => {\n        const message = messageEntry.message;\n        if (messageEntry.googChannel !== null) {\n            message['goog:channel'] = messageEntry.googChannel;\n        }\n        await this.#transport.sendMessage(message);\n    };\n    constructor(bidiTransport, cdpConnection, browserCdpClient, selfTargetId, defaultUserContextId, parser, logger) {\n        super();\n        this.#logger = logger;\n        this.#messageQueue = new ProcessingQueue_js_1.ProcessingQueue(this.#processOutgoingMessage, this.#logger);\n        this.#transport = bidiTransport;\n        this.#transport.setOnMessage(this.#handleIncomingMessage);\n        const userContextStorage = new UserContextStorage_js_1.UserContextStorage(browserCdpClient);\n        this.#eventManager = new EventManager_js_1.EventManager(this.#browsingContextStorage, userContextStorage);\n        const networkStorage = new NetworkStorage_js_1.NetworkStorage(this.#eventManager, this.#browsingContextStorage, browserCdpClient, logger);\n        const mapperOptionsStorage = new MapperOptions_js_1.MapperOptionsStorage();\n        this.#bluetoothProcessor = new BluetoothProcessor_js_1.BluetoothProcessor(this.#eventManager, this.#browsingContextStorage);\n        this.#commandProcessor = new CommandProcessor_js_1.CommandProcessor(cdpConnection, browserCdpClient, this.#eventManager, this.#browsingContextStorage, this.#realmStorage, this.#preloadScriptStorage, networkStorage, mapperOptionsStorage, this.#bluetoothProcessor, userContextStorage, parser, async (options) => {\n            mapperOptionsStorage.mapperOptions = options;\n            // This is required to ignore certificate errors when service worker is fetched.\n            await browserCdpClient.sendCommand('Security.setIgnoreCertificateErrors', {\n                ignore: options.acceptInsecureCerts ?? false,\n            });\n            new CdpTargetManager_js_1.CdpTargetManager(cdpConnection, browserCdpClient, selfTargetId, this.#eventManager, this.#browsingContextStorage, userContextStorage, this.#realmStorage, networkStorage, this.#bluetoothProcessor, this.#preloadScriptStorage, defaultUserContextId, options?.['goog:prerenderingDisabled'] ?? false, options?.unhandledPromptBehavior, logger);\n            // Needed to get events about new targets.\n            await browserCdpClient.sendCommand('Target.setDiscoverTargets', {\n                discover: true,\n            });\n            // Needed to automatically attach to new targets.\n            await browserCdpClient.sendCommand('Target.setAutoAttach', {\n                autoAttach: true,\n                waitForDebuggerOnStart: true,\n                flatten: true,\n                // Browser session should attach to tab instead of the page, so that\n                // prerendering is not blocked.\n                filter: [\n                    {\n                        type: 'page',\n                        exclude: true,\n                    },\n                    {},\n                ],\n            });\n            await this.#topLevelContextsLoaded();\n        }, this.#logger);\n        this.#eventManager.on(\"event\" /* EventManagerEvents.Event */, ({ message, event }) => {\n            this.emitOutgoingMessage(message, event);\n        });\n        this.#commandProcessor.on(\"response\" /* CommandProcessorEvents.Response */, ({ message, event }) => {\n            this.emitOutgoingMessage(message, event);\n        });\n    }\n    /**\n     * Creates and starts BiDi Mapper instance.\n     */\n    static async createAndStart(bidiTransport, cdpConnection, browserCdpClient, selfTargetId, parser, logger) {\n        // The default context is not exposed in Target.getBrowserContexts but can\n        // be observed via Target.getTargets. To determine the default browser\n        // context, we check which one is mentioned in Target.getTargets and not in\n        // Target.getBrowserContexts.\n        const [{ browserContextIds }, { targetInfos }] = await Promise.all([\n            browserCdpClient.sendCommand('Target.getBrowserContexts'),\n            browserCdpClient.sendCommand('Target.getTargets'),\n            // Required for `Browser.downloadWillBegin` events.\n            browserCdpClient.sendCommand('Browser.setDownloadBehavior', {\n                behavior: 'default',\n                eventsEnabled: true,\n            }),\n        ]);\n        let defaultUserContextId = 'default';\n        for (const info of targetInfos) {\n            if (info.browserContextId &&\n                !browserContextIds.includes(info.browserContextId)) {\n                defaultUserContextId = info.browserContextId;\n                break;\n            }\n        }\n        const server = new BidiServer(bidiTransport, cdpConnection, browserCdpClient, selfTargetId, defaultUserContextId, parser, logger);\n        return server;\n    }\n    /**\n     * Sends BiDi message.\n     */\n    emitOutgoingMessage(messageEntry, event) {\n        this.#messageQueue.add(messageEntry, event);\n    }\n    close() {\n        this.#transport.close();\n    }\n    async #topLevelContextsLoaded() {\n        await Promise.all(this.#browsingContextStorage\n            .getTopLevelContexts()\n            .map((c) => c.lifecycleLoaded()));\n    }\n}\nexports.BidiServer = BidiServer;\n//# sourceMappingURL=BidiServer.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OutgoingMessage = exports.EventEmitter = exports.BidiServer = void 0;\n/**\n * @fileoverview The entry point to the BiDi Mapper namespace.\n * Other modules should only access exports defined in this file.\n * XXX: Add ESlint rule for this (https://github.com/import-js/eslint-plugin-import/blob/main/docs/rules/no-restricted-paths.md)\n */\nvar BidiServer_js_1 = require(\"./BidiServer.js\");\nObject.defineProperty(exports, \"BidiServer\", { enumerable: true, get: function () { return BidiServer_js_1.BidiServer; } });\nvar EventEmitter_js_1 = require(\"../utils/EventEmitter.js\");\nObject.defineProperty(exports, \"EventEmitter\", { enumerable: true, get: function () { return EventEmitter_js_1.EventEmitter; } });\nvar OutgoingMessage_js_1 = require(\"./OutgoingMessage.js\");\nObject.defineProperty(exports, \"OutgoingMessage\", { enumerable: true, get: function () { return OutgoingMessage_js_1.OutgoingMessage; } });\n//# sourceMappingURL=BidiMapper.js.map","import { CDPSession } from '../api/CDPSession.js';\nimport { TargetCloseError, UnsupportedOperation } from '../common/Errors.js';\nimport { Deferred } from '../util/Deferred.js';\n/**\n * @internal\n */\nexport class BidiCdpSession extends CDPSession {\n    static sessions = new Map();\n    #detached = false;\n    #connection;\n    #sessionId = Deferred.create();\n    frame;\n    constructor(frame, sessionId) {\n        super();\n        this.frame = frame;\n        if (!this.frame.page().browser().cdpSupported) {\n            return;\n        }\n        const connection = this.frame.page().browser().connection;\n        this.#connection = connection;\n        if (sessionId) {\n            this.#sessionId.resolve(sessionId);\n            BidiCdpSession.sessions.set(sessionId, this);\n        }\n        else {\n            (async () => {\n                try {\n                    const { result } = await connection.send('goog:cdp.getSession', {\n                        context: frame._id,\n                    });\n                    this.#sessionId.resolve(result.session);\n                    BidiCdpSession.sessions.set(result.session, this);\n                }\n                catch (error) {\n                    this.#sessionId.reject(error);\n                }\n            })();\n        }\n        // SAFETY: We never throw #sessionId.\n        BidiCdpSession.sessions.set(this.#sessionId.value(), this);\n    }\n    connection() {\n        return undefined;\n    }\n    get detached() {\n        return this.#detached;\n    }\n    async send(method, params, options) {\n        if (this.#connection === undefined) {\n            throw new UnsupportedOperation('CDP support is required for this feature. The current browser does not support CDP.');\n        }\n        if (this.#detached) {\n            throw new TargetCloseError(`Protocol error (${method}): Session closed. Most likely the page has been closed.`);\n        }\n        const session = await this.#sessionId.valueOrThrow();\n        const { result } = await this.#connection.send('goog:cdp.sendCommand', {\n            method: method,\n            params: params,\n            session,\n        }, options?.timeout);\n        return result.result;\n    }\n    async detach() {\n        if (this.#connection === undefined ||\n            this.#connection.closed ||\n            this.#detached) {\n            return;\n        }\n        try {\n            await this.frame.client.send('Target.detachFromTarget', {\n                sessionId: this.id(),\n            });\n        }\n        finally {\n            this.onClose();\n        }\n    }\n    /**\n     * @internal\n     */\n    onClose = () => {\n        BidiCdpSession.sessions.delete(this.id());\n        this.#detached = true;\n    };\n    id() {\n        const value = this.#sessionId.value();\n        return typeof value === 'string' ? value : '';\n    }\n}\n//# sourceMappingURL=CDPSession.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { CallbackRegistry } from '../common/CallbackRegistry.js';\nimport { debug } from '../common/Debug.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { debugError } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { BidiCdpSession } from './CDPSession.js';\nconst debugProtocolSend = debug('puppeteer:webDriverBiDi:SEND ');\nconst debugProtocolReceive = debug('puppeteer:webDriverBiDi:RECV ');\n/**\n * @internal\n */\nexport class BidiConnection extends EventEmitter {\n    #url;\n    #transport;\n    #delay;\n    #timeout = 0;\n    #closed = false;\n    #callbacks = new CallbackRegistry();\n    #emitters = [];\n    constructor(url, transport, delay = 0, timeout) {\n        super();\n        this.#url = url;\n        this.#delay = delay;\n        this.#timeout = timeout ?? 180_000;\n        this.#transport = transport;\n        this.#transport.onmessage = this.onMessage.bind(this);\n        this.#transport.onclose = this.unbind.bind(this);\n    }\n    get closed() {\n        return this.#closed;\n    }\n    get url() {\n        return this.#url;\n    }\n    pipeTo(emitter) {\n        this.#emitters.push(emitter);\n    }\n    emit(type, event) {\n        for (const emitter of this.#emitters) {\n            emitter.emit(type, event);\n        }\n        return super.emit(type, event);\n    }\n    send(method, params, timeout) {\n        assert(!this.#closed, 'Protocol error: Connection closed.');\n        return this.#callbacks.create(method, timeout ?? this.#timeout, id => {\n            const stringifiedMessage = JSON.stringify({\n                id,\n                method,\n                params,\n            });\n            debugProtocolSend(stringifiedMessage);\n            this.#transport.send(stringifiedMessage);\n        });\n    }\n    /**\n     * @internal\n     */\n    async onMessage(message) {\n        if (this.#delay) {\n            await new Promise(f => {\n                return setTimeout(f, this.#delay);\n            });\n        }\n        debugProtocolReceive(message);\n        const object = JSON.parse(message);\n        if ('type' in object) {\n            switch (object.type) {\n                case 'success':\n                    this.#callbacks.resolve(object.id, object);\n                    return;\n                case 'error':\n                    if (object.id === null) {\n                        break;\n                    }\n                    this.#callbacks.reject(object.id, createProtocolError(object), `${object.error}: ${object.message}`);\n                    return;\n                case 'event':\n                    if (isCdpEvent(object)) {\n                        BidiCdpSession.sessions\n                            .get(object.params.session)\n                            ?.emit(object.params.event, object.params.params);\n                        return;\n                    }\n                    // SAFETY: We know the method and parameter still match here.\n                    this.emit(object.method, object.params);\n                    return;\n            }\n        }\n        // Even if the response in not in BiDi protocol format but `id` is provided, reject\n        // the callback. This can happen if the endpoint supports CDP instead of BiDi.\n        if ('id' in object) {\n            this.#callbacks.reject(object.id, `Protocol Error. Message is not in BiDi protocol format: '${message}'`, object.message);\n        }\n        debugError(object);\n    }\n    /**\n     * Unbinds the connection, but keeps the transport open. Useful when the transport will\n     * be reused by other connection e.g. with different protocol.\n     * @internal\n     */\n    unbind() {\n        if (this.#closed) {\n            return;\n        }\n        this.#closed = true;\n        // Both may still be invoked and produce errors\n        this.#transport.onmessage = () => { };\n        this.#transport.onclose = () => { };\n        this.#callbacks.clear();\n    }\n    /**\n     * Unbinds the connection and closes the transport.\n     */\n    dispose() {\n        this.unbind();\n        this.#transport.close();\n    }\n    getPendingProtocolErrors() {\n        return this.#callbacks.getPendingProtocolErrors();\n    }\n}\n/**\n * @internal\n */\nfunction createProtocolError(object) {\n    let message = `${object.error} ${object.message}`;\n    if (object.stacktrace) {\n        message += ` ${object.stacktrace}`;\n    }\n    return message;\n}\nfunction isCdpEvent(event) {\n    return event.method.startsWith('goog:cdp.');\n}\n//# sourceMappingURL=Connection.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport * as BidiMapper from 'chromium-bidi/lib/cjs/bidiMapper/BidiMapper.js';\nimport { debug } from '../common/Debug.js';\nimport { TargetCloseError } from '../common/Errors.js';\nimport { BidiConnection } from './Connection.js';\nconst bidiServerLogger = (prefix, ...args) => {\n    debug(`bidi:${prefix}`)(args);\n};\n/**\n * @internal\n */\nexport async function connectBidiOverCdp(cdp) {\n    const transportBiDi = new NoOpTransport();\n    const cdpConnectionAdapter = new CdpConnectionAdapter(cdp);\n    const pptrTransport = {\n        send(message) {\n            // Forwards a BiDi command sent by Puppeteer to the input of the BidiServer.\n            transportBiDi.emitMessage(JSON.parse(message));\n        },\n        close() {\n            bidiServer.close();\n            cdpConnectionAdapter.close();\n            cdp.dispose();\n        },\n        onmessage(_message) {\n            // The method is overridden by the Connection.\n        },\n    };\n    transportBiDi.on('bidiResponse', (message) => {\n        // Forwards a BiDi event sent by BidiServer to Puppeteer.\n        pptrTransport.onmessage(JSON.stringify(message));\n    });\n    const pptrBiDiConnection = new BidiConnection(cdp.url(), pptrTransport, cdp.delay, cdp.timeout);\n    const bidiServer = await BidiMapper.BidiServer.createAndStart(transportBiDi, cdpConnectionAdapter, cdpConnectionAdapter.browserClient(), \n    /* selfTargetId= */ '', undefined, bidiServerLogger);\n    return pptrBiDiConnection;\n}\n/**\n * Manages CDPSessions for BidiServer.\n * @internal\n */\nclass CdpConnectionAdapter {\n    #cdp;\n    #adapters = new Map();\n    #browserCdpConnection;\n    constructor(cdp) {\n        this.#cdp = cdp;\n        this.#browserCdpConnection = new CDPClientAdapter(cdp);\n    }\n    browserClient() {\n        return this.#browserCdpConnection;\n    }\n    getCdpClient(id) {\n        const session = this.#cdp.session(id);\n        if (!session) {\n            throw new Error(`Unknown CDP session with id ${id}`);\n        }\n        if (!this.#adapters.has(session)) {\n            const adapter = new CDPClientAdapter(session, id, this.#browserCdpConnection);\n            this.#adapters.set(session, adapter);\n            return adapter;\n        }\n        return this.#adapters.get(session);\n    }\n    close() {\n        this.#browserCdpConnection.close();\n        for (const adapter of this.#adapters.values()) {\n            adapter.close();\n        }\n    }\n}\n/**\n * Wrapper on top of CDPSession/CDPConnection to satisfy CDP interface that\n * BidiServer needs.\n *\n * @internal\n */\nclass CDPClientAdapter extends BidiMapper.EventEmitter {\n    #closed = false;\n    #client;\n    sessionId = undefined;\n    #browserClient;\n    constructor(client, sessionId, browserClient) {\n        super();\n        this.#client = client;\n        this.sessionId = sessionId;\n        this.#browserClient = browserClient;\n        this.#client.on('*', this.#forwardMessage);\n    }\n    browserClient() {\n        return this.#browserClient;\n    }\n    #forwardMessage = (method, event) => {\n        this.emit(method, event);\n    };\n    async sendCommand(method, ...params) {\n        if (this.#closed) {\n            return;\n        }\n        try {\n            return await this.#client.send(method, ...params);\n        }\n        catch (err) {\n            if (this.#closed) {\n                return;\n            }\n            throw err;\n        }\n    }\n    close() {\n        this.#client.off('*', this.#forwardMessage);\n        this.#closed = true;\n    }\n    isCloseError(error) {\n        return error instanceof TargetCloseError;\n    }\n}\n/**\n * This transport is given to the BiDi server instance and allows Puppeteer\n * to send and receive commands to the BiDiServer.\n * @internal\n */\nclass NoOpTransport extends BidiMapper.EventEmitter {\n    #onMessage = async (_m) => {\n        return;\n    };\n    emitMessage(message) {\n        void this.#onMessage(message);\n    }\n    setOnMessage(onMessage) {\n        this.#onMessage = onMessage;\n    }\n    async sendMessage(message) {\n        this.emit('bidiResponse', message);\n    }\n    close() {\n        this.#onMessage = async (_m) => {\n            return;\n        };\n    }\n}\n//# sourceMappingURL=BidiOverCdp.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nimport { EventEmitter } from '../../common/EventEmitter.js';\nimport { inertIfDisposed } from '../../util/decorators.js';\nimport { DisposableStack, disposeSymbol } from '../../util/disposable.js';\n/**\n * @internal\n */\nlet Navigation = (() => {\n    var _a;\n    let _classSuper = EventEmitter;\n    let _instanceExtraInitializers = [];\n    let _dispose_decorators;\n    return class Navigation extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            __esDecorate(this, null, _dispose_decorators, { kind: \"method\", name: \"dispose\", static: false, private: false, access: { has: obj => \"dispose\" in obj, get: obj => obj.dispose }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        static from(context) {\n            const navigation = new Navigation(context);\n            navigation.#initialize();\n            return navigation;\n        }\n        #request = __runInitializers(this, _instanceExtraInitializers);\n        #navigation;\n        #browsingContext;\n        #disposables = new DisposableStack();\n        #id;\n        constructor(context) {\n            super();\n            this.#browsingContext = context;\n        }\n        #initialize() {\n            const browsingContextEmitter = this.#disposables.use(new EventEmitter(this.#browsingContext));\n            browsingContextEmitter.once('closed', () => {\n                this.emit('failed', {\n                    url: this.#browsingContext.url,\n                    timestamp: new Date(),\n                });\n                this.dispose();\n            });\n            browsingContextEmitter.on('request', ({ request }) => {\n                if (request.navigation === undefined ||\n                    // If a request with a navigation ID comes in, then the navigation ID is\n                    // for this navigation.\n                    !this.#matches(request.navigation)) {\n                    return;\n                }\n                this.#request = request;\n                this.emit('request', request);\n                const requestEmitter = this.#disposables.use(new EventEmitter(this.#request));\n                requestEmitter.on('redirect', request => {\n                    this.#request = request;\n                });\n            });\n            const sessionEmitter = this.#disposables.use(new EventEmitter(this.#session));\n            sessionEmitter.on('browsingContext.navigationStarted', info => {\n                if (info.context !== this.#browsingContext.id ||\n                    this.#navigation !== undefined) {\n                    return;\n                }\n                this.#navigation = Navigation.from(this.#browsingContext);\n            });\n            for (const eventName of [\n                'browsingContext.domContentLoaded',\n                'browsingContext.load',\n            ]) {\n                sessionEmitter.on(eventName, info => {\n                    if (info.context !== this.#browsingContext.id ||\n                        info.navigation === null ||\n                        !this.#matches(info.navigation)) {\n                        return;\n                    }\n                    this.dispose();\n                });\n            }\n            for (const [eventName, event] of [\n                ['browsingContext.fragmentNavigated', 'fragment'],\n                ['browsingContext.navigationFailed', 'failed'],\n                ['browsingContext.navigationAborted', 'aborted'],\n            ]) {\n                sessionEmitter.on(eventName, info => {\n                    if (info.context !== this.#browsingContext.id ||\n                        // Note we don't check if `navigation` is null since `null` means the\n                        // fragment navigated.\n                        !this.#matches(info.navigation)) {\n                        return;\n                    }\n                    this.emit(event, {\n                        url: info.url,\n                        timestamp: new Date(info.timestamp),\n                    });\n                    this.dispose();\n                });\n            }\n        }\n        #matches(navigation) {\n            if (this.#navigation !== undefined && !this.#navigation.disposed) {\n                return false;\n            }\n            if (this.#id === undefined) {\n                this.#id = navigation;\n                return true;\n            }\n            return this.#id === navigation;\n        }\n        get #session() {\n            return this.#browsingContext.userContext.browser.session;\n        }\n        get disposed() {\n            return this.#disposables.disposed;\n        }\n        get request() {\n            return this.#request;\n        }\n        get navigation() {\n            return this.#navigation;\n        }\n        dispose() {\n            this[disposeSymbol]();\n        }\n        [(_dispose_decorators = [inertIfDisposed], disposeSymbol)]() {\n            this.#disposables.dispose();\n            super[disposeSymbol]();\n        }\n    };\n})();\nexport { Navigation };\n//# sourceMappingURL=Navigation.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar _a;\nimport { EventEmitter } from '../../common/EventEmitter.js';\nimport { inertIfDisposed, throwIfDisposed } from '../../util/decorators.js';\nimport { DisposableStack, disposeSymbol } from '../../util/disposable.js';\n/**\n * @internal\n */\nlet Realm = (() => {\n    let _classSuper = EventEmitter;\n    let _instanceExtraInitializers = [];\n    let _dispose_decorators;\n    let _disown_decorators;\n    let _callFunction_decorators;\n    let _evaluate_decorators;\n    let _resolveExecutionContextId_decorators;\n    return class Realm extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            __esDecorate(this, null, _dispose_decorators, { kind: \"method\", name: \"dispose\", static: false, private: false, access: { has: obj => \"dispose\" in obj, get: obj => obj.dispose }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _disown_decorators, { kind: \"method\", name: \"disown\", static: false, private: false, access: { has: obj => \"disown\" in obj, get: obj => obj.disown }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _callFunction_decorators, { kind: \"method\", name: \"callFunction\", static: false, private: false, access: { has: obj => \"callFunction\" in obj, get: obj => obj.callFunction }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _evaluate_decorators, { kind: \"method\", name: \"evaluate\", static: false, private: false, access: { has: obj => \"evaluate\" in obj, get: obj => obj.evaluate }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _resolveExecutionContextId_decorators, { kind: \"method\", name: \"resolveExecutionContextId\", static: false, private: false, access: { has: obj => \"resolveExecutionContextId\" in obj, get: obj => obj.resolveExecutionContextId }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        #reason = __runInitializers(this, _instanceExtraInitializers);\n        disposables = new DisposableStack();\n        id;\n        origin;\n        executionContextId;\n        constructor(id, origin) {\n            super();\n            this.id = id;\n            this.origin = origin;\n        }\n        get disposed() {\n            return this.#reason !== undefined;\n        }\n        get target() {\n            return { realm: this.id };\n        }\n        dispose(reason) {\n            this.#reason = reason;\n            this[disposeSymbol]();\n        }\n        async disown(handles) {\n            await this.session.send('script.disown', {\n                target: this.target,\n                handles,\n            });\n        }\n        async callFunction(functionDeclaration, awaitPromise, options = {}) {\n            const { result } = await this.session.send('script.callFunction', {\n                functionDeclaration,\n                awaitPromise,\n                target: this.target,\n                ...options,\n            });\n            return result;\n        }\n        async evaluate(expression, awaitPromise, options = {}) {\n            const { result } = await this.session.send('script.evaluate', {\n                expression,\n                awaitPromise,\n                target: this.target,\n                ...options,\n            });\n            return result;\n        }\n        async resolveExecutionContextId() {\n            if (!this.executionContextId) {\n                const { result } = await this.session.connection.send('goog:cdp.resolveRealm', { realm: this.id });\n                this.executionContextId = result.executionContextId;\n            }\n            return this.executionContextId;\n        }\n        [(_dispose_decorators = [inertIfDisposed], _disown_decorators = [throwIfDisposed(realm => {\n                // SAFETY: Disposal implies this exists.\n                return realm.#reason;\n            })], _callFunction_decorators = [throwIfDisposed(realm => {\n                // SAFETY: Disposal implies this exists.\n                return realm.#reason;\n            })], _evaluate_decorators = [throwIfDisposed(realm => {\n                // SAFETY: Disposal implies this exists.\n                return realm.#reason;\n            })], _resolveExecutionContextId_decorators = [throwIfDisposed(realm => {\n                // SAFETY: Disposal implies this exists.\n                return realm.#reason;\n            })], disposeSymbol)]() {\n            this.#reason ??=\n                'Realm already destroyed, probably because all associated browsing contexts closed.';\n            this.emit('destroyed', { reason: this.#reason });\n            this.disposables.dispose();\n            super[disposeSymbol]();\n        }\n    };\n})();\nexport { Realm };\n/**\n * @internal\n */\nexport class WindowRealm extends Realm {\n    static from(context, sandbox) {\n        const realm = new WindowRealm(context, sandbox);\n        realm.#initialize();\n        return realm;\n    }\n    browsingContext;\n    sandbox;\n    #workers = new Map();\n    constructor(context, sandbox) {\n        super('', '');\n        this.browsingContext = context;\n        this.sandbox = sandbox;\n    }\n    #initialize() {\n        const browsingContextEmitter = this.disposables.use(new EventEmitter(this.browsingContext));\n        browsingContextEmitter.on('closed', ({ reason }) => {\n            this.dispose(reason);\n        });\n        const sessionEmitter = this.disposables.use(new EventEmitter(this.session));\n        sessionEmitter.on('script.realmCreated', info => {\n            if (info.type !== 'window' ||\n                info.context !== this.browsingContext.id ||\n                info.sandbox !== this.sandbox) {\n                return;\n            }\n            this.id = info.realm;\n            this.origin = info.origin;\n            this.executionContextId = undefined;\n            this.emit('updated', this);\n        });\n        sessionEmitter.on('script.realmCreated', info => {\n            if (info.type !== 'dedicated-worker') {\n                return;\n            }\n            if (!info.owners.includes(this.id)) {\n                return;\n            }\n            const realm = DedicatedWorkerRealm.from(this, info.realm, info.origin);\n            this.#workers.set(realm.id, realm);\n            const realmEmitter = this.disposables.use(new EventEmitter(realm));\n            realmEmitter.once('destroyed', () => {\n                realmEmitter.removeAllListeners();\n                this.#workers.delete(realm.id);\n            });\n            this.emit('worker', realm);\n        });\n    }\n    get session() {\n        return this.browsingContext.userContext.browser.session;\n    }\n    get target() {\n        return { context: this.browsingContext.id, sandbox: this.sandbox };\n    }\n}\n/**\n * @internal\n */\nexport class DedicatedWorkerRealm extends Realm {\n    static from(owner, id, origin) {\n        const realm = new _a(owner, id, origin);\n        realm.#initialize();\n        return realm;\n    }\n    #workers = new Map();\n    owners;\n    constructor(owner, id, origin) {\n        super(id, origin);\n        this.owners = new Set([owner]);\n    }\n    #initialize() {\n        const sessionEmitter = this.disposables.use(new EventEmitter(this.session));\n        sessionEmitter.on('script.realmDestroyed', info => {\n            if (info.realm !== this.id) {\n                return;\n            }\n            this.dispose('Realm already destroyed.');\n        });\n        sessionEmitter.on('script.realmCreated', info => {\n            if (info.type !== 'dedicated-worker') {\n                return;\n            }\n            if (!info.owners.includes(this.id)) {\n                return;\n            }\n            const realm = _a.from(this, info.realm, info.origin);\n            this.#workers.set(realm.id, realm);\n            const realmEmitter = this.disposables.use(new EventEmitter(realm));\n            realmEmitter.once('destroyed', () => {\n                this.#workers.delete(realm.id);\n            });\n            this.emit('worker', realm);\n        });\n    }\n    get session() {\n        // SAFETY: At least one owner will exist.\n        return this.owners.values().next().value.session;\n    }\n}\n_a = DedicatedWorkerRealm;\n/**\n * @internal\n */\nexport class SharedWorkerRealm extends Realm {\n    static from(browser, id, origin) {\n        const realm = new SharedWorkerRealm(browser, id, origin);\n        realm.#initialize();\n        return realm;\n    }\n    #workers = new Map();\n    browser;\n    constructor(browser, id, origin) {\n        super(id, origin);\n        this.browser = browser;\n    }\n    #initialize() {\n        const sessionEmitter = this.disposables.use(new EventEmitter(this.session));\n        sessionEmitter.on('script.realmDestroyed', info => {\n            if (info.realm !== this.id) {\n                return;\n            }\n            this.dispose('Realm already destroyed.');\n        });\n        sessionEmitter.on('script.realmCreated', info => {\n            if (info.type !== 'dedicated-worker') {\n                return;\n            }\n            if (!info.owners.includes(this.id)) {\n                return;\n            }\n            const realm = DedicatedWorkerRealm.from(this, info.realm, info.origin);\n            this.#workers.set(realm.id, realm);\n            const realmEmitter = this.disposables.use(new EventEmitter(realm));\n            realmEmitter.once('destroyed', () => {\n                this.#workers.delete(realm.id);\n            });\n            this.emit('worker', realm);\n        });\n    }\n    get session() {\n        return this.browser.session;\n    }\n}\n//# sourceMappingURL=Realm.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nimport { ProtocolError } from '../../common/Errors.js';\nimport { EventEmitter } from '../../common/EventEmitter.js';\nimport { inertIfDisposed } from '../../util/decorators.js';\nimport { DisposableStack, disposeSymbol } from '../../util/disposable.js';\nimport { stringToTypedArray } from '../../util/encoding.js';\n/**\n * @internal\n */\nlet Request = (() => {\n    var _a;\n    let _classSuper = EventEmitter;\n    let _instanceExtraInitializers = [];\n    let _dispose_decorators;\n    return class Request extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            __esDecorate(this, null, _dispose_decorators, { kind: \"method\", name: \"dispose\", static: false, private: false, access: { has: obj => \"dispose\" in obj, get: obj => obj.dispose }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        static from(browsingContext, event) {\n            const request = new Request(browsingContext, event);\n            request.#initialize();\n            return request;\n        }\n        #responseContentPromise = (__runInitializers(this, _instanceExtraInitializers), null);\n        #error;\n        #redirect;\n        #response;\n        #browsingContext;\n        #disposables = new DisposableStack();\n        #event;\n        constructor(browsingContext, event) {\n            super();\n            this.#browsingContext = browsingContext;\n            this.#event = event;\n        }\n        #initialize() {\n            const browsingContextEmitter = this.#disposables.use(new EventEmitter(this.#browsingContext));\n            browsingContextEmitter.once('closed', ({ reason }) => {\n                this.#error = reason;\n                this.emit('error', this.#error);\n                this.dispose();\n            });\n            const sessionEmitter = this.#disposables.use(new EventEmitter(this.#session));\n            sessionEmitter.on('network.beforeRequestSent', event => {\n                if (event.context !== this.#browsingContext.id ||\n                    event.request.request !== this.id ||\n                    event.redirectCount !== this.#event.redirectCount + 1) {\n                    return;\n                }\n                this.#redirect = Request.from(this.#browsingContext, event);\n                this.emit('redirect', this.#redirect);\n                this.dispose();\n            });\n            sessionEmitter.on('network.authRequired', event => {\n                if (event.context !== this.#browsingContext.id ||\n                    event.request.request !== this.id ||\n                    // Don't try to authenticate for events that are not blocked\n                    !event.isBlocked) {\n                    return;\n                }\n                this.emit('authenticate', undefined);\n            });\n            sessionEmitter.on('network.fetchError', event => {\n                if (event.context !== this.#browsingContext.id ||\n                    event.request.request !== this.id ||\n                    this.#event.redirectCount !== event.redirectCount) {\n                    return;\n                }\n                this.#error = event.errorText;\n                this.emit('error', this.#error);\n                this.dispose();\n            });\n            sessionEmitter.on('network.responseCompleted', event => {\n                if (event.context !== this.#browsingContext.id ||\n                    event.request.request !== this.id ||\n                    this.#event.redirectCount !== event.redirectCount) {\n                    return;\n                }\n                this.#response = event.response;\n                this.#event.request.timings = event.request.timings;\n                this.emit('success', this.#response);\n                // In case this is a redirect.\n                if (this.#response.status >= 300 && this.#response.status < 400) {\n                    return;\n                }\n                this.dispose();\n            });\n        }\n        get #session() {\n            return this.#browsingContext.userContext.browser.session;\n        }\n        get disposed() {\n            return this.#disposables.disposed;\n        }\n        get error() {\n            return this.#error;\n        }\n        get headers() {\n            return this.#event.request.headers;\n        }\n        get id() {\n            return this.#event.request.request;\n        }\n        get initiator() {\n            return this.#event.initiator;\n        }\n        get method() {\n            return this.#event.request.method;\n        }\n        get navigation() {\n            return this.#event.navigation ?? undefined;\n        }\n        get redirect() {\n            return this.#redirect;\n        }\n        get lastRedirect() {\n            let redirect = this.#redirect;\n            while (redirect) {\n                if (redirect && !redirect.#redirect) {\n                    return redirect;\n                }\n                redirect = redirect.#redirect;\n            }\n            return redirect;\n        }\n        get response() {\n            return this.#response;\n        }\n        get url() {\n            return this.#event.request.url;\n        }\n        get isBlocked() {\n            return this.#event.isBlocked;\n        }\n        get resourceType() {\n            // @ts-expect-error non-standard attribute.\n            return this.#event.request['goog:resourceType'] ?? undefined;\n        }\n        get postData() {\n            // @ts-expect-error non-standard attribute.\n            return this.#event.request['goog:postData'] ?? undefined;\n        }\n        get hasPostData() {\n            // @ts-expect-error non-standard attribute.\n            return this.#event.request['goog:hasPostData'] ?? false;\n        }\n        async continueRequest({ url, method, headers, cookies, body, }) {\n            await this.#session.send('network.continueRequest', {\n                request: this.id,\n                url,\n                method,\n                headers,\n                body,\n                cookies,\n            });\n        }\n        async failRequest() {\n            await this.#session.send('network.failRequest', {\n                request: this.id,\n            });\n        }\n        async provideResponse({ statusCode, reasonPhrase, headers, body, }) {\n            await this.#session.send('network.provideResponse', {\n                request: this.id,\n                statusCode,\n                reasonPhrase,\n                headers,\n                body,\n            });\n        }\n        async getResponseContent() {\n            if (!this.#responseContentPromise) {\n                this.#responseContentPromise = (async () => {\n                    try {\n                        const data = await this.#session.send('network.getData', {\n                            dataType: \"response\" /* Bidi.Network.DataType.Response */,\n                            request: this.id,\n                        });\n                        return stringToTypedArray(data.result.bytes.value, data.result.bytes.type === 'base64');\n                    }\n                    catch (error) {\n                        if (error instanceof ProtocolError &&\n                            error.originalMessage.includes('No resource with given identifier found')) {\n                            throw new ProtocolError('Could not load body for this request. This might happen if the request is a preflight request.');\n                        }\n                        throw error;\n                    }\n                })();\n            }\n            return await this.#responseContentPromise;\n        }\n        async continueWithAuth(parameters) {\n            if (parameters.action === 'provideCredentials') {\n                await this.#session.send('network.continueWithAuth', {\n                    request: this.id,\n                    action: parameters.action,\n                    credentials: parameters.credentials,\n                });\n            }\n            else {\n                await this.#session.send('network.continueWithAuth', {\n                    request: this.id,\n                    action: parameters.action,\n                });\n            }\n        }\n        dispose() {\n            this[disposeSymbol]();\n        }\n        [(_dispose_decorators = [inertIfDisposed], disposeSymbol)]() {\n            this.#disposables.dispose();\n            super[disposeSymbol]();\n        }\n        timing() {\n            return this.#event.request.timings;\n        }\n    };\n})();\nexport { Request };\n//# sourceMappingURL=Request.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nimport { EventEmitter } from '../../common/EventEmitter.js';\nimport { inertIfDisposed, throwIfDisposed } from '../../util/decorators.js';\nimport { DisposableStack, disposeSymbol } from '../../util/disposable.js';\n/**\n * @internal\n */\nlet UserPrompt = (() => {\n    let _classSuper = EventEmitter;\n    let _instanceExtraInitializers = [];\n    let _dispose_decorators;\n    let _handle_decorators;\n    return class UserPrompt extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            __esDecorate(this, null, _dispose_decorators, { kind: \"method\", name: \"dispose\", static: false, private: false, access: { has: obj => \"dispose\" in obj, get: obj => obj.dispose }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _handle_decorators, { kind: \"method\", name: \"handle\", static: false, private: false, access: { has: obj => \"handle\" in obj, get: obj => obj.handle }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        static from(browsingContext, info) {\n            const userPrompt = new UserPrompt(browsingContext, info);\n            userPrompt.#initialize();\n            return userPrompt;\n        }\n        #reason = __runInitializers(this, _instanceExtraInitializers);\n        #result;\n        #disposables = new DisposableStack();\n        browsingContext;\n        info;\n        constructor(context, info) {\n            super();\n            this.browsingContext = context;\n            this.info = info;\n        }\n        #initialize() {\n            const browserContextEmitter = this.#disposables.use(new EventEmitter(this.browsingContext));\n            browserContextEmitter.once('closed', ({ reason }) => {\n                this.dispose(`User prompt already closed: ${reason}`);\n            });\n            const sessionEmitter = this.#disposables.use(new EventEmitter(this.#session));\n            sessionEmitter.on('browsingContext.userPromptClosed', parameters => {\n                if (parameters.context !== this.browsingContext.id) {\n                    return;\n                }\n                this.#result = parameters;\n                this.emit('handled', parameters);\n                this.dispose('User prompt already handled.');\n            });\n        }\n        get #session() {\n            return this.browsingContext.userContext.browser.session;\n        }\n        get closed() {\n            return this.#reason !== undefined;\n        }\n        get disposed() {\n            return this.closed;\n        }\n        get handled() {\n            if (this.info.handler === \"accept\" /* Bidi.Session.UserPromptHandlerType.Accept */ ||\n                this.info.handler === \"dismiss\" /* Bidi.Session.UserPromptHandlerType.Dismiss */) {\n                return true;\n            }\n            return this.#result !== undefined;\n        }\n        get result() {\n            return this.#result;\n        }\n        dispose(reason) {\n            this.#reason = reason;\n            this[disposeSymbol]();\n        }\n        async handle(options = {}) {\n            await this.#session.send('browsingContext.handleUserPrompt', {\n                ...options,\n                context: this.info.context,\n            });\n            // SAFETY: `handled` is triggered before the above promise resolved.\n            return this.#result;\n        }\n        [(_dispose_decorators = [inertIfDisposed], _handle_decorators = [throwIfDisposed(prompt => {\n                // SAFETY: Disposal implies this exists.\n                return prompt.#reason;\n            })], disposeSymbol)]() {\n            this.#reason ??=\n                'User prompt already closed, probably because the associated browsing context was destroyed.';\n            this.emit('closed', { reason: this.#reason });\n            this.#disposables.dispose();\n            super[disposeSymbol]();\n        }\n    };\n})();\nexport { UserPrompt };\n//# sourceMappingURL=UserPrompt.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nimport { EventEmitter } from '../../common/EventEmitter.js';\nimport { inertIfDisposed, throwIfDisposed } from '../../util/decorators.js';\nimport { DisposableStack, disposeSymbol } from '../../util/disposable.js';\nimport { Navigation } from './Navigation.js';\nimport { WindowRealm } from './Realm.js';\nimport { Request } from './Request.js';\nimport { UserPrompt } from './UserPrompt.js';\n/**\n * @internal\n */\nlet BrowsingContext = (() => {\n    var _a;\n    let _classSuper = EventEmitter;\n    let _instanceExtraInitializers = [];\n    let _dispose_decorators;\n    let _activate_decorators;\n    let _captureScreenshot_decorators;\n    let _close_decorators;\n    let _traverseHistory_decorators;\n    let _navigate_decorators;\n    let _reload_decorators;\n    let _setCacheBehavior_decorators;\n    let _print_decorators;\n    let _handleUserPrompt_decorators;\n    let _setViewport_decorators;\n    let _performActions_decorators;\n    let _releaseActions_decorators;\n    let _createWindowRealm_decorators;\n    let _addPreloadScript_decorators;\n    let _addIntercept_decorators;\n    let _removePreloadScript_decorators;\n    let _setGeolocationOverride_decorators;\n    let _setTimezoneOverride_decorators;\n    let _getCookies_decorators;\n    let _setCookie_decorators;\n    let _setFiles_decorators;\n    let _subscribe_decorators;\n    let _addInterception_decorators;\n    let _deleteCookie_decorators;\n    let _locateNodes_decorators;\n    return class BrowsingContext extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            _deleteCookie_decorators = [throwIfDisposed(context => {\n                    // SAFETY: Disposal implies this exists.\n                    return context.#reason;\n                })];\n            _locateNodes_decorators = [throwIfDisposed(context => {\n                    // SAFETY: Disposal implies this exists.\n                    return context.#reason;\n                })];\n            __esDecorate(this, null, _dispose_decorators, { kind: \"method\", name: \"dispose\", static: false, private: false, access: { has: obj => \"dispose\" in obj, get: obj => obj.dispose }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _activate_decorators, { kind: \"method\", name: \"activate\", static: false, private: false, access: { has: obj => \"activate\" in obj, get: obj => obj.activate }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _captureScreenshot_decorators, { kind: \"method\", name: \"captureScreenshot\", static: false, private: false, access: { has: obj => \"captureScreenshot\" in obj, get: obj => obj.captureScreenshot }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _close_decorators, { kind: \"method\", name: \"close\", static: false, private: false, access: { has: obj => \"close\" in obj, get: obj => obj.close }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _traverseHistory_decorators, { kind: \"method\", name: \"traverseHistory\", static: false, private: false, access: { has: obj => \"traverseHistory\" in obj, get: obj => obj.traverseHistory }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _navigate_decorators, { kind: \"method\", name: \"navigate\", static: false, private: false, access: { has: obj => \"navigate\" in obj, get: obj => obj.navigate }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _reload_decorators, { kind: \"method\", name: \"reload\", static: false, private: false, access: { has: obj => \"reload\" in obj, get: obj => obj.reload }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _setCacheBehavior_decorators, { kind: \"method\", name: \"setCacheBehavior\", static: false, private: false, access: { has: obj => \"setCacheBehavior\" in obj, get: obj => obj.setCacheBehavior }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _print_decorators, { kind: \"method\", name: \"print\", static: false, private: false, access: { has: obj => \"print\" in obj, get: obj => obj.print }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _handleUserPrompt_decorators, { kind: \"method\", name: \"handleUserPrompt\", static: false, private: false, access: { has: obj => \"handleUserPrompt\" in obj, get: obj => obj.handleUserPrompt }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _setViewport_decorators, { kind: \"method\", name: \"setViewport\", static: false, private: false, access: { has: obj => \"setViewport\" in obj, get: obj => obj.setViewport }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _performActions_decorators, { kind: \"method\", name: \"performActions\", static: false, private: false, access: { has: obj => \"performActions\" in obj, get: obj => obj.performActions }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _releaseActions_decorators, { kind: \"method\", name: \"releaseActions\", static: false, private: false, access: { has: obj => \"releaseActions\" in obj, get: obj => obj.releaseActions }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _createWindowRealm_decorators, { kind: \"method\", name: \"createWindowRealm\", static: false, private: false, access: { has: obj => \"createWindowRealm\" in obj, get: obj => obj.createWindowRealm }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _addPreloadScript_decorators, { kind: \"method\", name: \"addPreloadScript\", static: false, private: false, access: { has: obj => \"addPreloadScript\" in obj, get: obj => obj.addPreloadScript }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _addIntercept_decorators, { kind: \"method\", name: \"addIntercept\", static: false, private: false, access: { has: obj => \"addIntercept\" in obj, get: obj => obj.addIntercept }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _removePreloadScript_decorators, { kind: \"method\", name: \"removePreloadScript\", static: false, private: false, access: { has: obj => \"removePreloadScript\" in obj, get: obj => obj.removePreloadScript }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _setGeolocationOverride_decorators, { kind: \"method\", name: \"setGeolocationOverride\", static: false, private: false, access: { has: obj => \"setGeolocationOverride\" in obj, get: obj => obj.setGeolocationOverride }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _setTimezoneOverride_decorators, { kind: \"method\", name: \"setTimezoneOverride\", static: false, private: false, access: { has: obj => \"setTimezoneOverride\" in obj, get: obj => obj.setTimezoneOverride }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _getCookies_decorators, { kind: \"method\", name: \"getCookies\", static: false, private: false, access: { has: obj => \"getCookies\" in obj, get: obj => obj.getCookies }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _setCookie_decorators, { kind: \"method\", name: \"setCookie\", static: false, private: false, access: { has: obj => \"setCookie\" in obj, get: obj => obj.setCookie }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _setFiles_decorators, { kind: \"method\", name: \"setFiles\", static: false, private: false, access: { has: obj => \"setFiles\" in obj, get: obj => obj.setFiles }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _subscribe_decorators, { kind: \"method\", name: \"subscribe\", static: false, private: false, access: { has: obj => \"subscribe\" in obj, get: obj => obj.subscribe }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _addInterception_decorators, { kind: \"method\", name: \"addInterception\", static: false, private: false, access: { has: obj => \"addInterception\" in obj, get: obj => obj.addInterception }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _deleteCookie_decorators, { kind: \"method\", name: \"deleteCookie\", static: false, private: false, access: { has: obj => \"deleteCookie\" in obj, get: obj => obj.deleteCookie }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _locateNodes_decorators, { kind: \"method\", name: \"locateNodes\", static: false, private: false, access: { has: obj => \"locateNodes\" in obj, get: obj => obj.locateNodes }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        static from(userContext, parent, id, url, originalOpener) {\n            const browsingContext = new BrowsingContext(userContext, parent, id, url, originalOpener);\n            browsingContext.#initialize();\n            return browsingContext;\n        }\n        #navigation = __runInitializers(this, _instanceExtraInitializers);\n        #reason;\n        #url;\n        #children = new Map();\n        #disposables = new DisposableStack();\n        #realms = new Map();\n        #requests = new Map();\n        defaultRealm;\n        id;\n        parent;\n        userContext;\n        originalOpener;\n        constructor(context, parent, id, url, originalOpener) {\n            super();\n            this.#url = url;\n            this.id = id;\n            this.parent = parent;\n            this.userContext = context;\n            this.originalOpener = originalOpener;\n            this.defaultRealm = this.#createWindowRealm();\n        }\n        #initialize() {\n            const userContextEmitter = this.#disposables.use(new EventEmitter(this.userContext));\n            userContextEmitter.once('closed', ({ reason }) => {\n                this.dispose(`Browsing context already closed: ${reason}`);\n            });\n            const sessionEmitter = this.#disposables.use(new EventEmitter(this.#session));\n            sessionEmitter.on('input.fileDialogOpened', info => {\n                if (this.id !== info.context) {\n                    return;\n                }\n                this.emit('filedialogopened', info);\n            });\n            sessionEmitter.on('browsingContext.contextCreated', info => {\n                if (info.parent !== this.id) {\n                    return;\n                }\n                const browsingContext = BrowsingContext.from(this.userContext, this, info.context, info.url, info.originalOpener);\n                this.#children.set(info.context, browsingContext);\n                const browsingContextEmitter = this.#disposables.use(new EventEmitter(browsingContext));\n                browsingContextEmitter.once('closed', () => {\n                    browsingContextEmitter.removeAllListeners();\n                    this.#children.delete(browsingContext.id);\n                });\n                this.emit('browsingcontext', { browsingContext });\n            });\n            sessionEmitter.on('browsingContext.contextDestroyed', info => {\n                if (info.context !== this.id) {\n                    return;\n                }\n                this.dispose('Browsing context already closed.');\n            });\n            sessionEmitter.on('browsingContext.historyUpdated', info => {\n                if (info.context !== this.id) {\n                    return;\n                }\n                this.#url = info.url;\n                this.emit('historyUpdated', undefined);\n            });\n            sessionEmitter.on('browsingContext.domContentLoaded', info => {\n                if (info.context !== this.id) {\n                    return;\n                }\n                this.#url = info.url;\n                this.emit('DOMContentLoaded', undefined);\n            });\n            sessionEmitter.on('browsingContext.load', info => {\n                if (info.context !== this.id) {\n                    return;\n                }\n                this.#url = info.url;\n                this.emit('load', undefined);\n            });\n            sessionEmitter.on('browsingContext.navigationStarted', info => {\n                if (info.context !== this.id) {\n                    return;\n                }\n                // Note: we should not update this.#url at this point since the context\n                // has not finished navigating to the info.url yet.\n                for (const [id, request] of this.#requests) {\n                    if (request.disposed) {\n                        this.#requests.delete(id);\n                    }\n                }\n                // If the navigation hasn't finished, then this is nested navigation. The\n                // current navigation will handle this.\n                if (this.#navigation !== undefined && !this.#navigation.disposed) {\n                    return;\n                }\n                // Note the navigation ID is null for this event.\n                this.#navigation = Navigation.from(this);\n                const navigationEmitter = this.#disposables.use(new EventEmitter(this.#navigation));\n                for (const eventName of ['fragment', 'failed', 'aborted']) {\n                    navigationEmitter.once(eventName, ({ url }) => {\n                        navigationEmitter[disposeSymbol]();\n                        this.#url = url;\n                    });\n                }\n                this.emit('navigation', { navigation: this.#navigation });\n            });\n            sessionEmitter.on('network.beforeRequestSent', event => {\n                if (event.context !== this.id) {\n                    return;\n                }\n                if (this.#requests.has(event.request.request)) {\n                    // Means the request is a redirect. This is handled in Request.\n                    // Or an Auth event was issued\n                    return;\n                }\n                const request = Request.from(this, event);\n                this.#requests.set(request.id, request);\n                this.emit('request', { request });\n            });\n            sessionEmitter.on('log.entryAdded', entry => {\n                if (entry.source.context !== this.id) {\n                    return;\n                }\n                this.emit('log', { entry });\n            });\n            sessionEmitter.on('browsingContext.userPromptOpened', info => {\n                if (info.context !== this.id) {\n                    return;\n                }\n                const userPrompt = UserPrompt.from(this, info);\n                this.emit('userprompt', { userPrompt });\n            });\n        }\n        get #session() {\n            return this.userContext.browser.session;\n        }\n        get children() {\n            return this.#children.values();\n        }\n        get closed() {\n            return this.#reason !== undefined;\n        }\n        get disposed() {\n            return this.closed;\n        }\n        get realms() {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias -- Required\n            const self = this;\n            return (function* () {\n                yield self.defaultRealm;\n                yield* self.#realms.values();\n            })();\n        }\n        get top() {\n            let context = this;\n            for (let { parent } = context; parent; { parent } = context) {\n                context = parent;\n            }\n            return context;\n        }\n        get url() {\n            return this.#url;\n        }\n        #createWindowRealm(sandbox) {\n            const realm = WindowRealm.from(this, sandbox);\n            realm.on('worker', realm => {\n                this.emit('worker', { realm });\n            });\n            return realm;\n        }\n        dispose(reason) {\n            this.#reason = reason;\n            for (const context of this.#children.values()) {\n                context.dispose('Parent browsing context was disposed');\n            }\n            this[disposeSymbol]();\n        }\n        async activate() {\n            await this.#session.send('browsingContext.activate', {\n                context: this.id,\n            });\n        }\n        async captureScreenshot(options = {}) {\n            const { result: { data }, } = await this.#session.send('browsingContext.captureScreenshot', {\n                context: this.id,\n                ...options,\n            });\n            return data;\n        }\n        async close(promptUnload) {\n            await Promise.all([...this.#children.values()].map(async (child) => {\n                await child.close(promptUnload);\n            }));\n            await this.#session.send('browsingContext.close', {\n                context: this.id,\n                promptUnload,\n            });\n        }\n        async traverseHistory(delta) {\n            await this.#session.send('browsingContext.traverseHistory', {\n                context: this.id,\n                delta,\n            });\n        }\n        async navigate(url, wait) {\n            await this.#session.send('browsingContext.navigate', {\n                context: this.id,\n                url,\n                wait,\n            });\n        }\n        async reload(options = {}) {\n            await this.#session.send('browsingContext.reload', {\n                context: this.id,\n                ...options,\n            });\n        }\n        async setCacheBehavior(cacheBehavior) {\n            // @ts-expect-error not in BiDi types yet.\n            await this.#session.send('network.setCacheBehavior', {\n                contexts: [this.id],\n                cacheBehavior,\n            });\n        }\n        async print(options = {}) {\n            const { result: { data }, } = await this.#session.send('browsingContext.print', {\n                context: this.id,\n                ...options,\n            });\n            return data;\n        }\n        async handleUserPrompt(options = {}) {\n            await this.#session.send('browsingContext.handleUserPrompt', {\n                context: this.id,\n                ...options,\n            });\n        }\n        async setViewport(options = {}) {\n            await this.#session.send('browsingContext.setViewport', {\n                context: this.id,\n                ...options,\n            });\n        }\n        async performActions(actions) {\n            await this.#session.send('input.performActions', {\n                context: this.id,\n                actions,\n            });\n        }\n        async releaseActions() {\n            await this.#session.send('input.releaseActions', {\n                context: this.id,\n            });\n        }\n        createWindowRealm(sandbox) {\n            return this.#createWindowRealm(sandbox);\n        }\n        async addPreloadScript(functionDeclaration, options = {}) {\n            return await this.userContext.browser.addPreloadScript(functionDeclaration, {\n                ...options,\n                contexts: [this],\n            });\n        }\n        async addIntercept(options) {\n            const { result: { intercept }, } = await this.userContext.browser.session.send('network.addIntercept', {\n                ...options,\n                contexts: [this.id],\n            });\n            return intercept;\n        }\n        async removePreloadScript(script) {\n            await this.userContext.browser.removePreloadScript(script);\n        }\n        async setGeolocationOverride(options) {\n            if (!('coordinates' in options)) {\n                throw new Error('Missing coordinates');\n            }\n            await this.userContext.browser.session.send('emulation.setGeolocationOverride', {\n                coordinates: options.coordinates,\n                contexts: [this.id],\n            });\n        }\n        async setTimezoneOverride(timezoneId) {\n            if (timezoneId?.startsWith('GMT')) {\n                // CDP requires `GMT` prefix before timezone offset, while BiDi does not. Remove the\n                // `GMT` for interop between CDP and BiDi.\n                timezoneId = timezoneId?.replace('GMT', '');\n            }\n            await this.userContext.browser.session.send('emulation.setTimezoneOverride', {\n                timezone: timezoneId ?? null,\n                contexts: [this.id],\n            });\n        }\n        async getCookies(options = {}) {\n            const { result: { cookies }, } = await this.#session.send('storage.getCookies', {\n                ...options,\n                partition: {\n                    type: 'context',\n                    context: this.id,\n                },\n            });\n            return cookies;\n        }\n        async setCookie(cookie) {\n            await this.#session.send('storage.setCookie', {\n                cookie,\n                partition: {\n                    type: 'context',\n                    context: this.id,\n                },\n            });\n        }\n        async setFiles(element, files) {\n            await this.#session.send('input.setFiles', {\n                context: this.id,\n                element,\n                files,\n            });\n        }\n        async subscribe(events) {\n            await this.#session.subscribe(events, [this.id]);\n        }\n        async addInterception(events) {\n            await this.#session.subscribe(events, [this.id]);\n        }\n        [(_dispose_decorators = [inertIfDisposed], _activate_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _captureScreenshot_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _close_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _traverseHistory_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _navigate_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _reload_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _setCacheBehavior_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _print_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _handleUserPrompt_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _setViewport_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _performActions_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _releaseActions_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _createWindowRealm_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _addPreloadScript_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _addIntercept_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _removePreloadScript_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _setGeolocationOverride_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _setTimezoneOverride_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _getCookies_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _setCookie_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _setFiles_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _subscribe_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _addInterception_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], disposeSymbol)]() {\n            this.#reason ??=\n                'Browsing context already closed, probably because the user context closed.';\n            this.emit('closed', { reason: this.#reason });\n            this.#disposables.dispose();\n            super[disposeSymbol]();\n        }\n        async deleteCookie(...cookieFilters) {\n            await Promise.all(cookieFilters.map(async (filter) => {\n                await this.#session.send('storage.deleteCookies', {\n                    filter: filter,\n                    partition: {\n                        type: 'context',\n                        context: this.id,\n                    },\n                });\n            }));\n        }\n        async locateNodes(locator, startNodes) {\n            // TODO: add other locateNodes options if needed.\n            const result = await this.#session.send('browsingContext.locateNodes', {\n                context: this.id,\n                locator,\n                startNodes: startNodes.length ? startNodes : undefined,\n            });\n            return result.result.nodes;\n        }\n    };\n})();\nexport { BrowsingContext };\n//# sourceMappingURL=BrowsingContext.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nimport { EventEmitter } from '../../common/EventEmitter.js';\nimport { assert } from '../../util/assert.js';\nimport { inertIfDisposed, throwIfDisposed } from '../../util/decorators.js';\nimport { DisposableStack, disposeSymbol } from '../../util/disposable.js';\nimport { BrowsingContext } from './BrowsingContext.js';\n/**\n * @internal\n */\nlet UserContext = (() => {\n    let _classSuper = EventEmitter;\n    let _instanceExtraInitializers = [];\n    let _dispose_decorators;\n    let _createBrowsingContext_decorators;\n    let _remove_decorators;\n    let _getCookies_decorators;\n    let _setCookie_decorators;\n    let _setPermissions_decorators;\n    return class UserContext extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            __esDecorate(this, null, _dispose_decorators, { kind: \"method\", name: \"dispose\", static: false, private: false, access: { has: obj => \"dispose\" in obj, get: obj => obj.dispose }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _createBrowsingContext_decorators, { kind: \"method\", name: \"createBrowsingContext\", static: false, private: false, access: { has: obj => \"createBrowsingContext\" in obj, get: obj => obj.createBrowsingContext }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _remove_decorators, { kind: \"method\", name: \"remove\", static: false, private: false, access: { has: obj => \"remove\" in obj, get: obj => obj.remove }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _getCookies_decorators, { kind: \"method\", name: \"getCookies\", static: false, private: false, access: { has: obj => \"getCookies\" in obj, get: obj => obj.getCookies }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _setCookie_decorators, { kind: \"method\", name: \"setCookie\", static: false, private: false, access: { has: obj => \"setCookie\" in obj, get: obj => obj.setCookie }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _setPermissions_decorators, { kind: \"method\", name: \"setPermissions\", static: false, private: false, access: { has: obj => \"setPermissions\" in obj, get: obj => obj.setPermissions }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        static DEFAULT = 'default';\n        static create(browser, id) {\n            const context = new UserContext(browser, id);\n            context.#initialize();\n            return context;\n        }\n        #reason = __runInitializers(this, _instanceExtraInitializers);\n        // Note these are only top-level contexts.\n        #browsingContexts = new Map();\n        #disposables = new DisposableStack();\n        #id;\n        browser;\n        constructor(browser, id) {\n            super();\n            this.#id = id;\n            this.browser = browser;\n        }\n        #initialize() {\n            const browserEmitter = this.#disposables.use(new EventEmitter(this.browser));\n            browserEmitter.once('closed', ({ reason }) => {\n                this.dispose(`User context was closed: ${reason}`);\n            });\n            browserEmitter.once('disconnected', ({ reason }) => {\n                this.dispose(`User context was closed: ${reason}`);\n            });\n            const sessionEmitter = this.#disposables.use(new EventEmitter(this.#session));\n            sessionEmitter.on('browsingContext.contextCreated', info => {\n                if (info.parent) {\n                    return;\n                }\n                if (info.userContext !== this.#id) {\n                    return;\n                }\n                const browsingContext = BrowsingContext.from(this, undefined, info.context, info.url, info.originalOpener);\n                this.#browsingContexts.set(browsingContext.id, browsingContext);\n                const browsingContextEmitter = this.#disposables.use(new EventEmitter(browsingContext));\n                browsingContextEmitter.on('closed', () => {\n                    browsingContextEmitter.removeAllListeners();\n                    this.#browsingContexts.delete(browsingContext.id);\n                });\n                this.emit('browsingcontext', { browsingContext });\n            });\n        }\n        get #session() {\n            return this.browser.session;\n        }\n        get browsingContexts() {\n            return this.#browsingContexts.values();\n        }\n        get closed() {\n            return this.#reason !== undefined;\n        }\n        get disposed() {\n            return this.closed;\n        }\n        get id() {\n            return this.#id;\n        }\n        dispose(reason) {\n            this.#reason = reason;\n            this[disposeSymbol]();\n        }\n        async createBrowsingContext(type, options = {}) {\n            const { result: { context: contextId }, } = await this.#session.send('browsingContext.create', {\n                type,\n                ...options,\n                referenceContext: options.referenceContext?.id,\n                userContext: this.#id,\n            });\n            const browsingContext = this.#browsingContexts.get(contextId);\n            assert(browsingContext, 'The WebDriver BiDi implementation is failing to create a browsing context correctly.');\n            // We use an array to avoid the promise from being awaited.\n            return browsingContext;\n        }\n        async remove() {\n            try {\n                await this.#session.send('browser.removeUserContext', {\n                    userContext: this.#id,\n                });\n            }\n            finally {\n                this.dispose('User context already closed.');\n            }\n        }\n        async getCookies(options = {}, sourceOrigin = undefined) {\n            const { result: { cookies }, } = await this.#session.send('storage.getCookies', {\n                ...options,\n                partition: {\n                    type: 'storageKey',\n                    userContext: this.#id,\n                    sourceOrigin,\n                },\n            });\n            return cookies;\n        }\n        async setCookie(cookie, sourceOrigin) {\n            await this.#session.send('storage.setCookie', {\n                cookie,\n                partition: {\n                    type: 'storageKey',\n                    sourceOrigin,\n                    userContext: this.id,\n                },\n            });\n        }\n        async setPermissions(origin, descriptor, state) {\n            await this.#session.send('permissions.setPermission', {\n                origin,\n                descriptor,\n                state,\n                userContext: this.#id,\n            });\n        }\n        [(_dispose_decorators = [inertIfDisposed], _createBrowsingContext_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _remove_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _getCookies_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _setCookie_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], _setPermissions_decorators = [throwIfDisposed(context => {\n                // SAFETY: Disposal implies this exists.\n                return context.#reason;\n            })], disposeSymbol)]() {\n            this.#reason ??=\n                'User context already closed, probably because the browser disconnected/closed.';\n            this.emit('closed', { reason: this.#reason });\n            this.#disposables.dispose();\n            super[disposeSymbol]();\n        }\n    };\n})();\nexport { UserContext };\n//# sourceMappingURL=UserContext.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { debugError } from '../common/util.js';\n/**\n * @internal\n */\nexport class BidiDeserializer {\n    static deserialize(result) {\n        if (!result) {\n            debugError('Service did not produce a result.');\n            return undefined;\n        }\n        switch (result.type) {\n            case 'array':\n                return result.value?.map(value => {\n                    return this.deserialize(value);\n                });\n            case 'set':\n                return result.value?.reduce((acc, value) => {\n                    return acc.add(this.deserialize(value));\n                }, new Set());\n            case 'object':\n                return result.value?.reduce((acc, tuple) => {\n                    const { key, value } = this.#deserializeTuple(tuple);\n                    acc[key] = value;\n                    return acc;\n                }, {});\n            case 'map':\n                return result.value?.reduce((acc, tuple) => {\n                    const { key, value } = this.#deserializeTuple(tuple);\n                    return acc.set(key, value);\n                }, new Map());\n            case 'promise':\n                return {};\n            case 'regexp':\n                return new RegExp(result.value.pattern, result.value.flags);\n            case 'date':\n                return new Date(result.value);\n            case 'undefined':\n                return undefined;\n            case 'null':\n                return null;\n            case 'number':\n                return this.#deserializeNumber(result.value);\n            case 'bigint':\n                return BigInt(result.value);\n            case 'boolean':\n                return Boolean(result.value);\n            case 'string':\n                return result.value;\n        }\n        debugError(`Deserialization of type ${result.type} not supported.`);\n        return undefined;\n    }\n    static #deserializeNumber(value) {\n        switch (value) {\n            case '-0':\n                return -0;\n            case 'NaN':\n                return NaN;\n            case 'Infinity':\n                return Infinity;\n            case '-Infinity':\n                return -Infinity;\n            default:\n                return value;\n        }\n    }\n    static #deserializeTuple([serializedKey, serializedValue]) {\n        const key = typeof serializedKey === 'string'\n            ? serializedKey\n            : this.deserialize(serializedKey);\n        const value = this.deserialize(serializedValue);\n        return { key, value };\n    }\n}\n//# sourceMappingURL=Deserializer.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { JSHandle } from '../api/JSHandle.js';\nimport { UnsupportedOperation } from '../common/Errors.js';\nimport { BidiDeserializer } from './Deserializer.js';\n/**\n * @internal\n */\nexport class BidiJSHandle extends JSHandle {\n    static from(value, realm) {\n        return new BidiJSHandle(value, realm);\n    }\n    #remoteValue;\n    realm;\n    #disposed = false;\n    constructor(value, realm) {\n        super();\n        this.#remoteValue = value;\n        this.realm = realm;\n    }\n    get disposed() {\n        return this.#disposed;\n    }\n    async jsonValue() {\n        return await this.evaluate(value => {\n            return value;\n        });\n    }\n    asElement() {\n        return null;\n    }\n    async dispose() {\n        if (this.#disposed) {\n            return;\n        }\n        this.#disposed = true;\n        await this.realm.destroyHandles([this]);\n    }\n    get isPrimitiveValue() {\n        switch (this.#remoteValue.type) {\n            case 'string':\n            case 'number':\n            case 'bigint':\n            case 'boolean':\n            case 'undefined':\n            case 'null':\n                return true;\n            default:\n                return false;\n        }\n    }\n    toString() {\n        if (this.isPrimitiveValue) {\n            return 'JSHandle:' + BidiDeserializer.deserialize(this.#remoteValue);\n        }\n        return 'JSHandle@' + this.#remoteValue.type;\n    }\n    get id() {\n        return 'handle' in this.#remoteValue ? this.#remoteValue.handle : undefined;\n    }\n    remoteValue() {\n        return this.#remoteValue;\n    }\n    remoteObject() {\n        throw new UnsupportedOperation('Not available in WebDriver BiDi');\n    }\n}\n//# sourceMappingURL=JSHandle.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        var r, s = 0;\n        function next() {\n            while (r = env.stack.pop()) {\n                try {\n                    if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n                    if (r.dispose) {\n                        var result = r.dispose.call(r.value);\n                        if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                    }\n                    else s |= 1;\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { bindIsolatedHandle, ElementHandle, } from '../api/ElementHandle.js';\nimport { UnsupportedOperation } from '../common/Errors.js';\nimport { environment } from '../environment.js';\nimport { AsyncIterableUtil } from '../util/AsyncIterableUtil.js';\nimport { throwIfDisposed } from '../util/decorators.js';\nimport { BidiJSHandle } from './JSHandle.js';\n/**\n * @internal\n */\nlet BidiElementHandle = (() => {\n    let _classSuper = ElementHandle;\n    let _instanceExtraInitializers = [];\n    let _autofill_decorators;\n    let _contentFrame_decorators;\n    return class BidiElementHandle extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            _autofill_decorators = [throwIfDisposed()];\n            _contentFrame_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            __esDecorate(this, null, _autofill_decorators, { kind: \"method\", name: \"autofill\", static: false, private: false, access: { has: obj => \"autofill\" in obj, get: obj => obj.autofill }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _contentFrame_decorators, { kind: \"method\", name: \"contentFrame\", static: false, private: false, access: { has: obj => \"contentFrame\" in obj, get: obj => obj.contentFrame }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        #backendNodeId = __runInitializers(this, _instanceExtraInitializers);\n        static from(value, realm) {\n            return new BidiElementHandle(value, realm);\n        }\n        constructor(value, realm) {\n            super(BidiJSHandle.from(value, realm));\n        }\n        get realm() {\n            // SAFETY: See the super call in the constructor.\n            return this.handle.realm;\n        }\n        get frame() {\n            return this.realm.environment;\n        }\n        remoteValue() {\n            return this.handle.remoteValue();\n        }\n        async autofill(data) {\n            const client = this.frame.client;\n            const nodeInfo = await client.send('DOM.describeNode', {\n                objectId: this.handle.id,\n            });\n            const fieldId = nodeInfo.node.backendNodeId;\n            const frameId = this.frame._id;\n            await client.send('Autofill.trigger', {\n                fieldId,\n                frameId,\n                card: data.creditCard,\n            });\n        }\n        async contentFrame() {\n            const env_1 = { stack: [], error: void 0, hasError: false };\n            try {\n                const handle = __addDisposableResource(env_1, (await this.evaluateHandle(element => {\n                    if (element instanceof HTMLIFrameElement ||\n                        element instanceof HTMLFrameElement) {\n                        return element.contentWindow;\n                    }\n                    return;\n                })), false);\n                const value = handle.remoteValue();\n                if (value.type === 'window') {\n                    return (this.frame\n                        .page()\n                        .frames()\n                        .find(frame => {\n                        return frame._id === value.value.context;\n                    }) ?? null);\n                }\n                return null;\n            }\n            catch (e_1) {\n                env_1.error = e_1;\n                env_1.hasError = true;\n            }\n            finally {\n                __disposeResources(env_1);\n            }\n        }\n        async uploadFile(...files) {\n            // Locate all files and confirm that they exist.\n            const path = environment.value.path;\n            if (path) {\n                files = files.map(file => {\n                    if (path.win32.isAbsolute(file) || path.posix.isAbsolute(file)) {\n                        return file;\n                    }\n                    else {\n                        return path.resolve(file);\n                    }\n                });\n            }\n            await this.frame.setFiles(this, files);\n        }\n        async *queryAXTree(name, role) {\n            const results = await this.frame.locateNodes(this, {\n                type: 'accessibility',\n                value: {\n                    role,\n                    name,\n                },\n            });\n            return yield* AsyncIterableUtil.map(results, node => {\n                // TODO: maybe change ownership since the default ownership is probably none.\n                return Promise.resolve(BidiElementHandle.from(node, this.realm));\n            });\n        }\n        async backendNodeId() {\n            if (!this.frame.page().browser().cdpSupported) {\n                throw new UnsupportedOperation();\n            }\n            if (this.#backendNodeId) {\n                return this.#backendNodeId;\n            }\n            const { node } = await this.frame.client.send('DOM.describeNode', {\n                objectId: this.handle.id,\n            });\n            this.#backendNodeId = node.backendNodeId;\n            return this.#backendNodeId;\n        }\n    };\n})();\nexport { BidiElementHandle };\n//# sourceMappingURL=ElementHandle.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { Dialog } from '../api/Dialog.js';\nexport class BidiDialog extends Dialog {\n    static from(prompt) {\n        return new BidiDialog(prompt);\n    }\n    #prompt;\n    constructor(prompt) {\n        super(prompt.info.type, prompt.info.message, prompt.info.defaultValue);\n        this.#prompt = prompt;\n        this.handled = prompt.handled;\n    }\n    async handle(options) {\n        await this.#prompt.handle({\n            accept: options.accept,\n            userText: options.text,\n        });\n    }\n}\n//# sourceMappingURL=Dialog.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        var r, s = 0;\n        function next() {\n            while (r = env.stack.pop()) {\n                try {\n                    if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n                    if (r.dispose) {\n                        var result = r.dispose.call(r.value);\n                        if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                    }\n                    else s |= 1;\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport * as Bidi from 'chromium-bidi/lib/cjs/protocol/protocol.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { debugError } from '../common/util.js';\nimport { DisposableStack } from '../util/disposable.js';\nimport { interpolateFunction, stringifyFunction } from '../util/Function.js';\nimport { BidiElementHandle } from './ElementHandle.js';\nimport { BidiJSHandle } from './JSHandle.js';\n/**\n * @internal\n */\nexport class ExposableFunction {\n    static async from(frame, name, apply, isolate = false) {\n        const func = new ExposableFunction(frame, name, apply, isolate);\n        await func.#initialize();\n        return func;\n    }\n    #frame;\n    name;\n    #apply;\n    #isolate;\n    #channel;\n    #scripts = [];\n    #disposables = new DisposableStack();\n    constructor(frame, name, apply, isolate = false) {\n        this.#frame = frame;\n        this.name = name;\n        this.#apply = apply;\n        this.#isolate = isolate;\n        this.#channel = `__puppeteer__${this.#frame._id}_page_exposeFunction_${this.name}`;\n    }\n    async #initialize() {\n        const connection = this.#connection;\n        const channel = {\n            type: 'channel',\n            value: {\n                channel: this.#channel,\n                ownership: \"root\" /* Bidi.Script.ResultOwnership.Root */,\n            },\n        };\n        const connectionEmitter = this.#disposables.use(new EventEmitter(connection));\n        connectionEmitter.on(Bidi.ChromiumBidi.Script.EventNames.Message, this.#handleMessage);\n        const functionDeclaration = stringifyFunction(interpolateFunction((callback) => {\n            Object.assign(globalThis, {\n                [PLACEHOLDER('name')]: function (...args) {\n                    return new Promise((resolve, reject) => {\n                        callback([resolve, reject, args]);\n                    });\n                },\n            });\n        }, { name: JSON.stringify(this.name) }));\n        const frames = [this.#frame];\n        for (const frame of frames) {\n            frames.push(...frame.childFrames());\n        }\n        await Promise.all(frames.map(async (frame) => {\n            const realm = this.#isolate ? frame.isolatedRealm() : frame.mainRealm();\n            try {\n                const [script] = await Promise.all([\n                    frame.browsingContext.addPreloadScript(functionDeclaration, {\n                        arguments: [channel],\n                        sandbox: realm.sandbox,\n                    }),\n                    realm.realm.callFunction(functionDeclaration, false, {\n                        arguments: [channel],\n                    }),\n                ]);\n                this.#scripts.push([frame, script]);\n            }\n            catch (error) {\n                // If it errors, the frame probably doesn't support call function. We\n                // fail gracefully.\n                debugError(error);\n            }\n        }));\n    }\n    get #connection() {\n        return this.#frame.page().browser().connection;\n    }\n    #handleMessage = async (params) => {\n        const env_1 = { stack: [], error: void 0, hasError: false };\n        try {\n            if (params.channel !== this.#channel) {\n                return;\n            }\n            const realm = this.#getRealm(params.source);\n            if (!realm) {\n                // Unrelated message.\n                return;\n            }\n            const dataHandle = __addDisposableResource(env_1, BidiJSHandle.from(params.data, realm), false);\n            const stack = __addDisposableResource(env_1, new DisposableStack(), false);\n            const args = [];\n            let result;\n            try {\n                const env_2 = { stack: [], error: void 0, hasError: false };\n                try {\n                    const argsHandle = __addDisposableResource(env_2, await dataHandle.evaluateHandle(([, , args]) => {\n                        return args;\n                    }), false);\n                    for (const [index, handle] of await argsHandle.getProperties()) {\n                        stack.use(handle);\n                        // Element handles are passed as is.\n                        if (handle instanceof BidiElementHandle) {\n                            args[+index] = handle;\n                            stack.use(handle);\n                            continue;\n                        }\n                        // Everything else is passed as the JS value.\n                        args[+index] = handle.jsonValue();\n                    }\n                    result = await this.#apply(...(await Promise.all(args)));\n                }\n                catch (e_1) {\n                    env_2.error = e_1;\n                    env_2.hasError = true;\n                }\n                finally {\n                    __disposeResources(env_2);\n                }\n            }\n            catch (error) {\n                try {\n                    if (error instanceof Error) {\n                        await dataHandle.evaluate(([, reject], name, message, stack) => {\n                            const error = new Error(message);\n                            error.name = name;\n                            if (stack) {\n                                error.stack = stack;\n                            }\n                            reject(error);\n                        }, error.name, error.message, error.stack);\n                    }\n                    else {\n                        await dataHandle.evaluate(([, reject], error) => {\n                            reject(error);\n                        }, error);\n                    }\n                }\n                catch (error) {\n                    debugError(error);\n                }\n                return;\n            }\n            try {\n                await dataHandle.evaluate(([resolve], result) => {\n                    resolve(result);\n                }, result);\n            }\n            catch (error) {\n                debugError(error);\n            }\n        }\n        catch (e_2) {\n            env_1.error = e_2;\n            env_1.hasError = true;\n        }\n        finally {\n            __disposeResources(env_1);\n        }\n    };\n    #getRealm(source) {\n        const frame = this.#findFrame(source.context);\n        if (!frame) {\n            // Unrelated message.\n            return;\n        }\n        return frame.realm(source.realm);\n    }\n    #findFrame(id) {\n        const frames = [this.#frame];\n        for (const frame of frames) {\n            if (frame._id === id) {\n                return frame;\n            }\n            frames.push(...frame.childFrames());\n        }\n        return;\n    }\n    [Symbol.dispose]() {\n        void this[Symbol.asyncDispose]().catch(debugError);\n    }\n    async [Symbol.asyncDispose]() {\n        this.#disposables.dispose();\n        await Promise.all(this.#scripts.map(async ([frame, script]) => {\n            const realm = this.#isolate ? frame.isolatedRealm() : frame.mainRealm();\n            try {\n                await Promise.all([\n                    realm.evaluate(name => {\n                        delete globalThis[name];\n                    }, this.name),\n                    ...frame.childFrames().map(childFrame => {\n                        return childFrame.evaluate(name => {\n                            delete globalThis[name];\n                        }, this.name);\n                    }),\n                    frame.browsingContext.removePreloadScript(script),\n                ]);\n            }\n            catch (error) {\n                debugError(error);\n            }\n        }));\n    }\n}\n//# sourceMappingURL=ExposedFunction.js.map","var __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nimport { HTTPResponse } from '../api/HTTPResponse.js';\nimport { UnsupportedOperation } from '../common/Errors.js';\nimport { SecurityDetails } from '../common/SecurityDetails.js';\nimport { invokeAtMostOnceForArguments } from '../util/decorators.js';\n/**\n * @internal\n */\nlet BidiHTTPResponse = (() => {\n    let _classSuper = HTTPResponse;\n    let _instanceExtraInitializers = [];\n    let _remoteAddress_decorators;\n    return class BidiHTTPResponse extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            _remoteAddress_decorators = [invokeAtMostOnceForArguments];\n            __esDecorate(this, null, _remoteAddress_decorators, { kind: \"method\", name: \"remoteAddress\", static: false, private: false, access: { has: obj => \"remoteAddress\" in obj, get: obj => obj.remoteAddress }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        static from(data, request, cdpSupported) {\n            const response = new BidiHTTPResponse(data, request, cdpSupported);\n            response.#initialize();\n            return response;\n        }\n        #data = __runInitializers(this, _instanceExtraInitializers);\n        #request;\n        #securityDetails;\n        #cdpSupported = false;\n        constructor(data, request, cdpSupported) {\n            super();\n            this.#data = data;\n            this.#request = request;\n            this.#cdpSupported = cdpSupported;\n            // @ts-expect-error non-standard property.\n            const securityDetails = data['goog:securityDetails'];\n            if (cdpSupported && securityDetails) {\n                this.#securityDetails = new SecurityDetails(securityDetails);\n            }\n        }\n        #initialize() {\n            if (this.#data.fromCache) {\n                this.#request._fromMemoryCache = true;\n                this.#request\n                    .frame()\n                    ?.page()\n                    .trustedEmitter.emit(\"requestservedfromcache\" /* PageEvent.RequestServedFromCache */, this.#request);\n            }\n            this.#request.frame()?.page().trustedEmitter.emit(\"response\" /* PageEvent.Response */, this);\n        }\n        remoteAddress() {\n            return {\n                ip: '',\n                port: -1,\n            };\n        }\n        url() {\n            return this.#data.url;\n        }\n        status() {\n            return this.#data.status;\n        }\n        statusText() {\n            return this.#data.statusText;\n        }\n        headers() {\n            const headers = {};\n            for (const header of this.#data.headers) {\n                // TODO: How to handle Binary Headers\n                // https://w3c.github.io/webdriver-bidi/#type-network-Header\n                if (header.value.type === 'string') {\n                    headers[header.name.toLowerCase()] = header.value.value;\n                }\n            }\n            return headers;\n        }\n        request() {\n            return this.#request;\n        }\n        fromCache() {\n            return this.#data.fromCache;\n        }\n        timing() {\n            const bidiTiming = this.#request.timing();\n            return {\n                requestTime: bidiTiming.requestTime,\n                proxyStart: -1,\n                proxyEnd: -1,\n                dnsStart: bidiTiming.dnsStart,\n                dnsEnd: bidiTiming.dnsEnd,\n                connectStart: bidiTiming.connectStart,\n                connectEnd: bidiTiming.connectEnd,\n                sslStart: bidiTiming.tlsStart,\n                sslEnd: -1,\n                workerStart: -1,\n                workerReady: -1,\n                workerFetchStart: -1,\n                workerRespondWithSettled: -1,\n                workerRouterEvaluationStart: -1,\n                workerCacheLookupStart: -1,\n                sendStart: bidiTiming.requestStart,\n                sendEnd: -1,\n                pushStart: -1,\n                pushEnd: -1,\n                receiveHeadersStart: bidiTiming.responseStart,\n                receiveHeadersEnd: bidiTiming.responseEnd,\n            };\n        }\n        frame() {\n            return this.#request.frame();\n        }\n        fromServiceWorker() {\n            return false;\n        }\n        securityDetails() {\n            if (!this.#cdpSupported) {\n                throw new UnsupportedOperation();\n            }\n            return this.#securityDetails ?? null;\n        }\n        async content() {\n            return await this.#request.getResponseContent();\n        }\n    };\n})();\nexport { BidiHTTPResponse };\n//# sourceMappingURL=HTTPResponse.js.map","var _a;\nimport { HTTPRequest, STATUS_TEXTS, handleError, } from '../api/HTTPRequest.js';\nimport { UnsupportedOperation } from '../common/Errors.js';\nimport { stringToBase64 } from '../util/encoding.js';\nimport { BidiHTTPResponse } from './HTTPResponse.js';\nexport const requests = new WeakMap();\n/**\n * @internal\n */\nexport class BidiHTTPRequest extends HTTPRequest {\n    static from(bidiRequest, frame, redirect) {\n        const request = new _a(bidiRequest, frame, redirect);\n        request.#initialize();\n        return request;\n    }\n    #redirectChain;\n    #response = null;\n    id;\n    #frame;\n    #request;\n    constructor(request, frame, redirect) {\n        super();\n        requests.set(request, this);\n        this.interception.enabled = request.isBlocked;\n        this.#request = request;\n        this.#frame = frame;\n        this.#redirectChain = redirect ? redirect.#redirectChain : [];\n        this.id = request.id;\n    }\n    get client() {\n        return this.#frame.client;\n    }\n    #initialize() {\n        this.#request.on('redirect', request => {\n            const httpRequest = _a.from(request, this.#frame, this);\n            this.#redirectChain.push(this);\n            request.once('success', () => {\n                this.#frame\n                    .page()\n                    .trustedEmitter.emit(\"requestfinished\" /* PageEvent.RequestFinished */, httpRequest);\n            });\n            request.once('error', () => {\n                this.#frame\n                    .page()\n                    .trustedEmitter.emit(\"requestfailed\" /* PageEvent.RequestFailed */, httpRequest);\n            });\n            void httpRequest.finalizeInterceptions();\n        });\n        this.#request.once('success', data => {\n            this.#response = BidiHTTPResponse.from(data, this, this.#frame.page().browser().cdpSupported);\n        });\n        this.#request.on('authenticate', this.#handleAuthentication);\n        this.#frame.page().trustedEmitter.emit(\"request\" /* PageEvent.Request */, this);\n        if (this.#hasInternalHeaderOverwrite) {\n            this.interception.handlers.push(async () => {\n                await this.continue({\n                    headers: this.headers(),\n                }, 0);\n            });\n        }\n    }\n    url() {\n        return this.#request.url;\n    }\n    resourceType() {\n        if (!this.#frame.page().browser().cdpSupported) {\n            throw new UnsupportedOperation();\n        }\n        return (this.#request.resourceType || 'other').toLowerCase();\n    }\n    method() {\n        return this.#request.method;\n    }\n    postData() {\n        if (!this.#frame.page().browser().cdpSupported) {\n            throw new UnsupportedOperation();\n        }\n        return this.#request.postData;\n    }\n    hasPostData() {\n        if (!this.#frame.page().browser().cdpSupported) {\n            throw new UnsupportedOperation();\n        }\n        return this.#request.hasPostData;\n    }\n    async fetchPostData() {\n        throw new UnsupportedOperation();\n    }\n    get #hasInternalHeaderOverwrite() {\n        return Boolean(Object.keys(this.#extraHTTPHeaders).length ||\n            Object.keys(this.#userAgentHeaders).length);\n    }\n    get #extraHTTPHeaders() {\n        return this.#frame?.page()._extraHTTPHeaders ?? {};\n    }\n    get #userAgentHeaders() {\n        return this.#frame?.page()._userAgentHeaders ?? {};\n    }\n    headers() {\n        const headers = {};\n        for (const header of this.#request.headers) {\n            headers[header.name.toLowerCase()] = header.value.value;\n        }\n        return {\n            ...headers,\n            ...this.#extraHTTPHeaders,\n            ...this.#userAgentHeaders,\n        };\n    }\n    response() {\n        return this.#response;\n    }\n    failure() {\n        if (this.#request.error === undefined) {\n            return null;\n        }\n        return { errorText: this.#request.error };\n    }\n    isNavigationRequest() {\n        return this.#request.navigation !== undefined;\n    }\n    initiator() {\n        return {\n            ...this.#request.initiator,\n            type: this.#request.initiator?.type ?? 'other',\n        };\n    }\n    redirectChain() {\n        return this.#redirectChain.slice();\n    }\n    frame() {\n        return this.#frame;\n    }\n    async continue(overrides, priority) {\n        return await super.continue({\n            headers: this.#hasInternalHeaderOverwrite ? this.headers() : undefined,\n            ...overrides,\n        }, priority);\n    }\n    async _continue(overrides = {}) {\n        const headers = getBidiHeaders(overrides.headers);\n        this.interception.handled = true;\n        return await this.#request\n            .continueRequest({\n            url: overrides.url,\n            method: overrides.method,\n            body: overrides.postData\n                ? {\n                    type: 'base64',\n                    value: stringToBase64(overrides.postData),\n                }\n                : undefined,\n            headers: headers.length > 0 ? headers : undefined,\n        })\n            .catch(error => {\n            this.interception.handled = false;\n            return handleError(error);\n        });\n    }\n    async _abort() {\n        this.interception.handled = true;\n        return await this.#request.failRequest().catch(error => {\n            this.interception.handled = false;\n            throw error;\n        });\n    }\n    async _respond(response, _priority) {\n        this.interception.handled = true;\n        let parsedBody;\n        if (response.body) {\n            parsedBody = HTTPRequest.getResponse(response.body);\n        }\n        const headers = getBidiHeaders(response.headers);\n        const hasContentLength = headers.some(header => {\n            return header.name === 'content-length';\n        });\n        if (response.contentType) {\n            headers.push({\n                name: 'content-type',\n                value: {\n                    type: 'string',\n                    value: response.contentType,\n                },\n            });\n        }\n        if (parsedBody?.contentLength && !hasContentLength) {\n            headers.push({\n                name: 'content-length',\n                value: {\n                    type: 'string',\n                    value: String(parsedBody.contentLength),\n                },\n            });\n        }\n        const status = response.status || 200;\n        return await this.#request\n            .provideResponse({\n            statusCode: status,\n            headers: headers.length > 0 ? headers : undefined,\n            reasonPhrase: STATUS_TEXTS[status],\n            body: parsedBody?.base64\n                ? {\n                    type: 'base64',\n                    value: parsedBody?.base64,\n                }\n                : undefined,\n        })\n            .catch(error => {\n            this.interception.handled = false;\n            throw error;\n        });\n    }\n    #authenticationHandled = false;\n    #handleAuthentication = async () => {\n        if (!this.#frame) {\n            return;\n        }\n        const credentials = this.#frame.page()._credentials;\n        if (credentials && !this.#authenticationHandled) {\n            this.#authenticationHandled = true;\n            void this.#request.continueWithAuth({\n                action: 'provideCredentials',\n                credentials: {\n                    type: 'password',\n                    username: credentials.username,\n                    password: credentials.password,\n                },\n            });\n        }\n        else {\n            void this.#request.continueWithAuth({\n                action: 'cancel',\n            });\n        }\n    };\n    timing() {\n        return this.#request.timing();\n    }\n    getResponseContent() {\n        return this.#request.getResponseContent();\n    }\n}\n_a = BidiHTTPRequest;\nfunction getBidiHeaders(rawHeaders) {\n    const headers = [];\n    for (const [name, value] of Object.entries(rawHeaders ?? [])) {\n        if (!Object.is(value, undefined)) {\n            const values = Array.isArray(value) ? value : [value];\n            for (const value of values) {\n                headers.push({\n                    name: name.toLowerCase(),\n                    value: {\n                        type: 'string',\n                        value: String(value),\n                    },\n                });\n            }\n        }\n    }\n    return headers;\n}\n//# sourceMappingURL=HTTPRequest.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { isDate, isPlainObject, isRegExp } from '../common/util.js';\n/**\n * @internal\n */\nclass UnserializableError extends Error {\n}\n/**\n * @internal\n */\nexport class BidiSerializer {\n    static serialize(arg) {\n        switch (typeof arg) {\n            case 'symbol':\n            case 'function':\n                throw new UnserializableError(`Unable to serializable ${typeof arg}`);\n            case 'object':\n                return this.#serializeObject(arg);\n            case 'undefined':\n                return {\n                    type: 'undefined',\n                };\n            case 'number':\n                return this.#serializeNumber(arg);\n            case 'bigint':\n                return {\n                    type: 'bigint',\n                    value: arg.toString(),\n                };\n            case 'string':\n                return {\n                    type: 'string',\n                    value: arg,\n                };\n            case 'boolean':\n                return {\n                    type: 'boolean',\n                    value: arg,\n                };\n        }\n    }\n    static #serializeNumber(arg) {\n        let value;\n        if (Object.is(arg, -0)) {\n            value = '-0';\n        }\n        else if (Object.is(arg, Infinity)) {\n            value = 'Infinity';\n        }\n        else if (Object.is(arg, -Infinity)) {\n            value = '-Infinity';\n        }\n        else if (Object.is(arg, NaN)) {\n            value = 'NaN';\n        }\n        else {\n            value = arg;\n        }\n        return {\n            type: 'number',\n            value,\n        };\n    }\n    static #serializeObject(arg) {\n        if (arg === null) {\n            return {\n                type: 'null',\n            };\n        }\n        else if (Array.isArray(arg)) {\n            const parsedArray = arg.map(subArg => {\n                return this.serialize(subArg);\n            });\n            return {\n                type: 'array',\n                value: parsedArray,\n            };\n        }\n        else if (isPlainObject(arg)) {\n            try {\n                JSON.stringify(arg);\n            }\n            catch (error) {\n                if (error instanceof TypeError &&\n                    error.message.startsWith('Converting circular structure to JSON')) {\n                    error.message += ' Recursive objects are not allowed.';\n                }\n                throw error;\n            }\n            const parsedObject = [];\n            for (const key in arg) {\n                parsedObject.push([this.serialize(key), this.serialize(arg[key])]);\n            }\n            return {\n                type: 'object',\n                value: parsedObject,\n            };\n        }\n        else if (isRegExp(arg)) {\n            return {\n                type: 'regexp',\n                value: {\n                    pattern: arg.source,\n                    flags: arg.flags,\n                },\n            };\n        }\n        else if (isDate(arg)) {\n            return {\n                type: 'date',\n                value: arg.toISOString(),\n            };\n        }\n        throw new UnserializableError('Custom object serialization not possible. Use plain objects instead.');\n    }\n}\n//# sourceMappingURL=Serializer.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { ProtocolError, TimeoutError } from '../common/Errors.js';\nimport { PuppeteerURL } from '../common/util.js';\nimport { BidiDeserializer } from './Deserializer.js';\n/**\n * @internal\n */\nexport function createEvaluationError(details) {\n    if (details.exception.type !== 'error') {\n        return BidiDeserializer.deserialize(details.exception);\n    }\n    const [name = '', ...parts] = details.text.split(': ');\n    const message = parts.join(': ');\n    const error = new Error(message);\n    error.name = name;\n    // The first line is this function which we ignore.\n    const stackLines = [];\n    if (details.stackTrace && stackLines.length < Error.stackTraceLimit) {\n        for (const frame of details.stackTrace.callFrames.reverse()) {\n            if (PuppeteerURL.isPuppeteerURL(frame.url) &&\n                frame.url !== PuppeteerURL.INTERNAL_URL) {\n                const url = PuppeteerURL.parse(frame.url);\n                stackLines.unshift(`    at ${frame.functionName || url.functionName} (${url.functionName} at ${url.siteString}, <anonymous>:${frame.lineNumber}:${frame.columnNumber})`);\n            }\n            else {\n                stackLines.push(`    at ${frame.functionName || '<anonymous>'} (${frame.url}:${frame.lineNumber}:${frame.columnNumber})`);\n            }\n            if (stackLines.length >= Error.stackTraceLimit) {\n                break;\n            }\n        }\n    }\n    error.stack = [details.text, ...stackLines].join('\\n');\n    return error;\n}\n/**\n * @internal\n */\nexport function rewriteNavigationError(message, ms) {\n    return error => {\n        if (error instanceof ProtocolError) {\n            error.message += ` at ${message}`;\n        }\n        else if (error instanceof TimeoutError) {\n            error.message = `Navigation timeout of ${ms} ms exceeded`;\n        }\n        throw error;\n    };\n}\n//# sourceMappingURL=util.js.map","var __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        var r, s = 0;\n        function next() {\n            while (r = env.stack.pop()) {\n                try {\n                    if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n                    if (r.dispose) {\n                        var result = r.dispose.call(r.value);\n                        if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                    }\n                    else s |= 1;\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { Realm } from '../api/Realm.js';\nimport { ARIAQueryHandler } from '../cdp/AriaQueryHandler.js';\nimport { LazyArg } from '../common/LazyArg.js';\nimport { scriptInjector } from '../common/ScriptInjector.js';\nimport { debugError, getSourcePuppeteerURLIfAvailable, getSourceUrlComment, isString, PuppeteerURL, SOURCE_URL_REGEX, } from '../common/util.js';\nimport { AsyncIterableUtil } from '../util/AsyncIterableUtil.js';\nimport { stringifyFunction } from '../util/Function.js';\nimport { BidiDeserializer } from './Deserializer.js';\nimport { BidiElementHandle } from './ElementHandle.js';\nimport { ExposableFunction } from './ExposedFunction.js';\nimport { BidiJSHandle } from './JSHandle.js';\nimport { BidiSerializer } from './Serializer.js';\nimport { createEvaluationError } from './util.js';\n/**\n * @internal\n */\nexport class BidiRealm extends Realm {\n    realm;\n    constructor(realm, timeoutSettings) {\n        super(timeoutSettings);\n        this.realm = realm;\n    }\n    initialize() {\n        this.realm.on('destroyed', ({ reason }) => {\n            this.taskManager.terminateAll(new Error(reason));\n            this.dispose();\n        });\n        this.realm.on('updated', () => {\n            this.internalPuppeteerUtil = undefined;\n            void this.taskManager.rerunAll();\n        });\n    }\n    internalPuppeteerUtil;\n    get puppeteerUtil() {\n        const promise = Promise.resolve();\n        scriptInjector.inject(script => {\n            if (this.internalPuppeteerUtil) {\n                void this.internalPuppeteerUtil.then(handle => {\n                    void handle.dispose();\n                });\n            }\n            this.internalPuppeteerUtil = promise.then(() => {\n                return this.evaluateHandle(script);\n            });\n        }, !this.internalPuppeteerUtil);\n        return this.internalPuppeteerUtil;\n    }\n    async evaluateHandle(pageFunction, ...args) {\n        return await this.#evaluate(false, pageFunction, ...args);\n    }\n    async evaluate(pageFunction, ...args) {\n        return await this.#evaluate(true, pageFunction, ...args);\n    }\n    async #evaluate(returnByValue, pageFunction, ...args) {\n        const sourceUrlComment = getSourceUrlComment(getSourcePuppeteerURLIfAvailable(pageFunction)?.toString() ??\n            PuppeteerURL.INTERNAL_URL);\n        let responsePromise;\n        const resultOwnership = returnByValue\n            ? \"none\" /* Bidi.Script.ResultOwnership.None */\n            : \"root\" /* Bidi.Script.ResultOwnership.Root */;\n        const serializationOptions = returnByValue\n            ? {}\n            : {\n                maxObjectDepth: 0,\n                maxDomDepth: 0,\n            };\n        if (isString(pageFunction)) {\n            const expression = SOURCE_URL_REGEX.test(pageFunction)\n                ? pageFunction\n                : `${pageFunction}\\n${sourceUrlComment}\\n`;\n            responsePromise = this.realm.evaluate(expression, true, {\n                resultOwnership,\n                userActivation: true,\n                serializationOptions,\n            });\n        }\n        else {\n            let functionDeclaration = stringifyFunction(pageFunction);\n            functionDeclaration = SOURCE_URL_REGEX.test(functionDeclaration)\n                ? functionDeclaration\n                : `${functionDeclaration}\\n${sourceUrlComment}\\n`;\n            responsePromise = this.realm.callFunction(functionDeclaration, \n            /* awaitPromise= */ true, {\n                // LazyArgs are used only internally and should not affect the order\n                // evaluate calls for the public APIs.\n                arguments: args.some(arg => {\n                    return arg instanceof LazyArg;\n                })\n                    ? await Promise.all(args.map(arg => {\n                        return this.serializeAsync(arg);\n                    }))\n                    : args.map(arg => {\n                        return this.serialize(arg);\n                    }),\n                resultOwnership,\n                userActivation: true,\n                serializationOptions,\n            });\n        }\n        const result = await responsePromise;\n        if ('type' in result && result.type === 'exception') {\n            throw createEvaluationError(result.exceptionDetails);\n        }\n        if (returnByValue) {\n            return BidiDeserializer.deserialize(result.result);\n        }\n        return this.createHandle(result.result);\n    }\n    createHandle(result) {\n        if ((result.type === 'node' || result.type === 'window') &&\n            this instanceof BidiFrameRealm) {\n            return BidiElementHandle.from(result, this);\n        }\n        return BidiJSHandle.from(result, this);\n    }\n    async serializeAsync(arg) {\n        if (arg instanceof LazyArg) {\n            arg = await arg.get(this);\n        }\n        return this.serialize(arg);\n    }\n    serialize(arg) {\n        if (arg instanceof BidiJSHandle || arg instanceof BidiElementHandle) {\n            if (arg.realm !== this) {\n                if (!(arg.realm instanceof BidiFrameRealm) ||\n                    !(this instanceof BidiFrameRealm)) {\n                    throw new Error(\"Trying to evaluate JSHandle from different global types. Usually this means you're using a handle from a worker in a page or vice versa.\");\n                }\n                if (arg.realm.environment !== this.environment) {\n                    throw new Error(\"Trying to evaluate JSHandle from different frames. Usually this means you're using a handle from a page on a different page.\");\n                }\n            }\n            if (arg.disposed) {\n                throw new Error('JSHandle is disposed!');\n            }\n            return arg.remoteValue();\n        }\n        return BidiSerializer.serialize(arg);\n    }\n    async destroyHandles(handles) {\n        if (this.disposed) {\n            return;\n        }\n        const handleIds = handles\n            .map(({ id }) => {\n            return id;\n        })\n            .filter((id) => {\n            return id !== undefined;\n        });\n        if (handleIds.length === 0) {\n            return;\n        }\n        await this.realm.disown(handleIds).catch(error => {\n            // Exceptions might happen in case of a page been navigated or closed.\n            // Swallow these since they are harmless and we don't leak anything in this case.\n            debugError(error);\n        });\n    }\n    async adoptHandle(handle) {\n        return (await this.evaluateHandle(node => {\n            return node;\n        }, handle));\n    }\n    async transferHandle(handle) {\n        if (handle.realm === this) {\n            return handle;\n        }\n        const transferredHandle = this.adoptHandle(handle);\n        await handle.dispose();\n        return await transferredHandle;\n    }\n}\n/**\n * @internal\n */\nexport class BidiFrameRealm extends BidiRealm {\n    static from(realm, frame) {\n        const frameRealm = new BidiFrameRealm(realm, frame);\n        frameRealm.#initialize();\n        return frameRealm;\n    }\n    #frame;\n    constructor(realm, frame) {\n        super(realm, frame.timeoutSettings);\n        this.#frame = frame;\n    }\n    #initialize() {\n        super.initialize();\n        // This should run first.\n        this.realm.on('updated', () => {\n            this.environment.clearDocumentHandle();\n            this.#bindingsInstalled = false;\n        });\n    }\n    #bindingsInstalled = false;\n    get puppeteerUtil() {\n        let promise = Promise.resolve();\n        if (!this.#bindingsInstalled) {\n            promise = Promise.all([\n                ExposableFunction.from(this.environment, '__ariaQuerySelector', ARIAQueryHandler.queryOne, !!this.sandbox),\n                ExposableFunction.from(this.environment, '__ariaQuerySelectorAll', async (element, selector) => {\n                    const results = ARIAQueryHandler.queryAll(element, selector);\n                    return await element.realm.evaluateHandle((...elements) => {\n                        return elements;\n                    }, ...(await AsyncIterableUtil.collect(results)));\n                }, !!this.sandbox),\n            ]);\n            this.#bindingsInstalled = true;\n        }\n        return promise.then(() => {\n            return super.puppeteerUtil;\n        });\n    }\n    get sandbox() {\n        return this.realm.sandbox;\n    }\n    get environment() {\n        return this.#frame;\n    }\n    async adoptBackendNode(backendNodeId) {\n        const env_1 = { stack: [], error: void 0, hasError: false };\n        try {\n            const { object } = await this.#frame.client.send('DOM.resolveNode', {\n                backendNodeId,\n                executionContextId: await this.realm.resolveExecutionContextId(),\n            });\n            const handle = __addDisposableResource(env_1, BidiElementHandle.from({\n                handle: object.objectId,\n                type: 'node',\n            }, this), false);\n            // We need the sharedId, so we perform the following to obtain it.\n            return await handle.evaluateHandle(element => {\n                return element;\n            });\n        }\n        catch (e_1) {\n            env_1.error = e_1;\n            env_1.hasError = true;\n        }\n        finally {\n            __disposeResources(env_1);\n        }\n    }\n}\n/**\n * @internal\n */\nexport class BidiWorkerRealm extends BidiRealm {\n    static from(realm, worker) {\n        const workerRealm = new BidiWorkerRealm(realm, worker);\n        workerRealm.initialize();\n        return workerRealm;\n    }\n    #worker;\n    constructor(realm, frame) {\n        super(realm, frame.timeoutSettings);\n        this.#worker = frame;\n    }\n    get environment() {\n        return this.#worker;\n    }\n    async adoptBackendNode() {\n        throw new Error('Cannot adopt DOM nodes into a worker.');\n    }\n}\n//# sourceMappingURL=Realm.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { WebWorker } from '../api/WebWorker.js';\nimport { UnsupportedOperation } from '../common/Errors.js';\nimport { BidiWorkerRealm } from './Realm.js';\n/**\n * @internal\n */\nexport class BidiWebWorker extends WebWorker {\n    static from(frame, realm) {\n        const worker = new BidiWebWorker(frame, realm);\n        return worker;\n    }\n    #frame;\n    #realm;\n    constructor(frame, realm) {\n        super(realm.origin);\n        this.#frame = frame;\n        this.#realm = BidiWorkerRealm.from(realm, this);\n    }\n    get frame() {\n        return this.#frame;\n    }\n    mainRealm() {\n        return this.#realm;\n    }\n    get client() {\n        throw new UnsupportedOperation();\n    }\n}\n//# sourceMappingURL=WebWorker.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar __setFunctionName = (this && this.__setFunctionName) || function (f, name, prefix) {\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\nimport { combineLatest, defer, delayWhen, filter, first, firstValueFrom, map, of, race, raceWith, switchMap, } from '../../third_party/rxjs/rxjs.js';\nimport { Frame, throwIfDetached, } from '../api/Frame.js';\nimport { Accessibility } from '../cdp/Accessibility.js';\nimport { ConsoleMessage, } from '../common/ConsoleMessage.js';\nimport { TargetCloseError, UnsupportedOperation } from '../common/Errors.js';\nimport { debugError, fromAbortSignal, fromEmitterEvent, timeout, } from '../common/util.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { BidiCdpSession } from './CDPSession.js';\nimport { BidiDeserializer } from './Deserializer.js';\nimport { BidiDialog } from './Dialog.js';\nimport { ExposableFunction } from './ExposedFunction.js';\nimport { BidiHTTPRequest, requests } from './HTTPRequest.js';\nimport { BidiJSHandle } from './JSHandle.js';\nimport { BidiFrameRealm } from './Realm.js';\nimport { rewriteNavigationError } from './util.js';\nimport { BidiWebWorker } from './WebWorker.js';\n// TODO: Remove this and map CDP the correct method.\n// Requires breaking change.\nfunction convertConsoleMessageLevel(method) {\n    switch (method) {\n        case 'group':\n            return 'startGroup';\n        case 'groupCollapsed':\n            return 'startGroupCollapsed';\n        case 'groupEnd':\n            return 'endGroup';\n        default:\n            return method;\n    }\n}\nlet BidiFrame = (() => {\n    var _a;\n    let _classSuper = Frame;\n    let _instanceExtraInitializers = [];\n    let _goto_decorators;\n    let _setContent_decorators;\n    let _waitForNavigation_decorators;\n    let _private_waitForLoad$_decorators;\n    let _private_waitForLoad$_descriptor;\n    let _private_waitForNetworkIdle$_decorators;\n    let _private_waitForNetworkIdle$_descriptor;\n    let _setFiles_decorators;\n    let _locateNodes_decorators;\n    return class BidiFrame extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            _goto_decorators = [throwIfDetached];\n            _setContent_decorators = [throwIfDetached];\n            _waitForNavigation_decorators = [throwIfDetached];\n            _private_waitForLoad$_decorators = [throwIfDetached];\n            _private_waitForNetworkIdle$_decorators = [throwIfDetached];\n            _setFiles_decorators = [throwIfDetached];\n            _locateNodes_decorators = [throwIfDetached];\n            __esDecorate(this, null, _goto_decorators, { kind: \"method\", name: \"goto\", static: false, private: false, access: { has: obj => \"goto\" in obj, get: obj => obj.goto }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _setContent_decorators, { kind: \"method\", name: \"setContent\", static: false, private: false, access: { has: obj => \"setContent\" in obj, get: obj => obj.setContent }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _waitForNavigation_decorators, { kind: \"method\", name: \"waitForNavigation\", static: false, private: false, access: { has: obj => \"waitForNavigation\" in obj, get: obj => obj.waitForNavigation }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_waitForLoad$_descriptor = { value: __setFunctionName(function (options = {}) {\n                    let { waitUntil = 'load' } = options;\n                    const { timeout: ms = this.timeoutSettings.navigationTimeout() } = options;\n                    if (!Array.isArray(waitUntil)) {\n                        waitUntil = [waitUntil];\n                    }\n                    const events = new Set();\n                    for (const lifecycleEvent of waitUntil) {\n                        switch (lifecycleEvent) {\n                            case 'load': {\n                                events.add('load');\n                                break;\n                            }\n                            case 'domcontentloaded': {\n                                events.add('DOMContentLoaded');\n                                break;\n                            }\n                        }\n                    }\n                    if (events.size === 0) {\n                        return of(undefined);\n                    }\n                    return combineLatest([...events].map(event => {\n                        return fromEmitterEvent(this.browsingContext, event);\n                    })).pipe(map(() => { }), first(), raceWith(timeout(ms), this.#detached$().pipe(map(() => {\n                        throw new Error('Frame detached.');\n                    }))));\n                }, \"#waitForLoad$\") }, _private_waitForLoad$_decorators, { kind: \"method\", name: \"#waitForLoad$\", static: false, private: true, access: { has: obj => #waitForLoad$ in obj, get: obj => obj.#waitForLoad$ }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_waitForNetworkIdle$_descriptor = { value: __setFunctionName(function (options = {}) {\n                    let { waitUntil = 'load' } = options;\n                    if (!Array.isArray(waitUntil)) {\n                        waitUntil = [waitUntil];\n                    }\n                    let concurrency = Infinity;\n                    for (const event of waitUntil) {\n                        switch (event) {\n                            case 'networkidle0': {\n                                concurrency = Math.min(0, concurrency);\n                                break;\n                            }\n                            case 'networkidle2': {\n                                concurrency = Math.min(2, concurrency);\n                                break;\n                            }\n                        }\n                    }\n                    if (concurrency === Infinity) {\n                        return of(undefined);\n                    }\n                    return this.page().waitForNetworkIdle$({\n                        idleTime: 500,\n                        timeout: options.timeout ?? this.timeoutSettings.timeout(),\n                        concurrency,\n                    });\n                }, \"#waitForNetworkIdle$\") }, _private_waitForNetworkIdle$_decorators, { kind: \"method\", name: \"#waitForNetworkIdle$\", static: false, private: true, access: { has: obj => #waitForNetworkIdle$ in obj, get: obj => obj.#waitForNetworkIdle$ }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _setFiles_decorators, { kind: \"method\", name: \"setFiles\", static: false, private: false, access: { has: obj => \"setFiles\" in obj, get: obj => obj.setFiles }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _locateNodes_decorators, { kind: \"method\", name: \"locateNodes\", static: false, private: false, access: { has: obj => \"locateNodes\" in obj, get: obj => obj.locateNodes }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        static from(parent, browsingContext) {\n            const frame = new BidiFrame(parent, browsingContext);\n            frame.#initialize();\n            return frame;\n        }\n        #parent = __runInitializers(this, _instanceExtraInitializers);\n        browsingContext;\n        #frames = new WeakMap();\n        realms;\n        _id;\n        client;\n        accessibility;\n        constructor(parent, browsingContext) {\n            super();\n            this.#parent = parent;\n            this.browsingContext = browsingContext;\n            this._id = browsingContext.id;\n            this.client = new BidiCdpSession(this);\n            this.realms = {\n                default: BidiFrameRealm.from(this.browsingContext.defaultRealm, this),\n                internal: BidiFrameRealm.from(this.browsingContext.createWindowRealm(`__puppeteer_internal_${Math.ceil(Math.random() * 10000)}`), this),\n            };\n            this.accessibility = new Accessibility(this.realms.default, this._id);\n        }\n        #initialize() {\n            for (const browsingContext of this.browsingContext.children) {\n                this.#createFrameTarget(browsingContext);\n            }\n            this.browsingContext.on('browsingcontext', ({ browsingContext }) => {\n                this.#createFrameTarget(browsingContext);\n            });\n            this.browsingContext.on('closed', () => {\n                for (const session of BidiCdpSession.sessions.values()) {\n                    if (session.frame === this) {\n                        session.onClose();\n                    }\n                }\n                this.page().trustedEmitter.emit(\"framedetached\" /* PageEvent.FrameDetached */, this);\n            });\n            this.browsingContext.on('request', ({ request }) => {\n                const httpRequest = BidiHTTPRequest.from(request, this);\n                request.once('success', () => {\n                    this.page().trustedEmitter.emit(\"requestfinished\" /* PageEvent.RequestFinished */, httpRequest);\n                });\n                request.once('error', () => {\n                    this.page().trustedEmitter.emit(\"requestfailed\" /* PageEvent.RequestFailed */, httpRequest);\n                });\n                void httpRequest.finalizeInterceptions();\n            });\n            this.browsingContext.on('navigation', ({ navigation }) => {\n                navigation.once('fragment', () => {\n                    this.page().trustedEmitter.emit(\"framenavigated\" /* PageEvent.FrameNavigated */, this);\n                });\n            });\n            this.browsingContext.on('load', () => {\n                this.page().trustedEmitter.emit(\"load\" /* PageEvent.Load */, undefined);\n            });\n            this.browsingContext.on('DOMContentLoaded', () => {\n                this._hasStartedLoading = true;\n                this.page().trustedEmitter.emit(\"domcontentloaded\" /* PageEvent.DOMContentLoaded */, undefined);\n                this.page().trustedEmitter.emit(\"framenavigated\" /* PageEvent.FrameNavigated */, this);\n            });\n            this.browsingContext.on('userprompt', ({ userPrompt }) => {\n                this.page().trustedEmitter.emit(\"dialog\" /* PageEvent.Dialog */, BidiDialog.from(userPrompt));\n            });\n            this.browsingContext.on('log', ({ entry }) => {\n                if (this._id !== entry.source.context) {\n                    return;\n                }\n                if (isConsoleLogEntry(entry)) {\n                    const args = entry.args.map(arg => {\n                        return this.mainRealm().createHandle(arg);\n                    });\n                    const text = args\n                        .reduce((value, arg) => {\n                        const parsedValue = arg instanceof BidiJSHandle && arg.isPrimitiveValue\n                            ? BidiDeserializer.deserialize(arg.remoteValue())\n                            : arg.toString();\n                        return `${value} ${parsedValue}`;\n                    }, '')\n                        .slice(1);\n                    this.page().trustedEmitter.emit(\"console\" /* PageEvent.Console */, new ConsoleMessage(convertConsoleMessageLevel(entry.method), text, args, getStackTraceLocations(entry.stackTrace), this));\n                }\n                else if (isJavaScriptLogEntry(entry)) {\n                    const error = new Error(entry.text ?? '');\n                    const messageHeight = error.message.split('\\n').length;\n                    const messageLines = error.stack.split('\\n').splice(0, messageHeight);\n                    const stackLines = [];\n                    if (entry.stackTrace) {\n                        for (const frame of entry.stackTrace.callFrames) {\n                            // Note we need to add `1` because the values are 0-indexed.\n                            stackLines.push(`    at ${frame.functionName || '<anonymous>'} (${frame.url}:${frame.lineNumber + 1}:${frame.columnNumber + 1})`);\n                            if (stackLines.length >= Error.stackTraceLimit) {\n                                break;\n                            }\n                        }\n                    }\n                    error.stack = [...messageLines, ...stackLines].join('\\n');\n                    this.page().trustedEmitter.emit(\"pageerror\" /* PageEvent.PageError */, error);\n                }\n                else {\n                    debugError(`Unhandled LogEntry with type \"${entry.type}\", text \"${entry.text}\" and level \"${entry.level}\"`);\n                }\n            });\n            this.browsingContext.on('worker', ({ realm }) => {\n                const worker = BidiWebWorker.from(this, realm);\n                realm.on('destroyed', () => {\n                    this.page().trustedEmitter.emit(\"workerdestroyed\" /* PageEvent.WorkerDestroyed */, worker);\n                });\n                this.page().trustedEmitter.emit(\"workercreated\" /* PageEvent.WorkerCreated */, worker);\n            });\n        }\n        #createFrameTarget(browsingContext) {\n            const frame = BidiFrame.from(this, browsingContext);\n            this.#frames.set(browsingContext, frame);\n            this.page().trustedEmitter.emit(\"frameattached\" /* PageEvent.FrameAttached */, frame);\n            browsingContext.on('closed', () => {\n                this.#frames.delete(browsingContext);\n            });\n            return frame;\n        }\n        get timeoutSettings() {\n            return this.page()._timeoutSettings;\n        }\n        mainRealm() {\n            return this.realms.default;\n        }\n        isolatedRealm() {\n            return this.realms.internal;\n        }\n        realm(id) {\n            for (const realm of Object.values(this.realms)) {\n                if (realm.realm.id === id) {\n                    return realm;\n                }\n            }\n            return;\n        }\n        page() {\n            let parent = this.#parent;\n            while (parent instanceof BidiFrame) {\n                parent = parent.#parent;\n            }\n            return parent;\n        }\n        url() {\n            return this.browsingContext.url;\n        }\n        parentFrame() {\n            if (this.#parent instanceof BidiFrame) {\n                return this.#parent;\n            }\n            return null;\n        }\n        childFrames() {\n            return [...this.browsingContext.children].map(child => {\n                return this.#frames.get(child);\n            });\n        }\n        #detached$() {\n            return defer(() => {\n                if (this.detached) {\n                    return of(this);\n                }\n                return fromEmitterEvent(this.page().trustedEmitter, \"framedetached\" /* PageEvent.FrameDetached */).pipe(filter(detachedFrame => {\n                    return detachedFrame === this;\n                }));\n            });\n        }\n        async goto(url, options = {}) {\n            const [response] = await Promise.all([\n                this.waitForNavigation(options),\n                // Some implementations currently only report errors when the\n                // readiness=interactive.\n                //\n                // Related: https://bugzilla.mozilla.org/show_bug.cgi?id=1846601\n                this.browsingContext\n                    .navigate(url, \"interactive\" /* Bidi.BrowsingContext.ReadinessState.Interactive */)\n                    .catch(error => {\n                    if (isErrorLike(error) &&\n                        error.message.includes('net::ERR_HTTP_RESPONSE_CODE_FAILURE')) {\n                        return;\n                    }\n                    if (error.message.includes('navigation canceled')) {\n                        return;\n                    }\n                    if (error.message.includes('Navigation was aborted by another navigation')) {\n                        return;\n                    }\n                    throw error;\n                }),\n            ]).catch(rewriteNavigationError(url, options.timeout ?? this.timeoutSettings.navigationTimeout()));\n            return response;\n        }\n        async setContent(html, options = {}) {\n            await Promise.all([\n                this.setFrameContent(html),\n                firstValueFrom(combineLatest([\n                    this.#waitForLoad$(options),\n                    this.#waitForNetworkIdle$(options),\n                ])),\n            ]);\n        }\n        async waitForNavigation(options = {}) {\n            const { timeout: ms = this.timeoutSettings.navigationTimeout(), signal } = options;\n            const frames = this.childFrames().map(frame => {\n                return frame.#detached$();\n            });\n            return await firstValueFrom(combineLatest([\n                race(fromEmitterEvent(this.browsingContext, 'navigation'), fromEmitterEvent(this.browsingContext, 'historyUpdated').pipe(map(() => {\n                    return { navigation: null };\n                })))\n                    .pipe(first())\n                    .pipe(switchMap(({ navigation }) => {\n                    if (navigation === null) {\n                        return of(null);\n                    }\n                    return this.#waitForLoad$(options).pipe(delayWhen(() => {\n                        if (frames.length === 0) {\n                            return of(undefined);\n                        }\n                        return combineLatest(frames);\n                    }), raceWith(fromEmitterEvent(navigation, 'fragment'), fromEmitterEvent(navigation, 'failed'), fromEmitterEvent(navigation, 'aborted')), switchMap(() => {\n                        if (navigation.request) {\n                            function requestFinished$(request) {\n                                if (navigation === null) {\n                                    return of(null);\n                                }\n                                // Reduces flakiness if the response events arrive after\n                                // the load event.\n                                // Usually, the response or error is already there at this point.\n                                if (request.response || request.error) {\n                                    return of(navigation);\n                                }\n                                if (request.redirect) {\n                                    return requestFinished$(request.redirect);\n                                }\n                                return fromEmitterEvent(request, 'success')\n                                    .pipe(raceWith(fromEmitterEvent(request, 'error')), raceWith(fromEmitterEvent(request, 'redirect')))\n                                    .pipe(switchMap(() => {\n                                    return requestFinished$(request);\n                                }));\n                            }\n                            return requestFinished$(navigation.request);\n                        }\n                        return of(navigation);\n                    }));\n                })),\n                this.#waitForNetworkIdle$(options),\n            ]).pipe(map(([navigation]) => {\n                if (!navigation) {\n                    return null;\n                }\n                const request = navigation.request;\n                if (!request) {\n                    return null;\n                }\n                const lastRequest = request.lastRedirect ?? request;\n                const httpRequest = requests.get(lastRequest);\n                return httpRequest.response();\n            }), raceWith(timeout(ms), fromAbortSignal(signal), this.#detached$().pipe(map(() => {\n                throw new TargetCloseError('Frame detached.');\n            })))));\n        }\n        waitForDevicePrompt() {\n            throw new UnsupportedOperation();\n        }\n        get detached() {\n            return this.browsingContext.closed;\n        }\n        #exposedFunctions = new Map();\n        async exposeFunction(name, apply) {\n            if (this.#exposedFunctions.has(name)) {\n                throw new Error(`Failed to add page binding with name ${name}: globalThis['${name}'] already exists!`);\n            }\n            const exposable = await ExposableFunction.from(this, name, apply);\n            this.#exposedFunctions.set(name, exposable);\n        }\n        async removeExposedFunction(name) {\n            const exposedFunction = this.#exposedFunctions.get(name);\n            if (!exposedFunction) {\n                throw new Error(`Failed to remove page binding with name ${name}: window['${name}'] does not exists!`);\n            }\n            this.#exposedFunctions.delete(name);\n            await exposedFunction[Symbol.asyncDispose]();\n        }\n        async createCDPSession() {\n            if (!this.page().browser().cdpSupported) {\n                throw new UnsupportedOperation();\n            }\n            const cdpConnection = this.page().browser().cdpConnection;\n            return await cdpConnection._createSession({ targetId: this._id });\n        }\n        get #waitForLoad$() { return _private_waitForLoad$_descriptor.value; }\n        get #waitForNetworkIdle$() { return _private_waitForNetworkIdle$_descriptor.value; }\n        async setFiles(element, files) {\n            await this.browsingContext.setFiles(\n            // SAFETY: ElementHandles are always remote references.\n            element.remoteValue(), files);\n        }\n        async locateNodes(element, locator) {\n            return await this.browsingContext.locateNodes(locator, \n            // SAFETY: ElementHandles are always remote references.\n            [element.remoteValue()]);\n        }\n    };\n})();\nexport { BidiFrame };\nfunction isConsoleLogEntry(event) {\n    return event.type === 'console';\n}\nfunction isJavaScriptLogEntry(event) {\n    return event.type === 'javascript';\n}\nfunction getStackTraceLocations(stackTrace) {\n    const stackTraceLocations = [];\n    if (stackTrace) {\n        for (const callFrame of stackTrace.callFrames) {\n            stackTraceLocations.push({\n                url: callFrame.url,\n                lineNumber: callFrame.lineNumber,\n                columnNumber: callFrame.columnNumber,\n            });\n        }\n    }\n    return stackTraceLocations;\n}\n//# sourceMappingURL=Frame.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { Keyboard, Mouse, MouseButton, Touchscreen, } from '../api/Input.js';\nimport { UnsupportedOperation } from '../common/Errors.js';\nimport { TouchError } from '../common/Errors.js';\nvar SourceActionsType;\n(function (SourceActionsType) {\n    SourceActionsType[\"None\"] = \"none\";\n    SourceActionsType[\"Key\"] = \"key\";\n    SourceActionsType[\"Pointer\"] = \"pointer\";\n    SourceActionsType[\"Wheel\"] = \"wheel\";\n})(SourceActionsType || (SourceActionsType = {}));\nvar ActionType;\n(function (ActionType) {\n    ActionType[\"Pause\"] = \"pause\";\n    ActionType[\"KeyDown\"] = \"keyDown\";\n    ActionType[\"KeyUp\"] = \"keyUp\";\n    ActionType[\"PointerUp\"] = \"pointerUp\";\n    ActionType[\"PointerDown\"] = \"pointerDown\";\n    ActionType[\"PointerMove\"] = \"pointerMove\";\n    ActionType[\"Scroll\"] = \"scroll\";\n})(ActionType || (ActionType = {}));\nconst getBidiKeyValue = (key) => {\n    switch (key) {\n        case '\\r':\n        case '\\n':\n            key = 'Enter';\n            break;\n    }\n    // Measures the number of code points rather than UTF-16 code units.\n    if ([...key].length === 1) {\n        return key;\n    }\n    switch (key) {\n        case 'Cancel':\n            return '\\uE001';\n        case 'Help':\n            return '\\uE002';\n        case 'Backspace':\n            return '\\uE003';\n        case 'Tab':\n            return '\\uE004';\n        case 'Clear':\n            return '\\uE005';\n        case 'Enter':\n            return '\\uE007';\n        case 'Shift':\n        case 'ShiftLeft':\n            return '\\uE008';\n        case 'Control':\n        case 'ControlLeft':\n            return '\\uE009';\n        case 'Alt':\n        case 'AltLeft':\n            return '\\uE00A';\n        case 'Pause':\n            return '\\uE00B';\n        case 'Escape':\n            return '\\uE00C';\n        case 'PageUp':\n            return '\\uE00E';\n        case 'PageDown':\n            return '\\uE00F';\n        case 'End':\n            return '\\uE010';\n        case 'Home':\n            return '\\uE011';\n        case 'ArrowLeft':\n            return '\\uE012';\n        case 'ArrowUp':\n            return '\\uE013';\n        case 'ArrowRight':\n            return '\\uE014';\n        case 'ArrowDown':\n            return '\\uE015';\n        case 'Insert':\n            return '\\uE016';\n        case 'Delete':\n            return '\\uE017';\n        case 'NumpadEqual':\n            return '\\uE019';\n        case 'Numpad0':\n            return '\\uE01A';\n        case 'Numpad1':\n            return '\\uE01B';\n        case 'Numpad2':\n            return '\\uE01C';\n        case 'Numpad3':\n            return '\\uE01D';\n        case 'Numpad4':\n            return '\\uE01E';\n        case 'Numpad5':\n            return '\\uE01F';\n        case 'Numpad6':\n            return '\\uE020';\n        case 'Numpad7':\n            return '\\uE021';\n        case 'Numpad8':\n            return '\\uE022';\n        case 'Numpad9':\n            return '\\uE023';\n        case 'NumpadMultiply':\n            return '\\uE024';\n        case 'NumpadAdd':\n            return '\\uE025';\n        case 'NumpadSubtract':\n            return '\\uE027';\n        case 'NumpadDecimal':\n            return '\\uE028';\n        case 'NumpadDivide':\n            return '\\uE029';\n        case 'F1':\n            return '\\uE031';\n        case 'F2':\n            return '\\uE032';\n        case 'F3':\n            return '\\uE033';\n        case 'F4':\n            return '\\uE034';\n        case 'F5':\n            return '\\uE035';\n        case 'F6':\n            return '\\uE036';\n        case 'F7':\n            return '\\uE037';\n        case 'F8':\n            return '\\uE038';\n        case 'F9':\n            return '\\uE039';\n        case 'F10':\n            return '\\uE03A';\n        case 'F11':\n            return '\\uE03B';\n        case 'F12':\n            return '\\uE03C';\n        case 'Meta':\n        case 'MetaLeft':\n            return '\\uE03D';\n        case 'ShiftRight':\n            return '\\uE050';\n        case 'ControlRight':\n            return '\\uE051';\n        case 'AltRight':\n            return '\\uE052';\n        case 'MetaRight':\n            return '\\uE053';\n        case 'Digit0':\n            return '0';\n        case 'Digit1':\n            return '1';\n        case 'Digit2':\n            return '2';\n        case 'Digit3':\n            return '3';\n        case 'Digit4':\n            return '4';\n        case 'Digit5':\n            return '5';\n        case 'Digit6':\n            return '6';\n        case 'Digit7':\n            return '7';\n        case 'Digit8':\n            return '8';\n        case 'Digit9':\n            return '9';\n        case 'KeyA':\n            return 'a';\n        case 'KeyB':\n            return 'b';\n        case 'KeyC':\n            return 'c';\n        case 'KeyD':\n            return 'd';\n        case 'KeyE':\n            return 'e';\n        case 'KeyF':\n            return 'f';\n        case 'KeyG':\n            return 'g';\n        case 'KeyH':\n            return 'h';\n        case 'KeyI':\n            return 'i';\n        case 'KeyJ':\n            return 'j';\n        case 'KeyK':\n            return 'k';\n        case 'KeyL':\n            return 'l';\n        case 'KeyM':\n            return 'm';\n        case 'KeyN':\n            return 'n';\n        case 'KeyO':\n            return 'o';\n        case 'KeyP':\n            return 'p';\n        case 'KeyQ':\n            return 'q';\n        case 'KeyR':\n            return 'r';\n        case 'KeyS':\n            return 's';\n        case 'KeyT':\n            return 't';\n        case 'KeyU':\n            return 'u';\n        case 'KeyV':\n            return 'v';\n        case 'KeyW':\n            return 'w';\n        case 'KeyX':\n            return 'x';\n        case 'KeyY':\n            return 'y';\n        case 'KeyZ':\n            return 'z';\n        case 'Semicolon':\n            return ';';\n        case 'Equal':\n            return '=';\n        case 'Comma':\n            return ',';\n        case 'Minus':\n            return '-';\n        case 'Period':\n            return '.';\n        case 'Slash':\n            return '/';\n        case 'Backquote':\n            return '`';\n        case 'BracketLeft':\n            return '[';\n        case 'Backslash':\n            return '\\\\';\n        case 'BracketRight':\n            return ']';\n        case 'Quote':\n            return '\"';\n        default:\n            throw new Error(`Unknown key: \"${key}\"`);\n    }\n};\n/**\n * @internal\n */\nexport class BidiKeyboard extends Keyboard {\n    #page;\n    constructor(page) {\n        super();\n        this.#page = page;\n    }\n    async down(key, _options) {\n        await this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Key,\n                id: \"__puppeteer_keyboard\" /* InputId.Keyboard */,\n                actions: [\n                    {\n                        type: ActionType.KeyDown,\n                        value: getBidiKeyValue(key),\n                    },\n                ],\n            },\n        ]);\n    }\n    async up(key) {\n        await this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Key,\n                id: \"__puppeteer_keyboard\" /* InputId.Keyboard */,\n                actions: [\n                    {\n                        type: ActionType.KeyUp,\n                        value: getBidiKeyValue(key),\n                    },\n                ],\n            },\n        ]);\n    }\n    async press(key, options = {}) {\n        const { delay = 0 } = options;\n        const actions = [\n            {\n                type: ActionType.KeyDown,\n                value: getBidiKeyValue(key),\n            },\n        ];\n        if (delay > 0) {\n            actions.push({\n                type: ActionType.Pause,\n                duration: delay,\n            });\n        }\n        actions.push({\n            type: ActionType.KeyUp,\n            value: getBidiKeyValue(key),\n        });\n        await this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Key,\n                id: \"__puppeteer_keyboard\" /* InputId.Keyboard */,\n                actions,\n            },\n        ]);\n    }\n    async type(text, options = {}) {\n        const { delay = 0 } = options;\n        // This spread separates the characters into code points rather than UTF-16\n        // code units.\n        const values = [...text].map(getBidiKeyValue);\n        const actions = [];\n        if (delay <= 0) {\n            for (const value of values) {\n                actions.push({\n                    type: ActionType.KeyDown,\n                    value,\n                }, {\n                    type: ActionType.KeyUp,\n                    value,\n                });\n            }\n        }\n        else {\n            for (const value of values) {\n                actions.push({\n                    type: ActionType.KeyDown,\n                    value,\n                }, {\n                    type: ActionType.Pause,\n                    duration: delay,\n                }, {\n                    type: ActionType.KeyUp,\n                    value,\n                });\n            }\n        }\n        await this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Key,\n                id: \"__puppeteer_keyboard\" /* InputId.Keyboard */,\n                actions,\n            },\n        ]);\n    }\n    async sendCharacter(char) {\n        // Measures the number of code points rather than UTF-16 code units.\n        if ([...char].length > 1) {\n            throw new Error('Cannot send more than 1 character.');\n        }\n        const frame = await this.#page.focusedFrame();\n        await frame.isolatedRealm().evaluate(async (char) => {\n            document.execCommand('insertText', false, char);\n        }, char);\n    }\n}\nconst getBidiButton = (button) => {\n    switch (button) {\n        case MouseButton.Left:\n            return 0;\n        case MouseButton.Middle:\n            return 1;\n        case MouseButton.Right:\n            return 2;\n        case MouseButton.Back:\n            return 3;\n        case MouseButton.Forward:\n            return 4;\n    }\n};\n/**\n * @internal\n */\nexport class BidiMouse extends Mouse {\n    #page;\n    #lastMovePoint = { x: 0, y: 0 };\n    constructor(page) {\n        super();\n        this.#page = page;\n    }\n    async reset() {\n        this.#lastMovePoint = { x: 0, y: 0 };\n        await this.#page.mainFrame().browsingContext.releaseActions();\n    }\n    async move(x, y, options = {}) {\n        const from = this.#lastMovePoint;\n        const to = {\n            x: Math.round(x),\n            y: Math.round(y),\n        };\n        const actions = [];\n        const steps = options.steps ?? 0;\n        for (let i = 0; i < steps; ++i) {\n            actions.push({\n                type: ActionType.PointerMove,\n                x: from.x + (to.x - from.x) * (i / steps),\n                y: from.y + (to.y - from.y) * (i / steps),\n                origin: options.origin,\n            });\n        }\n        actions.push({\n            type: ActionType.PointerMove,\n            ...to,\n            origin: options.origin,\n        });\n        // https://w3c.github.io/webdriver-bidi/#command-input-performActions:~:text=input.PointerMoveAction%20%3D%20%7B%0A%20%20type%3A%20%22pointerMove%22%2C%0A%20%20x%3A%20js%2Dint%2C\n        this.#lastMovePoint = to;\n        await this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Pointer,\n                id: \"__puppeteer_mouse\" /* InputId.Mouse */,\n                actions,\n            },\n        ]);\n    }\n    async down(options = {}) {\n        await this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Pointer,\n                id: \"__puppeteer_mouse\" /* InputId.Mouse */,\n                actions: [\n                    {\n                        type: ActionType.PointerDown,\n                        button: getBidiButton(options.button ?? MouseButton.Left),\n                    },\n                ],\n            },\n        ]);\n    }\n    async up(options = {}) {\n        await this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Pointer,\n                id: \"__puppeteer_mouse\" /* InputId.Mouse */,\n                actions: [\n                    {\n                        type: ActionType.PointerUp,\n                        button: getBidiButton(options.button ?? MouseButton.Left),\n                    },\n                ],\n            },\n        ]);\n    }\n    async click(x, y, options = {}) {\n        const actions = [\n            {\n                type: ActionType.PointerMove,\n                x: Math.round(x),\n                y: Math.round(y),\n                origin: options.origin,\n            },\n        ];\n        const pointerDownAction = {\n            type: ActionType.PointerDown,\n            button: getBidiButton(options.button ?? MouseButton.Left),\n        };\n        const pointerUpAction = {\n            type: ActionType.PointerUp,\n            button: pointerDownAction.button,\n        };\n        for (let i = 1; i < (options.count ?? 1); ++i) {\n            actions.push(pointerDownAction, pointerUpAction);\n        }\n        actions.push(pointerDownAction);\n        if (options.delay) {\n            actions.push({\n                type: ActionType.Pause,\n                duration: options.delay,\n            });\n        }\n        actions.push(pointerUpAction);\n        await this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Pointer,\n                id: \"__puppeteer_mouse\" /* InputId.Mouse */,\n                actions,\n            },\n        ]);\n    }\n    async wheel(options = {}) {\n        await this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Wheel,\n                id: \"__puppeteer_wheel\" /* InputId.Wheel */,\n                actions: [\n                    {\n                        type: ActionType.Scroll,\n                        ...(this.#lastMovePoint ?? {\n                            x: 0,\n                            y: 0,\n                        }),\n                        deltaX: options.deltaX ?? 0,\n                        deltaY: options.deltaY ?? 0,\n                    },\n                ],\n            },\n        ]);\n    }\n    drag() {\n        throw new UnsupportedOperation();\n    }\n    dragOver() {\n        throw new UnsupportedOperation();\n    }\n    dragEnter() {\n        throw new UnsupportedOperation();\n    }\n    drop() {\n        throw new UnsupportedOperation();\n    }\n    dragAndDrop() {\n        throw new UnsupportedOperation();\n    }\n}\n/**\n * @internal\n */\nclass BidiTouchHandle {\n    #started = false;\n    #x;\n    #y;\n    #bidiId;\n    #page;\n    #touchScreen;\n    #properties;\n    constructor(page, touchScreen, id, x, y, properties) {\n        this.#page = page;\n        this.#touchScreen = touchScreen;\n        this.#x = Math.round(x);\n        this.#y = Math.round(y);\n        this.#properties = properties;\n        this.#bidiId = `${\"__puppeteer_finger\" /* InputId.Finger */}_${id}`;\n    }\n    async start(options = {}) {\n        if (this.#started) {\n            throw new TouchError('Touch has already started');\n        }\n        await this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Pointer,\n                id: this.#bidiId,\n                parameters: {\n                    pointerType: \"touch\" /* Bidi.Input.PointerType.Touch */,\n                },\n                actions: [\n                    {\n                        type: ActionType.PointerMove,\n                        x: this.#x,\n                        y: this.#y,\n                        origin: options.origin,\n                    },\n                    {\n                        ...this.#properties,\n                        type: ActionType.PointerDown,\n                        button: 0,\n                    },\n                ],\n            },\n        ]);\n        this.#started = true;\n    }\n    move(x, y) {\n        const newX = Math.round(x);\n        const newY = Math.round(y);\n        return this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Pointer,\n                id: this.#bidiId,\n                parameters: {\n                    pointerType: \"touch\" /* Bidi.Input.PointerType.Touch */,\n                },\n                actions: [\n                    {\n                        ...this.#properties,\n                        type: ActionType.PointerMove,\n                        x: newX,\n                        y: newY,\n                    },\n                ],\n            },\n        ]);\n    }\n    async end() {\n        await this.#page.mainFrame().browsingContext.performActions([\n            {\n                type: SourceActionsType.Pointer,\n                id: this.#bidiId,\n                parameters: {\n                    pointerType: \"touch\" /* Bidi.Input.PointerType.Touch */,\n                },\n                actions: [\n                    {\n                        type: ActionType.PointerUp,\n                        button: 0,\n                    },\n                ],\n            },\n        ]);\n        this.#touchScreen.removeHandle(this);\n    }\n}\n/**\n * @internal\n */\nexport class BidiTouchscreen extends Touchscreen {\n    #page;\n    constructor(page) {\n        super();\n        this.#page = page;\n    }\n    async touchStart(x, y, options = {}) {\n        const id = this.idGenerator();\n        const properties = {\n            width: 0.5 * 2, // 2 times default touch radius.\n            height: 0.5 * 2, // 2 times default touch radius.\n            pressure: 0.5,\n            altitudeAngle: Math.PI / 2,\n        };\n        const touch = new BidiTouchHandle(this.#page, this, id, x, y, properties);\n        await touch.start(options);\n        this.touches.push(touch);\n        return touch;\n    }\n}\n//# sourceMappingURL=Input.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        var r, s = 0;\n        function next() {\n            while (r = env.stack.pop()) {\n                try {\n                    if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n                    if (r.dispose) {\n                        var result = r.dispose.call(r.value);\n                        if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                    }\n                    else s |= 1;\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { firstValueFrom, from, raceWith } from '../../third_party/rxjs/rxjs.js';\nimport { Page, } from '../api/Page.js';\nimport { Coverage } from '../cdp/Coverage.js';\nimport { EmulationManager } from '../cdp/EmulationManager.js';\nimport { Tracing } from '../cdp/Tracing.js';\nimport { UnsupportedOperation } from '../common/Errors.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { FileChooser } from '../common/FileChooser.js';\nimport { evaluationString, isString, parsePDFOptions, timeout, } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { bubble } from '../util/decorators.js';\nimport { Deferred } from '../util/Deferred.js';\nimport { stringToTypedArray } from '../util/encoding.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { BidiElementHandle } from './ElementHandle.js';\nimport { BidiFrame } from './Frame.js';\nimport { BidiKeyboard, BidiMouse, BidiTouchscreen } from './Input.js';\nimport { rewriteNavigationError } from './util.js';\n/**\n * Implements Page using WebDriver BiDi.\n *\n * @internal\n */\nlet BidiPage = (() => {\n    let _classSuper = Page;\n    let _trustedEmitter_decorators;\n    let _trustedEmitter_initializers = [];\n    let _trustedEmitter_extraInitializers = [];\n    return class BidiPage extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            _trustedEmitter_decorators = [bubble()];\n            __esDecorate(this, null, _trustedEmitter_decorators, { kind: \"accessor\", name: \"trustedEmitter\", static: false, private: false, access: { has: obj => \"trustedEmitter\" in obj, get: obj => obj.trustedEmitter, set: (obj, value) => { obj.trustedEmitter = value; } }, metadata: _metadata }, _trustedEmitter_initializers, _trustedEmitter_extraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        static from(browserContext, browsingContext) {\n            const page = new BidiPage(browserContext, browsingContext);\n            page.#initialize();\n            return page;\n        }\n        #trustedEmitter_accessor_storage = __runInitializers(this, _trustedEmitter_initializers, new EventEmitter());\n        get trustedEmitter() { return this.#trustedEmitter_accessor_storage; }\n        set trustedEmitter(value) { this.#trustedEmitter_accessor_storage = value; }\n        #browserContext = __runInitializers(this, _trustedEmitter_extraInitializers);\n        #frame;\n        #viewport = null;\n        #workers = new Set();\n        keyboard;\n        mouse;\n        touchscreen;\n        tracing;\n        coverage;\n        #cdpEmulationManager;\n        #emulatedNetworkConditions;\n        #fileChooserDeferreds = new Set();\n        _client() {\n            return this.#frame.client;\n        }\n        constructor(browserContext, browsingContext) {\n            super();\n            this.#browserContext = browserContext;\n            this.#frame = BidiFrame.from(this, browsingContext);\n            this.#cdpEmulationManager = new EmulationManager(this.#frame.client);\n            this.tracing = new Tracing(this.#frame.client);\n            this.coverage = new Coverage(this.#frame.client);\n            this.keyboard = new BidiKeyboard(this);\n            this.mouse = new BidiMouse(this);\n            this.touchscreen = new BidiTouchscreen(this);\n        }\n        #initialize() {\n            this.#frame.browsingContext.on('closed', () => {\n                this.trustedEmitter.emit(\"close\" /* PageEvent.Close */, undefined);\n                this.trustedEmitter.removeAllListeners();\n            });\n            this.trustedEmitter.on(\"workercreated\" /* PageEvent.WorkerCreated */, worker => {\n                this.#workers.add(worker);\n            });\n            this.trustedEmitter.on(\"workerdestroyed\" /* PageEvent.WorkerDestroyed */, worker => {\n                this.#workers.delete(worker);\n            });\n        }\n        /**\n         * @internal\n         */\n        _userAgentHeaders = {};\n        #userAgentInterception;\n        #userAgentPreloadScript;\n        async setUserAgent(userAgent, userAgentMetadata) {\n            if (!this.#browserContext.browser().cdpSupported && userAgentMetadata) {\n                throw new UnsupportedOperation('Current Browser does not support `userAgentMetadata`');\n            }\n            else if (this.#browserContext.browser().cdpSupported &&\n                userAgentMetadata) {\n                return await this._client().send('Network.setUserAgentOverride', {\n                    userAgent: userAgent,\n                    userAgentMetadata: userAgentMetadata,\n                });\n            }\n            const enable = userAgent !== '';\n            userAgent = userAgent ?? (await this.#browserContext.browser().userAgent());\n            this._userAgentHeaders = enable\n                ? {\n                    'User-Agent': userAgent,\n                }\n                : {};\n            this.#userAgentInterception = await this.#toggleInterception([\"beforeRequestSent\" /* Bidi.Network.InterceptPhase.BeforeRequestSent */], this.#userAgentInterception, enable);\n            const changeUserAgent = (userAgent) => {\n                Object.defineProperty(navigator, 'userAgent', {\n                    value: userAgent,\n                    configurable: true,\n                });\n            };\n            const frames = [this.#frame];\n            for (const frame of frames) {\n                frames.push(...frame.childFrames());\n            }\n            if (this.#userAgentPreloadScript) {\n                await this.removeScriptToEvaluateOnNewDocument(this.#userAgentPreloadScript);\n            }\n            const [evaluateToken] = await Promise.all([\n                enable\n                    ? this.evaluateOnNewDocument(changeUserAgent, userAgent)\n                    : undefined,\n                // When we disable the UserAgent we want to\n                // evaluate the original value in all Browsing Contexts\n                ...frames.map(frame => {\n                    return frame.evaluate(changeUserAgent, userAgent);\n                }),\n            ]);\n            this.#userAgentPreloadScript = evaluateToken?.identifier;\n        }\n        async setBypassCSP(enabled) {\n            // TODO: handle CDP-specific cases such as mprach.\n            await this._client().send('Page.setBypassCSP', { enabled });\n        }\n        async queryObjects(prototypeHandle) {\n            assert(!prototypeHandle.disposed, 'Prototype JSHandle is disposed!');\n            assert(prototypeHandle.id, 'Prototype JSHandle must not be referencing primitive value');\n            const response = await this.#frame.client.send('Runtime.queryObjects', {\n                prototypeObjectId: prototypeHandle.id,\n            });\n            return this.#frame.mainRealm().createHandle({\n                type: 'array',\n                handle: response.objects.objectId,\n            });\n        }\n        browser() {\n            return this.browserContext().browser();\n        }\n        browserContext() {\n            return this.#browserContext;\n        }\n        mainFrame() {\n            return this.#frame;\n        }\n        async focusedFrame() {\n            const env_1 = { stack: [], error: void 0, hasError: false };\n            try {\n                const handle = __addDisposableResource(env_1, (await this.mainFrame()\n                    .isolatedRealm()\n                    .evaluateHandle(() => {\n                    let win = window;\n                    while (win.document.activeElement instanceof win.HTMLIFrameElement ||\n                        win.document.activeElement instanceof win.HTMLFrameElement) {\n                        if (win.document.activeElement.contentWindow === null) {\n                            break;\n                        }\n                        win = win.document.activeElement.contentWindow;\n                    }\n                    return win;\n                })), false);\n                const value = handle.remoteValue();\n                assert(value.type === 'window');\n                const frame = this.frames().find(frame => {\n                    return frame._id === value.value.context;\n                });\n                assert(frame);\n                return frame;\n            }\n            catch (e_1) {\n                env_1.error = e_1;\n                env_1.hasError = true;\n            }\n            finally {\n                __disposeResources(env_1);\n            }\n        }\n        frames() {\n            const frames = [this.#frame];\n            for (const frame of frames) {\n                frames.push(...frame.childFrames());\n            }\n            return frames;\n        }\n        isClosed() {\n            return this.#frame.detached;\n        }\n        async close(options) {\n            const env_2 = { stack: [], error: void 0, hasError: false };\n            try {\n                const _guard = __addDisposableResource(env_2, await this.#browserContext.waitForScreenshotOperations(), false);\n                try {\n                    await this.#frame.browsingContext.close(options?.runBeforeUnload);\n                }\n                catch {\n                    return;\n                }\n            }\n            catch (e_2) {\n                env_2.error = e_2;\n                env_2.hasError = true;\n            }\n            finally {\n                __disposeResources(env_2);\n            }\n        }\n        async reload(options = {}) {\n            const [response] = await Promise.all([\n                this.#frame.waitForNavigation(options),\n                this.#frame.browsingContext.reload(),\n            ]).catch(rewriteNavigationError(this.url(), options.timeout ?? this._timeoutSettings.navigationTimeout()));\n            return response;\n        }\n        setDefaultNavigationTimeout(timeout) {\n            this._timeoutSettings.setDefaultNavigationTimeout(timeout);\n        }\n        setDefaultTimeout(timeout) {\n            this._timeoutSettings.setDefaultTimeout(timeout);\n        }\n        getDefaultTimeout() {\n            return this._timeoutSettings.timeout();\n        }\n        getDefaultNavigationTimeout() {\n            return this._timeoutSettings.navigationTimeout();\n        }\n        isJavaScriptEnabled() {\n            return this.#cdpEmulationManager.javascriptEnabled;\n        }\n        async setGeolocation(options) {\n            const { longitude, latitude, accuracy = 0 } = options;\n            if (longitude < -180 || longitude > 180) {\n                throw new Error(`Invalid longitude \"${longitude}\": precondition -180 <= LONGITUDE <= 180 failed.`);\n            }\n            if (latitude < -90 || latitude > 90) {\n                throw new Error(`Invalid latitude \"${latitude}\": precondition -90 <= LATITUDE <= 90 failed.`);\n            }\n            if (accuracy < 0) {\n                throw new Error(`Invalid accuracy \"${accuracy}\": precondition 0 <= ACCURACY failed.`);\n            }\n            return await this.#frame.browsingContext.setGeolocationOverride({\n                coordinates: {\n                    latitude: options.latitude,\n                    longitude: options.longitude,\n                    accuracy: options.accuracy,\n                },\n            });\n        }\n        async setJavaScriptEnabled(enabled) {\n            return await this.#cdpEmulationManager.setJavaScriptEnabled(enabled);\n        }\n        async emulateMediaType(type) {\n            return await this.#cdpEmulationManager.emulateMediaType(type);\n        }\n        async emulateCPUThrottling(factor) {\n            return await this.#cdpEmulationManager.emulateCPUThrottling(factor);\n        }\n        async emulateMediaFeatures(features) {\n            return await this.#cdpEmulationManager.emulateMediaFeatures(features);\n        }\n        async emulateTimezone(timezoneId) {\n            return await this.#frame.browsingContext.setTimezoneOverride(timezoneId);\n        }\n        async emulateIdleState(overrides) {\n            return await this.#cdpEmulationManager.emulateIdleState(overrides);\n        }\n        async emulateVisionDeficiency(type) {\n            return await this.#cdpEmulationManager.emulateVisionDeficiency(type);\n        }\n        async setViewport(viewport) {\n            if (!this.browser().cdpSupported) {\n                await this.#frame.browsingContext.setViewport({\n                    viewport: viewport?.width && viewport?.height\n                        ? {\n                            width: viewport.width,\n                            height: viewport.height,\n                        }\n                        : null,\n                    devicePixelRatio: viewport?.deviceScaleFactor\n                        ? viewport.deviceScaleFactor\n                        : null,\n                });\n                this.#viewport = viewport;\n                return;\n            }\n            const needsReload = await this.#cdpEmulationManager.emulateViewport(viewport);\n            this.#viewport = viewport;\n            if (needsReload) {\n                await this.reload();\n            }\n        }\n        viewport() {\n            return this.#viewport;\n        }\n        async pdf(options = {}) {\n            const { timeout: ms = this._timeoutSettings.timeout(), path = undefined } = options;\n            const { printBackground: background, margin, landscape, width, height, pageRanges: ranges, scale, preferCSSPageSize, } = parsePDFOptions(options, 'cm');\n            const pageRanges = ranges ? ranges.split(', ') : [];\n            await firstValueFrom(from(this.mainFrame()\n                .isolatedRealm()\n                .evaluate(() => {\n                return document.fonts.ready;\n            })).pipe(raceWith(timeout(ms))));\n            const data = await firstValueFrom(from(this.#frame.browsingContext.print({\n                background,\n                margin,\n                orientation: landscape ? 'landscape' : 'portrait',\n                page: {\n                    width,\n                    height,\n                },\n                pageRanges,\n                scale,\n                shrinkToFit: !preferCSSPageSize,\n            })).pipe(raceWith(timeout(ms))));\n            const typedArray = stringToTypedArray(data, true);\n            await this._maybeWriteTypedArrayToFile(path, typedArray);\n            return typedArray;\n        }\n        async createPDFStream(options) {\n            const typedArray = await this.pdf(options);\n            return new ReadableStream({\n                start(controller) {\n                    controller.enqueue(typedArray);\n                    controller.close();\n                },\n            });\n        }\n        async _screenshot(options) {\n            const { clip, type, captureBeyondViewport, quality } = options;\n            if (options.omitBackground !== undefined && options.omitBackground) {\n                throw new UnsupportedOperation(`BiDi does not support 'omitBackground'.`);\n            }\n            if (options.optimizeForSpeed !== undefined && options.optimizeForSpeed) {\n                throw new UnsupportedOperation(`BiDi does not support 'optimizeForSpeed'.`);\n            }\n            if (options.fromSurface !== undefined && !options.fromSurface) {\n                throw new UnsupportedOperation(`BiDi does not support 'fromSurface'.`);\n            }\n            if (clip !== undefined && clip.scale !== undefined && clip.scale !== 1) {\n                throw new UnsupportedOperation(`BiDi does not support 'scale' in 'clip'.`);\n            }\n            let box;\n            if (clip) {\n                if (captureBeyondViewport) {\n                    box = clip;\n                }\n                else {\n                    // The clip is always with respect to the document coordinates, so we\n                    // need to convert this to viewport coordinates when we aren't capturing\n                    // beyond the viewport.\n                    const [pageLeft, pageTop] = await this.evaluate(() => {\n                        if (!window.visualViewport) {\n                            throw new Error('window.visualViewport is not supported.');\n                        }\n                        return [\n                            window.visualViewport.pageLeft,\n                            window.visualViewport.pageTop,\n                        ];\n                    });\n                    box = {\n                        ...clip,\n                        x: clip.x - pageLeft,\n                        y: clip.y - pageTop,\n                    };\n                }\n            }\n            const data = await this.#frame.browsingContext.captureScreenshot({\n                origin: captureBeyondViewport ? 'document' : 'viewport',\n                format: {\n                    type: `image/${type}`,\n                    ...(quality !== undefined ? { quality: quality / 100 } : {}),\n                },\n                ...(box ? { clip: { type: 'box', ...box } } : {}),\n            });\n            return data;\n        }\n        async createCDPSession() {\n            return await this.#frame.createCDPSession();\n        }\n        async bringToFront() {\n            await this.#frame.browsingContext.activate();\n        }\n        async evaluateOnNewDocument(pageFunction, ...args) {\n            const expression = evaluationExpression(pageFunction, ...args);\n            const script = await this.#frame.browsingContext.addPreloadScript(expression);\n            return { identifier: script };\n        }\n        async removeScriptToEvaluateOnNewDocument(id) {\n            await this.#frame.browsingContext.removePreloadScript(id);\n        }\n        async exposeFunction(name, pptrFunction) {\n            return await this.mainFrame().exposeFunction(name, 'default' in pptrFunction ? pptrFunction.default : pptrFunction);\n        }\n        isDragInterceptionEnabled() {\n            return false;\n        }\n        async setCacheEnabled(enabled) {\n            if (!this.#browserContext.browser().cdpSupported) {\n                await this.#frame.browsingContext.setCacheBehavior(enabled ? 'default' : 'bypass');\n                return;\n            }\n            // TODO: handle CDP-specific cases such as mprach.\n            await this._client().send('Network.setCacheDisabled', {\n                cacheDisabled: !enabled,\n            });\n        }\n        async cookies(...urls) {\n            const normalizedUrls = (urls.length ? urls : [this.url()]).map(url => {\n                return new URL(url);\n            });\n            const cookies = await this.#frame.browsingContext.getCookies();\n            return cookies\n                .map(cookie => {\n                return bidiToPuppeteerCookie(cookie);\n            })\n                .filter(cookie => {\n                return normalizedUrls.some(url => {\n                    return testUrlMatchCookie(cookie, url);\n                });\n            });\n        }\n        isServiceWorkerBypassed() {\n            throw new UnsupportedOperation();\n        }\n        target() {\n            throw new UnsupportedOperation();\n        }\n        async waitForFileChooser(options = {}) {\n            const { timeout = this._timeoutSettings.timeout() } = options;\n            const deferred = Deferred.create({\n                message: `Waiting for \\`FileChooser\\` failed: ${timeout}ms exceeded`,\n                timeout,\n            });\n            this.#fileChooserDeferreds.add(deferred);\n            if (options.signal) {\n                options.signal.addEventListener('abort', () => {\n                    deferred.reject(options.signal?.reason);\n                }, { once: true });\n            }\n            this.#frame.browsingContext.once('filedialogopened', info => {\n                if (!info.element) {\n                    return;\n                }\n                const chooser = new FileChooser(BidiElementHandle.from({\n                    sharedId: info.element.sharedId,\n                    handle: info.element.handle,\n                    type: 'node',\n                }, this.#frame.mainRealm()), info.multiple);\n                for (const deferred of this.#fileChooserDeferreds) {\n                    deferred.resolve(chooser);\n                    this.#fileChooserDeferreds.delete(deferred);\n                }\n            });\n            try {\n                return await deferred.valueOrThrow();\n            }\n            catch (error) {\n                this.#fileChooserDeferreds.delete(deferred);\n                throw error;\n            }\n        }\n        workers() {\n            return [...this.#workers];\n        }\n        #userInterception;\n        async setRequestInterception(enable) {\n            this.#userInterception = await this.#toggleInterception([\"beforeRequestSent\" /* Bidi.Network.InterceptPhase.BeforeRequestSent */], this.#userInterception, enable);\n        }\n        /**\n         * @internal\n         */\n        _extraHTTPHeaders = {};\n        #extraHeadersInterception;\n        async setExtraHTTPHeaders(headers) {\n            const extraHTTPHeaders = {};\n            for (const [key, value] of Object.entries(headers)) {\n                assert(isString(value), `Expected value of header \"${key}\" to be String, but \"${typeof value}\" is found.`);\n                extraHTTPHeaders[key.toLowerCase()] = value;\n            }\n            this._extraHTTPHeaders = extraHTTPHeaders;\n            this.#extraHeadersInterception = await this.#toggleInterception([\"beforeRequestSent\" /* Bidi.Network.InterceptPhase.BeforeRequestSent */], this.#extraHeadersInterception, Boolean(Object.keys(this._extraHTTPHeaders).length));\n        }\n        /**\n         * @internal\n         */\n        _credentials = null;\n        #authInterception;\n        async authenticate(credentials) {\n            this.#authInterception = await this.#toggleInterception([\"authRequired\" /* Bidi.Network.InterceptPhase.AuthRequired */], this.#authInterception, Boolean(credentials));\n            this._credentials = credentials;\n        }\n        async #toggleInterception(phases, interception, expected) {\n            if (expected && !interception) {\n                return await this.#frame.browsingContext.addIntercept({\n                    phases,\n                });\n            }\n            else if (!expected && interception) {\n                await this.#frame.browsingContext.userContext.browser.removeIntercept(interception);\n                return;\n            }\n            return interception;\n        }\n        setDragInterception() {\n            throw new UnsupportedOperation();\n        }\n        setBypassServiceWorker() {\n            throw new UnsupportedOperation();\n        }\n        async setOfflineMode(enabled) {\n            if (!this.#browserContext.browser().cdpSupported) {\n                throw new UnsupportedOperation();\n            }\n            if (!this.#emulatedNetworkConditions) {\n                this.#emulatedNetworkConditions = {\n                    offline: false,\n                    upload: -1,\n                    download: -1,\n                    latency: 0,\n                };\n            }\n            this.#emulatedNetworkConditions.offline = enabled;\n            return await this.#applyNetworkConditions();\n        }\n        async emulateNetworkConditions(networkConditions) {\n            if (!this.#browserContext.browser().cdpSupported) {\n                throw new UnsupportedOperation();\n            }\n            if (!this.#emulatedNetworkConditions) {\n                this.#emulatedNetworkConditions = {\n                    offline: false,\n                    upload: -1,\n                    download: -1,\n                    latency: 0,\n                };\n            }\n            this.#emulatedNetworkConditions.upload = networkConditions\n                ? networkConditions.upload\n                : -1;\n            this.#emulatedNetworkConditions.download = networkConditions\n                ? networkConditions.download\n                : -1;\n            this.#emulatedNetworkConditions.latency = networkConditions\n                ? networkConditions.latency\n                : 0;\n            return await this.#applyNetworkConditions();\n        }\n        async #applyNetworkConditions() {\n            if (!this.#emulatedNetworkConditions) {\n                return;\n            }\n            await this._client().send('Network.emulateNetworkConditions', {\n                offline: this.#emulatedNetworkConditions.offline,\n                latency: this.#emulatedNetworkConditions.latency,\n                uploadThroughput: this.#emulatedNetworkConditions.upload,\n                downloadThroughput: this.#emulatedNetworkConditions.download,\n            });\n        }\n        async setCookie(...cookies) {\n            const pageURL = this.url();\n            const pageUrlStartsWithHTTP = pageURL.startsWith('http');\n            for (const cookie of cookies) {\n                let cookieUrl = cookie.url || '';\n                if (!cookieUrl && pageUrlStartsWithHTTP) {\n                    cookieUrl = pageURL;\n                }\n                assert(cookieUrl !== 'about:blank', `Blank page can not have cookie \"${cookie.name}\"`);\n                assert(!String.prototype.startsWith.call(cookieUrl || '', 'data:'), `Data URL page can not have cookie \"${cookie.name}\"`);\n                // TODO: Support Chrome cookie partition keys\n                assert(cookie.partitionKey === undefined ||\n                    typeof cookie.partitionKey === 'string', 'BiDi only allows domain partition keys');\n                const normalizedUrl = URL.canParse(cookieUrl)\n                    ? new URL(cookieUrl)\n                    : undefined;\n                const domain = cookie.domain ?? normalizedUrl?.hostname;\n                assert(domain !== undefined, `At least one of the url and domain needs to be specified`);\n                const bidiCookie = {\n                    domain: domain,\n                    name: cookie.name,\n                    value: {\n                        type: 'string',\n                        value: cookie.value,\n                    },\n                    ...(cookie.path !== undefined ? { path: cookie.path } : {}),\n                    ...(cookie.httpOnly !== undefined ? { httpOnly: cookie.httpOnly } : {}),\n                    ...(cookie.secure !== undefined ? { secure: cookie.secure } : {}),\n                    ...(cookie.sameSite !== undefined\n                        ? { sameSite: convertCookiesSameSiteCdpToBiDi(cookie.sameSite) }\n                        : {}),\n                    ...{ expiry: convertCookiesExpiryCdpToBiDi(cookie.expires) },\n                    // Chrome-specific properties.\n                    ...cdpSpecificCookiePropertiesFromPuppeteerToBidi(cookie, 'sameParty', 'sourceScheme', 'priority', 'url'),\n                };\n                if (cookie.partitionKey !== undefined) {\n                    await this.browserContext().userContext.setCookie(bidiCookie, cookie.partitionKey);\n                }\n                else {\n                    await this.#frame.browsingContext.setCookie(bidiCookie);\n                }\n            }\n        }\n        async deleteCookie(...cookies) {\n            await Promise.all(cookies.map(async (deleteCookieRequest) => {\n                const cookieUrl = deleteCookieRequest.url ?? this.url();\n                const normalizedUrl = URL.canParse(cookieUrl)\n                    ? new URL(cookieUrl)\n                    : undefined;\n                const domain = deleteCookieRequest.domain ?? normalizedUrl?.hostname;\n                assert(domain !== undefined, `At least one of the url and domain needs to be specified`);\n                const filter = {\n                    domain: domain,\n                    name: deleteCookieRequest.name,\n                    ...(deleteCookieRequest.path !== undefined\n                        ? { path: deleteCookieRequest.path }\n                        : {}),\n                };\n                await this.#frame.browsingContext.deleteCookie(filter);\n            }));\n        }\n        async removeExposedFunction(name) {\n            await this.#frame.removeExposedFunction(name);\n        }\n        metrics() {\n            throw new UnsupportedOperation();\n        }\n        async goBack(options = {}) {\n            return await this.#go(-1, options);\n        }\n        async goForward(options = {}) {\n            return await this.#go(1, options);\n        }\n        async #go(delta, options) {\n            const controller = new AbortController();\n            try {\n                const [response] = await Promise.all([\n                    this.waitForNavigation({\n                        ...options,\n                        signal: controller.signal,\n                    }),\n                    this.#frame.browsingContext.traverseHistory(delta),\n                ]);\n                return response;\n            }\n            catch (error) {\n                controller.abort();\n                if (isErrorLike(error)) {\n                    if (error.message.includes('no such history entry')) {\n                        return null;\n                    }\n                }\n                throw error;\n            }\n        }\n        waitForDevicePrompt() {\n            throw new UnsupportedOperation();\n        }\n    };\n})();\nexport { BidiPage };\n// eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\nfunction evaluationExpression(fun, ...args) {\n    return `() => {${evaluationString(fun, ...args)}}`;\n}\n/**\n * Check domains match.\n */\nfunction testUrlMatchCookieHostname(cookie, normalizedUrl) {\n    const cookieDomain = cookie.domain.toLowerCase();\n    const urlHostname = normalizedUrl.hostname.toLowerCase();\n    if (cookieDomain === urlHostname) {\n        return true;\n    }\n    // TODO: does not consider additional restrictions w.r.t to IP\n    // addresses which is fine as it is for representation and does not\n    // mean that cookies actually apply that way in the browser.\n    // https://datatracker.ietf.org/doc/html/rfc6265#section-5.1.3\n    return cookieDomain.startsWith('.') && urlHostname.endsWith(cookieDomain);\n}\n/**\n * Check paths match.\n * Spec: https://datatracker.ietf.org/doc/html/rfc6265#section-5.1.4\n */\nfunction testUrlMatchCookiePath(cookie, normalizedUrl) {\n    const uriPath = normalizedUrl.pathname;\n    const cookiePath = cookie.path;\n    if (uriPath === cookiePath) {\n        // The cookie-path and the request-path are identical.\n        return true;\n    }\n    if (uriPath.startsWith(cookiePath)) {\n        // The cookie-path is a prefix of the request-path.\n        if (cookiePath.endsWith('/')) {\n            // The last character of the cookie-path is %x2F (\"/\").\n            return true;\n        }\n        if (uriPath[cookiePath.length] === '/') {\n            // The first character of the request-path that is not included in the cookie-path\n            // is a %x2F (\"/\") character.\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Checks the cookie matches the URL according to the spec:\n */\nfunction testUrlMatchCookie(cookie, url) {\n    const normalizedUrl = new URL(url);\n    assert(cookie !== undefined);\n    if (!testUrlMatchCookieHostname(cookie, normalizedUrl)) {\n        return false;\n    }\n    return testUrlMatchCookiePath(cookie, normalizedUrl);\n}\nexport function bidiToPuppeteerCookie(bidiCookie, returnCompositePartitionKey = false) {\n    const partitionKey = bidiCookie[CDP_SPECIFIC_PREFIX + 'partitionKey'];\n    function getParitionKey() {\n        if (typeof partitionKey === 'string') {\n            return { partitionKey };\n        }\n        if (typeof partitionKey === 'object' && partitionKey !== null) {\n            if (returnCompositePartitionKey) {\n                return {\n                    partitionKey: {\n                        sourceOrigin: partitionKey.topLevelSite,\n                        hasCrossSiteAncestor: partitionKey.hasCrossSiteAncestor ?? false,\n                    },\n                };\n            }\n            return {\n                // TODO: a breaking change in Puppeteer is required to change\n                // partitionKey type and report the composite partition key.\n                partitionKey: partitionKey.topLevelSite,\n            };\n        }\n        return {};\n    }\n    return {\n        name: bidiCookie.name,\n        // Presents binary value as base64 string.\n        value: bidiCookie.value.value,\n        domain: bidiCookie.domain,\n        path: bidiCookie.path,\n        size: bidiCookie.size,\n        httpOnly: bidiCookie.httpOnly,\n        secure: bidiCookie.secure,\n        sameSite: convertCookiesSameSiteBiDiToCdp(bidiCookie.sameSite),\n        expires: bidiCookie.expiry ?? -1,\n        session: bidiCookie.expiry === undefined || bidiCookie.expiry <= 0,\n        // Extending with CDP-specific properties with `goog:` prefix.\n        ...cdpSpecificCookiePropertiesFromBidiToPuppeteer(bidiCookie, 'sameParty', 'sourceScheme', 'partitionKeyOpaque', 'priority'),\n        ...getParitionKey(),\n    };\n}\nconst CDP_SPECIFIC_PREFIX = 'goog:';\n/**\n * Gets CDP-specific properties from the BiDi cookie and returns them as a new object.\n */\nfunction cdpSpecificCookiePropertiesFromBidiToPuppeteer(bidiCookie, ...propertyNames) {\n    const result = {};\n    for (const property of propertyNames) {\n        if (bidiCookie[CDP_SPECIFIC_PREFIX + property] !== undefined) {\n            result[property] = bidiCookie[CDP_SPECIFIC_PREFIX + property];\n        }\n    }\n    return result;\n}\n/**\n * Gets CDP-specific properties from the cookie, adds CDP-specific prefixes and returns\n * them as a new object which can be used in BiDi.\n */\nexport function cdpSpecificCookiePropertiesFromPuppeteerToBidi(cookieParam, ...propertyNames) {\n    const result = {};\n    for (const property of propertyNames) {\n        if (cookieParam[property] !== undefined) {\n            result[CDP_SPECIFIC_PREFIX + property] = cookieParam[property];\n        }\n    }\n    return result;\n}\nfunction convertCookiesSameSiteBiDiToCdp(sameSite) {\n    return sameSite === 'strict' ? 'Strict' : sameSite === 'lax' ? 'Lax' : 'None';\n}\nexport function convertCookiesSameSiteCdpToBiDi(sameSite) {\n    return sameSite === 'Strict'\n        ? \"strict\" /* Bidi.Network.SameSite.Strict */\n        : sameSite === 'Lax'\n            ? \"lax\" /* Bidi.Network.SameSite.Lax */\n            : \"none\" /* Bidi.Network.SameSite.None */;\n}\nexport function convertCookiesExpiryCdpToBiDi(expiry) {\n    return [undefined, -1].includes(expiry) ? undefined : expiry;\n}\nexport function convertCookiesPartitionKeyFromPuppeteerToBiDi(partitionKey) {\n    if (partitionKey === undefined || typeof partitionKey === 'string') {\n        return partitionKey;\n    }\n    if (partitionKey.hasCrossSiteAncestor) {\n        throw new UnsupportedOperation('WebDriver BiDi does not support `hasCrossSiteAncestor` yet.');\n    }\n    return partitionKey.sourceOrigin;\n}\n//# sourceMappingURL=Page.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { Target, TargetType } from '../api/Target.js';\nimport { UnsupportedOperation } from '../common/Errors.js';\nimport { BidiPage } from './Page.js';\n/**\n * @internal\n */\nexport class BidiBrowserTarget extends Target {\n    #browser;\n    constructor(browser) {\n        super();\n        this.#browser = browser;\n    }\n    asPage() {\n        throw new UnsupportedOperation();\n    }\n    url() {\n        return '';\n    }\n    createCDPSession() {\n        throw new UnsupportedOperation();\n    }\n    type() {\n        return TargetType.BROWSER;\n    }\n    browser() {\n        return this.#browser;\n    }\n    browserContext() {\n        return this.#browser.defaultBrowserContext();\n    }\n    opener() {\n        throw new UnsupportedOperation();\n    }\n}\n/**\n * @internal\n */\nexport class BidiPageTarget extends Target {\n    #page;\n    constructor(page) {\n        super();\n        this.#page = page;\n    }\n    async page() {\n        return this.#page;\n    }\n    async asPage() {\n        return BidiPage.from(this.browserContext(), this.#page.mainFrame().browsingContext);\n    }\n    url() {\n        return this.#page.url();\n    }\n    createCDPSession() {\n        return this.#page.createCDPSession();\n    }\n    type() {\n        return TargetType.PAGE;\n    }\n    browser() {\n        return this.browserContext().browser();\n    }\n    browserContext() {\n        return this.#page.browserContext();\n    }\n    opener() {\n        throw new UnsupportedOperation();\n    }\n}\n/**\n * @internal\n */\nexport class BidiFrameTarget extends Target {\n    #frame;\n    #page;\n    constructor(frame) {\n        super();\n        this.#frame = frame;\n    }\n    async page() {\n        if (this.#page === undefined) {\n            this.#page = BidiPage.from(this.browserContext(), this.#frame.browsingContext);\n        }\n        return this.#page;\n    }\n    async asPage() {\n        return BidiPage.from(this.browserContext(), this.#frame.browsingContext);\n    }\n    url() {\n        return this.#frame.url();\n    }\n    createCDPSession() {\n        return this.#frame.createCDPSession();\n    }\n    type() {\n        return TargetType.PAGE;\n    }\n    browser() {\n        return this.browserContext().browser();\n    }\n    browserContext() {\n        return this.#frame.page().browserContext();\n    }\n    opener() {\n        throw new UnsupportedOperation();\n    }\n}\n/**\n * @internal\n */\nexport class BidiWorkerTarget extends Target {\n    #worker;\n    constructor(worker) {\n        super();\n        this.#worker = worker;\n    }\n    async page() {\n        throw new UnsupportedOperation();\n    }\n    async asPage() {\n        throw new UnsupportedOperation();\n    }\n    url() {\n        return this.#worker.url();\n    }\n    createCDPSession() {\n        throw new UnsupportedOperation();\n    }\n    type() {\n        return TargetType.OTHER;\n    }\n    browser() {\n        return this.browserContext().browser();\n    }\n    browserContext() {\n        return this.#worker.frame.page().browserContext();\n    }\n    opener() {\n        throw new UnsupportedOperation();\n    }\n}\n//# sourceMappingURL=Target.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        var r, s = 0;\n        function next() {\n            while (r = env.stack.pop()) {\n                try {\n                    if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n                    if (r.dispose) {\n                        var result = r.dispose.call(r.value);\n                        if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                    }\n                    else s |= 1;\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { WEB_PERMISSION_TO_PROTOCOL_PERMISSION } from '../api/Browser.js';\nimport { BrowserContext } from '../api/BrowserContext.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { debugError } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { bubble } from '../util/decorators.js';\nimport { UserContext } from './core/UserContext.js';\nimport { BidiPage, bidiToPuppeteerCookie, cdpSpecificCookiePropertiesFromPuppeteerToBidi, convertCookiesExpiryCdpToBiDi, convertCookiesPartitionKeyFromPuppeteerToBiDi, convertCookiesSameSiteCdpToBiDi, } from './Page.js';\nimport { BidiWorkerTarget } from './Target.js';\nimport { BidiFrameTarget, BidiPageTarget } from './Target.js';\n/**\n * @internal\n */\nlet BidiBrowserContext = (() => {\n    let _classSuper = BrowserContext;\n    let _trustedEmitter_decorators;\n    let _trustedEmitter_initializers = [];\n    let _trustedEmitter_extraInitializers = [];\n    return class BidiBrowserContext extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            _trustedEmitter_decorators = [bubble()];\n            __esDecorate(this, null, _trustedEmitter_decorators, { kind: \"accessor\", name: \"trustedEmitter\", static: false, private: false, access: { has: obj => \"trustedEmitter\" in obj, get: obj => obj.trustedEmitter, set: (obj, value) => { obj.trustedEmitter = value; } }, metadata: _metadata }, _trustedEmitter_initializers, _trustedEmitter_extraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        static from(browser, userContext, options) {\n            const context = new BidiBrowserContext(browser, userContext, options);\n            context.#initialize();\n            return context;\n        }\n        #trustedEmitter_accessor_storage = __runInitializers(this, _trustedEmitter_initializers, new EventEmitter());\n        get trustedEmitter() { return this.#trustedEmitter_accessor_storage; }\n        set trustedEmitter(value) { this.#trustedEmitter_accessor_storage = value; }\n        #browser = __runInitializers(this, _trustedEmitter_extraInitializers);\n        #defaultViewport;\n        // This is public because of cookies.\n        userContext;\n        #pages = new WeakMap();\n        #targets = new Map();\n        #overrides = [];\n        constructor(browser, userContext, options) {\n            super();\n            this.#browser = browser;\n            this.userContext = userContext;\n            this.#defaultViewport = options.defaultViewport;\n        }\n        #initialize() {\n            // Create targets for existing browsing contexts.\n            for (const browsingContext of this.userContext.browsingContexts) {\n                this.#createPage(browsingContext);\n            }\n            this.userContext.on('browsingcontext', ({ browsingContext }) => {\n                const page = this.#createPage(browsingContext);\n                // We need to wait for the DOMContentLoaded as the\n                // browsingContext still may be navigating from the about:blank\n                if (browsingContext.originalOpener) {\n                    for (const context of this.userContext.browsingContexts) {\n                        if (context.id === browsingContext.originalOpener) {\n                            this.#pages\n                                .get(context)\n                                .trustedEmitter.emit(\"popup\" /* PageEvent.Popup */, page);\n                        }\n                    }\n                }\n            });\n            this.userContext.on('closed', () => {\n                this.trustedEmitter.removeAllListeners();\n            });\n        }\n        #createPage(browsingContext) {\n            const page = BidiPage.from(this, browsingContext);\n            this.#pages.set(browsingContext, page);\n            page.trustedEmitter.on(\"close\" /* PageEvent.Close */, () => {\n                this.#pages.delete(browsingContext);\n            });\n            // -- Target stuff starts here --\n            const pageTarget = new BidiPageTarget(page);\n            const pageTargets = new Map();\n            this.#targets.set(page, [pageTarget, pageTargets]);\n            page.trustedEmitter.on(\"frameattached\" /* PageEvent.FrameAttached */, frame => {\n                const bidiFrame = frame;\n                const target = new BidiFrameTarget(bidiFrame);\n                pageTargets.set(bidiFrame, target);\n                this.trustedEmitter.emit(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, target);\n            });\n            page.trustedEmitter.on(\"framenavigated\" /* PageEvent.FrameNavigated */, frame => {\n                const bidiFrame = frame;\n                const target = pageTargets.get(bidiFrame);\n                // If there is no target, then this is the page's frame.\n                if (target === undefined) {\n                    this.trustedEmitter.emit(\"targetchanged\" /* BrowserContextEvent.TargetChanged */, pageTarget);\n                }\n                else {\n                    this.trustedEmitter.emit(\"targetchanged\" /* BrowserContextEvent.TargetChanged */, target);\n                }\n            });\n            page.trustedEmitter.on(\"framedetached\" /* PageEvent.FrameDetached */, frame => {\n                const bidiFrame = frame;\n                const target = pageTargets.get(bidiFrame);\n                if (target === undefined) {\n                    return;\n                }\n                pageTargets.delete(bidiFrame);\n                this.trustedEmitter.emit(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, target);\n            });\n            page.trustedEmitter.on(\"workercreated\" /* PageEvent.WorkerCreated */, worker => {\n                const bidiWorker = worker;\n                const target = new BidiWorkerTarget(bidiWorker);\n                pageTargets.set(bidiWorker, target);\n                this.trustedEmitter.emit(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, target);\n            });\n            page.trustedEmitter.on(\"workerdestroyed\" /* PageEvent.WorkerDestroyed */, worker => {\n                const bidiWorker = worker;\n                const target = pageTargets.get(bidiWorker);\n                if (target === undefined) {\n                    return;\n                }\n                pageTargets.delete(worker);\n                this.trustedEmitter.emit(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, target);\n            });\n            page.trustedEmitter.on(\"close\" /* PageEvent.Close */, () => {\n                this.#targets.delete(page);\n                this.trustedEmitter.emit(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, pageTarget);\n            });\n            this.trustedEmitter.emit(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, pageTarget);\n            // -- Target stuff ends here --\n            return page;\n        }\n        targets() {\n            return [...this.#targets.values()].flatMap(([target, frames]) => {\n                return [target, ...frames.values()];\n            });\n        }\n        async newPage() {\n            const env_1 = { stack: [], error: void 0, hasError: false };\n            try {\n                const _guard = __addDisposableResource(env_1, await this.waitForScreenshotOperations(), false);\n                const context = await this.userContext.createBrowsingContext(\"tab\" /* Bidi.BrowsingContext.CreateType.Tab */);\n                const page = this.#pages.get(context);\n                if (!page) {\n                    throw new Error('Page is not found');\n                }\n                if (this.#defaultViewport) {\n                    try {\n                        await page.setViewport(this.#defaultViewport);\n                    }\n                    catch {\n                        // No support for setViewport in Firefox.\n                    }\n                }\n                return page;\n            }\n            catch (e_1) {\n                env_1.error = e_1;\n                env_1.hasError = true;\n            }\n            finally {\n                __disposeResources(env_1);\n            }\n        }\n        async close() {\n            assert(this.userContext.id !== UserContext.DEFAULT, 'Default BrowserContext cannot be closed!');\n            try {\n                await this.userContext.remove();\n            }\n            catch (error) {\n                debugError(error);\n            }\n            this.#targets.clear();\n        }\n        browser() {\n            return this.#browser;\n        }\n        async pages() {\n            return [...this.userContext.browsingContexts].map(context => {\n                return this.#pages.get(context);\n            });\n        }\n        async overridePermissions(origin, permissions) {\n            const permissionsSet = new Set(permissions.map(permission => {\n                const protocolPermission = WEB_PERMISSION_TO_PROTOCOL_PERMISSION.get(permission);\n                if (!protocolPermission) {\n                    throw new Error('Unknown permission: ' + permission);\n                }\n                return permission;\n            }));\n            await Promise.all(Array.from(WEB_PERMISSION_TO_PROTOCOL_PERMISSION.keys()).map(permission => {\n                const result = this.userContext.setPermissions(origin, {\n                    name: permission,\n                }, permissionsSet.has(permission)\n                    ? \"granted\" /* Bidi.Permissions.PermissionState.Granted */\n                    : \"denied\" /* Bidi.Permissions.PermissionState.Denied */);\n                this.#overrides.push({ origin, permission });\n                // TODO: some permissions are outdated and setting them to denied does\n                // not work.\n                if (!permissionsSet.has(permission)) {\n                    return result.catch(debugError);\n                }\n                return result;\n            }));\n        }\n        async clearPermissionOverrides() {\n            const promises = this.#overrides.map(({ permission, origin }) => {\n                return this.userContext\n                    .setPermissions(origin, {\n                    name: permission,\n                }, \"prompt\" /* Bidi.Permissions.PermissionState.Prompt */)\n                    .catch(debugError);\n            });\n            this.#overrides = [];\n            await Promise.all(promises);\n        }\n        get id() {\n            if (this.userContext.id === UserContext.DEFAULT) {\n                return undefined;\n            }\n            return this.userContext.id;\n        }\n        async cookies() {\n            const cookies = await this.userContext.getCookies();\n            return cookies.map(cookie => {\n                return bidiToPuppeteerCookie(cookie, true);\n            });\n        }\n        async setCookie(...cookies) {\n            await Promise.all(cookies.map(async (cookie) => {\n                const bidiCookie = {\n                    domain: cookie.domain,\n                    name: cookie.name,\n                    value: {\n                        type: 'string',\n                        value: cookie.value,\n                    },\n                    ...(cookie.path !== undefined ? { path: cookie.path } : {}),\n                    ...(cookie.httpOnly !== undefined ? { httpOnly: cookie.httpOnly } : {}),\n                    ...(cookie.secure !== undefined ? { secure: cookie.secure } : {}),\n                    ...(cookie.sameSite !== undefined\n                        ? { sameSite: convertCookiesSameSiteCdpToBiDi(cookie.sameSite) }\n                        : {}),\n                    ...{ expiry: convertCookiesExpiryCdpToBiDi(cookie.expires) },\n                    // Chrome-specific properties.\n                    ...cdpSpecificCookiePropertiesFromPuppeteerToBidi(cookie, 'sameParty', 'sourceScheme', 'priority', 'url'),\n                };\n                return await this.userContext.setCookie(bidiCookie, convertCookiesPartitionKeyFromPuppeteerToBiDi(cookie.partitionKey));\n            }));\n        }\n    };\n})();\nexport { BidiBrowserContext };\n//# sourceMappingURL=BrowserContext.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        var r, s = 0;\n        function next() {\n            while (r = env.stack.pop()) {\n                try {\n                    if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n                    if (r.dispose) {\n                        var result = r.dispose.call(r.value);\n                        if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                    }\n                    else s |= 1;\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { EventEmitter } from '../../common/EventEmitter.js';\nimport { inertIfDisposed, throwIfDisposed } from '../../util/decorators.js';\nimport { DisposableStack, disposeSymbol } from '../../util/disposable.js';\nimport { SharedWorkerRealm } from './Realm.js';\nimport { UserContext } from './UserContext.js';\n/**\n * @internal\n */\nlet Browser = (() => {\n    let _classSuper = EventEmitter;\n    let _instanceExtraInitializers = [];\n    let _dispose_decorators;\n    let _close_decorators;\n    let _addPreloadScript_decorators;\n    let _removeIntercept_decorators;\n    let _removePreloadScript_decorators;\n    let _createUserContext_decorators;\n    let _installExtension_decorators;\n    let _uninstallExtension_decorators;\n    return class Browser extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            __esDecorate(this, null, _dispose_decorators, { kind: \"method\", name: \"dispose\", static: false, private: false, access: { has: obj => \"dispose\" in obj, get: obj => obj.dispose }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _close_decorators, { kind: \"method\", name: \"close\", static: false, private: false, access: { has: obj => \"close\" in obj, get: obj => obj.close }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _addPreloadScript_decorators, { kind: \"method\", name: \"addPreloadScript\", static: false, private: false, access: { has: obj => \"addPreloadScript\" in obj, get: obj => obj.addPreloadScript }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _removeIntercept_decorators, { kind: \"method\", name: \"removeIntercept\", static: false, private: false, access: { has: obj => \"removeIntercept\" in obj, get: obj => obj.removeIntercept }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _removePreloadScript_decorators, { kind: \"method\", name: \"removePreloadScript\", static: false, private: false, access: { has: obj => \"removePreloadScript\" in obj, get: obj => obj.removePreloadScript }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _createUserContext_decorators, { kind: \"method\", name: \"createUserContext\", static: false, private: false, access: { has: obj => \"createUserContext\" in obj, get: obj => obj.createUserContext }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _installExtension_decorators, { kind: \"method\", name: \"installExtension\", static: false, private: false, access: { has: obj => \"installExtension\" in obj, get: obj => obj.installExtension }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _uninstallExtension_decorators, { kind: \"method\", name: \"uninstallExtension\", static: false, private: false, access: { has: obj => \"uninstallExtension\" in obj, get: obj => obj.uninstallExtension }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        static async from(session) {\n            const browser = new Browser(session);\n            await browser.#initialize();\n            return browser;\n        }\n        #closed = (__runInitializers(this, _instanceExtraInitializers), false);\n        #reason;\n        #disposables = new DisposableStack();\n        #userContexts = new Map();\n        session;\n        #sharedWorkers = new Map();\n        constructor(session) {\n            super();\n            this.session = session;\n        }\n        async #initialize() {\n            const sessionEmitter = this.#disposables.use(new EventEmitter(this.session));\n            sessionEmitter.once('ended', ({ reason }) => {\n                this.dispose(reason);\n            });\n            sessionEmitter.on('script.realmCreated', info => {\n                if (info.type !== 'shared-worker') {\n                    return;\n                }\n                this.#sharedWorkers.set(info.realm, SharedWorkerRealm.from(this, info.realm, info.origin));\n            });\n            await this.#syncUserContexts();\n            await this.#syncBrowsingContexts();\n        }\n        async #syncUserContexts() {\n            const { result: { userContexts }, } = await this.session.send('browser.getUserContexts', {});\n            for (const context of userContexts) {\n                this.#createUserContext(context.userContext);\n            }\n        }\n        async #syncBrowsingContexts() {\n            // In case contexts are created or destroyed during `getTree`, we use this\n            // set to detect them.\n            const contextIds = new Set();\n            let contexts;\n            {\n                const env_1 = { stack: [], error: void 0, hasError: false };\n                try {\n                    const sessionEmitter = __addDisposableResource(env_1, new EventEmitter(this.session), false);\n                    sessionEmitter.on('browsingContext.contextCreated', info => {\n                        contextIds.add(info.context);\n                    });\n                    const { result } = await this.session.send('browsingContext.getTree', {});\n                    contexts = result.contexts;\n                }\n                catch (e_1) {\n                    env_1.error = e_1;\n                    env_1.hasError = true;\n                }\n                finally {\n                    __disposeResources(env_1);\n                }\n            }\n            // Simulating events so contexts are created naturally.\n            for (const info of contexts) {\n                if (!contextIds.has(info.context)) {\n                    this.session.emit('browsingContext.contextCreated', info);\n                }\n                if (info.children) {\n                    contexts.push(...info.children);\n                }\n            }\n        }\n        #createUserContext(id) {\n            const userContext = UserContext.create(this, id);\n            this.#userContexts.set(userContext.id, userContext);\n            const userContextEmitter = this.#disposables.use(new EventEmitter(userContext));\n            userContextEmitter.once('closed', () => {\n                userContextEmitter.removeAllListeners();\n                this.#userContexts.delete(userContext.id);\n            });\n            return userContext;\n        }\n        get closed() {\n            return this.#closed;\n        }\n        get defaultUserContext() {\n            // SAFETY: A UserContext is always created for the default context.\n            return this.#userContexts.get(UserContext.DEFAULT);\n        }\n        get disconnected() {\n            return this.#reason !== undefined;\n        }\n        get disposed() {\n            return this.disconnected;\n        }\n        get userContexts() {\n            return this.#userContexts.values();\n        }\n        dispose(reason, closed = false) {\n            this.#closed = closed;\n            this.#reason = reason;\n            this[disposeSymbol]();\n        }\n        async close() {\n            try {\n                await this.session.send('browser.close', {});\n            }\n            finally {\n                this.dispose('Browser already closed.', true);\n            }\n        }\n        async addPreloadScript(functionDeclaration, options = {}) {\n            const { result: { script }, } = await this.session.send('script.addPreloadScript', {\n                functionDeclaration,\n                ...options,\n                contexts: options.contexts?.map(context => {\n                    return context.id;\n                }),\n            });\n            return script;\n        }\n        async removeIntercept(intercept) {\n            await this.session.send('network.removeIntercept', {\n                intercept,\n            });\n        }\n        async removePreloadScript(script) {\n            await this.session.send('script.removePreloadScript', {\n                script,\n            });\n        }\n        async createUserContext(options) {\n            const proxyConfig = options.proxyServer === undefined\n                ? undefined\n                : {\n                    proxyType: 'manual',\n                    httpProxy: options.proxyServer,\n                    sslProxy: options.proxyServer,\n                    noProxy: options.proxyBypassList,\n                };\n            const { result: { userContext: context }, } = await this.session.send('browser.createUserContext', {\n                proxy: proxyConfig,\n            });\n            return this.#createUserContext(context);\n        }\n        async installExtension(path) {\n            const { result: { extension }, } = await this.session.send('webExtension.install', {\n                extensionData: { type: 'path', path },\n            });\n            return extension;\n        }\n        async uninstallExtension(id) {\n            await this.session.send('webExtension.uninstall', { extension: id });\n        }\n        [(_dispose_decorators = [inertIfDisposed], _close_decorators = [throwIfDisposed(browser => {\n                // SAFETY: By definition of `disposed`, `#reason` is defined.\n                return browser.#reason;\n            })], _addPreloadScript_decorators = [throwIfDisposed(browser => {\n                // SAFETY: By definition of `disposed`, `#reason` is defined.\n                return browser.#reason;\n            })], _removeIntercept_decorators = [throwIfDisposed(browser => {\n                // SAFETY: By definition of `disposed`, `#reason` is defined.\n                return browser.#reason;\n            })], _removePreloadScript_decorators = [throwIfDisposed(browser => {\n                // SAFETY: By definition of `disposed`, `#reason` is defined.\n                return browser.#reason;\n            })], _createUserContext_decorators = [throwIfDisposed(browser => {\n                // SAFETY: By definition of `disposed`, `#reason` is defined.\n                return browser.#reason;\n            })], _installExtension_decorators = [throwIfDisposed(browser => {\n                // SAFETY: By definition of `disposed`, `#reason` is defined.\n                return browser.#reason;\n            })], _uninstallExtension_decorators = [throwIfDisposed(browser => {\n                // SAFETY: By definition of `disposed`, `#reason` is defined.\n                return browser.#reason;\n            })], disposeSymbol)]() {\n            this.#reason ??=\n                'Browser was disconnected, probably because the session ended.';\n            if (this.closed) {\n                this.emit('closed', { reason: this.#reason });\n            }\n            this.emit('disconnected', { reason: this.#reason });\n            this.#disposables.dispose();\n            super[disposeSymbol]();\n        }\n    };\n})();\nexport { Browser };\n//# sourceMappingURL=Browser.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nimport { EventEmitter } from '../../common/EventEmitter.js';\nimport { bubble, inertIfDisposed, throwIfDisposed, } from '../../util/decorators.js';\nimport { DisposableStack, disposeSymbol } from '../../util/disposable.js';\nimport { Browser } from './Browser.js';\n/**\n * @internal\n */\nlet Session = (() => {\n    let _classSuper = EventEmitter;\n    let _instanceExtraInitializers = [];\n    let _connection_decorators;\n    let _connection_initializers = [];\n    let _connection_extraInitializers = [];\n    let _dispose_decorators;\n    let _send_decorators;\n    let _subscribe_decorators;\n    let _addIntercepts_decorators;\n    let _end_decorators;\n    return class Session extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            __esDecorate(this, null, _connection_decorators, { kind: \"accessor\", name: \"connection\", static: false, private: false, access: { has: obj => \"connection\" in obj, get: obj => obj.connection, set: (obj, value) => { obj.connection = value; } }, metadata: _metadata }, _connection_initializers, _connection_extraInitializers);\n            __esDecorate(this, null, _dispose_decorators, { kind: \"method\", name: \"dispose\", static: false, private: false, access: { has: obj => \"dispose\" in obj, get: obj => obj.dispose }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _send_decorators, { kind: \"method\", name: \"send\", static: false, private: false, access: { has: obj => \"send\" in obj, get: obj => obj.send }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _subscribe_decorators, { kind: \"method\", name: \"subscribe\", static: false, private: false, access: { has: obj => \"subscribe\" in obj, get: obj => obj.subscribe }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _addIntercepts_decorators, { kind: \"method\", name: \"addIntercepts\", static: false, private: false, access: { has: obj => \"addIntercepts\" in obj, get: obj => obj.addIntercepts }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _end_decorators, { kind: \"method\", name: \"end\", static: false, private: false, access: { has: obj => \"end\" in obj, get: obj => obj.end }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        static async from(connection, capabilities) {\n            const { result } = await connection.send('session.new', {\n                capabilities,\n            });\n            const session = new Session(connection, result);\n            await session.#initialize();\n            return session;\n        }\n        #reason = __runInitializers(this, _instanceExtraInitializers);\n        #disposables = new DisposableStack();\n        #info;\n        browser;\n        #connection_accessor_storage = __runInitializers(this, _connection_initializers, void 0);\n        get connection() { return this.#connection_accessor_storage; }\n        set connection(value) { this.#connection_accessor_storage = value; }\n        constructor(connection, info) {\n            super();\n            __runInitializers(this, _connection_extraInitializers);\n            this.#info = info;\n            this.connection = connection;\n        }\n        async #initialize() {\n            // SAFETY: We use `any` to allow assignment of the readonly property.\n            this.browser = await Browser.from(this);\n            const browserEmitter = this.#disposables.use(this.browser);\n            browserEmitter.once('closed', ({ reason }) => {\n                this.dispose(reason);\n            });\n            // TODO: Currently, some implementations do not emit navigationStarted event\n            // for fragment navigations (as per spec) and some do. This could emits a\n            // synthetic navigationStarted to work around this inconsistency.\n            const seen = new WeakSet();\n            this.on('browsingContext.fragmentNavigated', info => {\n                if (seen.has(info)) {\n                    return;\n                }\n                seen.add(info);\n                this.emit('browsingContext.navigationStarted', info);\n                this.emit('browsingContext.fragmentNavigated', info);\n            });\n        }\n        get capabilities() {\n            return this.#info.capabilities;\n        }\n        get disposed() {\n            return this.ended;\n        }\n        get ended() {\n            return this.#reason !== undefined;\n        }\n        get id() {\n            return this.#info.sessionId;\n        }\n        dispose(reason) {\n            this.#reason = reason;\n            this[disposeSymbol]();\n        }\n        /**\n         * Currently, there is a 1:1 relationship between the session and the\n         * session. In the future, we might support multiple sessions and in that\n         * case we always needs to make sure that the session for the right session\n         * object is used, so we implement this method here, although it's not defined\n         * in the spec.\n         */\n        async send(method, params) {\n            return await this.connection.send(method, params);\n        }\n        async subscribe(events, contexts) {\n            await this.send('session.subscribe', {\n                events,\n                contexts,\n            });\n        }\n        async addIntercepts(events, contexts) {\n            await this.send('session.subscribe', {\n                events,\n                contexts,\n            });\n        }\n        async end() {\n            try {\n                await this.send('session.end', {});\n            }\n            finally {\n                this.dispose(`Session already ended.`);\n            }\n        }\n        [(_connection_decorators = [bubble()], _dispose_decorators = [inertIfDisposed], _send_decorators = [throwIfDisposed(session => {\n                // SAFETY: By definition of `disposed`, `#reason` is defined.\n                return session.#reason;\n            })], _subscribe_decorators = [throwIfDisposed(session => {\n                // SAFETY: By definition of `disposed`, `#reason` is defined.\n                return session.#reason;\n            })], _addIntercepts_decorators = [throwIfDisposed(session => {\n                // SAFETY: By definition of `disposed`, `#reason` is defined.\n                return session.#reason;\n            })], _end_decorators = [throwIfDisposed(session => {\n                // SAFETY: By definition of `disposed`, `#reason` is defined.\n                return session.#reason;\n            })], disposeSymbol)]() {\n            this.#reason ??=\n                'Session already destroyed, probably because the connection broke.';\n            this.emit('ended', { reason: this.#reason });\n            this.#disposables.dispose();\n            super[disposeSymbol]();\n        }\n    };\n})();\nexport { Session };\n//# sourceMappingURL=Session.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __setFunctionName = (this && this.__setFunctionName) || function (f, name, prefix) {\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\nimport { Browser, } from '../api/Browser.js';\nimport { ProtocolError } from '../common/Errors.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { debugError } from '../common/util.js';\nimport { bubble } from '../util/decorators.js';\nimport { BidiBrowserContext } from './BrowserContext.js';\nimport { Session } from './core/Session.js';\nimport { BidiBrowserTarget } from './Target.js';\n/**\n * @internal\n */\nlet BidiBrowser = (() => {\n    let _classSuper = Browser;\n    let _private_trustedEmitter_decorators;\n    let _private_trustedEmitter_initializers = [];\n    let _private_trustedEmitter_extraInitializers = [];\n    let _private_trustedEmitter_descriptor;\n    return class BidiBrowser extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            _private_trustedEmitter_decorators = [bubble()];\n            __esDecorate(this, _private_trustedEmitter_descriptor = { get: __setFunctionName(function () { return this.#trustedEmitter_accessor_storage; }, \"#trustedEmitter\", \"get\"), set: __setFunctionName(function (value) { this.#trustedEmitter_accessor_storage = value; }, \"#trustedEmitter\", \"set\") }, _private_trustedEmitter_decorators, { kind: \"accessor\", name: \"#trustedEmitter\", static: false, private: true, access: { has: obj => #trustedEmitter in obj, get: obj => obj.#trustedEmitter, set: (obj, value) => { obj.#trustedEmitter = value; } }, metadata: _metadata }, _private_trustedEmitter_initializers, _private_trustedEmitter_extraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        protocol = 'webDriverBiDi';\n        static subscribeModules = [\n            'browsingContext',\n            'network',\n            'log',\n            'script',\n            'input',\n        ];\n        static subscribeCdpEvents = [\n            // Coverage\n            'goog:cdp.Debugger.scriptParsed',\n            'goog:cdp.CSS.styleSheetAdded',\n            'goog:cdp.Runtime.executionContextsCleared',\n            // Tracing\n            'goog:cdp.Tracing.tracingComplete',\n            // TODO: subscribe to all CDP events in the future.\n            'goog:cdp.Network.requestWillBeSent',\n            'goog:cdp.Debugger.scriptParsed',\n            'goog:cdp.Page.screencastFrame',\n        ];\n        static async create(opts) {\n            const session = await Session.from(opts.connection, {\n                firstMatch: opts.capabilities?.firstMatch,\n                alwaysMatch: {\n                    ...opts.capabilities?.alwaysMatch,\n                    // Capabilities that come from Puppeteer's API take precedence.\n                    acceptInsecureCerts: opts.acceptInsecureCerts,\n                    unhandledPromptBehavior: {\n                        default: \"ignore\" /* Bidi.Session.UserPromptHandlerType.Ignore */,\n                    },\n                    webSocketUrl: true,\n                    // Puppeteer with WebDriver BiDi does not support prerendering\n                    // yet because WebDriver BiDi behavior is not specified. See\n                    // https://github.com/w3c/webdriver-bidi/issues/321.\n                    'goog:prerenderingDisabled': true,\n                },\n            });\n            await session.subscribe((session.capabilities.browserName.toLocaleLowerCase().includes('firefox')\n                ? BidiBrowser.subscribeModules\n                : [...BidiBrowser.subscribeModules, ...BidiBrowser.subscribeCdpEvents]).filter(module => {\n                if (!opts.networkEnabled) {\n                    return (module !== 'network' &&\n                        module !== 'goog:cdp.Network.requestWillBeSent');\n                }\n                return true;\n            }));\n            try {\n                await session.send('network.addDataCollector', {\n                    dataTypes: [\"response\" /* Bidi.Network.DataType.Response */],\n                    // Buffer size of 20 MB is equivalent to the CDP:\n                    maxEncodedDataSize: 20 * 1000 * 1000, // 20 MB\n                });\n            }\n            catch (err) {\n                if (err instanceof ProtocolError) {\n                    // Ignore protocol errors, as the data collectors can be not implemented.\n                    debugError(err);\n                }\n                else {\n                    throw err;\n                }\n            }\n            const browser = new BidiBrowser(session.browser, opts);\n            browser.#initialize();\n            return browser;\n        }\n        #trustedEmitter_accessor_storage = __runInitializers(this, _private_trustedEmitter_initializers, new EventEmitter());\n        get #trustedEmitter() { return _private_trustedEmitter_descriptor.get.call(this); }\n        set #trustedEmitter(value) { return _private_trustedEmitter_descriptor.set.call(this, value); }\n        #process = __runInitializers(this, _private_trustedEmitter_extraInitializers);\n        #closeCallback;\n        #browserCore;\n        #defaultViewport;\n        #browserContexts = new WeakMap();\n        #target = new BidiBrowserTarget(this);\n        #cdpConnection;\n        #networkEnabled;\n        constructor(browserCore, opts) {\n            super();\n            this.#process = opts.process;\n            this.#closeCallback = opts.closeCallback;\n            this.#browserCore = browserCore;\n            this.#defaultViewport = opts.defaultViewport;\n            this.#cdpConnection = opts.cdpConnection;\n            this.#networkEnabled = opts.networkEnabled;\n        }\n        #initialize() {\n            // Initializing existing contexts.\n            for (const userContext of this.#browserCore.userContexts) {\n                this.#createBrowserContext(userContext);\n            }\n            this.#browserCore.once('disconnected', () => {\n                this.#trustedEmitter.emit(\"disconnected\" /* BrowserEvent.Disconnected */, undefined);\n                this.#trustedEmitter.removeAllListeners();\n            });\n            this.#process?.once('close', () => {\n                this.#browserCore.dispose('Browser process exited.', true);\n                this.connection.dispose();\n            });\n        }\n        get #browserName() {\n            return this.#browserCore.session.capabilities.browserName;\n        }\n        get #browserVersion() {\n            return this.#browserCore.session.capabilities.browserVersion;\n        }\n        get cdpSupported() {\n            return this.#cdpConnection !== undefined;\n        }\n        get cdpConnection() {\n            return this.#cdpConnection;\n        }\n        async userAgent() {\n            return this.#browserCore.session.capabilities.userAgent;\n        }\n        #createBrowserContext(userContext) {\n            const browserContext = BidiBrowserContext.from(this, userContext, {\n                defaultViewport: this.#defaultViewport,\n            });\n            this.#browserContexts.set(userContext, browserContext);\n            browserContext.trustedEmitter.on(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, target => {\n                this.#trustedEmitter.emit(\"targetcreated\" /* BrowserEvent.TargetCreated */, target);\n            });\n            browserContext.trustedEmitter.on(\"targetchanged\" /* BrowserContextEvent.TargetChanged */, target => {\n                this.#trustedEmitter.emit(\"targetchanged\" /* BrowserEvent.TargetChanged */, target);\n            });\n            browserContext.trustedEmitter.on(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, target => {\n                this.#trustedEmitter.emit(\"targetdestroyed\" /* BrowserEvent.TargetDestroyed */, target);\n            });\n            return browserContext;\n        }\n        get connection() {\n            // SAFETY: We only have one implementation.\n            return this.#browserCore.session.connection;\n        }\n        wsEndpoint() {\n            return this.connection.url;\n        }\n        async close() {\n            if (this.connection.closed) {\n                return;\n            }\n            try {\n                await this.#browserCore.close();\n                await this.#closeCallback?.call(null);\n            }\n            catch (error) {\n                // Fail silently.\n                debugError(error);\n            }\n            finally {\n                this.connection.dispose();\n            }\n        }\n        get connected() {\n            return !this.#browserCore.disconnected;\n        }\n        process() {\n            return this.#process ?? null;\n        }\n        async createBrowserContext(options = {}) {\n            const userContext = await this.#browserCore.createUserContext(options);\n            return this.#createBrowserContext(userContext);\n        }\n        async version() {\n            return `${this.#browserName}/${this.#browserVersion}`;\n        }\n        browserContexts() {\n            return [...this.#browserCore.userContexts].map(context => {\n                return this.#browserContexts.get(context);\n            });\n        }\n        defaultBrowserContext() {\n            return this.#browserContexts.get(this.#browserCore.defaultUserContext);\n        }\n        newPage() {\n            return this.defaultBrowserContext().newPage();\n        }\n        installExtension(path) {\n            return this.#browserCore.installExtension(path);\n        }\n        async uninstallExtension(id) {\n            await this.#browserCore.uninstallExtension(id);\n        }\n        targets() {\n            return [\n                this.#target,\n                ...this.browserContexts().flatMap(context => {\n                    return context.targets();\n                }),\n            ];\n        }\n        target() {\n            return this.#target;\n        }\n        async disconnect() {\n            try {\n                await this.#browserCore.session.end();\n            }\n            catch (error) {\n                // Fail silently.\n                debugError(error);\n            }\n            finally {\n                this.connection.dispose();\n            }\n        }\n        get debugInfo() {\n            return {\n                pendingProtocolErrors: this.connection.getPendingProtocolErrors(),\n            };\n        }\n        isNetworkEnabled() {\n            return this.#networkEnabled;\n        }\n    };\n})();\nexport { BidiBrowser };\n//# sourceMappingURL=Browser.js.map"],"names":["n","this","EventEmitter_1","require$$0","EventEmitter","LogType","_a","ProcessingQueue_1","ProcessingQueue","BiDiModule","Script","Log","BrowsingContext","Input","Network","Bluetooth","o","exports","require$$1","require$$2","require$$3","require$$4","require$$5","BidiNoOpParser_1","BidiNoOpParser","BrowserProcessor_1","window","BrowserProcessor","CdpProcessor_1","CdpProcessor","BrowsingContextProcessor_1","context","BrowsingContextProcessor","EmulationProcessor_1","EmulationProcessor","assert_1","assert","time","ActionDispatcher_1","ActionDispatcher","Mutex_1","Mutex","InputState_1","source","InputState","InputStateManager_1","InputStateManager","InputProcessor_1","result","InputProcessor","value","protocol","NetworkProcessor_1","NetworkProcessor","PermissionsProcessor_1","PermissionsProcessor","ChannelProxy_1","ChannelProxy","channelHandle","PreloadScript_1","PreloadScript","ScriptProcessor_1","ScriptProcessor","SessionProcessor_1","SessionProcessor","StorageProcessor_1","StorageProcessor","WebExtensionProcessor_1","WebExtensionProcessor","OutgoingMessage_1","OutgoingMessage","CommandProcessor_1","require$$6","require$$7","require$$8","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","CommandProcessor","BluetoothProcessor_1","uuid","BluetoothProcessor","UserContextConfig_1","UserContextConfig","UserContextStorage_1","UserContextStorage","Deferred_1","Deferred","Realm_1","Realm","args","WindowRealm_1","WindowRealm","NavigationTracker_1","NavigationTracker","navigation","BrowsingContextImpl_1","rect","maxNodeCount","startNodes","returnedNodes","bindings","role","name","locatorResult","BrowsingContextImpl","WorkerRealm_1","WorkerRealm","arg","LogManager_1","LogManager","CdpTarget_1","CdpTarget","frameTree","blockedRequest","CdpTargetManager_1","CdpTargetManager","BrowsingContextStorage_1","BrowsingContextStorage","DefaultMap_1","DefaultMap","NetworkRequest_1","NetworkRequest","NetworkStorage_1","requests","NetworkStorage","PreloadScriptStorage_1","script","PreloadScriptStorage","RealmStorage_1","RealmStorage","Buffer_1","Buffer","IdWrapper_1","IdWrapper","isCdpEvent","SubscriptionManager_1","a","events","SubscriptionManager","EventManager_1","contextIds","EventManager","BidiServer_1","BidiServer","CDPSession","UnsupportedOperation","TargetCloseError","debug","CallbackRegistry","debugError","cdp","BidiMapper.BidiServer","BidiMapper.EventEmitter","__runInitializers","__esDecorate","DisposableStack","disposeSymbol","inertIfDisposed","request","throwIfDisposed","stringToTypedArray","ProtocolError","realm","JSHandle","__addDisposableResource","__disposeResources","SuppressedError","ElementHandle","environment","AsyncIterableUtil","bindIsolatedHandle","Dialog","Bidi.ChromiumBidi","stringifyFunction","interpolateFunction","stack","error","HTTPResponse","SecurityDetails","invokeAtMostOnceForArguments","HTTPRequest","stringToBase64","handleError","STATUS_TEXTS","isPlainObject","isRegExp","isDate","PuppeteerURL","TimeoutError","scriptInjector","getSourceUrlComment","getSourcePuppeteerURLIfAvailable","isString","SOURCE_URL_REGEX","LazyArg","ARIAQueryHandler","WebWorker","__setFunctionName","Frame","Accessibility","isErrorLike","firstValueFrom","combineLatest","race","fromEmitterEvent","map","first","switchMap","of","delayWhen","raceWith","timeout","fromAbortSignal","ConsoleMessage","defer","filter","throwIfDetached","SourceActionsType","ActionType","Keyboard","char","MouseButton","Mouse","TouchError","Touchscreen","Page","EmulationManager","Tracing","Coverage","userAgent","frame","parsePDFOptions","from","FileChooser","deferred","bubble","evaluationString","Target","TargetType","BrowserContext","WEB_PERMISSION_TO_PROTOCOL_PERMISSION","Browser","module"],"mappings":"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,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX;AACI,eAAO;AAAA,IACnB;AAAA,EACA;AAKA,WAAS,WAAW,KAAK;AACrB,YAAQ,KAAG;AAAA,MACP,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA;AAAA;AAAA,MAGX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AACD,eAAO;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AACD,eAAO;AAAA,MACX,KA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X,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AAAA,IACL,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AACD,aAAO;AAAA,IACX,KAAK;AAC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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97]}